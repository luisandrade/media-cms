/*! For license information please see _commons.js.LICENSE.txt */
(self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[]).push([[276],{70:function(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},78:function(e,t,n){"use strict";var r,i=n(4449),a=n(4903)(),o=n(8396),s=n(7570);if(a){var l=i("RegExp.prototype.exec"),u={},c=function(){throw u},d={toString:c,valueOf:c};"symbol"==typeof Symbol.toPrimitive&&(d[Symbol.toPrimitive]=c),r=function(e){if(!e||"object"!=typeof e)return!1;var t=s(e,"lastIndex");if(!t||!o(t,"value"))return!1;try{l(e,d)}catch(e){return e===u}}}else{var h=i("Object.prototype.toString");r=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===h(e)}}e.exports=r},160:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},207:function(e,t,n){var r=n(8974),i={"":1,lr:1,rl:1},a={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function o(e){return"string"==typeof e&&!!a[e.toLowerCase()]&&e.toLowerCase()}function s(e,t,n){this.hasBeenReset=!1;var a="",s=!1,l=e,u=t,c=n,d=null,h="",p=!0,f="auto",m="start",g="auto",v="auto",y=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=function(e){return"string"==typeof e&&!!i[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=o(e);t?(m=t,this.hasBeenReset=!0):r.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=o(e);t?(v=t,this.hasBeenReset=!0):r.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(e){var t=o(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=t,this.hasBeenReset=!0}}}),this.displayState=void 0}s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=s},237:function(e,t,n){"use strict";n.d(t,{A:function(){return Gu}});var r=n(919),i=n.n(r),a=n(6870),o=n.n(a);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}var l=n(8558),u=n.n(l);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}var p=n(1650),f=n.n(p),m=n(6801),g=n.n(m),v=n(1257),y=n.n(v);function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function _(e,t,n){if(b())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&d(i,n.prototype),i}var E=n(7981),S=n.n(E),w=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=i().location&&i().location.href||"");var n="function"==typeof i().URL,r=/^\/\//.test(e),a=!i().location&&!/\/\//i.test(e);if(n?e=new(i().URL)(e,i().location||"http://example.com"):/\/\//i.test(e)||(e=S().buildAbsoluteURL(i().location&&i().location.href||"",e)),n){var o=new URL(t,e);return a?o.href.slice(18):r?o.href.slice(o.protocol.length):o.href}return S().buildAbsoluteURL(e,t)};function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,T(e,t)}var k=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(null,arguments)}var P=n(9922).hp;function x(e){for(var t,n=(t=e,i().atob?i().atob(t):P.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}var I,M,R,O=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return C(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(k),L=String.fromCharCode(9),D=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},N=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},F=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}C(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=A(D(t[1]),{type:"tag",tagType:"byterange"}),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=N(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=D(a.BYTERANGE))}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=N(t[1]),n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=N(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=N(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=N(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=N(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(L)),void r.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=N(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=D(n.attributes.BYTERANGE)),void r.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=N(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=N(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=N(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void r.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=N(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(k),j=function(e){var t={};return Object.keys(e).forEach((function(n){var r;t[(r=n,r.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},B=function(e){var t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",s=n&&3*n,l=r&&2*r;n&&!t.hasOwnProperty(a)&&(t[a]=s,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&t[a]<s&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+s+")"}),t[a]=s),r&&!t.hasOwnProperty(o)&&(t[o]=3*r,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),r&&t[o]<l&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+l+")."}),t[o]=l)}},U=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new O,t.parseStream=new F,t.lineStream.pipe(t.parseStream);var n,r,i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=[],o={},s=!1,l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var d=0,h=0;return t.on("end",(function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&n&&(o.map=n),!o.key&&r&&(o.key=r),o.timeline||"number"!=typeof c||(o.timeline=c),t.manifest.preloadSegment=o)})),t.parseStream.on("data",(function(e){var t,p;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=d)),"offset"in e&&(o.byterange=t,t.offset=e.offset),d=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:x(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),r&&(n.key=r)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(o.attributes||(o.attributes={}),A(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(p={default:/yes/i.test(e.attributes.DEFAULT)}).default?p.autoselect=!0:p.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(p.language=e.attributes.LANGUAGE),e.attributes.URI&&(p.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(p.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(p.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(p.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=p}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,B.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data},skip:function(){this.manifest.skip=j(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var n=this.manifest.segments.length,r=j(e.attributes);o.parts=o.parts||[],o.parts.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=h),h=r.byterange.offset+r.byterange.length);var i=o.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=j(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),B.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=j(e.attributes),r=n.type&&"PART"===n.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=r?h:0,r&&(h=n.byterange.offset+n.byterange.length)));var i=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<o.preloadHints.length-1;a++){var s=o.preloadHints[a];s.type&&s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a})}},"rendition-report":function(){var t=j(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];s&&r.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,r)},"part-inf":function(){this.manifest.partInf=j(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),B.call(this,this.manifest)}}[e.tagType]||l).call(i)},uri:function(){o.uri=e.uri,a.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),r&&(o.key=r),o.timeline=c,n&&(o.map=n),h=0,o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}C(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var r=[];n.forEach((function(e){t.hasOwnProperty(e)||r.push(e)})),r.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+r.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(k),q={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},V=["video","audio","text"],H=["Video","Audio","Text"],z=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},W=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),V.forEach((function(r){var i=q[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var a=e.substring(0,i[1].length),o=e.replace(a,"");n.push({type:a,details:o,mediaType:r})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},G=function(e){return void 0===e&&(e=""),q.audio.test(e.trim().toLowerCase())},X=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return z(e.trim())})),r="video";1===n.length&&G(n[0])?r="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),q.text.test(t.trim().toLowerCase()))&&(r="application");var i="mp4";return n.every((function(e){return q.mp4.test(e)}))?i="mp4":n.every((function(e){return q.webm.test(e)}))?i="webm":n.every((function(e){return q.ogg.test(e)}))&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},K=function(e){return void 0===e&&(e=""),i().MediaSource&&i().MediaSource.isTypeSupported&&i().MediaSource.isTypeSupported(X(e))||!1},$=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<H.length;t++)if(q["muxer"+H[t]].test(e))return!0;return!1}))},Y="mp4a.40.2",Q=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,J=/^application\/dash\+xml/i,Z=function(e){return Q.test(e)?"hls":J.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},ee=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},te=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||ee(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ne=i().BigInt||Number,re=[ne("0x1"),ne("0x100"),ne("0x10000"),ne("0x1000000"),ne("0x100000000"),ne("0x10000000000"),ne("0x1000000000000"),ne("0x100000000000000"),ne("0x10000000000000000")],ie=(I=new Uint16Array([65484]),255===(M=new Uint8Array(I.buffer,I.byteOffset,I.byteLength))[0]||M[0],function(e,t){var n=void 0===t?{}:t,r=n.signed,i=void 0!==r&&r,a=n.le,o=void 0!==a&&a;e=te(e);var s=o?"reduce":"reduceRight",l=(e[s]?e[s]:Array.prototype[s]).call(e,(function(t,n,r){var i=o?r:Math.abs(r+1-e.length);return t+ne(n)*re[i]}),ne(0));if(i){var u=re[e.length]/ne(2)-ne(1);(l=ne(l))>u&&(l-=u,l-=u,l-=ne(2))}return Number(l)}),ae=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},oe=function(e,t,n){var r=void 0===n?{}:n,i=r.offset,a=void 0===i?0:i,o=r.mask,s=void 0===o?[]:o;e=te(e);var l=(t=te(t)).every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&l.call(t,(function(t,n){return t===(s[n]?s[n]&e[a+n]:e[a+n])}))},se=n(5039),le=function(e){return!!e&&"object"==typeof e},ue=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return"object"!=typeof n||Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):le(t[r])&&le(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},ce=function(e){return Object.keys(e).map((function(t){return e[t]}))},de=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},he=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},pe=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},fe=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,a=void 0===r?"":r,o=e.range,s=void 0===o?"":o,l=e.indexRange,u=void 0===l?"":l,c={uri:a,resolvedUri:w(n||"",a)};if(s||u){var d,h=(s||u).split("-"),p=i().BigInt?i().BigInt(h[0]):parseInt(h[0],10),f=i().BigInt?i().BigInt(h[1]):parseInt(h[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),"bigint"==typeof(d="bigint"==typeof f||"bigint"==typeof p?i().BigInt(f)-i().BigInt(p)+i().BigInt(1):f-p+1)&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),c.byterange={length:d,offset:p}}return c},me=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},ge={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration,a=e.periodDuration,o=me(e.endNumber),s=t/r;return"number"==typeof o?{start:0,end:o}:"number"==typeof a?{start:0,end:a/s}:{start:0,end:i/s}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,o=e.duration,s=e.periodStart,l=void 0===s?0:s,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=me(e.endNumber),f=(t+n)/1e3,m=r+l,g=f+c-m,v=Math.ceil(g*a/o),y=Math.floor((f-m-h)*a/o),b=Math.floor((f-m)*a/o);return{start:Math.max(0,y),end:"number"==typeof p?p:Math.min(v,b)}}},ve=function(e){var t=e.type,n=e.duration,r=e.timescale,i=void 0===r?1:r,a=e.periodDuration,o=e.sourceDuration,s=ge[t](e),l=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(s.start,s.end).map(function(e){return function(t){var n=e.duration,r=e.timescale,i=void 0===r?1:r,a=e.periodStart,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/i,timeline:a,time:t*n}}}(e));if("static"===t){var u=l.length-1,c="number"==typeof a?a:o;l[u].duration=c-n/i*u}return l},ye=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.indexRange,o=void 0===a?"":a,s=e.periodStart,l=e.presentationTime,u=e.number,c=void 0===u?0:u,d=e.duration;if(!t)throw new Error("NO_BASE_URL");var h=fe({baseUrl:t,source:r.sourceURL,range:r.range}),p=fe({baseUrl:t,source:t,indexRange:o});if(p.map=h,d){var f=ve(e);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else i&&(p.duration=i,p.timeline=s);return p.presentationTime=l||s,p.number=c,[p]},be=function(e,t,n){var r,a=e.sidx.map?e.sidx.map:null,o=e.sidx.duration,s=e.timeline||0,l=e.sidx.byterange,u=l.offset+l.length,c=t.timescale,d=t.references.filter((function(e){return 1!==e.referenceType})),h=[],p=e.endList?"static":"dynamic",f=e.sidx.timeline,m=f,g=e.mediaSequence||0;r="bigint"==typeof t.firstOffset?i().BigInt(u)+t.firstOffset:u+t.firstOffset;for(var v=0;v<d.length;v++){var y,b=t.references[v],_=b.referencedSize,E=b.subsegmentDuration;y="bigint"==typeof r?r+i().BigInt(_)-i().BigInt(1):r+_-1;var S=ye({baseUrl:n,timescale:c,timeline:s,periodStart:f,presentationTime:m,number:g,duration:E,sourceDuration:o,indexRange:r+"-"+y,type:p})[0];a&&(S.map=a),h.push(S),r+="bigint"==typeof r?i().BigInt(_):_,m+=E/c,g++}return e.segments=h,e},_e=["AUDIO","SUBTITLES"],Ee=1/60,Se=function(e){return(t=e,n=function(e){return e.timeline},ce(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},we=function(e){var t,n,r=[];return t=e,n=function(e,t,n,i){r=r.concat(e.playlists||[])},_e.forEach((function(e){for(var r in t.mediaGroups[e])for(var i in t.mediaGroups[e][r]){var a=t.mediaGroups[e][r][i];n(a)}})),r},Te=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},Ce=function(e){return e&&e.uri+"-"+(n="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?i().BigInt(t.offset)+i().BigInt(t.length)-i().BigInt(1):t.offset+t.length-1,t.offset+"-"+n);var t,n},ke=function(e){return ce(e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");e[r]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments)),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):(e[r]=t,e[r].attributes.timelineStarts=[]);return e[r].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t;return e.discontinuityStarts=(t=e.segments||[],t.reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[])),e}))},Ae=function(e,t){var n=Ce(e.sidx),r=n&&t[n]&&t[n].sidx;return r&&be(e,r,e.sidx.resolvedUri),e},Pe=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Ae(e[n],t);return e},xe=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:r};return n.frameRate&&(o.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(o.contentProtection=n.contentProtection),i&&(o.sidx=i),o},Ie=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},Me=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},Re=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},Oe=function(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return t.concat(r.playlists)}),[]):[]},Le=function(e){var t,n=e.dashPlaylists,r=e.locations,i=e.sidxMapping,a=void 0===i?{}:i,o=e.previousManifest;if(!n.length)return{};var s=n[0].attributes,l=s.sourceDuration,u=s.type,c=s.suggestedPresentationDelay,d=s.minimumUpdatePeriod,h=ke(n.filter(Ie)).map(xe),p=ke(n.filter(Me)),f=ke(n.filter(Re)),m=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:l,playlists:Pe(h,a)};d>=0&&(g.minimumUpdatePeriod=1e3*d),r&&(g.locations=r),"dynamic"===u&&(g.suggestedPresentationDelay=c);var v,y,b,_,E,S,w,T=0===g.playlists.length,C=p.length?function(e,t,n){var r;void 0===t&&(t={}),void 0===n&&(n=!1);var i=e.reduce((function(e,i){var a=i.attributes.role&&i.attributes.role.value||"",o=i.attributes.lang||"",s=i.attributes.label||"main";if(o&&!i.attributes.label){var l=a?" ("+a+")":"";s=""+i.attributes.lang+l}e[s]||(e[s]={language:o,autoselect:!0,default:"main"===a,playlists:[],uri:""});var u=Ae(function(e,t){var n,r=e.attributes,i=e.segments,a=e.sidx,o=e.mediaSequence,s=e.discontinuitySequence,l=e.discontinuityStarts,u={attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuitySequence:s,discontinuityStarts:l,timelineStarts:r.timelineStarts,mediaSequence:o,segments:i};return r.contentProtection&&(u.contentProtection=r.contentProtection),a&&(u.sidx=a),t&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u}(i,n),t);return e[s].playlists.push(u),void 0===r&&"main"===a&&((r=i).default=!0),e}),{});return r||(i[Object.keys(i)[0]].default=!0),i}(p,a,T):null,k=f.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),e[r].playlists.push(Ae(function(e){var t,n=e.attributes,r=e.segments,i=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var s=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:i,segments:r}}(n),t)),e}),{})}(f,a):null,A=h.concat(Oe(C),Oe(k)),P=A.map((function(e){return e.timelineStarts}));return g.timelineStarts=Se(P),v=A,y=g.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=pe(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),C&&(g.mediaGroups.AUDIO.audio=C),k&&(g.mediaGroups.SUBTITLES.subs=k),m.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=m.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,r=t.language;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},t.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[r].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[r]["3D"]=t["3D"])})),e):e}),{})),o?(_=(b={oldManifest:o,newManifest:g}).oldManifest,E=b.newManifest,S=_.playlists.concat(we(_)),w=E.playlists.concat(we(E)),E.timelineStarts=Se([_.timelineStarts,E.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.timelineStarts;e.newPlaylists.forEach((function(e){e.discontinuitySequence=pe(n,(function(t){return t.timeline===e.timeline}));var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(r&&!e.sidx){var i=e.segments[0],a=pe(r.segments,(function(e){return Math.abs(e.presentationTime-i.presentationTime)<Ee}));if(-1===a)return Te({playlist:e,mediaSequence:r.mediaSequence+r.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!r.segments.length&&e.timeline>r.timeline||r.segments.length&&e.timeline>r.segments[r.segments.length-1].timeline)&&e.discontinuitySequence--);r.segments[a].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),Te({playlist:e,mediaSequence:r.segments[a].number})}}))}({oldPlaylists:S,newPlaylists:w,timelineStarts:E.timelineStarts}),E):g},De=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,l=e.periodStart,u=void 0===l?0:l,c=e.minimumUpdatePeriod,d=(r+i)/1e3+(void 0===c?0:c)-(a+u);return Math.ceil((d*s-t)/n)},Ne=function(e,t){for(var n=e.type,r=e.minimumUpdatePeriod,i=void 0===r?0:r,a=e.media,o=void 0===a?"":a,s=e.sourceDuration,l=e.timescale,u=void 0===l?1:l,c=e.startNumber,d=void 0===c?1:c,h=e.periodStart,p=[],f=-1,m=0;m<t.length;m++){var g=t[m],v=g.d,y=g.r||0,b=g.t||0;f<0&&(f=b),b&&b>f&&(f=b);var _=void 0;if(y<0){var E=m+1;_=E===t.length?"dynamic"===n&&i>0&&o.indexOf("$Number$")>0?De(e,f,v):(s*u-f)/v:(t[E].t-f)/v}else _=y+1;for(var S=d+p.length+_,w=d+p.length;w<S;)p.push({number:w,duration:v/u,time:f,timeline:h}),f+=v,w++}return p},Fe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,je=function(e,t){return e.replace(Fe,function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},Be=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,a=fe({baseUrl:e.baseUrl,source:je(i.sourceURL,n),range:i.range}),o=function(e,t){return e.duration||t?e.duration?ve(e):Ne(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return o.map((function(t){n.Number=t.number,n.Time=t.time;var r=je(e.media||"",n),i=e.timescale||1,o=e.presentationTimeOffset||0,s=e.periodStart+(t.time-o)/i;return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:w(e.baseUrl||"",r),map:a,number:t.number,presentationTime:s}}))},Ue=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r,a=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var o,s=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=fe({baseUrl:n,source:i.sourceURL,range:i.range}),o=fe({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o}(e,t)}));return n&&(o=ve(e)),t&&(o=Ne(e,t)),o.map((function(t,n){if(s[n]){var r=s[n],i=e.timescale||1,o=e.presentationTimeOffset||0;return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r.presentationTime=a+(t.time-o)/i,r}})).filter((function(e){return e}))},qe=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=Be,t=ue(r,i.template)):i.base?(n=ye,t=ue(r,i.base)):i.list&&(n=Ue,t=ue(r,i.list));var a={attributes:r};if(!n)return a;var o=n(t,i.segmentTimeline);if(t.duration){var s=t,l=s.duration,u=s.timescale,c=void 0===u?1:u;t.duration=l/c}else o.length?t.duration=o.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=o,i.base&&t.indexRange&&(a.sidx=o[0],a.segments=[]),a},Ve=function(e,t){return he(e.childNodes).filter((function(e){return e.tagName===t}))},He=function(e){return e.textContent.trim()},ze=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(o||0)+60*parseFloat(s||0)+parseFloat(l||0)},We={mediaPresentationDuration:function(e){return ze(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return ze(e)},suggestedPresentationDelay:function(e){return ze(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return ze(e)},start:function(e){return ze(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?ze(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ge=function(e){return e&&e.attributes?he(e.attributes).reduce((function(e,t){var n=We[t.name]||We.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},Xe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ke=function(e,t){return t.length?de(e.map((function(e){return t.map((function(t){return w(e,He(t))}))}))):e},$e=function(e){var t=Ve(e,"SegmentTemplate")[0],n=Ve(e,"SegmentList")[0],r=n&&Ve(n,"SegmentURL").map((function(e){return ue({tag:"SegmentURL"},Ge(e))})),i=Ve(e,"SegmentBase")[0],a=n||t,o=a&&Ve(a,"SegmentTimeline")[0],s=n||i||t,l=s&&Ve(s,"Initialization")[0],u=t&&Ge(t);u&&l?u.initialization=l&&Ge(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,segmentTimeline:o&&Ve(o,"S").map((function(e){return Ge(e)})),list:n&&ue(Ge(n),{segmentUrls:r,initialization:Ge(l)}),base:i&&ue(Ge(i),{initialization:Ge(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c},Ye=function(e,t){return function(n,r){var i=Ke(t,Ve(n.node,"BaseURL")),a=ue(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var o=Ve(n.node,"AdaptationSet"),s=$e(n.node);return de(o.map(function(e,t,n){return function(r){var i,a=Ge(r),o=Ke(t,Ve(r,"BaseURL")),s=Ve(r,"Role")[0],l={role:Ge(s)},u=ue(e,a,l),c=Ve(r,"Accessibility")[0],d="urn:scte:dash:cc:cea-608:2015"===(i=Ge(c)).schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var r=e.split("=");t=r[0],n=r[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=e.split("="),r=n[0],i=n[1],a=void 0===i?"":i;t.channel=r,t.language=e,a.split(",").forEach((function(e){var n=e.split(":"),r=n[0],i=n[1];"lang"===r?t.language=i:"er"===r?t.easyReader=Number(i):"war"===r?t.aspectRatio=Number(i):"3D"===r&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;d&&(u=ue(u,{captionServices:d}));var h=Ve(r,"Label")[0];if(h&&h.childNodes.length){var p=h.childNodes[0].nodeValue.trim();u=ue(u,{label:p})}var f=Ve(r,"ContentProtection").reduce((function(e,t){var n=Ge(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var r=Xe[n.schemeIdUri];if(r){e[r]={attributes:n};var i=Ve(t,"cenc:pssh")[0];if(i){var a=He(i);e[r].pssh=a&&x(a)}}return e}),{});Object.keys(f).length&&(u=ue(u,{contentProtection:f}));var m=$e(r),g=Ve(r,"Representation"),v=ue(n,m);return de(g.map(function(e,t,n){return function(r){var i=Ve(r,"BaseURL"),a=Ke(t,i),o=ue(e,Ge(r)),s=$e(r);return a.map((function(e){return{segmentInfo:ue(n,s),attributes:ue(o,{baseUrl:e})}}))}}(u,o,v)))}}(a,i,s)))}},Qe=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,n,r=new se.DOMParser;try{n=(t=r.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},Je=n(4237),Ze=n.n(Je),et=te([73,68,51]),tt=function e(t,n){return void 0===n&&(n=0),(t=te(t)).length-n<10||!oe(t,et,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=te(e))[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?r+20:r+10}(t,n),e(t,n))},nt=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?ae(e):e}),rt=function(e){e=te(e);for(var t=[],n=0;e.length>n;){var r=e[n],i=0,a=0,o=e[++a];for(a++;128&o;)i=(127&o)<<7,o=e[a],a++;i+=127&o;for(var s=0;s<R.length;s++){var l=R[s],u=l.id,c=l.parser;if(r===u){t.push(c(e.subarray(a,a+i)));break}}n+=i+a}return t};R=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,te(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=rt(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:rt(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var it=function e(t,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return nt(e)})):[nt(e)]}(n),t=te(t);var i=[];if(!n.length)return i;for(var a=0;a<t.length;){var o=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,s=t.subarray(a+4,a+8);if(0===o)break;var l=a+o;if(l>t.length){if(r)break;l=t.length}var u=t.subarray(a+8,l);oe(s,n[0])&&(1===n.length?i.push(u):i.push.apply(i,e(u,n.slice(1),r))),a=l}return i},at={EBML:te([26,69,223,163]),DocType:te([66,130]),Segment:te([24,83,128,103]),SegmentInfo:te([21,73,169,102]),Tracks:te([22,84,174,107]),Track:te([174]),TrackNumber:te([215]),DefaultDuration:te([35,227,131]),TrackEntry:te([174]),TrackType:te([131]),FlagDefault:te([136]),CodecID:te([134]),CodecPrivate:te([99,162]),VideoTrack:te([224]),AudioTrack:te([225]),Cluster:te([31,67,182,117]),Timestamp:te([231]),TimestampScale:te([42,215,177]),BlockGroup:te([160]),BlockDuration:te([155]),Block:te([161]),SimpleBlock:te([163])},ot=[128,64,32,16,8,4,2,1],st=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=function(e){for(var t=1,n=0;n<ot.length&&!(e&ot[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+i);return n&&((a=Array.prototype.slice.call(e,t,t+i))[0]^=ot[i-1]),{length:i,value:ie(a,{signed:r}),bytes:a}},lt=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,r=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i,a=(i=e=ne(e),Math.ceil(function(e){return e.toString(2).length}(i)/8)),o=new Uint8Array(new ArrayBuffer(a)),s=0;s<a;s++){var l=r?s:Math.abs(s+1-o.length);o[l]=Number(e/re[s]&ne(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===s?1:2)}return o}(t):t},ut=function e(t,n,r){if(r>=n.length)return n.length;var i=st(n,r,!1);if(oe(t.bytes,i.bytes))return r;var a=st(n,r+i.length);return e(t,n,r+a.length+a.value+i.length)},ct=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return lt(e)})):[lt(e)]}(n),t=te(t);var r=[];if(!n.length)return r;for(var i=0;i<t.length;){var a=st(t,i,!1),o=st(t,i+a.length),s=i+a.length+o.length;127===o.value&&(o.value=ut(a,t,s),o.value!==t.length&&(o.value-=s));var l=s+o.value>t.length?t.length:s+o.value,u=t.subarray(s,l);oe(n[0],a.bytes)&&(1===n.length?r.push(u):r=r.concat(e(u,n.slice(1)))),i+=a.length+o.length+u.length}return r},dt=te([0,0,0,1]),ht=te([0,0,1]),pt=te([0,0,3]),ft=function(e){for(var t=[],n=1;n<e.length-2;)oe(e.subarray(n,n+3),pt)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var r=e.length-t.length,i=new Uint8Array(r),a=0;for(n=0;n<r;a++,n++)a===t[0]&&(a++,t.shift()),i[n]=e[a];return i},mt=function(e,t,n,r){void 0===r&&(r=1/0),e=te(e),n=[].concat(n);for(var i,a=0,o=0;a<e.length&&(o<r||i);){var s=void 0;if(oe(e.subarray(a),dt)?s=4:oe(e.subarray(a),ht)&&(s=3),s){if(o++,i)return ft(e.subarray(i,a));var l=void 0;"h264"===t?l=31&e[a+s]:"h265"===t&&(l=e[a+s]>>1&63),-1!==n.indexOf(l)&&(i=a+s),a+=s+("h264"===t?1:2)}else a++}return e.subarray(0,0)},gt={webm:te([119,101,98,109]),matroska:te([109,97,116,114,111,115,107,97]),flac:te([102,76,97,67]),ogg:te([79,103,103,83]),ac3:te([11,119]),riff:te([82,73,70,70]),avi:te([65,86,73]),wav:te([87,65,86,69]),"3gp":te([102,116,121,112,51,103]),mp4:te([102,116,121,112]),fmp4:te([115,116,121,112]),mov:te([102,116,121,112,113,116]),moov:te([109,111,111,118]),moof:te([109,111,111,102])},vt={aac:function(e){var t=tt(e);return oe(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=tt(e);return oe(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=ct(e,[at.EBML,at.DocType])[0];return oe(t,gt.webm)},mkv:function(e){var t=ct(e,[at.EBML,at.DocType])[0];return oe(t,gt.matroska)},mp4:function(e){return!vt["3gp"](e)&&!vt.mov(e)&&(!(!oe(e,gt.mp4,{offset:4})&&!oe(e,gt.fmp4,{offset:4}))||!(!oe(e,gt.moof,{offset:4})&&!oe(e,gt.moov,{offset:4}))||void 0)},mov:function(e){return oe(e,gt.mov,{offset:4})},"3gp":function(e){return oe(e,gt["3gp"],{offset:4})},ac3:function(e){var t=tt(e);return oe(e,gt.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=tt(e);return oe(e,gt.flac,{offset:t})},ogg:function(e){return oe(e,gt.ogg)},avi:function(e){return oe(e,gt.riff)&&oe(e,gt.avi,{offset:8})},wav:function(e){return oe(e,gt.riff)&&oe(e,gt.wav,{offset:8})},h264:function(e){return function(e){return mt(e,"h264",7,3)}(e).length},h265:function(e){return function(e){return mt(e,"h265",[32,33],3)}(e).length}},yt=Object.keys(vt).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);yt.forEach((function(e){var t=vt[e];vt[e]=function(e){return t(te(e))}}));var bt=vt,_t=function(e){e=te(e);for(var t=0;t<yt.length;t++){var n=yt[t];if(bt[n](e))return n}return""},Et=n(7703);function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function wt(e){var t="function"==typeof Map?new Map:void 0;return wt=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,St(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},wt(e)}for(var Tt,Ct=n(8974),kt="7.21.7",At={},Pt=function(e,t){return At[e]=At[e]||[],t&&(At[e]=At[e].concat(t)),At[e]},xt=function(e,t){var n=Pt(e).indexOf(t);return!(n<=-1||(At[e]=At[e].slice(),At[e].splice(n,1),0))},It={prefixed:!0},Mt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Rt=Mt[0],Ot=0;Ot<Mt.length;Ot++)if(Mt[Ot][1]in o()){Tt=Mt[Ot];break}if(Tt){for(var Lt=0;Lt<Tt.length;Lt++)It[Rt[Lt]]=Tt[Lt];It.prefixed=Tt[0]!==Rt[0]}var Dt=[],Nt=function e(t){var n,r="info",a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n("log",r,t)};return n=function(e,t){return function(n,r,a){var o=t.levels[r],s=new RegExp("^("+o+")$");if("log"!==n&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),Dt){Dt.push([].concat(a));var l=Dt.length-1e3;Dt.splice(0,l>0?l:0)}if(i().console){var u=i().console[n];u||"debug"!==n||(u=i().console.info||i().console.log),u&&o&&s.test(n)&&u[Array.isArray(a)?"apply":"call"](i().console,a)}}}(t,a),a.createLogger=function(n){return e(t+": "+n)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(a.history=function(){return Dt?[].concat(Dt):[]}).filter=function(e){return(Dt||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},a.history.clear=function(){Dt&&(Dt.length=0)},a.history.disable=function(){null!==Dt&&(Dt.length=0,Dt=null)},a.history.enable=function(){null===Dt&&(Dt=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("error",r,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("warn",r,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("debug",r,t)},a}("VIDEOJS"),Ft=Nt.createLogger,jt=Object.prototype.toString,Bt=function(e){return Vt(e)?Object.keys(e):[]};function Ut(e,t){Bt(e).forEach((function(n){return t(e[n],n)}))}function qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?s.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&Ut(t,(function(t,n){e[n]=t}))})),e)}function Vt(e){return!!e&&"object"==typeof e}function Ht(e){return Vt(e)&&"[object Object]"===jt.call(e)&&e.constructor===Object}function zt(e,t){if(!e||!t)return"";if("function"==typeof i().getComputedStyle){var n;try{n=i().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var Wt,Gt,Xt,Kt=i().navigator&&i().navigator.userAgent||"",$t=/AppleWebKit\/([\d.]+)/i.exec(Kt),Yt=$t?parseFloat($t.pop()):null,Qt=/iPod/i.test(Kt),Jt=(Wt=Kt.match(/OS (\d+)_/i))&&Wt[1]?Wt[1]:null,Zt=/Android/i.test(Kt),en=function(){var e=Kt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),tn=Zt&&en<5&&Yt<537,nn=/Firefox/i.test(Kt),rn=/Edg/i.test(Kt),an=!rn&&(/Chrome/i.test(Kt)||/CriOS/i.test(Kt)),on=function(){var e=Kt.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),sn=(Gt=/MSIE\s(\d+)\.\d/.exec(Kt),!(Xt=Gt&&parseFloat(Gt[1]))&&/Trident\/7.0/i.test(Kt)&&/rv:11.0/.test(Kt)&&(Xt=11),Xt),ln=/Safari/i.test(Kt)&&!an&&!Zt&&!rn,un=/Windows/i.test(Kt),cn=Boolean(yn()&&("ontouchstart"in i()||i().navigator.maxTouchPoints||i().DocumentTouch&&i().document instanceof i().DocumentTouch)),dn=/iPad/i.test(Kt)||ln&&cn&&!/iPhone/i.test(Kt),hn=/iPhone/i.test(Kt)&&!dn,pn=hn||dn||Qt,fn=(ln||pn)&&!an,mn=Object.freeze({__proto__:null,IS_IPOD:Qt,IOS_VERSION:Jt,IS_ANDROID:Zt,ANDROID_VERSION:en,IS_NATIVE_ANDROID:tn,IS_FIREFOX:nn,IS_EDGE:rn,IS_CHROME:an,CHROME_VERSION:on,IE_VERSION:sn,IS_SAFARI:ln,IS_WINDOWS:un,TOUCH_ENABLED:cn,IS_IPAD:dn,IS_IPHONE:hn,IS_IOS:pn,IS_ANY_SAFARI:fn});function gn(e){return"string"==typeof e&&Boolean(e.trim())}function vn(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function yn(){return o()===i().document}function bn(e){return Vt(e)&&1===e.nodeType}function _n(){try{return i().parent!==i().self}catch(e){return!0}}function En(e){return function(t,n){if(!gn(t))return o()[e](null);gn(n)&&(n=o().querySelector(n));var r=bn(n)?n:o();return r[e]&&r[e](t)}}function Sn(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=o().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Nt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?wn(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&Vn(i,r),i}function wn(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Tn(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Cn(e,t){return vn(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function kn(e,t){return e.classList?e.classList.add(t):Cn(e,t)||(e.className=(e.className+" "+t).trim()),e}function An(e,t){return e?(e.classList?e.classList.remove(t):(vn(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(Nt.warn("removeClass was called with an element that doesn't exist"),null)}function Pn(e,t,n){var r=Cn(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?kn(e,t):An(e,t),e}function xn(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function In(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,a=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(a=null!==a),t[i]=a}return t}function Mn(e,t){return e.getAttribute(t)}function Rn(e,t,n){e.setAttribute(t,n)}function On(e,t){e.removeAttribute(t)}function Ln(){o().body.focus(),o().onselectstart=function(){return!1}}function Dn(){o().onselectstart=function(){return!0}}function Nn(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(zt(e,"height"))),n.width||(n.width=parseFloat(zt(e,"width"))),n}}function Fn(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==o()[It.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function jn(e,t){var n={x:0,y:0};if(pn)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i=zt(r,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(i)){var o=i.slice(9,-1).split(/,\s/).map(Number);n.x+=o[12],n.y+=o[13]}r=r.parentNode}var s={},l=Fn(t.target),u=Fn(e),c=u.width,d=u.height,h=t.offsetY-(u.top-l.top),p=t.offsetX-(u.left-l.left);return t.changedTouches&&(p=t.changedTouches[0].pageX-u.left,h=t.changedTouches[0].pageY+u.top,pn&&(p-=n.x,h-=n.y)),s.y=1-Math.max(0,Math.min(1,h/d)),s.x=Math.max(0,Math.min(1,p/c)),s}function Bn(e){return Vt(e)&&3===e.nodeType}function Un(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function qn(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),bn(e)||Bn(e)?e:"string"==typeof e&&/\S/.test(e)?o().createTextNode(e):void 0})).filter((function(e){return e}))}function Vn(e,t){return qn(t).forEach((function(t){return e.appendChild(t)})),e}function Hn(e,t){return Vn(Un(e),t)}function zn(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var Wn,Gn=En("querySelector"),Xn=En("querySelectorAll"),Kn=Object.freeze({__proto__:null,isReal:yn,isEl:bn,isInFrame:_n,createEl:Sn,textContent:wn,prependTo:Tn,hasClass:Cn,addClass:kn,removeClass:An,toggleClass:Pn,setAttributes:xn,getAttributes:In,getAttribute:Mn,setAttribute:Rn,removeAttribute:On,blockTextSelection:Ln,unblockTextSelection:Dn,getBoundingClientRect:Nn,findPosition:Fn,getPointerPosition:jn,isTextNode:Bn,emptyEl:Un,normalizeContent:qn,appendContent:Vn,insertContent:Hn,isSingleLeftClick:zn,$:Gn,$$:Xn}),$n=!1,Yn=function(){if(!1!==Wn.options.autoSetup){var e=Array.prototype.slice.call(o().getElementsByTagName("video")),t=Array.prototype.slice.call(o().getElementsByTagName("audio")),n=Array.prototype.slice.call(o().getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,a=r.length;i<a;i++){var s=r[i];if(!s||!s.getAttribute){Qn(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Wn(s)}else $n||Qn(1)}};function Qn(e,t){yn()&&(t&&(Wn=t),i().setTimeout(Yn,e))}function Jn(){$n=!0,i().removeEventListener("load",Jn)}yn()&&("complete"===o().readyState?Jn():i().addEventListener("load",Jn));var Zn,er=function(e){var t=o().createElement("style");return t.className=e,t},tr=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},nr=3;function rr(){return nr++}i().WeakMap||(Zn=function(){function e(){this.vdata="vdata"+Math.floor(i().performance&&i().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||rr();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];Nt("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var ir,ar=i().WeakMap?new WeakMap:new Zn;function or(e,t){if(ar.has(e)){var n=ar.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ar.delete(e)}}function sr(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function lr(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r=e||i().event;for(var a in e={},r)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&"path"!==a&&("returnValue"===a&&r.preventDefault||(e[a]=r[a]));if(e.target||(e.target=e.srcElement||o()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var s=o().documentElement,l=o().body;e.pageX=e.clientX+(s&&s.scrollLeft||l&&l.scrollLeft||0)-(s&&s.clientLeft||l&&l.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||l&&l.scrollTop||0)-(s&&s.clientTop||l&&l.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var ur=["touchstart","touchmove"];function cr(e,t,n){if(Array.isArray(t))return sr(cr,e,t,n);ar.has(e)||ar.set(e,{});var r=ar.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=rr()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=lr(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(e){Nt.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var a=!1;(function(){if("boolean"!=typeof ir){ir=!1;try{var e=Object.defineProperty({},"passive",{get:function(){ir=!0}});i().addEventListener("test",null,e),i().removeEventListener("test",null,e)}catch(e){}}return ir})()&&ur.indexOf(t)>-1&&(a={passive:!0}),e.addEventListener(t,r.dispatcher,a)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function dr(e,t,n){if(ar.has(e)){var r=ar.get(e);if(r.handlers){if(Array.isArray(t))return sr(dr,e,t,n);var i=function(e,t){r.handlers[t]=[],or(e,t)};if(void 0!==t){var a=r.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);or(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function hr(e,t,n){var r=ar.has(e)?ar.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=lr(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)hr.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){ar.has(t.target)||ar.set(t.target,{});var a=ar.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function pr(e,t,n){if(Array.isArray(t))return sr(pr,e,t,n);var r=function r(){dr(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||rr(),cr(e,t,r)}function fr(e,t,n){var r=function r(){dr(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||rr(),cr(e,t,r)}var mr,gr=Object.freeze({__proto__:null,fixEvent:lr,on:cr,off:dr,trigger:hr,one:pr,any:fr}),vr=30,yr=function(e,t,n){t.guid||(t.guid=rr());var r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},br=function(e,t){var n=i().performance.now();return function(){var r=i().performance.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},_r=function(){};_r.prototype.allowedEvents_={},_r.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},cr(this,e,t),this.addEventListener=n},_r.prototype.addEventListener=_r.prototype.on,_r.prototype.off=function(e,t){dr(this,e,t)},_r.prototype.removeEventListener=_r.prototype.off,_r.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},pr(this,e,t),this.addEventListener=n},_r.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fr(this,e,t),this.addEventListener=n},_r.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=lr(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),hr(this,e)},_r.prototype.dispatchEvent=_r.prototype.trigger,_r.prototype.queueTrigger=function(e){var t=this;mr||(mr=new Map);var n=e.type||e,r=mr.get(this);r||(r=new Map,mr.set(this,r));var a=r.get(n);r.delete(n),i().clearTimeout(a);var o=i().setTimeout((function(){r.delete(n),0===r.size&&(r=null,mr.delete(t)),t.trigger(e)}),0);r.set(n,o)};var Er=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Sr=function(e){return e instanceof _r||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},wr=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Tr=function(e,t,n){if(!e||!e.nodeName&&!Sr(e))throw new Error("Invalid target for "+Er(t)+"#"+n+"; must be a DOM node or evented object.")},Cr=function(e,t,n){if(!wr(e))throw new Error("Invalid event type for "+Er(t)+"#"+n+"; must be a non-empty string or array.")},kr=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+Er(t)+"#"+n+"; must be a function.")},Ar=function(e,t,n){var r,i,a,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return o?(r=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],a=t[1]):(r=t[0],i=t[1],a=t[2]),Tr(r,e,n),Cr(i,e,n),kr(a,e,n),{isTargetingSelf:o,target:r,type:i,listener:a=yr(e,a)}},Pr=function(e,t,n,r){Tr(e,e,t),e.nodeName?gr[t](e,n,r):e[t](n,r)},xr={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ar(this,n,"on"),a=i.isTargetingSelf,o=i.target,s=i.type,l=i.listener;if(Pr(o,"on",s,l),!a){var u=function(){return e.off(o,s,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Pr(this,"on","dispose",u),Pr(o,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ar(this,n,"one"),a=i.isTargetingSelf,o=i.target,s=i.type,l=i.listener;if(a)Pr(o,"one",s,l);else{var u=function t(){e.off(o,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];l.apply(null,r)};u.guid=l.guid,Pr(o,"one",s,u)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ar(this,n,"any"),a=i.isTargetingSelf,o=i.target,s=i.type,l=i.listener;if(a)Pr(o,"any",s,l);else{var u=function t(){e.off(o,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];l.apply(null,r)};u.guid=l.guid,Pr(o,"any",s,u)}},off:function(e,t,n){if(!e||wr(e))dr(this.eventBusEl_,e,t);else{var r=e,i=t;Tr(r,this,"off"),Cr(i,this,"off"),kr(n,this,"off"),n=yr(this,n),this.off("dispose",n),r.nodeName?(dr(r,i,n),dr(r,"dispose",n)):Sr(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){Tr(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!wr(n)){var r="Invalid event type for "+Er(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(r);(this.log||Nt).error(r)}return hr(this.eventBusEl_,e,t)}};function Ir(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=Sn("span",{className:"vjs-event-bus"});return qt(e,xr),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&ar.has(e)&&ar.delete(e)})),i().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Mr={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),Ut(e,(function(e,r){n.state[r]!==e&&((t=t||{})[r]={from:n.state[r],to:e}),n.state[r]=e})),t&&Sr(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Rr(e,t){return qt(e,Mr),e.state=qt({},e.state,t),"function"==typeof e.handleStateChanged&&Sr(e)&&e.on("statechanged",e.handleStateChanged),e}var Or=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},Lr=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function Dr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Ut(t,(function(t,n){Ht(t)?(Ht(e[n])||(e[n]={}),e[n]=Dr(e[n],t)):e[n]=t}))})),e}var Nr=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),Fr=i().Map?i().Map:Nr,jr=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),Br=i().Set?i().Set:jr,Ur=function(){function e(e,t,n){var r=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Dr({},this.options_),t=this.options_=Dr(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+rr()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return r.addClass(e)})),!1!==t.evented&&(Ir(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Rr(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Br,this.setIntervalIds_=new Br,this.rafIds_=new Br,this.namedRafs_=new Fr,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Dr(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return Sn(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],o=r&&r.split("-")[0],s=i&&i[o],l=n;return a&&a[e]?l=a[e]:s&&s[e]&&(l=s[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i}))),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.addChild=function(t,n,r){var i,a;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){a=Lr(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&Lr(i.name()))&&(this.childNameIndex_[a]=i,this.childNameIndex_[Or(a)]=i),"function"==typeof i.el&&i.el()){var l=null;this.children_[r+1]&&(this.children_[r+1].el_?l=this.children_[r+1].el_:bn(this.children_[r+1])&&(l=this.children_[r+1])),this.contentEl().insertBefore(i.el(),l)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Lr(e.name())]=null,this.childNameIndex_[Or(e.name())]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,a=e.getComponent("Tech");(r=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!r.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var r,i;return"string"==typeof e?i=n[r=e]||t.options_[r]||{}:(r=e.name,i=e),{name:r,opts:i}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||Lr(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var a=t.addChild(n,r);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Gn(e,t||this.contentEl())},t.$$=function(e,t){return Xn(e,t||this.contentEl())},t.hasClass=function(e){return Cn(this.el_,e)},t.addClass=function(e){kn(this.el_,e)},t.removeClass=function(e){An(this.el_,e)},t.toggleClass=function(e,t){Pn(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return Mn(this.el_,e)},t.setAttribute=function(e,t){Rn(this.el_,e,t)},t.removeAttribute=function(e){On(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+Lr(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=zt(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+Lr(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(u().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=i().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}}));var r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){n=null,!0===e&&i().performance.now()-t<200&&(r.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=yr(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,r=this;return e=yr(this,e),this.clearTimersOnDispose_(),n=i().setTimeout((function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),i().clearTimeout(e)),e},t.setInterval=function(e,t){e=yr(this,e),this.clearTimersOnDispose_();var n=i().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),i().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=yr(this,e),t=i().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=yr(this,t);var r=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,r),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),i().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],r=t[1];e[n].forEach((function(t,n){return e[r](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!a)throw new Error('Illegal component, "'+t+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=Lr(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var s=o.players,l=Object.keys(s);if(s&&l.length>0&&l.map((function(e){return s[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Or(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function qr(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function Vr(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:qr.bind(null,"start",0,e),end:qr.bind(null,"end",1,e)},i().Symbol&&i().Symbol.iterator&&(t[i().Symbol.iterator]=function(){return(e||[]).values()}),t}function Hr(e,t){return Array.isArray(e)?Vr(e):void 0===e||void 0===t?Vr():Vr([[e,t]])}function zr(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=Hr(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(r=e.end(a))>t&&(r=t),i+=r-n;return i/t}function Wr(e){if(e instanceof Wr)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:Vt(e)&&("number"==typeof e.code&&(this.code=e.code),qt(this,e)),this.message||(this.message=Wr.defaultMessages[this.code]||"")}Ur.prototype.supportsRaf_="function"==typeof i().requestAnimationFrame&&"function"==typeof i().cancelAnimationFrame,Ur.registerComponent("Component",Ur),Wr.prototype.code=0,Wr.prototype.message="",Wr.prototype.status=null,Wr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Wr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Gr=0;Gr<Wr.errorTypes.length;Gr++)Wr[Wr.errorTypes[Gr]]=Gr,Wr.prototype[Wr.errorTypes[Gr]]=Gr;function Xr(e){return null!=e&&"function"==typeof e.then}function Kr(e){Xr(e)&&e.then(null,(function(e){}))}var $r=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,r){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Yr="vjs-modal-dialog",Qr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=Sn("div",{className:Yr+"-content"},{role:"document"}),r.descEl_=Sn("p",{className:Yr+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),wn(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return Yr+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Hn(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},n.empty=function(){this.trigger("beforemodalempty"),Un(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=o().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),u().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(u().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}o().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof i().HTMLAnchorElement||e instanceof i().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i().HTMLInputElement||e instanceof i().HTMLSelectElement||e instanceof i().HTMLTextAreaElement||e instanceof i().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i().HTMLIFrameElement||e instanceof i().HTMLObjectElement||e instanceof i().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Ur);Qr.prototype.options_={pauseOnOpen:!0,temporary:!0},Ur.registerComponent("ModalDialog",Qr);var Jr=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(c(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}h(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},Sr(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(_r);for(var Zr in Jr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Jr.prototype.allowedEvents_)Jr.prototype["on"+Zr]=null;var ei=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},ti=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].enabled){ei(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&ei(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,ei(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Jr),ni=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},ri=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].selected){ni(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(c(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&ni(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,ni(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Jr),ii=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Jr),ai=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),oi=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),si={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},li={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ui={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ci={disabled:"disabled",hidden:"hidden",showing:"showing"},di=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+rr(),kind:t.kind||"",language:t.language||""},i=t.label||"",a=function(e){Object.defineProperty(c(n),e,{get:function(){return r[e]},set:function(){}})};for(var o in r)a(o);return Object.defineProperty(c(n),"label",{get:function(){return i},set:function(e){e!==i&&(i=e,this.trigger("labelchange"))}}),n}return h(t,e),t}(_r),hi=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o().createElement("a");n.href=e;for(var r={},a=0;a<t.length;a++)r[t[a]]=n[t[a]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=i().location.protocol),r.host||(r.host=i().location.host),r},pi=function(e){if(!e.match(/^https?:\/\//)){var t=o().createElement("a");t.href=e,e=t.href}return e},fi=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},mi=function(e,t){void 0===t&&(t=i().location);var n=hi(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},gi=Object.freeze({__proto__:null,parseUrl:hi,getAbsoluteURL:pi,getFileExtension:fi,isCrossOrigin:mi}),vi=function(e,t){var n=new(i().WebVTT.Parser)(i(),i().vttjs,i().WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(i().console&&i().console.groupCollapsed&&i().console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach((function(e){return Nt.error(e)})),i().console&&i().console.groupEnd&&i().console.groupEnd()),n.flush()},yi=function(e,t){var n={uri:e},r=mi(e);r&&(n.cors=r);var a="use-credentials"===t.tech_.crossOrigin();a&&(n.withCredentials=a),g()(n,yr(this,(function(e,n,r){if(e)return Nt.error(e,n);t.loaded_=!0,"function"!=typeof i().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return vi(r,t);Nt.error("vttjs failed to load, stopping trying to process "+t.src)})):vi(r,t)})))},bi=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var r=Dr(t,{kind:ui[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=ci[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(i="hidden"),(n=e.call(this,r)||this).tech_=r.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var o=new oi(n.cues_),s=new oi(n.activeCues_),l=!1;return n.timeupdateHandler=yr(c(n),(function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==i&&n.startTracking(),Object.defineProperties(c(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(e){ci[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||yi(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),r.src?(n.src=r.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==r.kind&&"captions"!==r.kind)&&yi(n.src,c(n))):n.loaded_=!0,n}h(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(!("getCueAsHTML"in t)){for(var n in t=new(i().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(di);bi.prototype.allowedEvents_={cuechange:"cuechange"};var _i=function(e){function t(t){var n;void 0===t&&(t={});var r=Dr(t,{kind:li[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(c(n),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return h(t,e),t}(di),Ei=function(e){function t(t){var n;void 0===t&&(t={});var r=Dr(t,{kind:si[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(c(n),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return h(t,e),t}(di),Si=function(e){function t(t){var n,r;void 0===t&&(t={}),n=e.call(this)||this;var i=new bi(t);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(c(n),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=0,i.addEventListener("loadeddata",(function(){r=2,n.trigger({type:"load",target:c(n)})})),n}return h(t,e),t}(_r);Si.prototype.allowedEvents_={load:"load"},Si.NONE=0,Si.LOADING=1,Si.LOADED=2,Si.ERROR=3;var wi={audio:{ListClass:ti,TrackClass:_i,capitalName:"Audio"},video:{ListClass:ri,TrackClass:Ei,capitalName:"Video"},text:{ListClass:ii,TrackClass:bi,capitalName:"Text"}};Object.keys(wi).forEach((function(e){wi[e].getterName=e+"Tracks",wi[e].privateName=e+"Tracks_"}));var Ti={remoteText:{ListClass:ii,TrackClass:bi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ai,TrackClass:Si,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ci=s({},wi,Ti);Ti.names=Object.keys(Ti),wi.names=Object.keys(wi),Ci.names=[].concat(Ti.names).concat(wi.names);var ki=function(e){function t(t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",(function(){this.hasStarted_=!0})),r.on("loadstart",(function(){this.hasStarted_=!1})),Ci.names.forEach((function(e){var n=Ci[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])})),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new Ci.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}h(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(yr(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return Hr(0,0)},n.bufferedPercent=function(){return zr(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(wi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new Wr(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Hr(0,0):Hr()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;wi.names.forEach((function(t){var n=wi[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}))}))},n.addWebVttScript_=function(){var e=this;if(!i().WebVTT)if(o().body.contains(this.el())){if(!this.options_["vtt.js"]&&Ht(y())&&Object.keys(y()).length>0)return void this.trigger("vttjsloaded");var t=o().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),i().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var a=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var o=new Ci.text.TrackClass(i);return a.addTrack(o),o}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=Dr(e,{tech:this});return new Ti.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Nt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(r.track)})),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||i().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=rr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Lr(e),t.techs_[e]=n,t.techs_[Or(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=Lr(e),i()&&i().videojs&&i().videojs[e]?(Nt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i().videojs[e]):void 0)},t}(Ur);Ci.names.forEach((function(e){var t=Ci[e];ki.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),ki.prototype.featuresVolumeControl=!0,ki.prototype.featuresMuteControl=!0,ki.prototype.featuresFullscreenResize=!1,ki.prototype.featuresPlaybackRate=!1,ki.prototype.featuresProgressEvents=!1,ki.prototype.featuresSourceset=!1,ki.prototype.featuresTimeupdateEvents=!1,ki.prototype.featuresNativeTextTracks=!1,ki.prototype.featuresVideoFrameCallback=!1,ki.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:Nt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ur.registerComponent("Tech",ki),ki.registerTech("Tech",ki),ki.defaultTechOrder_=[];var Ai={},Pi={},xi={};function Ii(e,t,n){e.setTimeout((function(){return Ni(t,Ai[t.type],n,e)}),1)}function Mi(e,t,n,r){void 0===r&&(r=null);var i="call"+Lr(n),a=e.reduce(Di(i),r),o=a===xi,s=o?null:t[n](a);return function(e,t,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](r,n)}}(e,n,s,o),s}var Ri={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Oi={setCurrentTime:1,setMuted:1,setVolume:1},Li={play:1,pause:1};function Di(e){return function(t,n){return t===xi?xi:n[e]?n[e](t):t}}function Ni(e,t,n,r,i,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===a&&(a=!1);var o=t,s=o[0],l=o.slice(1);if("string"==typeof s)Ni(e,Ai[s],n,r,i,a);else if(s){var u=function(e,t){var n=Pi[e.id()],r=null;if(null==n)return r=t(e),Pi[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],o=a[0],s=a[1];o===t&&(r=s)}return null===r&&(r=t(e),n.push([t,r])),r}(r,s);if(!u.setSource)return i.push(u),Ni(e,l,n,r,i,a);u.setSource(qt({},e),(function(t,o){if(t)return Ni(e,l,n,r,i,a);i.push(u),Ni(o,e.type===o.type?l:Ai[o.type],n,r,i,a)}))}else l.length?Ni(e,l,n,r,i,a):a?n(e,i):Ni(e,Ai["*"],n,r,i,!0)}var Fi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ji=function(e){void 0===e&&(e="");var t=fi(e);return Fi[t.toLowerCase()]||""},Bi=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):Vt(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[Ui({src:t})]:Vt(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Ui(t)]:[];return t};function Ui(e){if(!e.type){var t=ji(e.src);t&&(e.type=t)}return e}var qi=function(e){function t(t,n,r){var i,a=Dr({createEl:!1},n);if(i=e.call(this,t,a,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var l=Lr(s[o]),u=ki.getTech(l);if(l||(u=Ur.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return i}return h(t,e),t}(Ur);Ur.registerComponent("MediaLoader",qi);var Vi=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).options_.controlText&&r.controlText(r.options_.controlText),r.handleMouseOver_=function(e){return r.handleMouseOver(e)},r.handleMouseOut_=function(e){return r.handleMouseOut(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.emitTapEvents(),r.enable(),r}h(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=qt({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Nt.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=qt({role:"button"},n),this.tabIndex_=t.tabIndex;var r=Sn(e,t,n);return r.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Sn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,wn(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){u().isEventKey(t,"Space")||u().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Ur);Ur.registerComponent("ClickableComponent",Vi);var Hi=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update(),r.update_=function(e){return r.update(e)},t.on("posterchange",r.update_),r}h(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return Sn("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(sn||rn)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Kr(this.player_.play()):this.player_.pause()}},t}(Vi);Ur.registerComponent("PosterImage",Hi);var zi="#222",Wi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Gi(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Xi(e,t,n){try{e.style[t]=n}catch(e){return}}var Ki=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var o=function(e){return a.updateDisplay(e)};return t.on("loadstart",(function(e){return a.toggleDisplay(e)})),t.on("texttrackchange",o),t.on("loadedmetadata",(function(e){return a.preselectTrack(e)})),t.ready(yr(c(a),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",o),t.on("playerresize",o),i().addEventListener("orientationchange",o),t.on("dispose",(function(){return i().removeEventListener("orientationchange",o)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),a}h(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<i.length;o++){var s=i[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in r?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof i().WebVTT&&i().WebVTT.processCues(i(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?a=l:o=l)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var a=n[r];if(a){var o=a.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&Xi(o.firstChild,"color",Gi(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Xi(o.firstChild,"backgroundColor",Gi(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Xi(o,"backgroundColor",Gi(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+zi:"raised"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+zi:"depressed"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+zi:"uniform"===t.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+zi)),t.fontPercent&&1!==t.fontPercent){var s=i().parseFloat(o.style.fontSize);o.style.fontSize=s*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=Wi[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof i().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],a=0;a<r.activeCues.length;++a)t.push(r.activeCues[a]);i().WebVTT.processCues(i(),t,this.el_);for(var o=0;o<e.length;++o){for(var s=e[o],l=0;l<s.activeCues.length;++l){var u=s.activeCues[l].displayState;kn(u,"vjs-text-track-cue"),kn(u,"vjs-text-track-cue-"+(s.language?s.language:o)),s.language&&Rn(u,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(Ur);Ur.registerComponent("TextTrackDisplay",Ki);var $i=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=Sn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(Ur);Ur.registerComponent("LoadingSpinner",$i);var Yi=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=Sn("button",t=qt({className:this.buildCSSClass()},t),n=qt({type:"button"},n));return r.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return Nt.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Ur.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){u().isEventKey(t,"Space")||u().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Vi);Ur.registerComponent("Button",Yi);var Qi=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).mouseused_=!1,r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Kr(t),void(!this.player_.tech(!0)||(sn||rn)&&n||this.player_.tech(!0).focus())}var r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(i){var a=function(){return i.focus()};Xr(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(Yi);Qi.prototype.controlText_="Play Video",Ur.registerComponent("BigPlayButton",Qi);var Ji=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).controlText(n&&n.controlText||r.localize("Close")),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){u().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Yi);Ur.registerComponent("CloseButton",Ji);var Zi=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,r.on(t,"play",(function(e){return r.handlePlay(e)})),r.on(t,"pause",(function(e){return r.handlePause(e)})),n.replay&&r.on(t,"ended",(function(e){return r.handleEnded(e)})),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?Kr(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(Yi);Zi.prototype.controlText_="Play",Ur.registerComponent("PlayToggle",Zi);var ea=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),(i=i>0||o>0?i+":":"")+(r=((i||a>=10)&&r<10?"0"+r:r)+":")+(n<10?"0"+n:n)},ta=ea;function na(e,t){return void 0===t&&(t=e),ta(e,t)}var ra=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return r.updateContent(e)})),r.updateTextNode_(),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),r=Sn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return n.appendChild(r),this.contentEl_=Sn("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=na(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,Nt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=o().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(Ur);ra.prototype.labelText_="Time",ra.prototype.controlText_="Time",Ur.registerComponent("TimeDisplay",ra);var ia=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(ra);ia.prototype.labelText_="Current Time",ia.prototype.controlText_="Current Time",Ur.registerComponent("CurrentTimeDisplay",ia);var aa=function(e){function t(t,n){var r,i=function(e){return r.updateContent(e)};return(r=e.call(this,t,n)||this).on(t,"durationchange",i),r.on(t,"loadstart",i),r.on(t,"loadedmetadata",i),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(ra);aa.prototype.labelText_="Duration",aa.prototype.controlText_="Duration",Ur.registerComponent("DurationDisplay",aa);var oa=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),r=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(r),t.appendChild(n),t},t}(Ur);Ur.registerComponent("TimeDivider",oa);var sa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return r.updateContent(e)})),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Sn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(ra);sa.prototype.labelText_="Remaining Time",sa.prototype.controlText_="Remaining Time",Ur.registerComponent("RemainingTimeDisplay",sa);var la=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateShowing(),r.on(r.player(),"durationchange",(function(e){return r.updateShowing(e)})),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Sn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Sn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(o().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Ur);Ur.registerComponent("LiveDisplay",la);var ua=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateLiveEdgeStatus(),r.player_.liveTracker&&(r.updateLiveEdgeStatusHandler_=function(e){return r.updateLiveEdgeStatus(e)},r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatusHandler_)),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Sn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(Yi);ua.prototype.controlText_="Seek to live, currently playing live",Ur.registerComponent("SeekToLive",ua);var ca=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},da=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseDown_=function(e){return r.handleMouseDown(e)},r.handleMouseUp_=function(e){return r.handleMouseUp(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleMouseMove_=function(e){return r.handleMouseMove(e)},r.update_=function(e){return r.update(e)},r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}h(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=qt({tabIndex:0},n),r=qt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||an||e.preventDefault(),Ln(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Dn(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(ca(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=jn(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){u().isEventKey(t,"Left")||u().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):u().isEventKey(t,"Right")||u().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Ur);Ur.registerComponent("Slider",da);var ha=function(e,t){return ca(e/t*100,0,100).toFixed(2)+"%"},pa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).partEls_=[],r.on(t,"progress",(function(e){return r.update(e)})),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Sn("span",{className:"vjs-control-text"}),r=Sn("span",{textContent:this.localize("Loaded")}),i=o().createTextNode(": ");return this.percentageEl_=Sn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(r),n.appendChild(i),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),r=e&&e.isLive()?e.seekableEnd():t.player_.duration(),i=t.player_.bufferedEnd(),a=t.partEls_,o=ha(i,r);t.percent_!==o&&(t.el_.style.width=o,wn(t.percentageEl_,o),t.percent_=o);for(var s=0;s<n.length;s++){var l=n.start(s),u=n.end(s),c=a[s];c||(c=t.el_.appendChild(Sn()),a[s]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=ha(l,i),c.style.width=ha(u-l,i))}for(var d=a.length;d>n.length;d--)t.el_.removeChild(a[d-1]);a.length=n.length}))},t}(Ur);Ur.registerComponent("LoadProgressBar",pa);var fa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=br(yr(c(r),r.update),vr),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var r=Fn(this.el_),i=Nn(this.player_.el()),a=e.width*t;if(i&&r){var o=e.left-i.left+a,s=e.width-a+(i.right-e.right),l=r.width/2;o<l?l+=l-o:s<l&&(l=s),l<0?l=0:l>r.width&&(l=r.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(n)}},n.write=function(e){wn(this.el_,e)},n.updateTime=function(e,t,n,r){var i=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,o=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var s=i.player_.liveTracker.liveWindow(),l=s-t*s;a=(l<1?"":"-")+na(l,s)}else a=na(n,o);i.update(e,t,a),r&&r()}))},t}(Ur);Ur.registerComponent("TimeTooltip",fa);var ma=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=br(yr(c(r),r.update),vr),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}},t}(Ur);ma.prototype.options_={children:[]},pn||Zt||ma.prototype.options_.children.push("timeTooltip"),Ur.registerComponent("PlayProgressBar",ma);var ga=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=br(yr(c(r),r.update),vr),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,(function(){n.el_.style.left=e.width*t+"px"}))},t}(Ur);ga.prototype.options_={children:["timeTooltip"]},Ur.registerComponent("MouseTimeDisplay",ga);var va=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).setEventHandlers_(),r}h(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=yr(this,this.update),this.update=br(this.update_,vr),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.on(o(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===o().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,vr))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==o().visibilityState){var r=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,i=n.player_.duration();t&&t.isLive()&&(i=n.player_.liveTracker.liveCurrentTime()),n.percent_!==r&&(n.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),n.percent_=r),n.currentTime_===e&&n.duration_===i||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[na(e,i),na(i,i)],"{1} of {2}")),n.currentTime_=e,n.duration_=i),n.bar&&n.bar.update(Nn(n.el()),n.getProgress())})),r}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){zn(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),zn(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var r=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(r>=.99)return void i.seekToLiveEdge();var a=i.seekableStart(),o=i.liveCurrentTime();if((n=a+r*i.liveWindow())>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}else(n=r*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Kr(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(u().isEventKey(t,"Space")||u().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(u().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(u().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(u()(t))){t.preventDefault(),t.stopPropagation();var r=10*(u().codes[u()(t)]-u().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else u().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):u().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.off(o(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(da);va.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},pn||Zt||va.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ur.registerComponent("SeekBar",va);var ya=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseMove=br(yr(c(r),r.handleMouseMove),vr),r.throttledHandleMouseSeek=br(yr(c(r),r.handleMouseSeek),vr),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.handleMouseDownHandler_=function(e){return r.handleMouseDown(e)},r.enable(),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(n||r){var i=t.el(),a=Fn(i),o=jn(i,e).x;o=ca(o,0,1),r&&r.update(a,o),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Kr(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Ur);ya.prototype.options_={children:["seekBar"]},Ur.registerComponent("ProgressControl",ya);var ba=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return r.handlePictureInPictureChange(e)})),r.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return r.handlePictureInPictureEnabledChange(e)})),r.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),r.hide()):r.show()})),r.disable(),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){o().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(Yi);ba.prototype.controlText_="Picture-in-Picture",Ur.registerComponent("PictureInPictureToggle",ba);var _a=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return r.handleFullscreenChange(e)})),!1===o()[t.fsApi_.fullscreenEnabled]&&r.disable(),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Yi);_a.prototype.controlText_="Fullscreen",Ur.registerComponent("FullscreenToggle",_a);var Ea=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(Ur);Ur.registerComponent("VolumeLevel",Ea);var Sa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=br(yr(c(r),r.update),vr),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,r){if(!n){var i=Nn(this.el_),a=Nn(this.player_.el()),o=e.width*t;if(!a||!i)return;var s=e.left-a.left+o,l=e.width-o+(a.right-e.right),u=i.width/2;s<u?u+=u-s:l<u&&(u=l),u<0?u=0:u>i.width&&(u=i.width),this.el_.style.right="-"+u+"px"}this.write(r+"%")},n.write=function(e){wn(this.el_,e)},n.updateVolume=function(e,t,n,r,i){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,r.toFixed(0)),i&&i()}))},t}(Ur);Ur.registerComponent("VolumeLevelTooltip",Sa);var wa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=br(yr(c(r),r.update),vr),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var r=this,i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(function(){n?r.el_.style.bottom=e.height*t+"px":r.el_.style.left=e.width*t+"px"}))},t}(Ur);wa.prototype.options_={children:["volumeLevelTooltip"]},Ur.registerComponent("MouseVolumeLevelDisplay",wa);var Ta=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on("slideractive",(function(e){return r.updateLastVolume_(e)})),r.on(t,"volumechange",(function(e){return r.updateARIAAttributes(e)})),t.ready((function(){return r.updateARIAAttributes()})),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){zn(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),r=Nn(n),i=this.vertical(),a=jn(n,e);a=i?a.y:a.x,a=ca(a,0,1),t.update(r,a,i)}zn(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(da);Ta.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},pn||Zt||Ta.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ta.prototype.playerEvent="volumechange",Ur.registerComponent("VolumeBar",Ta);var Ca=function(e){function t(t,n){var r;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||Ht(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(c(r=e.call(this,t,n)||this),t),r.throttledHandleMouseMove=br(yr(c(r),r.handleMouseMove),vr),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r.on("touchstart",(function(e){return r.handleMouseDown(e)})),r.on("mousemove",(function(e){return r.handleMouseMove(e)})),r.on(r.volumeBar,["focus","slideractive"],(function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")})),r.on(r.volumeBar,["blur","sliderinactive"],(function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")})),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Ur);Ca.prototype.options_={children:["volumeBar"]},Ur.registerComponent("VolumeControl",Ca);var ka=function(e){function t(t,n){var r;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(c(r=e.call(this,t,n)||this),t),r.on(t,["loadstart","volumechange"],(function(e){return r.update(e)})),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;pn&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)An(this.el_,"vjs-vol-"+n);kn(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(Yi);ka.prototype.controlText_="Mute",Ur.registerComponent("MuteToggle",ka);var Aa=function(e){function t(t,n){var r;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||Ht(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(r=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return r.handleKeyPress(e)},r.on(t,["loadstart"],(function(e){return r.volumePanelState_(e)})),r.on(r.muteToggle,"keyup",(function(e){return r.handleKeyPress(e)})),r.on(r.volumeControl,"keyup",(function(e){return r.handleVolumeControlKeyUp(e)})),r.on("keydown",(function(e){return r.handleKeyPress(e)})),r.on("mouseover",(function(e){return r.handleMouseOver(e)})),r.on("mouseout",(function(e){return r.handleMouseOut(e)})),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}h(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){u().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),cr(o(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),dr(o(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){u().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Ur);Aa.prototype.options_={children:["muteToggle","volumeControl"]},Ur.registerComponent("VolumePanel",Aa);var Pa=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",(function(e){return r.handleKeyDown(e)})),r.boundHandleBlur_=function(e){return r.handleBlur(e)},r.boundHandleTapClick_=function(e){return r.handleTapClick(e)},r}h(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof Ur&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof Ur&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=Sn(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),cr(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||o().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){u().isEventKey(e,"Left")||u().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(u().isEventKey(e,"Right")||u().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Ur);Ur.registerComponent("Menu",Pa);var xa=function(e){function t(t,n){var r;void 0===n&&(n={}),(r=e.call(this,t,n)||this).menuButton_=new Yi(t,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=Yi.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0;var a=function(e){return r.handleClick(e)};return r.handleMenuKeyUp_=function(e){return r.handleMenuKeyUp(e)},r.on(r.menuButton_,"tap",a),r.on(r.menuButton_,"click",a),r.on(r.menuButton_,"keydown",(function(e){return r.handleKeyDown(e)})),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),cr(o(),"keyup",r.handleMenuKeyUp_)})),r.on("mouseleave",(function(e){return r.handleMouseLeave(e)})),r.on("keydown",(function(e){return r.handleSubmenuKeyDown(e)})),r}h(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new Pa(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Sn("li",{className:"vjs-menu-title",textContent:Lr(this.options_.title),tabIndex:-1}),n=new Ur(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+Yi.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),dr(o(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),u().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(u().isEventKey(e,"Up")||u().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),u().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),pn&&_n())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Ur);Ur.registerComponent("MenuButton",xa);var Ia=function(e){function t(t,n){var r,i=n.tracks;if((r=e.call(this,t,n)||this).items.length<=1&&r.hide(),!i)return c(r);var a=yr(c(r),r.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),i.addEventListener("labelchange",a),r.player_.on("ready",a),r.player_.on("dispose",(function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a),i.removeEventListener("labelchange",a)})),r}return h(t,e),t}(xa);Ur.registerComponent("TrackButton",Ia);var Ma=["Tab","Esc","Up","Down","Right","Left"],Ra=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}h(t,e);var n=t.prototype;return n.createEl=function(t,n,r){this.nonIconControl=!0;var i=e.prototype.createEl.call(this,"li",qt({className:"vjs-menu-item",tabIndex:-1},n),r);return i.replaceChild(Sn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},n.handleKeyDown=function(t){Ma.some((function(e){return u().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Vi);Ur.registerComponent("MenuItem",Ra);var Oa=function(e){function t(t,n){var r,a=n.track,s=t.textTracks();n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode,(r=e.call(this,t,n)||this).track=a,r.kinds=(n.kinds||[n.kind||r.track.kind]).filter(Boolean);var l,u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(c(r),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply(c(r),t)};return t.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),s.addEventListener("selectedlanguagechange",d),r.on("dispose",(function(){t.off(["loadstart","texttrackchange"],u),s.removeEventListener("change",u),s.removeEventListener("selectedlanguagechange",d)})),void 0===s.onchange&&r.on(["tap","click"],(function(){if("object"!=typeof i().Event)try{l=new(i().Event)("change")}catch(e){}l||(l=o().createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(l)})),r.handleTracksChange(),r}h(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var a=r[i];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Ra);Ur.registerComponent("TextTrackMenuItem",Oa);var La=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}h(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Oa);Ur.registerComponent("OffTextTrackMenuItem",La);var Da=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return h(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Oa),this.label_&&(n=this.label_+" off"),e.push(new La(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}(Ia);Ur.registerComponent("TextTrackButton",Da);var Na=function(e){function t(t,n){var r,i=n.track,a=n.cue,o=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,(r=e.call(this,t,n)||this).track=i,r.cue=a,r}return h(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(Ra);Ur.registerComponent("ChaptersTrackMenuItem",Na);var Fa=function(e){function t(t,n,r){var i;return(i=e.call(this,t,n,r)||this).selectCurrentItem_=function(){i.items.forEach((function(e){e.selected(i.track_.activeCues[0]===e.cue)}))},i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Lr(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new Na(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(Da);Fa.prototype.kind_="chapters",Fa.prototype.controlText_="Chapters",Ur.registerComponent("ChaptersButton",Fa);var ja=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=t.textTracks(),o=yr(c(i),i.handleTracksChange);return a.addEventListener("change",o),i.on("dispose",(function(){a.removeEventListener("change",o)})),i}h(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Da);ja.prototype.kind_="descriptions",ja.prototype.controlText_="Descriptions",Ur.registerComponent("DescriptionsButton",ja);var Ba=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Da);Ba.prototype.kind_="subtitles",Ba.prototype.controlText_="Subtitles",Ur.registerComponent("SubtitlesButton",Ba);var Ua=function(e){function t(t,n){var r;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(r=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return h(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Oa);Ur.registerComponent("CaptionSettingsMenuItem",Ua);var qa=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ua(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Da);qa.prototype.kind_="captions",qa.prototype.controlText_="Captions",Ur.registerComponent("CaptionsButton",qa);var Va=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),a=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Sn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),i},t}(Oa);Ur.registerComponent("SubsCapsMenuItem",Va);var Ha=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(Lr(r.label_)),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ua(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,Va)},t}(Da);Ha.prototype.kinds_=["captions","subtitles"],Ha.prototype.controlText_="Subtitles",Ur.registerComponent("SubsCapsButton",Ha);var za=function(e){function t(t,n){var r,i=n.track,a=t.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,(r=e.call(this,t,n)||this).track=i,r.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(c(r),t)};return a.addEventListener("change",o),r.on("dispose",(function(){a.removeEventListener("change",o)})),r}h(t,e);var n=t.prototype;return n.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),a=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Sn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),r=0;r<n.length;r++){var i=n[r];i!==this.track&&(i.enabled=i===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Ra);Ur.registerComponent("AudioTrackMenuItem",za);var Wa=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new za(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(Ia);Wa.prototype.controlText_="Audio Track",Ur.registerComponent("AudioTrackButton",Wa);var Ga=function(e){function t(t,n){var r,i=n.rate,a=parseFloat(i,10);return n.label=i,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(r=e.call(this,t,n)||this).label=i,r.rate=a,r.on(t,"ratechange",(function(e){return r.update(e)})),r}h(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Ra);Ga.prototype.contentElType="button",Ur.registerComponent("PlaybackRateMenuItem",Ga);var Xa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",r.labelElId_),r.updateVisibility(),r.updateLabel(),r.on(t,"loadstart",(function(e){return r.updateVisibility(e)})),r.on(t,"ratechange",(function(e){return r.updateLabel(e)})),r.on(t,"playbackrateschange",(function(e){return r.handlePlaybackRateschange(e)})),r}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Sn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new Ga(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),r=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[r])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(xa);Xa.prototype.controlText_="Playback Rate",Ur.registerComponent("PlaybackRateMenuButton",Xa);var Ka=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,r){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,r)},t}(Ur);Ur.registerComponent("Spacer",Ka);var $a=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},t}(Ka);Ur.registerComponent("CustomControlSpacer",$a);var Ya=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Ur);Ya.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in o()&&Ya.prototype.options_.children.splice(Ya.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Ur.registerComponent("ControlBar",Ya);var Qa=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"error",(function(e){return r.open(e)})),r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Qr);Qa.prototype.options_=s({},Qr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ur.registerComponent("ErrorDisplay",Qa);var Ja="vjs-text-track-settings",Za=["#000","Black"],eo=["#00F","Blue"],to=["#0FF","Cyan"],no=["#0F0","Green"],ro=["#F0F","Magenta"],io=["#F00","Red"],ao=["#FFF","White"],oo=["#FF0","Yellow"],so=["1","Opaque"],lo=["0.5","Semi-Transparent"],uo=["0","Transparent"],co={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Za,ao,io,no,eo,oo,ro,to]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[so,lo,uo]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ao,Za,io,no,eo,oo,ro,to]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[so,lo]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[uo,lo,so]}};function ho(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}co.windowColor.options=co.backgroundColor.options;var po=function(e){function t(t,n){var r;return n.temporary=!1,(r=e.call(this,t,n)||this).updateDisplay=r.updateDisplay.bind(c(r)),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=Sn("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings(),r.close()})),r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults(),r.updateDisplay()})),Ut(co,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)})),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}h(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=co[e],a=i.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(i.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',r.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Sn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Sn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Sn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,r=this;return t=function(e,t,n){var i,a,o=(i=r.$(t.selector),a=t.parser,ho(i.options[i.options.selectedIndex].value,a));return void 0!==o&&(e[n]=o),e},void 0===(n={})&&(n=0),Bt(e=co).reduce((function(n,r){return t(n,e[r],r)}),n)},n.setValues=function(e){var t=this;Ut(co,(function(n,r){!function(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(ho(e.options[r].value,n)===t){e.selectedIndex=r;break}}(t.$(n.selector),e[r],n.parser)}))},n.setDefaults=function(){var e=this;Ut(co,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(i().localStorage.getItem(Ja))}catch(e){Nt.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i().localStorage.setItem(Ja,JSON.stringify(e)):i().localStorage.removeItem(Ja)}catch(e){Nt.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(Qr);Ur.registerComponent("TextTrackSettings",po);var fo=function(e){function t(t,n){var r,a=n.ResizeObserver||i().ResizeObserver;null===n.ResizeObserver&&(a=!1);var o=Dr({createEl:!a,reportTouchActivity:!1},n);return(r=e.call(this,t,o)||this).ResizeObserver=n.ResizeObserver||i().ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(e,t,n,r){var a;void 0===r&&(r=i());var o=function(){var t=this,n=arguments,i=function(){a=null,i=null,e.apply(t,n)};r.clearTimeout(a),a=r.setTimeout(i,100)};return o.cancel=function(){r.clearTimeout(a),a=null},o}((function(){r.resizeHandler()}),0,0,c(r)),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){dr(this,"resize",e),dr(this,"unload",t),t=null};cr(r.el_.contentWindow,"unload",t),cr(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(Ur);Ur.registerComponent("ResizeManager",fo);var mo={trackingThreshold:20,liveTolerance:15},go=function(e){function t(t,n){var r,i=Dr(mo,n,{createEl:!1});return(r=e.call(this,t,i)||this).handleVisibilityChange_=function(e){return r.handleVisibilityChange(e)},r.trackLiveHandler_=function(){return r.trackLive_()},r.handlePlay_=function(e){return r.handlePlay(e)},r.handleFirstTimeupdate_=function(e){return r.handleFirstTimeupdate(e)},r.handleSeeked_=function(e){return r.handleSeeked(e)},r.seekToLiveEdge_=function(e){return r.seekToLiveEdge(e)},r.reset_(),r.on(r.player_,"durationchange",(function(e){return r.handleDurationchange(e)})),r.on(r.player_,"canplay",(function(){return r.toggleTracking()})),sn&&"hidden"in o()&&"visibilityState"in o()&&r.on(o(),"visibilitychange",r.handleVisibilityChange_),r}h(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(o().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(i().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var r=this.liveCurrentTime(),a=this.player_.currentTime(),o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,vr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(o(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(Ur);Ur.registerComponent("LiveTracker",go);var vo,yo=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},bo=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=o().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=o().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",i().Element.prototype.appendChild.call(this,n),this.innerHTML}}),_o=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},Eo=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=function(e){return _o([e.el(),i().HTMLMediaElement.prototype,i().Element.prototype,bo],"innerHTML")}(e),a=function(n){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=n.apply(t,i);return yo(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=a(n[e]))})),Object.defineProperty(t,"innerHTML",Dr(r,{set:a(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},So=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?pi(i().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i().Element.prototype.setAttribute.call(this,"src",e),e}}),wo=function(e,t,n,r){void 0===r&&(r=!0);var i=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return r&&(a.set=i),Object.defineProperty(e,t,a)},To=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i=t.source,a=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var o=r.el_.childNodes,s=o.length,l=[];s--;){var u=o[s];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),a||r.el_.hasAttribute("crossorigin")||!mi(u.src)||(a=!0)):l.push(u))}for(var c=0;c<l.length;c++)r.el_.removeChild(l[c])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&a&&Nt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(cn||hn||tn)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}h(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return _o([e.el(),i().HTMLMediaElement.prototype,So],"src")}(e),r=t.setAttribute,a=t.load;Object.defineProperty(t,"src",Dr(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var a=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=a.call(t);return yo(e)||(e.triggerSourceset(""),Eo(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):yo(e)||Eo(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=a,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var r=t[n];"metadata"===r.kind&&e.push({track:r,storedMode:r.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var r=function n(){for(var r=0;r<e.length;r++){var i=e[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",r),t.addEventListener("change",r)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",r)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach((function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=wi[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(n){var r={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(r),"text"===e&&t[Ti.remoteText.getterName]().trigger(r)},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];r.addEventListener(e,n),t.on("dispose",(function(t){return r.removeEventListener(e,n)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}},n.proxyNativeTracks_=function(){var e=this;wi.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=o().createElement("video");var r=Dr({},this.options_.tag&&In(this.options_.tag));cn&&!0===this.options_.nativeControlsForTouch||delete r.controls,xn(e,qt(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&Rn(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],a=0;a<i.length;a++){var s=i[a],l=this.options_[s];void 0!==l&&(l?Rn(e,s,s):On(e,s),e[s]=l)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&fn?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){Nt(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&Zt&&an&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i().navigator&&i().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Kr(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=o().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i().performance&&"function"==typeof i().performance.now?e.creationTime=i().performance.now():i().performance&&i().performance.timing&&"number"==typeof i().performance.timing.navigationStart&&(e.creationTime=i().Date.now()-i().performance.timing.navigationStart),e},t}(ki);wo(To,"TEST_VID",(function(){if(yn()){var e=o().createElement("video"),t=o().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),To.isSupported=function(){try{To.TEST_VID.volume=.5}catch(e){return!1}return!(!To.TEST_VID||!To.TEST_VID.canPlayType)},To.canPlayType=function(e){return To.TEST_VID.canPlayType(e)},To.canPlaySource=function(e,t){return To.canPlayType(e.type)},To.canControlVolume=function(){try{var e=To.TEST_VID.volume;To.TEST_VID.volume=e/2+.1;var t=e!==To.TEST_VID.volume;return t&&pn?(i().setTimeout((function(){To&&To.prototype&&(To.prototype.featuresVolumeControl=e!==To.TEST_VID.volume)})),!1):t}catch(e){return!1}},To.canMuteVolume=function(){try{var e=To.TEST_VID.muted;return To.TEST_VID.muted=!e,To.TEST_VID.muted?Rn(To.TEST_VID,"muted","muted"):On(To.TEST_VID,"muted"),e!==To.TEST_VID.muted}catch(e){return!1}},To.canControlPlaybackRate=function(){if(Zt&&an&&on<58)return!1;try{var e=To.TEST_VID.playbackRate;return To.TEST_VID.playbackRate=e/2+.1,e!==To.TEST_VID.playbackRate}catch(e){return!1}},To.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(o().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},To.supportsNativeTextTracks=function(){return fn||pn&&an},To.supportsNativeVideoTracks=function(){return!(!To.TEST_VID||!To.TEST_VID.videoTracks)},To.supportsNativeAudioTracks=function(){return!(!To.TEST_VID||!To.TEST_VID.audioTracks)},To.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];wo(To.prototype,t,(function(){return To[n]()}),!0)})),To.prototype.featuresVolumeControl=To.canControlVolume(),To.prototype.movingMediaElementInDOM=!pn,To.prototype.featuresFullscreenResize=!0,To.prototype.featuresProgressEvents=!0,To.prototype.featuresTimeupdateEvents=!0,To.prototype.featuresVideoFrameCallback=!(!To.TEST_VID||!To.TEST_VID.requestVideoFrameCallback),To.patchCanPlayType=function(){en>=4&&!nn&&!an&&(vo=To.TEST_VID&&To.TEST_VID.constructor.prototype.canPlayType,To.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":vo.call(this,e)})},To.unpatchCanPlayType=function(){var e=To.TEST_VID.constructor.prototype.canPlayType;return vo&&(To.TEST_VID.constructor.prototype.canPlayType=vo),e},To.patchCanPlayType(),To.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},To.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){To.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){To.prototype["set"+Lr(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){To.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){To.prototype["set"+Lr(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){To.prototype[e]=function(){return this.el_[e]()}})),ki.withSourceHandlers(To),To.nativeSourceHandler={},To.nativeSourceHandler.canPlayType=function(e){try{return To.TEST_VID.canPlayType(e)}catch(e){return""}},To.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return To.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=fi(e.src);return To.nativeSourceHandler.canPlayType("video/"+n)}return""},To.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},To.nativeSourceHandler.dispose=function(){},To.registerSourceHandler(To.nativeSourceHandler),ki.registerTech("Html5",To);var Co=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ko={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ao=["tiny","xsmall","small","medium","large","xlarge","huge"],Po={};Ao.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Po[e]="vjs-layout-"+t}));var xo={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Io=function(e){function t(n,r,i){var a;if(n.id=n.id||r.id||"vjs_video_"+rr(),(r=qt(t.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&s.getAttribute&&(r.language=s.getAttribute("lang"))}else for(var l=n;l&&1===l.nodeType;){if(In(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}if((a=e.call(this,null,r,i)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=Ft(a.id_),a.fsApi_=It,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&In(n),a.language(a.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach((function(e){u[e.toLowerCase()]=r.languages[e]})),a.languages_=u}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),Ir(c(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(cr(o(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var d=Dr(a.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){a[e](r.plugins[e])})),r.debug&&a.debug(!0),a.options_.playerOptions=d,a.middleware_=[],a.playbackRates(r.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),cn&&a.addClass("vjs-touch-enabled"),pn||a.addClass("vjs-workinghover"),t.players[a.id_]=c(a);var h=kt.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}h(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),dr(o(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),dr(o(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Pi[this.id()]=null,Ci.names.forEach((function(e){var t=Ci[e],r=n[t.getterName]();r&&r.off&&r.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:a||(t=this.el_=e.prototype.createEl.call(this,"div"));var s=In(n);if(a){for(t=this.el_=n,n=this.tag=o().createElement("video");t.children.length;)n.appendChild(t.firstChild);Cn(t,"video-js")||kn(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),s.tabindex="-1",(sn||an&&un)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(e){a&&"class"===e||t.setAttribute(e,s[e]),a&&n.setAttribute(e,s[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==i().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=er("vjs-styles-dimensions");var l=Gn(".vjs-styles-defaults"),u=Gn("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var c=n.getElementsByTagName("a"),d=0;d<c.length;d++){var h=c.item(d);kn(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),Tn(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):Nt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?Nt.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){var t,n,r=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Sr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){r.on(["playerreset","resize"],r.boundUpdateStyleEl_)},Sr(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==i().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),tr(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(o>=0&&(l.width=o),s>=0&&(l.height=s))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=Lr(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(ki.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ci.names.forEach((function(e){var t=Ci[e];o[t.getterName]=n[t.privateName]})),qt(o,this.options_[r]),qt(o,this.options_[i]),qt(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s,l,u=ki.getTech(e);if(!u)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new u(o),this.tech_.ready(yr(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],l=this.tech_,s.forEach((function(e){var t=l.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return t.addCue(e)}))})),l.textTracks(),Co.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+Lr(e)+"_"](t)}))})),Object.keys(ko).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+ko[e]+"_"].bind(n),event:t}):n["handleTech"+ko[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||Tn(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,n,r=this;Ci.names.forEach((function(e){var t=Ci[e];r[t.privateName]=r[t.getterName]()})),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),Array.prototype.map.call(t,(function(e){var t=$r(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map($r))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&Nt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var r=t.play();if(Xr(r))return r.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():Xr(n=this.play())&&(n=n.catch(r)),Xr(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return ji(t)}(this,t)),this.cache_.source=Dr({},e,{src:t,type:n});for(var r=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var l=In(a[s]);i.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(Nt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Kr(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),r=o()[this.fsApi_.fullscreenElement]===n;!r&&n.matches?r=n.matches(":"+this.fsApi_.fullscreen):!r&&n.msMatchesSelector&&(r=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in Oi)return function(e,t,n,r){return t[n](e.reduce(Di(n),r))}(this.middleware_,this.tech_,e,t);if(e in Li)return Mi(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw Nt(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Ri)return function(e,t,n){return e.reduceRight(Di(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Li)return Mi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Nt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw Nt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw Nt(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||i().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=Kr),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),r=Boolean(fn||pn);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&r&&this.load());var i=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||Hr(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Hr(0,0)),e},n.bufferedPercent=function(){return zr(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||i().Promise;if(t){var n=this;return new t((function(t,r){function i(){n.off("fullscreenerror",o),n.off("fullscreenchange",a)}function a(){i(),t()}function o(e,t){i(),r(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",o);var s=n.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(t,r))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),r}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||i().Promise;if(e){var t=this;return new e((function(e,n){function r(){t.off("fullscreenerror",a),t.off("fullscreenchange",i)}function i(){r(),e()}function a(e,t){r(),n(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",a);var o=t.exitFullscreenHelper_();o&&(o.then(r,r),o.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=o()[this.fsApi_.exitFullscreen]();return t&&Kr(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=o().documentElement.style.overflow,cr(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow="hidden",kn(o().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){u().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,dr(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow=this.docOrigOverflow,An(o().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in o()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in o())return o().exitPictureInPicture()},n.handleKeyDown=function(e){var t,n,r=this.options_.userActions;r&&r.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof r.hotkeys?r.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=void 0===n?function(e){return u().isEventKey(e,"f")}:n,i=t.muteKey,a=void 0===i?function(e){return u().isEventKey(e,"m")}:i,s=t.playPauseKey,l=void 0===s?function(e){return u().isEventKey(e,"k")||u().isEventKey(e,"Space")}:s;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var c=Ur.getComponent("FullscreenToggle");!1!==o()[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ur.getComponent("MuteToggle").prototype.handleClick.call(this,e)):l.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ur.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=ki.getTech(i);if(a||(a=Ur.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else Nt.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n,r=this,i=this.options_.techOrder.map((function(e){return[e,ki.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(Nt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),a=function(e,t,n){var r;return e.some((function(e){return t.some((function(t){if(r=n(e,t))return!0}))})),r},o=function(e,t){var n=e[0];if(e[1].canPlaySource(t,r.options_[n.toLowerCase()]))return{source:t,tech:n}};return t=this.options_.sourceOrder?a(e,i,(n=o,function(e,t){return n(t,e)})):a(i,e,o),t||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r=Bi(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),Ii(this,r[0],(function(e,i){var a,o;if(n.middleware_=i,t||(n.cache_.sources=r),n.updateSourceCaches_(e),n.src_(e))return r.length>1?n.handleSrc_(r.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());a=i,o=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(o)}))})),this.options_.retryOnError&&r.length>1){var i=function(){n.error(null),n.handleSrc_(r.slice(1),!0)},a=function(){n.off("error",i)};this.one("error",i),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",i),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,Lr(t)!==Lr(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready((function(){r.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||i().Promise;this.paused()||!t?this.doReset_():Kr(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Sr(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(Pt("beforeerror").forEach((function(n){var r=n(t,e);Vt(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Wr(e),this.addClass("vjs-error"),Nt.error("(CODE:"+this.error_.code+" "+Wr.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Pt("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=yr(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",i),this.on("mouseleave",i);var a,o=this.getChild("controlBar");!o||pn||Zt||(o.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||i().Promise;if(n){if(e){var r=[];return this.isInPictureInPicture()&&r.push(this.exitPictureInPicture()),this.isFullscreen()&&r.push(this.exitFullscreen()),this.audioPosterMode()&&r.push(this.audioPosterMode(!1)),n.all(r).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||i().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Sr(this)&&this.trigger("languagechange"))},n.languages=function(){return Dr(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Dr(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=Dr(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new Qr(this,t);return this.addChild(r),r.on("dispose",(function(){n.removeChild(r)})),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Ao.length;n++){var r=Ao[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Po[e]),this.addClass(Po[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=qt({},xo,e),this.updateCurrentBreakpoint_()),qt(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Po[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Dr(e);var r=this.cache_.media,i=r.artwork,a=r.poster,o=r.src,s=r.textTracks;!i&&a&&(this.cache_.media.artwork=[{src:a,type:ji(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:ji(t.poster)}]),t}return Dr(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=In(e),r=n["data-setup"];if(Cn(e,"vjs-fill")&&(n.fill=!0),Cn(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=f()(r||"{}"),a=i[0],o=i[1];a&&Nt.error(a),qt(n,o)}if(qt(t,n),e.hasChildNodes())for(var s=e.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(In(c)):"track"===d&&t.tracks.push(In(c))}return t},n.flexNotSupported_=function(){var e=o().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(Ur);Ci.names.forEach((function(e){var t=Ci[e];Io.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Io.prototype.crossorigin=Io.prototype.crossOrigin,Io.players={};var Mo=i().navigator;Io.prototype.options_={techOrder:ki.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Mo&&(Mo.languages&&Mo.languages[0]||Mo.userLanguage||Mo.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Io.prototype[e]=function(){return this.techGet_(e)}})),Co.forEach((function(e){Io.prototype["handleTech"+Lr(e)+"_"]=function(){return this.trigger(e)}})),Ur.registerComponent("Player",Io);var Ro="plugin",Oo="activePlugins_",Lo={},Do=function(e){return Lo.hasOwnProperty(e)},No=function(e){return Do(e)?Lo[e]:void 0},Fo=function(e,t){e[Oo]=e[Oo]||{},e[Oo][t]=!0},jo=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Bo=function(e,t){return t.prototype.name=e,function(){jo(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=_(t,[this].concat(r));return this[e]=function(){return a},jo(this,a.getEventHash()),a}},Uo=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Ir(this),delete this.trigger,Rr(this,this.constructor.defaultState),Fo(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),hr(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Oo][e]=!1,this.player=this.state=null,t[e]=Bo(e,Lo[e])},e.isBasic=function(t){var n="string"==typeof t?No(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Do(t))Nt.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Io.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Lo[t]=n,t!==Ro&&(e.isBasic(n)?Io.prototype[t]=function(e,t){var n=function(){jo(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Fo(this,e),jo(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Io.prototype[t]=Bo(t,n)),n},e.deregisterPlugin=function(e){if(e===Ro)throw new Error("Cannot de-register base plugin.");Do(e)&&(delete Lo[e],delete Io.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Lo)),e.forEach((function(e){var n=No(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=No(e);return t&&t.VERSION||""},e}();Uo.getPlugin=No,Uo.BASE_PLUGIN_NAME=Ro,Uo.registerPlugin(Ro,Uo),Io.prototype.usingPlugin=function(e){return!!this[Oo]&&!0===this[Oo][e]},Io.prototype.hasPlugin=function(e){return!!Do(e)};var qo=!1,Vo=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Ho(e,t,n){var r=Ho.getPlayer(e);if(r)return t&&Nt.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?Gn("#"+Vo(e)):e;if(!bn(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||Nt.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Pt("beforesetup").forEach((function(e){var n=e(i,Dr(t));Vt(n)&&!Array.isArray(n)?t=Dr(t,n):Nt.error("please return an object in beforesetup hooks")}));var a=Ur.getComponent("Player");return r=new a(i,t,n),Pt("setup").forEach((function(e){return e(r)})),r}if(Ho.hooks_=At,Ho.hooks=Pt,Ho.hook=function(e,t){Pt(e,t)},Ho.hookOnce=function(e,t){Pt(e,[].concat(t).map((function(t){return function n(){return xt(e,n),t.apply(void 0,arguments)}})))},Ho.removeHook=xt,!0!==i().VIDEOJS_NO_DYNAMIC_STYLE&&yn()){var zo=Gn(".vjs-styles-defaults");if(!zo){zo=er("vjs-styles-defaults");var Wo=Gn("head");Wo&&Wo.insertBefore(zo,Wo.firstChild),tr(zo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Qn(1,Ho),Ho.VERSION=kt,Ho.options=Io.prototype.options_,Ho.getPlayers=function(){return Io.players},Ho.getPlayer=function(e){var t,n=Io.players;if("string"==typeof e){var r=Vo(e),i=n[r];if(i)return i;t=Gn("#"+r)}else t=e;if(bn(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},Ho.getAllPlayers=function(){return Object.keys(Io.players).map((function(e){return Io.players[e]})).filter(Boolean)},Ho.players=Io.players,Ho.getComponent=Ur.getComponent,Ho.registerComponent=function(e,t){ki.isTech(t)&&Nt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ur.registerComponent.call(Ur,e,t)},Ho.getTech=ki.getTech,Ho.registerTech=ki.registerTech,Ho.use=function(e,t){Ai[e]=Ai[e]||[],Ai[e].push(t)},Object.defineProperty(Ho,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ho.middleware,"TERMINATOR",{value:xi,writeable:!1,enumerable:!0}),Ho.browser=mn,Ho.TOUCH_ENABLED=cn,Ho.extend=function(e,t){void 0===t&&(t={}),qo||(Nt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),qo=!0);var n=function(){e.apply(this,arguments)},r={};for(var i in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(n,e),e&&(n.super_=e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},Ho.mergeOptions=Dr,Ho.bind=yr,Ho.registerPlugin=Uo.registerPlugin,Ho.deregisterPlugin=Uo.deregisterPlugin,Ho.plugin=function(e,t){return Nt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Uo.registerPlugin(e,t)},Ho.getPlugins=Uo.getPlugins,Ho.getPlugin=Uo.getPlugin,Ho.getPluginVersion=Uo.getPluginVersion,Ho.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Ho.options.languages=Dr(Ho.options.languages,((n={})[e]=t,n)),Ho.options.languages[e]},Ho.log=Nt,Ho.createLogger=Ft,Ho.createTimeRange=Ho.createTimeRanges=Hr,Ho.formatTime=na,Ho.setFormatTime=function(e){ta=e},Ho.resetFormatTime=function(){ta=ea},Ho.parseUrl=hi,Ho.isCrossOrigin=mi,Ho.EventTarget=_r,Ho.on=cr,Ho.one=pr,Ho.off=dr,Ho.trigger=hr,Ho.xhr=g(),Ho.TextTrack=bi,Ho.AudioTrack=_i,Ho.VideoTrack=Ei,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Ho[e]=function(){return Nt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Kn[e].apply(null,arguments)}})),Ho.computedStyle=zt,Ho.dom=Kn,Ho.url=gi,Ho.defineLazyProperty=wo,Ho.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Go=w,Xo=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},Ko=function(e){return Ho.log.debug?Ho.log.debug.bind(Ho,"VHS:",e+" >"):function(){}},$o=1/30,Yo=.1,Qo=function(e,t){var n,r=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return Ho.createTimeRanges(r)},Jo=function(e,t){return Qo(e,(function(e,n){return e-Yo<=t&&n+Yo>=t}))},Zo=function(e,t){return Qo(e,(function(e){return e-$o>=t}))},es=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},ts=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},ns=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},rs=function(e,t){var n=0;if(!e||!e.length)return n;for(var r=0;r<e.length;r++){var i=e.start(r),a=e.end(r);t>a||(n+=t>i&&t<=a?a-t:a-i)}return n},is=Ho.createTimeRange,as=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},os=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},ss=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},ls=function(e){var t=e.preloadSegment;if(t){var n=t.parts;return(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0)+(n&&n.length?n.length:0)}},us=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=ss(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},cs=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=as(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;var i=function(e,t){for(var n,r=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=as(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},ds=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i()[1/0]}return cs(e,t,n)},hs=function(e){var t=e.defaultDuration,n=e.durationList,r=e.startIndex,i=e.endIndex,a=0;if(r>i){var o=[i,r];r=o[0],i=o[1]}if(r<0){for(var s=r;s<Math.min(0,i);s++)a+=t;r=0}for(var l=r;l<i;l++)a+=n[l].duration;return a},ps=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return ds(e);if(null===t)return null;t=t||0;var i=cs(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:us(null,e)),Math.max(0,i)},fs=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},ms=function(e){return e.excludeUntil&&e.excludeUntil===1/0},gs=function(e){var t=fs(e);return!e.disabled&&!t},vs=function(e,t){return t.attributes&&t.attributes[e]},ys=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!gs(e)&&(e.attributes.BANDWIDTH||0)<n})).length},bs=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},_s=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var i in n){for(var a in n[i])if(r=t(n[i][a]))break;if(r)break}return!!r},Es=function(e){if(!e||!e.playlists||!e.playlists.length)return _s(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;return r&&r.split(",").every((function(e){return G(e)}))||_s(e,(function(e){return bs(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var r=t(n);if("continue"!==r&&"object"==typeof r)return r.v}return!0},Ss={liveEdgeDelay:us,duration:ds,seekable:function(e,t,n){var r=t||0,i=ps(e,t,!0,n);return null===i?is():is(r,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,r=e.startingSegmentIndex,i=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,s=n-a,l=os(t),u=0,c=0;c<l.length;c++){var d=l[c];if(r===d.segmentIndex&&("number"!=typeof i||"number"!=typeof d.partIndex||i===d.partIndex)){u=c;break}}if(s<0){if(u>0)for(var h=u-1;h>=0;h--){var p=l[h];if(s+=p.duration,o){if(s<0)continue}else if(s+$o<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-hs({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(u<0){for(var f=u;f<0;f++)if((s-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};u=0}for(var m=u;m<l.length;m++){var g=l[m];if(s-=g.duration,o){if(s>0)continue}else if(s-$o>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+hs({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:m})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:n}},isEnabled:gs,isDisabled:function(e){return e.disabled},isBlacklisted:fs,isIncompatible:ms,playlistEnd:ps,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:vs,estimateSegmentRequestTime:function(e,t,n,r){return void 0===r&&(r=0),vs("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:ys,isAudioOnly:Es,playlistMatch:bs,segmentDurationWithParts:as},ws=Ho.log,Ts=function(e,t){return e+"-"+t},Cs=function(e,t,n){return"placeholder-uri-"+e+"-"+t+"-"+n},ks=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}}))},As=function(e){var t=e.playlist,n=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},Ps=function(e,t,n){void 0===n&&(n=Cs),e.uri=t;for(var r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){var i="placeholder-uri-"+r;e.playlists[r].uri=i}var a=Es(e);ks(e,(function(t,r,i,o){if(!t.playlists||!t.playlists.length){if(a&&"AUDIO"===r&&!t.uri)for(var l=0;l<e.playlists.length;l++){var u=e.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===i)return}t.playlists=[s({},t)]}t.playlists.forEach((function(t,a){var s=n(r,i,o,t),l=Ts(a,s);t.uri?t.resolvedUri=t.resolvedUri||Go(e.uri,t.uri):(t.uri=0===a?s:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];As({playlist:n,id:Ts(t,n.uri)}),n.resolvedUri=Go(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||ws.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){ks(e,(function(t){t.uri&&(t.resolvedUri=Go(e.uri,t.uri))}))}(e)},xs=Ho.mergeOptions,Is=Ho.EventTarget,Ms=function(e,t){if(!e)return t;var n=xs(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=xs(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Rs=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Go(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Go(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Go(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Go(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=Go(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=Go(t,e.uri))}))},Os=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var r=0;r<n.preloadHints.length;r++)if("MAP"===n.preloadHints[r].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Ls=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Ds=function(e,t,n){void 0===n&&(n=Ls);var r=xs(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=Os(t);var a=xs(i,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var r=e.slice(),i=t.slice();n=n||0;for(var a,o=[],s=0;s<i.length;s++){var l=r[s+n],u=i[s];l?(a=l.map||a,o.push(Ms(l,u))):(a&&!u.map&&(u.map=a),o.push(u))}return o}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}a.segments.forEach((function(e){Rs(e,a.resolvedUri)}));for(var s=0;s<r.playlists.length;s++)r.playlists[s].id===t.id&&(r.playlists[s]=a);return r.playlists[t.id]=a,r.playlists[t.uri]=a,ks(e,(function(e,n,r,i){if(e.playlists)for(var o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=a)})),r},Ns=function(e,t){var n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],a=i&&i.duration||r&&r.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},Fs=function(e){function t(t,n,r){var i;if(void 0===r&&(r={}),i=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");i.logger_=Ko("PlaylistLoader");var a=r,o=a.withCredentials,s=void 0!==o&&o,l=a.handleManifestRedirects,u=void 0!==l&&l;i.src=t,i.vhs_=n,i.withCredentials=s,i.handleManifestRedirects=u;var d=n.options_;return i.customTagParsers=d&&d.customTagParsers||[],i.customTagMappers=d&&d.customTagMappers||[],i.experimentalLLHLS=d&&d.experimentalLLHLS||!1,Ho.browser.IE_VERSION&&(i.experimentalLLHLS=!1),i.state="HAVE_NOTHING",i.handleMediaupdatetimeout_=i.handleMediaupdatetimeout_.bind(c(i)),i.on("mediaupdatetimeout",i.handleMediaupdatetimeout_),i}h(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=Go(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,a=t.mediaSequence+t.segments.length;if(r){var o=r.parts||[],s=ls(t)-1;s>-1&&s!==o.length-1&&(n._HLS_part=s),(s>-1||o.length)&&a--}n._HLS_msn=a}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new(i().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&l.searchParams.set(e,n[e])})),e=l.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var r=t.uri,i=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+r+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,r=e.manifestString,i=e.customTagParsers,a=void 0===i?[]:i,o=e.customTagMappers,s=void 0===o?[]:o,l=e.experimentalLLHLS,u=new U;t&&u.on("warn",t),n&&u.on("info",n),a.forEach((function(e){return u.addParser(e)})),s.forEach((function(e){return u.addTagMapper(e)})),u.push(r),u.end();var c=u.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){c.hasOwnProperty(e)&&delete c[e]})),c.segments&&c.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!c.targetDuration){var d=10;c.segments&&c.segments.length&&(d=c.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+d),c.targetDuration=d}var h=ss(c);if(h.length&&!c.partTargetDuration){var p=h.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+p),ws.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=p}return c}({onwarn:function(e){var r=e.message;return t.logger_("m3u8-parser warn for "+n+": "+r)},oninfo:function(e){var r=e.message;return t.logger_("m3u8-parser info for "+n+": "+r)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,r=e.url,i=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:r,manifestString:t});a.lastRequest=Date.now(),As({playlist:a,uri:r,id:i});var o=Ds(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.master=o,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ns(this.media(),!!o)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),i().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(i().clearTimeout(this.finalRenditionTimeout),t){var r=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=i().setTimeout(this.media.bind(this,e,!1),r)}else{var a=this.state,o=!this.media_||e.id!==this.media_.id,s=this.master.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),"HAVE_MASTER"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Ns(e,!0)),o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=Xo(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e,a);n.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===a?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=i().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=i().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=i().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Xo(e.handleManifestRedirects,e.src,n);var r=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(r)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Ps(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Os(e),e.segments.forEach((function(t){Rs(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||i().location.href;this.master=function(e,t){var n=Ts(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:i().location.href,resolvedUri:i().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Is),js=Ho.xhr,Bs=Ho.mergeOptions,Us=function(e,t,n,r){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},qs=function(){var e=function e(t,n){t=Bs({timeout:45e3},t);var r=e.beforeRequest||Ho.Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var a=(!0===Ho.Vhs.xhr.original?js:Ho.Vhs.xhr)(t,(function(e,t){return Us(a,e,t,n)})),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},Vs=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?i().BigInt(t.offset)+i().BigInt(t.length)-i().BigInt(1):t.offset+t.length-1)),n},Hs=function(e,t){return e.start(t)+"-"+e.end(t)},zs=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Ws=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Gs=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];ee(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},Xs=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Ks=function(e){return e.resolvedUri},$s=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=0;i<t.length/n;i++)r+=t.slice(i*n,i*n+n).map(zs).join("")+" "+t.slice(i*n,i*n+n).map(Ws).join("")+"\n";return r},Ys=Object.freeze({__proto__:null,createTransferableMessage:Gs,initSegmentId:Xs,segmentKeyId:Ks,hexDump:$s,tagDump:function(e){var t=e.bytes;return $s(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=Hs(e,t)+" ";return n}}),Qs=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,o=t.seekTo,s=t.pauseAfterSeek,l=void 0===s||s,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!o)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var d=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(r=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,l=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return n>new Date(s.getTime()+1e3*l)?null:(n>s&&(r=o),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ss.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!d)return c({message:n+" was not found in the stream"});var h=d.segment,p=function(e,t){var n,r;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(h.dateTimeObject,n);if("estimate"===d.type)return 0===a?c({message:n+" is not buffered yet. Try again"}):(o(d.estimatedStart+p),void u.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:a-1,seekTo:o,pauseAfterSeek:l,tech:u,callback:c})})));var f=h.start+p;u.one("seeked",(function(){return c(null,u.currentTime())})),l&&u.pause(),o(f)},Js=function(e,t){if(4===e.readyState)return t()},Zs=Ho.EventTarget,el=Ho.mergeOptions,tl=function(e,t){if(!Ls(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(r.byterange||i.byterange){var a=r.byterange,o=i.byterange;if(a&&!o||!a&&o)return!1;if(a.offset!==o.offset||a.length!==o.length)return!1}}return!0},nl=function(e,t,n,r){return"placeholder-uri-"+e+"-"+t+"-"+(r.attributes.NAME||n)},rl=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},il=function(e,t){var n={};for(var r in e){var i=e[r].sidx;if(i){var a=Ce(i);if(!t[a])break;var o=t[a].sidxInfo;rl(o,i)&&(n[a]=t[a])}}return n},al=function(e){function t(t,n,r,i){var a;void 0===r&&(r={}),(a=e.call(this)||this).masterPlaylistLoader_=i||c(a),i||(a.isMaster_=!0);var o=r,s=o.withCredentials,l=void 0!==s&&s,u=o.handleManifestRedirects,d=void 0!==u&&u;if(a.vhs_=n,a.withCredentials=l,a.handleManifestRedirects=d,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=Ko("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}h(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var r=this,a=e.sidx&&Ce(e.sidx);if(e.sidx&&a&&!this.masterPlaylistLoader_.sidxMapping_[a]){var o=Xo(this.handleManifestRedirects,e.sidx.resolvedUri),s=function(i,o){if(!r.requestErrored_(i,o,t)){var s,l=r.masterPlaylistLoader_.sidxMapping_;try{s=Ze()(te(o.response).subarray(8))}catch(e){return void r.requestErrored_(e,o,t)}return l[a]={sidxInfo:e.sidx,sidx:s},be(e,s,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var r,i=[],a=!1,o=function(e,t,r,i){return t.abort(),a=!0,n(e,t,r,i)},s=function(e,t){if(!a){if(e)return o(e,t,"",i);var n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return te(t[0]);var r=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),i=new Uint8Array(r),a=0;return t.forEach((function(e){e=te(e),i.set(e,a),a+=e.byteLength})),i}(i,ae(n,!0)),r=r||tt(i),i.length<10||r&&i.length<r+2)return Js(t,(function(){return o(e,t,"",i)}));var s=_t(i);return"ts"===s&&i.length<188||!s&&i.length<376?Js(t,(function(){return o(e,t,"",i)})):o(null,t,s,i)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Us(e,null,{statusCode:e.status},s)}))}},u=t(l,(function(e,t){return Us(u,e,t,s)}));return u}(o,this.vhs_.xhr,(function(t,n,i,a){if(t)return s(t,n);if(!i||"mp4"!==i)return s({status:n.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+o,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var l=e.sidx.byterange,u=l.offset,c=l.length;if(a.length>=c+u)return s(t,{response:a.subarray(u,u+c),status:n.status,uri:n.uri});r.request=r.vhs_.xhr({uri:o,responseType:"arraybuffer",headers:Vs({byterange:e.sidx.byterange})},s)}))}else this.mediaRequest_=i().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},i().clearTimeout(this.minimumUpdatePeriodTimeout_),i().clearTimeout(this.mediaRequest_),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(r){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(i().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=i().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,r){if(!t.requestErrored_(n,r)){var i=r.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?t.masterLoaded_=Date.parse(r.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=Xo(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,r),i?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(r,i)}))):e(r,i)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t,n=this,r=(t=this.masterPlaylistLoader_.masterXml_,function(e){var t=Ve(e,"UTCTiming")[0];if(!t)return null;var n=Ge(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(Qe(t)));return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Go(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(t)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var a;a="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):n.masterLoaded_:Date.parse(i.responseText),n.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,r=this.masterPlaylistLoader_.master,i=(n=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,a=n.NOW,o=void 0===a?Date.now():a,s=n.clientOffset,l=void 0===s?0:s,u=Ve(e,"Period");if(!u.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var c=Ve(e,"Location"),d=Ge(e),h=Ke([i],Ve(e,"BaseURL"));d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=o,d.clientOffset=l,c.length&&(d.locations=c.map(He));var p=[];return u.forEach((function(e,t){var n=Ge(e),r=p[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,r=e.mpdType;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==r?null:0}({attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:d.type}),p.push({node:e,attributes:n})})),{locations:d.locations,representationInfo:de(p.map(Ye(d,h)))}}(Qe(e),t),r=n.representationInfo.map(qe);return Le({dashPlaylists:r,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}((e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:r}).masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),Ps(n,t,nl),n);r&&(i=function(e,t,n){for(var r=!0,i=el(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var s=Ce(o.sidx);n&&n[s]&&n[s].sidx&&be(o,n[s].sidx,o.sidx.resolvedUri)}var l=Ds(i,o,tl);l&&(i=l,r=!1)}return ks(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].id,s=Ds(i,e.playlists[0],tl);s&&(a in(i=s).mediaGroups[t][n]||(i.mediaGroups[t][n][a]=e),i.mediaGroups[t][n][a].playlists[0]=i.playlists[o],r=!1)}})),function(e,t){ks(e,(function(n,r,i,a){a in t.mediaGroups[r][i]||delete e.mediaGroups[r][i][a]}))}(i,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i}(r,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||r;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!r||i&&i.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(i().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=i().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var r,i,a;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(r=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,a=il(r.playlists,i),ks(r,(function(e,t,n,r){if(e.playlists&&e.playlists.length){var o=e.playlists;a=el(a,il(o,i))}})),a),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,r=!this.media_||this.media_!==n[e];r?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=i().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),Ns(t.media(),Boolean(r))))}(),this.trigger("loadedplaylist")},t}(Zs),ol={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},sl=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},ll=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=sl(new Worker(t));n.objURL=t;var r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},ul=function(e){return"var browserWorkerPolyFill = "+sl.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},cl=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},dl=ul(cl((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,r,i,a,o,s,l,u,c,d,h,p,f,m,g,v,y,b,_,E,S,w,T,C,k,A,P,x,I,M,R,O,L,D,N,F,j,B,U,q,V=e,H=Math.pow(2,32),z={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},W=z.MAX_UINT32;!function(){var e;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);T=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:A,audio:P},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0]),O=new Uint8Array([0,0,0,0,0,0,0,0]),L=O,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=O,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return t(w.dinf,t(w.dref,R))},i=function(e){return t(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(w.hdlr,x[e])},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(w.mdhd,n)},f=function(e){return t(w.mdia,m(e),g(e.type),s(e))},o=function(e){return t(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(w.minf,"video"===e.type?t(w.vmhd,I):t(w.smhd,M),r(),y(e))},l=function(e,n){for(var r=[],i=n.length;i--;)r[i]=_(n[i]);return t.apply(null,[w.moof,o(e)].concat(r))},u=function(e){for(var n=e.length,r=[];n--;)r[n]=h(e[n]);return t.apply(null,[w.moov,d(4294967295)].concat(r).concat(c(e)))},c=function(e){for(var n=e.length,r=[];n--;)r[n]=E(e[n]);return t.apply(null,[w.mvex].concat(r))},d=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(w.mvhd,n)},v=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(w.sdtp,a)},y=function(e){return t(w.stbl,b(e),t(w.stts,N),t(w.stsc,L),t(w.stsz,D),t(w.stco,O))},b=function(e){return t(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?F(e):j(e))},F=function(e){var n,r,i=e.sps||[],a=e.pps||[],o=[],s=[];for(n=0;n<i.length;n++)o.push((65280&i[n].byteLength)>>>8),o.push(255&i[n].byteLength),o=o.concat(Array.prototype.slice.call(i[n]));for(n=0;n<a.length;n++)s.push((65280&a[n].byteLength)>>>8),s.push(255&a[n].byteLength),s=s.concat(Array.prototype.slice.call(a[n]));if(r=[w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],o,[a.length],s))),t(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];r.push(t(w.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,r)},j=function(e){return t(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},p=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(w.tkhd,n)},_=function(e){var n,r,i,a,o,s;return n=t(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/W),s=Math.floor(e.baseMediaDecodeTime%W),r=t(w.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(i=S(e,92),t(w.traf,n,r,i)):(a=v(e),i=S(e,a.length+92),t(w.traf,n,r,i,a))},h=function(e){return e.duration=e.duration||4294967295,t(w.trak,p(e),f(e))},E=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(w.trex,n)},q=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},U=function(e,n){var r,i,a,o,s,l;for(n+=20+16*(o=e.samples||[]).length,a=q(o,n),(i=new Uint8Array(a.length+16*o.length)).set(a),r=a.length,l=0;l<o.length;l++)s=o[l],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size,i[r++]=s.flags.isLeading<<2|s.flags.dependsOn,i[r++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,i[r++]=61440&s.flags.degradationPriority,i[r++]=15&s.flags.degradationPriority,i[r++]=(4278190080&s.compositionTimeOffset)>>>24,i[r++]=(16711680&s.compositionTimeOffset)>>>16,i[r++]=(65280&s.compositionTimeOffset)>>>8,i[r++]=255&s.compositionTimeOffset;return t(w.trun,i)},B=function(e,n){var r,i,a,o,s,l;for(n+=20+8*(o=e.samples||[]).length,a=q(o,n),(r=new Uint8Array(a.length+8*o.length)).set(a),i=a.length,l=0;l<o.length;l++)s=o[l],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size;return t(w.trun,r)},S=function(e,t){return"audio"===e.type?B(e,t):U(e,t)},a=function(){return t(w.ftyp,T,C,T,k)};var G,X,K,$,Y,Q,J,Z,ee=function(e){return t(w.mdat,e)},te=l,ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re=[33,16,5,32,164,27],ie=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;Q=function(e,t){return X(Y(e,t))},J=function(e,t){return K($(e),t)},Z=function(e,t,n){return $(n?e:e-t)};var se=oe,le=X=function(e){return e*oe},ue=(K=function(e,t){return e*t},$=function(e){return e/oe}),ce=(Y=function(e,t){return e/t},Q),de=J,he=Z,pe=function(e,t,n,r){var i,a,o,s,l,u=0,c=0,d=0;if(t.length&&(i=ce(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(se/(e.samplerate/1024)),n&&r&&(u=i-Math.max(n,r),d=(c=Math.floor(u/a))*a),!(c<1||d>45e3))){for((o=function(){if(!G){var e={96e3:[re,[227,64],ae(154),[56]],88200:[re,[231],ae(170),[56]],64e3:[re,[248,192],ae(240),[56]],48e3:[re,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[re,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[re,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[ie,ae(268),[3,121,16],ae(47),[7]]};t=e,G=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return G}()[e.samplerate])||(o=t[0].data),s=0;s<c;s++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(de(d,e.samplerate)),d}},fe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},me=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},ge=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ve=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ae(0,0),new Ae(0,1),new Ae(1,0),new Ae(1,1)],this.parse708captions_&&(this.cc708Stream_=new Se({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ve.prototype=new V).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ve.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ve.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ve.prototype.flush=function(){return this.flushStream("flush")},ve.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ve.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ve.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ve.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ve.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ve.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ve.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ye={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},be=function(e){return 32<=e&&e<=127||160<=e&&e<=255},_e=function(e){this.windowNum=e,this.reset()};_e.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_e.prototype.getText=function(){return this.rows.join("\n")},_e.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_e.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_e.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_e.prototype.addText=function(e){this.rows[this.rowIdx]+=e},_e.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Ee=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new _e(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};Ee.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new _e(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},Ee.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Ee.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var Se=function e(t){t=t||{},e.prototype.init.call(this);var n,r=this,i=t.captionServices||{},a={};Object.keys(i).forEach((function(e){n=i[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(r.new708Packet(),r.add708Bytes(e)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(e))}};Se.prototype=new V,Se.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Se.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},Se.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,a=t[i++];for(e.seq=a>>6,e.sizeCode=63&a;i<t.length;i++)r=31&(a=t[i++]),7==(n=a>>5)&&r>0&&(n=a=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},Se.prototype.pushServiceBlock=function(e,t,n){var r,i=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,i));i<t+n&&i<a.length;i++)r=a[i],be(r)?i=this.handleText(i,o):24===r?i=this.multiByteCharacter(i,o):16===r?i=this.extendedCommands(i,o):128<=r&&r<=135?i=this.setCurrentWindow(i,o):152<=r&&r<=159?i=this.defineWindow(i,o):136===r?i=this.clearWindows(i,o):140===r?i=this.deleteWindows(i,o):137===r?i=this.displayWindows(i,o):138===r?i=this.hideWindows(i,o):139===r?i=this.toggleWindows(i,o):151===r?i=this.setWindowAttributes(i,o):144===r?i=this.setPenAttributes(i,o):145===r?i=this.setPenColor(i,o):146===r?i=this.setPenLocation(i,o):143===r?o=this.reset(i,o):8===r?o.currentWindow.backspace():12===r?o.currentWindow.clearText():13===r?o.currentWindow.pendingNewLine=!0:14===r?o.currentWindow.clearText():141===r&&i++},Se.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return be(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},Se.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Se.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new Ee(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},Se.prototype.handleText=function(e,t,n){var r,i,a,o,s=n&&n.isExtended,l=n&&n.isMultiByte,u=this.current708Packet.data,c=s?4096:0,d=u[e],h=u[e+1],p=t.currentWindow;return t.textDecoder_&&!s?(l?(i=[d,h],e++):i=[d],r=t.textDecoder_.decode(new Uint8Array(i))):(o=ye[a=c|d]||a,r=4096&a&&a===o?"":String.fromCharCode(o)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(r),e},Se.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return be(r)&&be(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Se.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},Se.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var a=t.currentWindow;return r=n[++e],a.visible=(32&r)>>5,a.rowLock=(16&r)>>4,a.columnLock=(8&r)>>3,a.priority=7&r,r=n[++e],a.relativePositioning=(128&r)>>7,a.anchorVertical=127&r,r=n[++e],a.anchorHorizontal=r,r=n[++e],a.anchorPoint=(240&r)>>4,a.rowCount=15&r,r=n[++e],a.columnCount=63&r,r=n[++e],a.windowStyle=(56&r)>>3,a.penStyle=7&r,a.virtualRowCount=a.rowCount+1,e},Se.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},Se.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},Se.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Se.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},Se.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},Se.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},Se.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},Se.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},Se.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},Se.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},Se.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},Se.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var we={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Te=function(e){return null===e?"":(e=we[e]||e,String.fromCharCode(e))},Ce=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ke=function(){for(var e=[],t=15;t--;)e.push("");return e},Ae=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ke();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ke();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ke()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=Te((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Te((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14&~i||this.addFormatting(e.pts,["i"]),1&~i||this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=Ce.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16&~t||(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&(14&~i||this.addFormatting(e.pts,["i"]))}else this.isNormalChar(r)&&(0===i&&(i=null),a=Te(r),a+=Te(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ae.prototype=new V,Ae.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ae.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ke(),this.nonDisplayed_=ke(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ae.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ae.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ae.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ae.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ae.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ae.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ae.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ae.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ae.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ke(),this.displayed_=ke()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ae.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ae.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ae.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ae.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ae.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ae.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Pe={CaptionStream:ve,Cea608Stream:Ae,Cea708Stream:Se},xe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ie="shared",Me=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Re=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||Ie,this.push=function(e){this.type_!==Ie&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=Me(e.dts,r),e.pts=Me(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Re.prototype=new V;var Oe,Le=Re,De=Me,Ne=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Fe=function(e,t,n){return decodeURIComponent(Ne(e,t,n))},je=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Be={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.value=Fe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.url=Fe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Ne(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Oe=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],a=0;if(Oe.prototype.init.call(this),this.dispatchType=xe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=je(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},l=0;l<r;)t.data.set(i[0].data.subarray(0,r-l),l),l+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=je(t.data.subarray(10,14)),r-=je(t.data.subarray(16,20)));do{if((o=je(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=s.id,Be[s.id]&&(Be[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var u=s.data,c=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;c*=4,c+=3&u[7],s.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<r);this.trigger("data",t)}}},Oe.prototype=new V;var Ue,qe,Ve,He=Oe,ze=Le,We=188;(Ue=function(){var e=new Uint8Array(We),t=0;Ue.prototype.init.call(this),this.push=function(n){var r,i=0,a=We;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=We,a+=We);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===We&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new V,qe=function(){var e,t,n,r;qe.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],o=(31&e[i+1])<<8|e[i+2];a===xe.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===xe.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===xe.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=xe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=xe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},qe.prototype=new V,qe.STREAM_TYPES={h264:27,adts:15},Ve=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},a={data:[],size:0},o=function(e,n,r){var i,a,o=new Uint8Array(e.size),s={type:n},l=0,u=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],o.set(a.data,u),u+=a.data.byteLength;var c,d,h,p;d=s,p=(c=o)[0]<<16|c[1]<<8|c[2],d.data=new Uint8Array,1===p&&(d.packetLength=6+(c[4]<<8|c[5]),d.dataAlignmentIndicator=!!(4&c[6]),192&(h=c[7])&&(d.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,d.pts*=4,d.pts+=(6&c[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,d.dts*=4,d.dts+=(6&c[18])>>>1)),d.data=c.subarray(9+c[8])),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};Ve.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case xe.H264_STREAM_TYPE:e=r,t="video";break;case xe.ADTS_STREAM_TYPE:e=i,t="audio";break;case xe.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(r,"video"),o(i,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},Ve.prototype=new V;var Ge={PAT_PID:0,MP2T_PACKET_LENGTH:We,TransportPacketStream:Ue,TransportParseStream:qe,ElementaryStream:Ve,TimestampRolloverStream:ze,CaptionStream:Pe.CaptionStream,Cea608Stream:Pe.Cea608Stream,Cea708Stream:Pe.Cea708Stream,MetadataStream:He};for(var Xe in xe)xe.hasOwnProperty(Xe)&&(Ge[Xe]=xe[Xe]);var Ke,$e=Ge,Ye=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ke=function(e){var t,n=0;Ke.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(r){var i,a,o,s,l,u=0;if(e||(n=0),"audio"===r.type){var c;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+r.data.byteLength)).set(o),t.set(r.data,o.byteLength)):t=r.data;u+7<t.length;)if(255===t[u]&&240==(246&t[u+1])){if("number"==typeof c&&(this.skipWarn_(c,u),c=null),a=2*(1&~t[u+1]),i=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,l=9e4*(s=1024*(1+(3&t[u+6])))/Ye[(60&t[u+2])>>>2],t.byteLength-u<i)break;this.trigger("data",{pts:r.pts+n*l,dts:r.dts+n*l,sampleCount:s,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:Ye[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+a,u+i)}),n++,u+=i}else"number"!=typeof c&&(c=u),u++;"number"==typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ke.prototype=new V;var Qe,Je,Ze,et=Ke,tt=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(n&2147483648>>>e)return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};Je=function(){var e,t,n=0;Je.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Je.prototype=new V,Ze={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Qe=function(){var e,t,n,r,i,a,o,s=new Je;Qe.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:r,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},a=function(e){var t,n,r,i,a,s,l,u,c,d,h,p,f=0,m=0,g=0,v=0,y=[1,1];if(n=(t=new tt(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ze[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)t.readBoolean()&&o(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(u+1)-2*f-2*m,height:(2-d)*(c+1)*16-2*g-2*v,sarRatio:y}}},Qe.prototype=new V;var nt,rt={H264Stream:Qe,NalByteStream:Je},it=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],at=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},ot=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=at(t,n))},st=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},lt={isLikelyAacData:function(e){var t=ot(e,0);return e.length>=t+2&&!(255&~e[t])&&!(240&~e[t+1])&&16==(22&e[t+1])},parseId3TagSize:at,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&!(240&~e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return it[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=st(e.subarray(10,14)));do{if((n=st(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var a=unescape(function(e,t,n){var r,i="";for(r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i));if("com.apple.streaming.transportStreamTimestamp"===a){var o=r.subarray(i+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return(s*=4)+(3&o[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(nt=function(){var e=new Uint8Array,t=0;nt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,o,s=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255&~e[l]||240&~e[l+1])l++;else{if(e.length-l<7)break;if(l+(s=lt.parseAdtsSize(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+s),pts:t,dts:t},this.trigger("data",a),l+=s}else{if(e.length-l<10)break;if(l+(s=lt.parseId3TagSize(e,l))>e.length)break;i={type:"timed-metadata",data:e.subarray(l,l+s)},this.trigger("data",i),l+=s}r=e.length-l,e=r>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var ut,ct,dt,ht,pt=nt,ft=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],gt=rt.H264Stream,vt=lt.isLikelyAacData,yt=function(e,t){t.stream=e,this.trigger("log",t)},bt=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",yt.bind(e,i))}},_t=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Et=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};ct=function(e,t){var n,r=[],i=0,a=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,ct.prototype.init.call(this),this.push=function(t){ge(e,t),e&&ft.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,l,u,c,d,h,p;0!==r.length?(s=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(r,e,i),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),p=pe(e,s,a,o),e.samples=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r}(s),u=ee(function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}(s)),r=[],l=te(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),fe(e),d=Math.ceil(9216e4/e.samplerate),s.length&&(h=s.length*d,this.trigger("segmentTimingInfo",Et(ce(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+h,s[0].pts+h,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){fe(e),r=[],this.trigger("reset")}},ct.prototype=new V,ut=function(e,t){var n,r,i,a=[],o=[];n=(t=t||{}).firstSequenceNumber||0,ut.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ge(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],mt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var r,i,s,l,u,c,d,h,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i}(a),(s=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(r))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],e))?(p=i.duration,s.unshift(i),s.byteLength+=i.byteLength,s.nalCount+=i.nalCount,s.pts=i.pts,s.dts=i.dts,s.duration+=i.duration):s=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(s)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");fe(e),s=f}ge(e,s),e.samples=function(e,t){var n,r,i,a,o,s=t||0,l=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],s+=(i=ne(o,s)).size,l.push(i);return l}(s),u=ee(function(e){var t,n,r,i,a,o,s=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],d.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c}(s)),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=s[0],h=s[s.length-1],this.trigger("segmentTimingInfo",Et(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=te(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){fe(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,e.pps&&_t(e.pps[0],a.pps[0])&&e.sps&&_t(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=a,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,s,l,u;for(a=e.byteLength,s=e.nalCount,l=e.duration,t=n=0;t<o.length&&n<e.length&&(r=o[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,s-=i.nalCount,l-=i.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,s,l;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(r=o[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(l=s?n:a))return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}},ut.prototype=new V,ht=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ht.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},ht.prototype=new V,ht.prototype.flush=function(e){var t,n,r,i,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},l=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(l=this.videoTrack.timelineStartInfo.pts,mt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(l=this.audioTrack.timelineStartInfo.pts,ft.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,r=function(e){var t,n=a(),r=u(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}(this.pendingTracks),s.initSegment=new Uint8Array(r.byteLength),s.initSegment.set(r),s.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)s.data.set(this.pendingBoxes[i],o),o+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=he(t.startPts,l,this.keepOriginalTimestamps),t.endTime=he(t.endPts,l,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=he(n.pts,l,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),i=0;i<s.captions.length;i++)t=s.captions[i],this.trigger("caption",t);for(i=0;i<s.metadata.length;i++)n=s.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ht.prototype.setRemux=function(e){this.remuxTracks=e},dt=function(e){var t,n,r=this,i=!0;dt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new $e.MetadataStream,i.aacStream=new pt,i.audioTimestampRolloverStream=new $e.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new $e.TimestampRolloverStream("timed-metadata"),i.adtsStream=new et,i.coalesceStream=new ht(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ct(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),bt(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new $e.MetadataStream,i.packetStream=new $e.TransportPacketStream,i.parseStream=new $e.TransportParseStream,i.elementaryStream=new $e.ElementaryStream,i.timestampRolloverStream=new $e.TimestampRolloverStream,i.adtsStream=new et,i.h264Stream=new gt,i.captionStream=new $e.CaptionStream(e),i.coalesceStream=new ht(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new ut(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ct(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),bt(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,fe(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,fe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=vt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},dt.prototype=new V;var St,wt,Tt,kt={Transmuxer:dt,VideoSegmentStream:ut,AudioSegmentStream:ct,AUDIO_PROPERTIES:ft,VIDEO_PROPERTIES:mt,generateSegmentTimingInfo:Et},At=function(e){return e>>>0},Pt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},xt=At,It=function e(t,n){var r,i,a,o,s,l=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=xt(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),a=Pt(t.subarray(r+4,r+8)),o=i>1?r+i:t.byteLength,a===n[0]&&(1===n.length?l.push(t.subarray(r+8,o)):(s=e(t.subarray(r+8,o),n.slice(1))).length&&(l=l.concat(s))),r=o;return l},Mt=At,Rt=z.getUint64,Ot=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Dt="undefined"!=typeof window?window:void 0!==Lt?Lt:"undefined"!=typeof self?self:{},Nt=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},Ft=Pe.CaptionStream,jt=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},Bt=function(e,t){var n=It(e,["moof","traf"]),r=It(e,["mdat"]),i={},a=[];return r.forEach((function(e,t){var r=n[t];a.push({mdat:e,traf:r})})),a.forEach((function(e){var n,r,a=e.mdat,o=e.traf,s=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],l=32&r.flags[2],u=65536&r.flags[0],c=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),l&&(r.defaultSampleFlags=n.getUint32(t)),u&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r}(It(o,["tfhd"])[0]),l=s.trackId,u=It(o,["tfdt"]),c=u.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Rt(e.subarray(4)):t.baseMediaDecodeTime=Mt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(u[0]).baseMediaDecodeTime:0,d=It(o,["trun"]);t===l&&d.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getInt32(d),d+=4),a&&c&&(t={flags:Ot(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),u&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),l&&(t.flags=Ot(e.subarray(d,d+4)),d+=4),u&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+Dt.BigInt(e.compositionTimeOffset),r+=Dt.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)})),s=s.concat(t)})),s}(d,c,s),r=function(e,t,n){var r,i,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=a)if(a=s.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var u=e.subarray(i+1,i+1+a),c=jt(i,t);if(r={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Nt(u),trackId:n},c)r.pts=c.pts,r.dts=c.dts,o=c;else{if(!o){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=o.pts,r.dts=o.dts}l.seiNals.push(r)}return l}(a,n,l),i[l]||(i[l]={seiNals:[],logs:[]}),i[l].seiNals=i[l].seiNals.concat(r.seiNals),i[l].logs=i[l].logs.concat(r.logs))})),i},Ut=function(){var e,t,n,r,i,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new Ft,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],r=o[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,o)}return s=function(e,t,n){if(null===t)return null;var r=Bt(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),s&&s.logs&&(i.logs=i.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},qt=At,Vt=function(e){return("00"+e.toString(16)).slice(-2)},Ht=z.getUint64;St=function(e,t){var n=It(t,["moof","traf"]).reduce((function(t,n){var r,i,a=It(n,["tfhd"])[0],o=qt(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),s=e[o]||9e4,l=It(n,["tfdt"])[0],u=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"==typeof(r=1===l[0]?Ht(l.subarray(4,12)):u.getUint32(4))?i=r/Dt.BigInt(s):"number"!=typeof r||isNaN(r)||(i=r/s),i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i<t&&(t=i),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},Tt=function(e){var t=0===e[0]?12:20;return qt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},wt=function(e){var t=It(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},a=It(e,["tkhd"])[0];a&&(r=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var o=It(e,["mdia","hdlr"])[0];if(o){var s=Pt(o.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var l=It(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);i.codec=Pt(u.subarray(4,8));var c,d=It(u,[i.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(i.codec)?(c=d.subarray(78),"avcC"===Pt(c.subarray(4,8))&&c.length>11?(i.codec+=".",i.codec+=Vt(c[9]),i.codec+=Vt(c[10]),i.codec+=Vt(c[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(c=d.subarray(28),"esds"===Pt(c.subarray(4,8))&&c.length>20&&0!==c[19]?(i.codec+="."+Vt(c[19]),i.codec+="."+Vt(c[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var h=It(e,["mdia","mdhd"])[0];h&&(i.timescale=Tt(h)),n.push(i)})),n};var zt=St,Wt=wt,Gt=function(e){var t=31&e[1];return(t<<=8)|e[2]},Xt=function(e){return!!(64&e[1])},Kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},$t=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Yt={parseType:function(e,t){var n=Gt(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Xt(e),n=4+Kt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Xt(e),r=4+Kt(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var a=12+((15&e[r+10])<<8|e[r+11]);a<i;){var o=r+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Xt,parsePesType:function(e,t){switch(t[Gt(e)]){case xe.H264_STREAM_TYPE:return"video";case xe.ADTS_STREAM_TYPE:return"audio";case xe.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Xt(e))return null;var t=4+Kt(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+Kt(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===$t(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===$t(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===$t(31&n[i+3])&&(a=!0),a}},Qt=De,Jt={};Jt.ts=Yt,Jt.aac=lt;var Zt=se,en=188,tn=71,nn=function(e,t,n){for(var r,i,a,o,s=0,l=en,u=!1;l<=e.byteLength;)if(e[s]!==tn||e[l]!==tn&&l!==e.byteLength)s++,l++;else{if(r=e.subarray(s,l),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=Jt.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),u=!0)),u)break;s+=en,l+=en}for(s=(l=e.byteLength)-en,u=!1;s>=0;)if(e[s]!==tn||e[l]!==tn&&l!==e.byteLength)s--,l--;else{if(r=e.subarray(s,l),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=Jt.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),u=!0)),u)break;s-=en,l-=en}},rn=function(e,t,n){for(var r,i,a,o,s,l,u,c=0,d=en,h=!1,p={data:[],size:0};d<e.byteLength;)if(e[c]!==tn||e[d]!==tn)c++,d++;else{if(r=e.subarray(c,d),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!h&&(o=Jt.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),h=!0),!n.firstKeyFrame))){if(a&&0!==p.size){for(s=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),s.set(u,l),l+=u.byteLength;if(Jt.ts.videoPacketContainsKeyFrame(s)){var f=Jt.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):Ct.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(r),p.size+=r.byteLength}if(h&&n.firstKeyFrame)break;c+=en,d+=en}for(c=(d=e.byteLength)-en,h=!1;c>=0;)if(e[c]!==tn||e[d]!==tn)c--,d--;else{if(r=e.subarray(c,d),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(o=Jt.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),h=!0)),h)break;c-=en,d-=en}},an=function(e,t){var n;return n=Jt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,a=null,o=0,s=0;e.length-s>=3;){switch(Jt.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=Jt.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=Jt.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=Jt.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===i&&(t=e.subarray(s,s+o),i=Jt.aac.parseSampleRate(t)),r++,s+=o;break;default:s++}if(n)return null}if(null===i||null===a)return null;var l=Zt/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*l,pts:a+1024*r*l}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=en;i<e.byteLength;)if(e[r]!==tn||e[i]!==tn)r++,i++;else{switch(n=e.subarray(r,i),Jt.ts.parseType(n,t.pid)){case"pat":t.pid=Jt.ts.parsePat(n);break;case"pmt":var a=Jt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}r+=en,i+=en}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case xe.H264_STREAM_TYPE:n.video=[],rn(e,t,n),0===n.video.length&&delete n.video;break;case xe.ADTS_STREAM_TYPE:n.audio=[],nn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Qt(e.dts,n),e.pts=Qt(e.pts,n),e.dtsTime=e.dts/Zt,e.ptsTime=e.pts/Zt}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=Qt(e.dts,r),e.pts=Qt(e.pts,r),e.dtsTime=e.dts/Zt,e.ptsTime=e.pts/Zt})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=Qt(i.dts,r),i.pts=Qt(i.pts,r),i.dtsTime=i.dts/Zt,i.ptsTime=i.pts/Zt}}}(n,t),n):null},on=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new kt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:ue(t.start.dts),presentation:ue(t.start.pts)},end:{decode:ue(t.end.dts),presentation:ue(t.end.pts)},baseMediaDecodeTime:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:ue(t.start.dts),presentation:ue(t.start.pts)},end:{decode:ue(t.end.dts),presentation:ue(t.end.pts)},baseMediaDecodeTime:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ue(t.start),end:ue(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ue(t.start),end:ue(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Ut,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,r=zt(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:r,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Wt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,r="number"!=typeof n||isNaN(n)?void 0:n*se,i=an(t,r),a=null;i&&((a={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1}).hasVideo&&(a.videoStart=i.video[0].ptsTime),a.hasAudio&&(a.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(le(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(le(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new on(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new on(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),hl=ll(dl),pl=function(e){var t=e.transmuxer,n=e.bytes,r=e.audioAppendStart,i=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,l=e.onAudioTimingInfo,u=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var r=e.data.segment,i=r.type,a=r.initSegment,o=r.captions,s=r.captionStreams,l=r.metadata,u=r.videoFrameDtsTime,c=r.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:l});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:i,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==u&&(h.videoFrameDtsTime=u),void 0!==c&&(h.videoFramePtsTime=c),n(h)}(n,y,o),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:f}),fl(t))))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var _=n instanceof ArrayBuffer?n:n.buffer,E=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:_,byteOffset:E,byteLength:n.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},fl=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():pl(e.currentTransmux))},ml=function(e,t){e.postMessage({action:t}),fl(e)},gl=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void ml(t,e);t.transmuxQueue.push(ml.bind(null,t,e))}("reset",e)},vl=function(e){var t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=s({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function i(a){a.data.action===n&&(t.removeEventListener("message",i),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),r(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;i.byteOffset=a?0:e.data.byteOffset,i.byteLength=e.data.byteLength;var o=[a?e.data:e.data.buffer];t.postMessage(i,o)}else t.postMessage(i)},yl=-101,bl=-102,_l=function(e){e.forEach((function(e){e.abort()}))},El=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:yl,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:bl,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},Sl=function(e,t,n){return function(r,i){var a=i.response,o=El(r,i);if(o)return n(o,e);if(16!==a.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);for(var s=new DataView(a),l=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),u=0;u<t.length;u++)t[u].bytes=l;return n(null,e)}},wl=function(e,t){var n=_t(e.map.bytes);if("mp4"!==n){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+r,code:2})}vl({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var r=n.tracks,i=n.data;return e.map.bytes=i,r.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Tl=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=t.map&&t.map.tracks||{},m=Boolean(f.audio&&f.video),g=i.bind(null,t,"audio","start"),v=i.bind(null,t,"audio","end"),y=i.bind(null,t,"video","start"),b=i.bind(null,t,"video","end");vl({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var i=e.result;i&&(r(t,{hasAudio:i.hasAudio,hasVideo:i.hasVideo,isMuxed:m}),r=null,i.hasAudio&&!m&&g(i.audioStart),i.hasVideo&&y(i.videoStart),g=null,y=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void pl(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:function(e){e.type="combined"===e.type?"video":e.type,d(t,e)},onTrackInfo:function(e){r&&(m&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){g&&void 0!==e.start&&(g(e.start),g=null),v&&void 0!==e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},Cl=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(n);if(function(e){return it(e,["moof"]).length>0}(f)){t.isFmp4=!0;var m=t.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),r(t,g);var v=function(e){d(t,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),h(null,t,{})};vl({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var r=e.data,a=e.startTime;n=r.buffer,t.bytes=f=r,g.hasAudio&&!g.isMuxed&&i(t,"audio","start",a),g.hasVideo&&i(t,"video","start",a),m.video&&r.byteLength&&t.transmuxer?vl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){p(Ho.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=_t(f)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void h(null,t,{});Tl({segment:t,bytes:n,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})},kl=function(e,t){var n,r=e.id,i=e.key,a=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",(function e(n){if(n.data.source===r){o.removeEventListener("message",e);var i=n.data.decrypted;t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}})),n=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),o.postMessage(Gs({source:r,encrypted:a,key:n,iv:i.iv}),[a.buffer,n.buffer])},Al=function(e){var t=e.xhr,n=e.xhrOptions,r=e.decryptionWorker,i=e.segment,a=e.abortFn,o=e.progressFn,s=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,d=e.id3Fn,h=e.captionsFn,p=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog,y=[],b=function(e){var t=e.activeXhrs,n=e.decryptionWorker,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,_l(t),h(e,g);if((f+=1)===t.length){var v=function(){if(g.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog;kl({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Cl({segment:n,bytes:n.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}))}({decryptionWorker:n,segment:g,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p});Cl({segment:g,bytes:g.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return kl({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(e){g.map.bytes=e,wl(g,(function(e){if(e)return _l(t),h(e,g);v()}))}));v()}}}}({activeXhrs:y,decryptionWorker:r,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:v});if(i.key&&!i.key.bytes){var _=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&_.push(i.map.key);var E=t(Ho.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),Sl(i,_,b));y.push(E)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){var S=t(Ho.mergeOptions(n,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),Sl(i,[i.map.key],b));y.push(S)}var w=Ho.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Vs(i.map)}),T=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,r){var i=El(e,r);if(i)return n(i,t);var a=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,wl(t,(function(e){if(e)return e.xhr=r,e.status=r.status,n(e,t);n(null,t)}))}}({segment:i,finishProcessingFn:b}),C=t(w,T);y.push(C)}var k=Ho.mergeOptions(n,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Vs(i)}),A=t(k,function(e){var t=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,i){var a=El(e,i);if(a)return n(a,t);var o="arraybuffer"!==r&&i.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(i.responseText.substring(t.lastReachedChar||0)):i.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),n(null,t)}}({segment:i,finishProcessingFn:b,responseType:k.responseType}));A.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=Ho.mergeOptions(t.stats,(i=(r=e).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=r.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t);var r,i,a}}({segment:i,progressFn:o,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m})),y.push(A);var P={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:P,abortFn:a}))})),function(){return _l(y)}},Pl=Ko("CodecUtils"),xl=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Il=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,r=e.type,i=e.details;t[n]=t[n]||[],t[n].push(z(""+r+i))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Pl("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},Ml=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Rl=function(e,t){var n=t.attributes||{},r=Il(function(e){var t=e.attributes||{};if(t.CODECS)return W(t.CODECS)}(t)||[]);if(xl(e,t)&&!r.audio&&!function(e,t){if(!xl(e,t))return!0;var n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(var i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1}(e,t)){var i=Il(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return W(i.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},Ol=Ko("PlaylistSelector"),Ll=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Dl=function(e,t){if(!e)return"";var n=i().getComputedStyle(e);return n?n[t]:""},Nl=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},Fl=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||i().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r||i().Number.MAX_VALUE)},jl=function(e,t,n,r,a,o){if(e){var s={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:a},l=e.playlists;Ss.isAudioOnly(e)&&(l=o.getAudioTrackPlaylists_(),s.audioOnly=!0);var u=l.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||i().Number.MAX_VALUE,width:t,height:n,playlist:e}}));Nl(u,(function(e,t){return e.bandwidth-t.bandwidth}));var c=(u=u.filter((function(e){return!Ss.isIncompatible(e.playlist)}))).filter((function(e){return Ss.isEnabled(e.playlist)}));c.length||(c=u.filter((function(e){return!Ss.isDisabled(e.playlist)})));var d=c.filter((function(e){return e.bandwidth*ol.BANDWIDTH_VARIANCE<t})),h=d[d.length-1],p=d.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(!1===a){var f=p||c[0]||u[0];if(f&&f.playlist){var m="sortedPlaylistReps";return p&&(m="bandwidthBestRep"),c[0]&&(m="enabledPlaylistReps"),Ol("choosing "+Ll(f)+" using "+m+" with options",s),f.playlist}return Ol("could not choose a playlist with options",s),null}var g=d.filter((function(e){return e.width&&e.height}));Nl(g,(function(e,t){return e.width-t.width}));var v=g.filter((function(e){return e.width===n&&e.height===r}));h=v[v.length-1];var y,b,_,E,S=v.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(S||(b=(y=g.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===y[0].width&&e.height===y[0].height})),h=b[b.length-1],_=b.filter((function(e){return e.bandwidth===h.bandwidth}))[0]),o.experimentalLeastPixelDiffSelector){var w=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-r),e}));Nl(w,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),E=w[0]}var T=E||_||S||p||c[0]||u[0];if(T&&T.playlist){var C="sortedPlaylistReps";return E?C="leastPixelDiffRep":_?C="resolutionPlusOneRep":S?C="resolutionBestRep":p?C="bandwidthBestRep":c[0]&&(C="enabledPlaylistReps"),Ol("choosing "+Ll(T)+" using "+C+" with options",s),T.playlist}return Ol("could not choose a playlist with options",s),null}},Bl=function(){var e=this.useDevicePixelRatio&&i().devicePixelRatio||1;return jl(this.playlists.master,this.systemBandwidth,parseInt(Dl(this.tech_.el(),"width"),10)*e,parseInt(Dl(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Ul=function(e,t,n){var r,i;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime>=e&&i.endTime<=t&&n.removeCue(i)},ql=function(e){return"number"==typeof e&&isFinite(e)},Vl=1/60,Hl=function(e){var t=e.startOfSegment,n=e.duration,r=e.segment,i=e.part,a=e.playlist,o=a.mediaSequence,s=a.id,l=a.segments,u=void 0===l?[]:l,c=e.mediaIndex,d=e.partIndex,h=e.timeline,p=u.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent "+e.independent);var m="number"==typeof d,g=e.segment.uri?"segment":"pre-segment",v=m?ls({preloadSegment:r})-1:0;return g+" ["+(o+c)+"/"+(o+p)+"]"+(m?" part ["+d+"/"+v+"]":"")+" segment start/end ["+r.start+" => "+r.end+"]"+(m?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+h+"] selected by ["+f+"] playlist ["+s+"]"},zl=function(e){return e+"TimingInfo"},Wl=function(e){var t=e.timelineChangeController,n=e.currentTimeline,r=e.segmentTimeline,i=e.loaderType,a=e.audioDisabled;if(n===r)return!1;if("audio"===i){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==r}if("main"===i&&a){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==r}return!1},Gl=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+$o},Xl=function(e){function t(t,n){var r;if(r=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=t.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.partIndex=null,r.hasPlayed_=t.hasPlayed,r.currentTime_=t.currentTime,r.seekable_=t.seekable,r.seeking_=t.seeking,r.duration_=t.duration,r.mediaSource_=t.mediaSource,r.vhs_=t.vhs,r.loaderType_=t.loaderType,r.currentMediaInfo_=void 0,r.startingMediaInfo_=void 0,r.segmentMetadataTrack_=t.segmentMetadataTrack,r.goalBufferLength_=t.goalBufferLength,r.sourceType_=t.sourceType,r.sourceUpdater_=t.sourceUpdater,r.inbandTextTracks_=t.inbandTextTracks,r.state_="INIT",r.timelineChangeController_=t.timelineChangeController,r.shouldSaveSegmentTimingInfo_=!0,r.parse708captions_=t.parse708captions,r.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,r.captionServices_=t.captionServices,r.experimentalExactManifestTimings=t.experimentalExactManifestTimings,r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.xhrOptions_=null,r.pendingSegments_=[],r.audioDisabled_=!1,r.isPendingTimestampOffset_=!1,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=Ho.browser.IE_VERSION>=11,r.appendInitSegment_={audio:!0,video:!0},r.playlistOfLastInitSegment_={audio:null,video:null},r.callQueue_=[],r.loadQueue_=[],r.metadataQueue_={id3:[],caption:[]},r.waitingOnRemove_=!1,r.quotaExceededErrorRetryTimeout_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.cacheEncryptionKeys_=t.cacheEncryptionKeys,r.keyCache_={},r.decrypter_=t.decrypter,r.syncController_=t.syncController,r.syncPoint_={segmentIndex:0,time:0},r.transmuxer_=r.createTransmuxer_(),r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")},r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_),r.mediaSource_.addEventListener("sourceopen",(function(){r.isEndOfStream_()||(r.ended_=!1)})),r.fetchAtBuffer_=!1,r.logger_=Ko("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(c(r),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),r.sourceUpdater_.on("ready",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"main"===r.loaderType_&&r.timelineChangeController_.on("pendingtimelinechange",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"audio"===r.loaderType_&&r.timelineChangeController_.on("timelinechange",(function(){r.hasEnoughInfoToLoad_()&&r.processLoadQueue_(),r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),r}h(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new hl;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,i().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&gl(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Ho.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Xs(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Ks(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}r&&(r.mediaIndex-=a,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&gl(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,r){if(void 0===n&&(n=function(){}),void 0===r&&(r=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var i=1,a=function(){0==--i&&n()};for(var o in!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,a)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil((t-r)*Et.ONE_SECOND_IN_TS),a=Math.ceil((n-r)*Et.ONE_SECOND_IN_TS),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var l=s+1;l--&&!(e[l].pts<=i););return l=Math.max(l,0),o.splice(l,s-l+1),o}(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)Ul(e,t,this.inbandTextTracks_[o]);Ul(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,a=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=ns(e)||0,n=rs(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];for(var r=[],i=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(r.push(a),(i+=o.duration)>n))return a}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var s=a[this.mediaIndex],l="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=s.end?s.end:t,s.parts&&s.parts[l+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=l+1):o.mediaIndex=this.mediaIndex+1}else{var u=Ss.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=u.segmentIndex,d=u.startTime,h=u.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),o.mediaIndex=c,o.startOfSegment=d,o.partIndex=h}var p=a[o.mediaIndex],f=p&&"number"==typeof o.partIndex&&p.parts&&p.parts[o.partIndex];if(!p||"number"==typeof o.partIndex&&!f)return null;if("number"!=typeof o.partIndex&&p.parts&&(o.partIndex=0,f=p.parts[0]),!n&&f&&!f.independent)if(0===o.partIndex){var m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else p.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=a.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(o)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,r=e.mediaIndex,i=e.startOfSegment,a=e.isSyncRequest,o=e.partIndex,s=e.forceTimestampOffset,l=e.getMediaInfoForTime,u=n.segments[r],c="number"==typeof o&&u.parts[o],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:r,partIndex:c?o:null,isSyncRequest:a,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h=void 0!==s?s:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:h});var p=ns(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var r,i=Math.ceil((t-n+3)*Et.ONE_SECOND_IN_TS);for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,r=t.currentTimeline,i=t.startOfSegment,a=t.buffered,t.overrideCheck||n!==r?n<r?i:a.length?a.end(a.length-1):i:null;var t,n,r,i,a},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=Ss.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(i<=a)){var o=function(e){var t=e.currentTime,n=e.bandwidth,r=e.duration,i=e.segmentDuration,a=e.timeUntilRebuffer,o=e.currentTimeline,s=e.syncController,l=e.master.playlists.filter((function(e){return!Ss.isIncompatible(e)})),u=l.filter(Ss.isEnabled);u.length||(u=l.filter((function(e){return!Ss.isDisabled(e)})));var c=u.filter(Ss.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var l=s.getSyncPoint(e,r,o,t)?1:2;return{playlist:e,rebufferingImpact:Ss.estimateSegmentRequestTime(i,n,e)*l-a}})),d=c.filter((function(e){return e.rebufferingImpact<=0}));return Nl(d,(function(e,t){return Fl(t.playlist,e.playlist)})),d.length?d[0]:(Nl(c,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),c[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=i-a-o.rebufferingImpact,l=.5;a<=$o&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<l||(this.bandwidth=o.playlist.attributes.BANDWIDTH*ol.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+Hl(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(a!==r[i])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var i=this.pendingSegment_,a=zl(t);i[a]=i[a]||{},i[a][n]=r,this.logger_("timinginfo: "+t+" - "+n+" - "+r),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};t.forEach((function(e){a[e.stream]=a[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=a[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(a).forEach((function(e){var t=a[e],o=t.startTime,s=t.endTime,l=t.captions,u=n.inbandTextTracks_;n.logger_("adding cues from "+o+" -> "+s+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);var i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{var a=n,o=n,s=!1,l=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];l&&(a=l.label,o=l.language,s=l.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:s,label:a,language:o},!1).track}}}(u,n.vhs_.tech_,e),Ul(o,s,u[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var a=i().WebKitDataCue||i().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new a(e.startTime+r,e.endTime+r,e.text))}))}}({captionArray:l,inbandTextTracks:u,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,r=e.timestampOffset,a=e.videoDuration;if(n){var o=i().WebKitDataCue||i().VTTCue,s=t.metadataTrack_;if(s&&(n.forEach((function(e){var t=e.cueTime+r;!("number"!=typeof t||i().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new o(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Ho.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Ho.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Ho.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),s.addCue(n)}))})),s.cues&&s.cues.length)){for(var l=s.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var d=u.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),h=Object.keys(d).sort((function(e,t){return Number(e)-Number(t)}));h.forEach((function(e,t){var n=d[e],r=Number(h[t+1])||a;n.forEach((function(e){e.endTime=r}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Wl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||Wl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[zl(t.type)].start;else{var r,i=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&i&&i.hasVideo;a&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=this.chooseNextRequest_();if(o.mediaIndex!==n.mediaIndex||o.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,r=e.map,i=e.playlist;if(r){var a=Xs(r);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,r=e.segmentInfo,a=e.type,o=e.bytes,s=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ts(s).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ts(l).join(", "));var u=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0,d=l.length?l.start(0):0,h=l.length?l.end(l.length-1):0;if(c-u<=1&&h-d<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+o.byteLength+", audio buffer: "+ts(s).join(", ")+", video buffer: "+ts(l).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:a,bytes:o}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=i().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,r=e.type,i=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(r+" append of "+i.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:r,bytes:i}))},n.appendToSourceBuffer_=function(e){var t,n,r,i=e.segmentInfo,a=e.type,o=e.initSegment,s=e.data,l=e.bytes;if(!l){var u=[s],c=s.byteLength;o&&(u.unshift(o),c+=o.byteLength),r=0,(t={bytes:c,segments:u}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,r),r+=e.byteLength}))),l=n}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:a,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:i,type:a,bytes:l}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var r=this.pendingSegment_.segment,i=e+"TimingInfo";r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,r=t.data;if(r&&r.byteLength&&("audio"!==n||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=s({},e,{forceTimestampOffset:!0});s(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=r||i&&a;this.logger_("Requesting "+Hl(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Al({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var r=n.message,i=n.level,a=n.stream;t.logger_(Hl(e)+" logged from transmuxer stream "+a+" as a "+i+": "+r)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var r=t-ol.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var i=t-n;return Math.min(i,r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?r.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(r.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=a}return t.map&&(r.map=this.initSegmentForMap(t.map)),r},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Vl?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+Vl):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===bl)return;return this.pause(),e.code===yl?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,r=e.mediaIndex,i=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,l=e.audioTimingInfo;if(void 0!==t)return t;if(!o)return l.start;var u=n.segments[r-1];return 0!==r&&u&&void 0!==u.start&&u.end===i+a?s.start:i},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed,a="main"===this.loaderType_&&r,o=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,r=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:r.start:r.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,r,a=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},r=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var a,o=t.start,s=t.end;"bigint"==typeof o||"bigint"==typeof s?a=i().BigInt(s)-i().BigInt(o):"number"==typeof o&&"number"==typeof s&&(a=s-o),void 0!==a&&a>r&&(r=a)}})),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r);if(!a)return null;var o=e.playlist.targetDuration,s=Gl({segmentDuration:a,maxDuration:2*o}),l=Gl({segmentDuration:a,maxDuration:o}),u="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+a+" when the reported duration is "+e.duration+" and the target duration is "+o+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||l?{severity:s?"warn":"info",message:u}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?Ho.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+Hl(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,r=e.part,a=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,o=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(a||o)return this.logger_("bad "+(a?"segment":"part")+" "+Hl(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Hl(e))},n.recordThroughput_=function(e){if(e.duration<Vl)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+Vl);else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(ql(n)&&ql(r)){Ul(n,r,this.segmentMetadataTrack_);var a=i().WebKitDataCue||i().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},s=new a(n,r,JSON.stringify(o));s.value=o,this.segmentMetadataTrack_.addCue(s)}}},t}(Ho.EventTarget);function Kl(){}var $l,Yl=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Ql=["video","audio"],Jl=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},Zl=function e(t,n){if(0!==n.queue.length){var r=0,i=n.queue[r];if("mediaSource"!==i.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!Jl(t,n)){if(i.type!==t){if(r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null}(t,n.queue),null===r)return;i=n.queue[r]}return n.queue.splice(r,1),n.queuePending[t]=i,i.action(t,n),i.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),i.action(n),i.doneFn&&i.doneFn(),e("audio",n),e("video",n))}},eu=function(e,t){var n=t[e+"Buffer"],r=Yl(e);n&&(n.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),n.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},tu=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},nu=function(e,t,n){return function(r,i){var a=i[r+"Buffer"];if(tu(i.mediaSource,a)){i.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{a.appendBuffer(e)}catch(e){i.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+r+"Buffer"),i.queuePending[r]=null,n(e)}}}},ru=function(e,t){return function(n,r){var i=r[n+"Buffer"];if(tu(r.mediaSource,i)){r.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{i.remove(e,t)}catch(i){r.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},iu=function(e){return function(t,n){var r=n[t+"Buffer"];tu(n.mediaSource,r)&&(n.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},au=function(e){return function(t,n){e()}},ou=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){Ho.log.warn("Failed to call media source endOfStream",e)}}}},su=function(e,t){return function(n){var r=Yl(e),i=X(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n["on"+r+"UpdateEnd_"]),a.addEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},lu=function(e){return function(t){var n=t[e+"Buffer"];if(eu(e,t),tu(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){Ho.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},uu=function(e){return function(t,n){var r=n[t+"Buffer"],i=X(e);if(tu(n.mediaSource,r)&&n.codecs[t]!==e){n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e);try{r.changeType(i),n.codecs[t]=e}catch(e){Ho.log.warn("Failed to changeType on "+t+"Buffer",e)}}}},cu=function(e){var t=e.type,n=e.sourceUpdater,r=e.action,i=e.doneFn,a=e.name;n.queue.push({type:t,action:r,doneFn:i,name:a}),Zl(t,n)},du=function(e,t){return function(n){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}Zl(e,t)}},hu=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return Zl("mediaSource",c(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=Ko("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=du("video",c(n)),n.onAudioUpdateEnd_=du("audio",c(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}h(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){cu({type:"mediaSource",sourceUpdater:this,action:su(e,t),name:"addSourceBuffer"})},n.abort=function(e){cu({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(tu(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){Ho.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?cu({type:"mediaSource",sourceUpdater:this,action:lu(e),name:"removeSourceBuffer"}):Ho.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!Ho.browser.IE_VERSION&&!Ho.browser.IS_FIREFOX&&i().MediaSource&&i().MediaSource.prototype&&"function"==typeof i().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return i().SourceBuffer&&i().SourceBuffer.prototype&&"function"==typeof i().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?cu({type:e,sourceUpdater:this,action:uu(t),name:"changeType"}):Ho.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var r=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,r);t.canChangeType()&&t.changeType(n,r)}))},n.appendBuffer=function(e,t){var n=this,r=e.segmentInfo,i=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(cu({type:i,sourceUpdater:this,action:nu(a,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+o.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,o.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return tu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ho.createTimeRange()},n.videoBuffered=function(){return tu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ho.createTimeRange()},n.buffered=function(){var e=tu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=tu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,r=null,i=0,a=[],o=[];if(!(e&&e.length&&t&&t.length))return Ho.createTimeRange();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),s=0;s<a.length;s++)"start"===a[s].type?2==++i&&(n=a[s].time):"end"===a[s].type&&1==--i&&(r=a[s].time),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return Ho.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=Kl),cu({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){Ho.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=Kl),"string"!=typeof e&&(e=void 0),cu({type:"mediaSource",sourceUpdater:this,action:ou(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=Kl),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?cu({type:"audio",sourceUpdater:this,action:ru(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=Kl),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?cu({type:"video",sourceUpdater:this,action:ru(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!Jl("audio",this)&&!Jl("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(cu({type:"audio",sourceUpdater:this,action:iu(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(cu({type:"video",sourceUpdater:this,action:iu(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&cu({type:"audio",sourceUpdater:this,action:au(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&cu({type:"video",sourceUpdater:this,action:au(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),Ql.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return eu(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(Ho.EventTarget),pu=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},fu=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),mu=function(e){function t(){return e.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return h(t,e),t}(wt(Error)),gu=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).mediaSource_=null,r.subtitlesTrack_=null,r.loaderType_="subtitle",r.featuresNativeTextTracks_=t.featuresNativeTextTracks,r.loadVttJs=t.loadVttJs,r.shouldSaveSegmentTimingInfo_=!1,r}h(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ho.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Ho.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Xs(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=fu.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(fu,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){Ul(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===yl&&this.handleTimeout_(),e.code===bl?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var o=a.segment;if(o.map&&(o.map.bytes=t.map.bytes),a.bytes=t.bytes,"function"!=typeof i().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((function(){return r.segmentRequestFinished_(e,t,n)}),(function(){return r.stopForError({message:"Error loading vtt.js"})}));o.requested=!0;try{this.parseVTTCues_(a)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,a.cues.forEach((function(e){r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new(i().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var r=[],i=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++i>1&&r.push(t[a]);r.length&&r.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;if("function"!=typeof i().WebVTT)throw new mu;"function"==typeof i().TextDecoder?t=new(i().TextDecoder)("utf8"):(t=i().WebVTT.StringDecoder(),n=!0);var r=new(i().WebVTT.Parser)(i(),i().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){e.timestampmap=t},r.onparsingerror=function(e){Ho.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var a=e.segment.map.bytes;n&&(a=pu(a)),r.parse(a)}var o=e.bytes;n&&(o=pu(o)),r.parse(o),r.flush()},n.updateTimeMapping_=function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/Et.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-r.duration)}}}else r.empty=!0},t}(Xl),vu=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},yu=[{name:"VOD",run:function(e,t,n,r,i){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,s=os(t);i=i||0;for(var l=0;l<s.length;l++){var u=s[t.endList||0===i?l:s.length-(l+1)],c=u.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"==typeof u.partIndex)for(var p=0;p<u.partIndex;p++)h+=c.parts[p].duration;var f=Math.abs(i-h);if(null!==o&&(0===f||o<f))break;o=f,a={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,r,i){var a=null,o=null;i=i||0;for(var s=os(t),l=0;l<s.length;l++){var u=s[t.endList||0===i?l:s.length-(l+1)],c=u.segment,d=u.part&&u.part.start||c&&c.start;if(c.timeline===r&&void 0!==d){var h=Math.abs(i-d);if(null!==o&&o<h)break;(!a||null===o||o>=h)&&(o=h,a={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,c=e.discontinuities[u];if(c){var d=Math.abs(i-c.time);if(null!==o&&o<d)break;(!a||null===o||o>=d)&&(o=d,a={time:c.time,segmentIndex:l,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],bu=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=Ko("SyncController"),n}h(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+hs({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,r){for(var i=[],a=0;a<yu.length;a++){var o=yu[a],s=o.run(this,e,t,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}))}return i},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)Ho.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var r=n-1;r>=0;r--){var i=e.segments[r];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,r=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),i=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:i.start}));var a=i.dateTimeObject;i.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[i.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var r,i,a=e.segment,o=e.part,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),r=e.startOfSegment,i=t.end+s.mapping;else{if(!s)return!1;r=t.start+s.mapping,i=t.end+s.mapping}return o&&(o.start=r,o.end=i),(!a.start||r<a.start)&&(a.start=r),a.end=i,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=i-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var l;l=o<0?n.start-hs({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+hs({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[a]={time:l,accuracy:s}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(Ho.EventTarget),_u=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}h(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(Ho.EventTarget),Eu=ul(cl((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var r=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),i=t((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),o=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),s=null,l=function(){function e(e){var t,n,r;s||(s=function(){var e,t,n,r,i,a,o,s,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],d=u[4],h=c[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=r||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,d[t]=a,h[a]=t,s=16843009*p[i=p[r=p[t]]]^65537*i^257*r^16843008*t,o=257*p[a]^16843008*a,e=0;e<4;e++)u[e][t]=o=o<<24^o>>>8,c[e][a]=s=s<<24^s>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var i=this._tables[0][4],a=this._tables[1],o=e.length,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var u=e.slice(0),c=[];for(this._key=[u,c],t=o;t<4*o+28;t++)r=u[t-1],(t%o==0||8===o&&t%o==4)&&(r=i[r>>>24]<<24^i[r>>16&255]<<16^i[r>>8&255]<<8^i[255&r],t%o==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),u[t]=u[t-o]^r;for(n=0;t;n++,t--)r=u[3&n?t:t-4],c[n]=t<=4||n<4?r:a[0][i[r>>>24]]^a[1][i[r>>16&255]]^a[2][i[r>>8&255]]^a[3][i[255&r]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var o,s,l,u,c=this._key[1],d=e^c[0],h=r^c[1],p=n^c[2],f=t^c[3],m=c.length/4-2,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],E=v[3],S=v[4];for(u=0;u<m;u++)o=y[d>>>24]^b[h>>16&255]^_[p>>8&255]^E[255&f]^c[g],s=y[h>>>24]^b[p>>16&255]^_[f>>8&255]^E[255&d]^c[g+1],l=y[p>>>24]^b[f>>16&255]^_[d>>8&255]^E[255&h]^c[g+2],f=y[f>>>24]^b[d>>16&255]^_[h>>8&255]^E[255&p]^c[g+3],g+=4,d=o,h=s,p=l;for(u=0;u<4;u++)i[(3&-u)+a]=S[d>>>24]<<24^S[h>>16&255]<<16^S[p>>8&255]<<8^S[255&f]^c[g++],o=d,d=h,h=p,p=f,f=o},e}(),u=function(e){function t(){var t;return(t=e.call(this,o)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),c=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function(){function e(t,n,r,i){var a=e.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+a),n,r,s)),l=a;l<o.length;l+=a)r=new Uint32Array([c(o[l-4]),c(o[l-3]),c(o[l-2]),c(o[l-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+a),n,r,s));this.asyncStream_.push((function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=function(e,t,n){var r,i,a,o,s,u,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new l(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(r=n[0],i=n[1],a=n[2],o=n[3],p=0;p<f.length;p+=4)s=c(f[p]),u=c(f[p+1]),d=c(f[p+2]),h=c(f[p+3]),m.decrypt(s,u,d,h,v,p),v[p]=c(v[p]^r),v[p+1]=c(v[p+1]^i),v[p+2]=c(v[p+2]^a),v[p+3]=c(v[p+3]^o),r=s,i=u,a=d,o=h;return g}(e,t,n);r.set(i,e.byteOffset)}},r(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),h=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;h("0x1"),h("0x100"),h("0x10000"),h("0x1000000"),h("0x100000000"),h("0x10000000000"),h("0x1000000000000"),h("0x100000000000000"),h("0x10000000000000000");self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new d(n,r,i,(function(e,n){var r,i;self.postMessage((r={source:t.source,decrypted:n},i={},Object.keys(r).forEach((function(e){var t,n=r[e];t=n,("function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer)?i[e]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:i[e]=n})),i),[n.buffer])}))}}))),Su=ll(Eu),wu=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Tu=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Cu=function(e,t){t.activePlaylistLoader=e,e.load()},ku={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;Tu(n,r);var a=r.activeTrack(),o=r.activeGroup(),s=(o.filter((function(e){return e.default}))[0]||o[0]).id,l=r.tracks[s];if(a!==l){for(var u in Ho.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[u].enabled=r.tracks[u]===l;r.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];Ho.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Tu(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},Au={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",ku[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",ku[e](e,n))}},Pu={AUDIO:function(e,t){var n=t.vhs,r=t.sourceType,i=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,s=t.mediaTypes[e],l=s.groups,u=s.tracks,c=s.logger_,d=t.masterPlaylistLoader,h=Es(d.master);for(var p in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},h&&(o[e].main.default.playlists=d.master.playlists)),o[e])for(var f in l[p]||(l[p]=[]),o[e][p]){var m=o[e][p][f],g=void 0;if(h?(c("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),m.isMasterPlaylist=!0,g=null):g="vhs-json"===r&&m.playlists?new Fs(m.playlists[0],n,a):m.resolvedUri?new Fs(m.resolvedUri,n,a):m.playlists&&"dash"===r?new al(m.playlists[0],n,a,d):null,m=Ho.mergeOptions({id:f,playlistLoader:g},m),Au[e](e,m.playlistLoader,t),l[p].push(m),void 0===u[f]){var v=new Ho.AudioTrack({id:f,kind:wu(m),enabled:!1,language:m.language,default:m.default,label:f});u[f]=v}}i.on("error",ku[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.vhs,i=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in s[e])for(var p in u[h]||(u[h]=[]),s[e][h])if(!s[e][h][p].forced){var f=s[e][h][p],m=void 0;if("hls"===i)m=new Fs(f.resolvedUri,r,o);else if("dash"===i){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;m=new al(f.playlists[0],r,o,d)}else"vhs-json"===i&&(m=new Fs(f.playlists?f.playlists[0]:f.resolvedUri,r,o));if(f=Ho.mergeOptions({id:p,playlistLoader:m},f),Au[e](e,f.playlistLoader,t),u[h].push(f),void 0===c[p]){var g=n.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}a.on("error",ku[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,o=i.tracks;for(var s in r[e])for(var l in a[s]||(a[s]=[]),r[e][s]){var u=r[e][s][l];if(/^(?:CC|SERVICE)/.test(u.instreamId)){var c=n.options_.vhs&&n.options_.vhs.captionServices||{},d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(c[d.instreamId]&&(d=Ho.mergeOptions(d,c[d.instreamId])),void 0===d.default&&delete d.default,a[s].push(Ho.mergeOptions({id:l},u)),void 0===o[l]){var h=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;o[l]=h}}}}},xu=function e(t,n){for(var r=0;r<t.length;r++){if(bs(n,t[r]))return!0;if(t[r].playlists&&e(t[r].playlists,n))return!0}return!1},Iu={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}}},Mu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Ru=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Ou=function(e){function t(t){var n;n=e.call(this)||this;var r=t.src,a=t.handleManifestRedirects,o=t.withCredentials,s=t.tech,l=t.bandwidth,u=t.externVhs,d=t.useCueTags,h=t.blacklistDuration,p=t.enableLowInitialPlaylist,f=t.sourceType,m=t.cacheEncryptionKeys,g=t.experimentalBufferBasedABR,v=t.experimentalLeastPixelDiffSelector,y=t.captionServices;if(!r)throw new Error("A non-empty playlist URL or JSON manifest string is required");var b=t.maxPlaylistRetries;null==b&&(b=1/0),$l=u,n.experimentalBufferBasedABR=Boolean(g),n.experimentalLeastPixelDiffSelector=Boolean(v),n.withCredentials=o,n.tech_=s,n.vhs_=s.vhs,n.sourceType_=f,n.useCueTags_=d,n.blacklistDuration=h,n.maxPlaylistRetries=b,n.enableLowInitialPlaylist=p,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:b,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Kl,activeTrack:Kl,getActiveGroup:Kl,onGroupChanged:Kl,onTrackChanged:Kl,lastTrack_:null,logger_:Ko("MediaGroups["+t+"]")}})),e}(),n.mediaSource=new(i().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(c(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(c(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(c(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Ho.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new bu(t),n.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Su,n.sourceUpdater_=new hu(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new _u;var _={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:y,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:l,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new al(r,n.vhs_,n.requestOptions_):new Fs(r,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Xl(Ho.mergeOptions(_,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new Xl(Ho.mergeOptions(_,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new gu(Ho.mergeOptions(_,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise((function(e,t){function n(){s.off("vttjserror",r),e()}function r(){s.off("vttjsloaded",n),t()}s.one("vttjsloaded",n),s.one("vttjserror",r),s.addWebVttScript_()}))}}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),Mu.forEach((function(e){n[e+"_"]=Ru.bind(c(n),e)})),n.logger_=Ko("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var E="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(E,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}h(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(e){void 0===e&&(e="abr");var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)},n.switchMedia_=function(e,t,n){var r=this.media(),i=r&&(r.id||r.uri),a=e.id||e.uri;i&&i!==a&&(this.logger_("switch media "+i+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=i().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(i().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,r=e.mediaGroups.AUDIO,i=Object.keys(r);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=r.main||i.length&&r[i[0]];for(var o in a)if(a[o].default){n={label:o};break}}if(!n)return t;var s=[];for(var l in r)if(r[l][n.label]){var u=r[l][n.label];if(u.playlists&&u.playlists.length)s.push.apply(s,u.playlists);else if(u.uri)s.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&s.push(d)}}return s.length?s:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;ys(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Pu[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.vhs,a=e.segmentLoaders,o=a.AUDIO,s=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var o=null;a.attributes[e]&&(o=i[a.attributes[e]]);var s=Object.keys(i);if(!o)if("AUDIO"===e&&s.length>1&&Es(t.master))for(var l=0;l<s.length;l++){var u=i[s[l]];if(xu(u,a)){o=u;break}}else i.main?o=i.main:1===s.length&&(o=i[s[0]]);return void 0===n?o:null!==n&&o&&o.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=Iu[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.getActiveGroup(),l=a.activePlaylistLoader,u=a.lastGroup_;s&&u&&s.id===u.id||(a.lastGroup_=s,a.lastTrack_=o,Tu(r,a),s&&!s.isMasterPlaylist&&(s.playlistLoader?(r.resyncLoader(),Cu(s.playlistLoader,a)):l&&i.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,r=t.segmentLoaders,i=r[e],a=r.main,o=t.mediaTypes[e],s=o.activeTrack(),l=o.getActiveGroup(),u=o.activePlaylistLoader,c=o.lastTrack_;if((!c||!s||c.id!==s.id)&&(o.lastGroup_=l,o.lastTrack_=s,Tu(i,o),l)){if(l.isMasterPlaylist){if(!s||!c||s.id===c.id)return;var d=t.vhs.masterPlaylistController_,h=d.selectPlaylist();if(d.media()===h)return;return o.logger_("track change. Switching master audio from "+c.id+" to "+s.id),n.pause(),a.resetEverything(),void d.fastQualityChange_(h)}if("AUDIO"===e){if(!l.playlistLoader)return a.setAudio(!0),void a.resetEverything();i.setAudio(!0),a.setAudio(!1)}u!==l.playlistLoader?(i.track&&i.track(s),i.resetEverything(),Cu(l.playlistLoader,o)):Cu(l.playlistLoader,o)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var l=t.AUDIO.activeGroup();if(l){var u=(l.filter((function(e){return e.default}))[0]||l[0]).id;t.AUDIO.tracks[u].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),o.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var c=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};for(var d in r.audioTracks().addEventListener("change",c),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",c),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[d])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;ys(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),$l.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,r=e.currentTime,i=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,s=e.duration,l=e.experimentalBufferBasedABR,u=e.log;if(!i)return Ho.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t)return u(c+" as current playlist is not set"),!0;if(i.id===t.id)return!1;var d=Boolean(Jo(n,r).length);if(!t.endList)return d||"number"!=typeof t.partTargetDuration?(u(c+" as current playlist is live"),!0):(u("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var h=rs(n,r),p=l?ol.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ol.MAX_BUFFER_LOW_WATER_LINE;if(s<p)return u(c+" as duration < max low water line ("+s+" < "+p+")"),!0;var f=i.attributes.BANDWIDTH,m=t.attributes.BANDWIDTH;if(f<m&&(!l||h<o)){var g=c+" as next bandwidth < current bandwidth ("+f+" < "+m+")";return l&&(g+=" and forwardBuffer < bufferHighWaterLine ("+h+" < "+o+")"),u(g),!0}if((!l||f>m)&&h>=a){var v=c+" as forwardBuffer >= bufferLowWaterLine ("+h+" >= "+a+")";return l&&(v+=" and next bandwidth > current bandwidth ("+f+" > "+m+")"),u(v),!0}return u("not "+c+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()})),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){Ho.browser.IE_VERSION||Ho.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Ho.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=$l.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=Yo;var a=i.end(i.length-1);return a-r<=Yo&&n-a<=Yo},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var r,i=this.masterPlaylistLoader_.master.playlists,a=i.filter(gs),o=1===a.length&&a[0]===n;if(1===i.length&&t!==1/0)return Ho.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o);if(o){var s=!1;i.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}})),s&&(Ho.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}r=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=r,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var l=this.selectPlaylist();if(!l)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var u=e.internal?this.logger_:Ho.log.warn,c=e.message?" "+e.message:"";u((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+c+" Switching to playlist "+l.id+"."),l.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var d=l.targetDuration/2*1e3||5e3,h="number"==typeof l.lastRequest&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",o||h)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,r=[],i="all"===e;(i||"main"===e)&&r.push(this.masterPlaylistLoader_);var a=[];(i||"audio"===e)&&a.push("AUDIO"),(i||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&r.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=n[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||r.push(i)})),r.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=Jo(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:$l.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var r=this.masterPlaylistLoader_.master,i=$l.Playlist.seekable(t,n,$l.Playlist.liveEdgeDelay(r,t));if(0!==i.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=$l.Playlist.seekable(t,n,$l.Playlist.liveEdgeDelay(r,t))).length)return}var a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>i.end(0)||i.start(0)>e.end(0)?this.seekable_=i:this.seekable_=Ho.createTimeRanges([[e.start(0)>i.start(0)?e.start(0):i.start(0),e.end(0)<i.end(0)?e.end(0):i.end(0)]]):this.seekable_=i,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+es(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),r=$l.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var r=Rl(this.master(),n),i={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=r.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=","+(r.audio||t.main.audioCodec||Y)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||a)&&(i.audio=r.audio||t.main.audioCodec||t.audio.audioCodec||Y,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),i.audio||i.video){var o,s={};if(["video","audio"].forEach((function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,a=i[e],!(r?K(a):$(a)))){var n=t[e].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(i[e]),"audio"===e&&(o=n)}var r,a})),a&&o&&n.attributes.AUDIO){var l=n.attributes.AUDIO;this.master().playlists.forEach((function(e){(e.attributes&&e.attributes.AUDIO)===l&&e!==n&&(e.excludeUntil=1/0)})),this.logger_("excluding audio group "+l+" as "+o+' does not support codec(s): "'+i.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=(W(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(W(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:n,message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var c=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:n,internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:n,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(r){var i=t[r];if(-1===n.indexOf(i.id)){n.push(i.id);var a=Rl(e.master,i),o=[];!a.audio||$(a.audio)||K(a.audio)||o.push("audio codec "+a.audio),!a.video||$(a.video)||K(a.video)||o.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&o.push("text codec "+a.text),o.length&&(i.excludeUntil=1/0,e.logger_("excluding "+i.id+" for unsupported: "+o.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],r=this.master().playlists,i=Il(W(e)),a=Ml(i),o=i.video&&W(i.video)[0]||null,s=i.audio&&W(i.audio)[0]||null;Object.keys(r).forEach((function(e){var i=r[e];if(-1===n.indexOf(i.id)&&i.excludeUntil!==1/0){n.push(i.id);var l=[],u=Rl(t.masterPlaylistLoader_.master,i),c=Ml(u);if(u.audio||u.video){if(c!==a&&l.push('codec count "'+c+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var d=u.video&&W(u.video)[0]||null,h=u.audio&&W(u.audio)[0]||null;d&&o&&d.type.toLowerCase()!==o.type.toLowerCase()&&l.push('video codec "'+d.type+'" !== "'+o.type+'"'),h&&s&&h.type.toLowerCase()!==s.type.toLowerCase()&&l.push('audio codec "'+h.type+'" !== "'+s.type+'"')}l.length&&(i.excludeUntil=1/0,t.logger_("blacklisting "+i.id+": "+l.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,a=n,o=0;o<e.segments.length;o++){var s=e.segments[o];if(r||(r=vu(t,a+s.duration/2)),r){if("cueIn"in s){r.endTime=a,r.adEndTime=a,a+=s.duration,r=null;continue}if(a<r.endTime){a+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&((r=new(i().VTTCue)(a,a+s.duration,s.cueOut)).adStartTime=a,r.adEndTime=a+parseFloat(s.cueOut),t.addCue(r)),"cueOutCont"in s){var l=s.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];(r=new(i().VTTCue)(a,a+s.duration,"")).adStartTime=a-u,r.adEndTime=r.adStartTime+c,t.addCue(r)}a+=s.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=ol.GOAL_BUFFER_LENGTH,n=ol.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,ol.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=ol.BUFFER_LOW_WATER_LINE,n=ol.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,ol.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,ol.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?i:r)},n.bufferHighWaterLine=function(){return ol.BUFFER_HIGH_WATER_LINE},t}(Ho.EventTarget),Lu=function(e,t,n){var r,i,a,o=e.masterPlaylistController_,s=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Rl(o.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,i=t.id,a=s,function(e){var t=r.master.playlists[i],n=ms(t),o=gs(t);return void 0===e?o:(e?delete t.disabled:t.disabled=!0,e===o||n||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},Du=["seeking","seeked","pause","playing","error"],Nu=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ko("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.monitorCurrentTime_()},a=function(){return t.techWaiting_()},o=function(){return t.cancelTimer_()},s=this.masterPlaylistController_,l=["main","subtitle","audio"],u={};l.forEach((function(e){u[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),t.tech_.on(["seeked","seeking"],u[e].reset)}));var c=function(e){["main","audio"].forEach((function(n){s[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(Du,o),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",a),t.tech_.off(Du,o),t.tech_.off("canplay",r),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),l.forEach((function(e){s[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),t.tech_.off(["seeked","seeking"],u[e].reset)})),t.checkCurrentTimeTimeout_&&i().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&i().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=i().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],r);this[e+"Buffered_"]=r,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:ts(r)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Yo>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var r=t.start(0);e=r+(r===t.end(0)?0:Yo)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+es(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),o=i.audioBuffer?i.audioBuffered():null,s=i.videoBuffer?i.videoBuffered():null,l=this.media(),u=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-$o),c=[o,s],d=0;d<c.length;d++)if(c[d]&&rs(c[d],n)<u)return!1;var h=Zo(a,n);return 0!==h.length&&(e=h.start(0)+Yo,this.logger_("Buffered region starts ("+h.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Jo(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=Zo(i,t);if(a.length>0){var o=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,r){if(void 0===r&&(r=!1),!e.length)return!1;var i=e.end(e.length-1)+Yo;return!n.endList&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,r=e.currentTime;if(t){var i;if(t.length&&n.length){var a=Jo(t,r-3),o=Jo(t,r),s=Jo(n,r);s.length&&!o.length&&a.length&&(i={start:a.end(0),end:s.end(0)})}else Zo(t,r).length||(i=this.gapFromVideoUnderflow_(t,r));return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+r),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=Zo(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+$o),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return Ho.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return Ho.createTimeRanges(t)}(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null},e}(),Fu={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},ju=function e(t,n){var r=0,i=0,a=Ho.mergeOptions(Fu,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){i&&t.currentTime(i)},s=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){return Date.now()-r<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(r=Date.now(),a.getSource.call(t,s)):void Ho.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function e(){t.off("loadedmetadata",o),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}},Bu="2.16.3",Uu={PlaylistLoader:Fs,Playlist:Ss,utils:Ys,STANDARD_PLAYLIST_SELECTOR:Bl,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Ss.isEnabled);return Nl(t,(function(e,t){return Fl(e,t)})),t.filter((function(t){return!!Rl(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:Bl,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&i().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),jl(this.playlists.master,t,parseInt(Dl(this.tech_.el(),"width"),10)*r,parseInt(Dl(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Fl,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||i().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||i().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:qs()};Object.keys(ol).forEach((function(e){Object.defineProperty(Uu,e,{get:function(){return Ho.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),ol[e]},set:function(t){Ho.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Ho.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):ol[e]=t}})}));var qu="videojs-vhs",Vu=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.id){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};Uu.canPlaySource=function(){return Ho.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Hu=function(){if(!i().localStorage)return null;var e=i().localStorage.getItem(qu);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Uu.supportsNativeHls=function(){if(!o()||!o().createElement)return!1;var e=o().createElement("video");return!!Ho.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Uu.supportsNativeDash=!!(o()&&o().createElement&&Ho.getTech("Html5").isSupported())&&/maybe|probably/i.test(o().createElement("video").canPlayType("application/dash+xml")),Uu.supportsTypeNatively=function(e){return"hls"===e?Uu.supportsNativeHls:"dash"===e&&Uu.supportsNativeDash},Uu.isSupported=function(){return Ho.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var zu=function(e){function t(t,n,r){var i;if(i=e.call(this,n,Ho.mergeOptions(r.hls,r.vhs))||this,r.hls&&Object.keys(r.hls).length&&Ho.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof r.initialBandwidth&&(i.options_.bandwidth=r.initialBandwidth),i.logger_=Ko("VhsHandler"),n.options_&&n.options_.playerId){var a=Ho(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Ho.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),c(i)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return Ho.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),c(i)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return Ho.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),c(i)},configurable:!0}),i.player_=a}if(i.tech_=n,i.source_=t,i.stats={},i.ignoreNextSeekingEvent_=!1,i.setOptions_(),i.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(o(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=o().fullscreenElement||o().webkitFullscreenElement||o().mozFullScreenElement||o().msFullscreenElement;t&&t.contains(i.tech_.el())?i.masterPlaylistController_.fastQualityChange_():i.masterPlaylistController_.checkABR_()})),i.on(i.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),i.on(i.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),i.on(i.tech_,"play",i.play),i}h(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Hu();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ol.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ol.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var r;this.setOptions_(),this.options_.src=0===(r=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r,this.options_.tech=this.tech_,this.options_.externVhs=Uu,this.options_.sourceType=Z(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&Ho.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Ou(this.options_);var a=Ho.mergeOptions({liveRangeSafeTimeDelta:Yo},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Nu(a),this.masterPlaylistController_.on("error",(function(){var e=Ho.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var o=this.options_.experimentalBufferBasedABR?Uu.movingAverageBandwidthSelector(.55):Uu.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Uu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=i().navigator.connection||i().navigator.mozConnection||i().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Ho.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return ts(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ts(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!i().localStorage)return!1;var t=Hu();t=t?Ho.mergeOptions(t,e):e;try{i().localStorage.setItem(qu,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=Es(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!ms(e)})).map((function(t,n){return new Lu(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=i().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,r=e.audioMedia,i=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a,o,s=(a=r?i.concat([r]):i,o=Object.keys(n),a.reduce((function(e,t){if(!t.contentProtection)return e;var n=o.reduce((function(e,n){var r=t.contentProtection[n];return r&&r.pssh&&(e[n]={pssh:r.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),l=[],u=[];return s.forEach((function(e){u.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),l.push(new Promise((function(n,r){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?r(e):n()}))})))})),Promise.race([Promise.all(l),Promise.race(u)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e,t,n,r=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()},t=e.player,!(!(n=function(e,t,n){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=Il(W(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);var i=X(r.video),a=X(r.audio),o={};for(var s in e)o[s]={},a&&(o[s].audioContentType=a),i&&(o[s].videoContentType=i),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(o[s].pssh=t.contentProtection[s].pssh),"string"==typeof e[s]&&(o[s].url=e[s]);return Ho.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=n,n&&!t.eme&&(Ho.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(e){if("output-restricted"===e.status){var t=r.masterPlaylistController_.master();if(t&&t.playlists){var n,i=[];t.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))})),i.length&&((n=Ho.log).warn.apply(n,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(i)),r.masterPlaylistController_.fastQualityChange_())}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Ho.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=Ho.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),Vu(t,n.playlists)})),this.playlists.on("mediachange",(function(){Vu(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Bu,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return hu.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&i().URL.revokeObjectURL&&(i().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,r=0,i=0;i<t.segments.length&&!(e<=(r=(n=t.segments[i]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration));i++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!a)return i({message:"valid programTime was not found"});if("estimate"===a.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:r},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,a.segment);return s&&(o.programDateTime=s.toISOString()),i(null,o)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=2),Qs({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(Ho.getComponent("Component")),Wu={name:"videojs-http-streaming",VERSION:Bu,canHandleSource:function(e,t){void 0===t&&(t={});var n=Ho.mergeOptions(Ho.options,t);return Wu.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var r=Ho.mergeOptions(Ho.options,n);return t.vhs=new zu(e,t,r),Ho.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Ho.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=qs(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var n=Z(e);if(!n)return"";var r=Wu.getOverrideNative(t);return!Uu.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative:function(e){void 0===e&&(e={});var t=e,n=t.vhs,r=void 0===n?{}:n,i=t.hls,a=void 0===i?{}:i,o=!(Ho.browser.IS_ANY_SAFARI||Ho.browser.IS_IOS),s=r.overrideNative,l=void 0===s?o:s,u=a.overrideNative;return void 0!==u&&u||l}};K("avc1.4d400d,mp4a.40.2")&&Ho.getTech("Html5").registerSourceHandler(Wu,0),Ho.VhsHandler=zu,Object.defineProperty(Ho,"HlsHandler",{get:function(){return Ho.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),zu},configurable:!0}),Ho.VhsSourceHandler=Wu,Object.defineProperty(Ho,"HlsSourceHandler",{get:function(){return Ho.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Wu},configurable:!0}),Ho.Vhs=Uu,Object.defineProperty(Ho,"Hls",{get:function(){return Ho.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Uu},configurable:!0}),Ho.use||(Ho.registerComponent("Hls",Uu),Ho.registerComponent("Vhs",Uu)),Ho.options.vhs=Ho.options.vhs||{},Ho.options.hls=Ho.options.hls||{},Ho.getPlugin&&Ho.getPlugin("reloadSourceOnError")||(Ho.registerPlugin||Ho.plugin)("reloadSourceOnError",(function(e){ju(this,e)}));var Gu=Ho},239:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(9471);class i extends r.PureComponent{render(){return this.props.children?r.createElement("div",{className:"profile-page-content"+(this.props.enabledContactForm?" with-cform":"")},this.props.children):null}}},266:function(e,t,n){"use strict";n.r(t),n.d(t,{addNotification:function(){return s},initPage:function(){return a},toggleMediaAutoPlay:function(){return o}});var r=n(7143),i=n.n(r);function a(e){i().dispatch({type:"INIT_PAGE",page:e})}function o(){i().dispatch({type:"TOGGLE_AUTO_PLAY"})}function s(e,t){i().dispatch({type:"ADD_NOTIFICATION",notification:e,notificationId:t})}},278:function(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},285:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return a(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.VideoViewerActions=t.SearchFieldActions=t.ProfilePageActions=t.PlaylistViewActions=t.PlaylistPageActions=t.PageActions=t.MediaPageActions=void 0,t.MediaPageActions=o(n(4388)),t.PageActions=o(n(266)),t.PlaylistPageActions=o(n(7500)),t.PlaylistViewActions=o(n(8322)),t.ProfilePageActions=o(n(8759)),t.SearchFieldActions=o(n(1981)),t.VideoViewerActions=o(n(2586))},333:function(e){"use strict";e.exports=Math.round},338:function(e,t,n){var r=n(5187),i=n(5541),a=n(3844);e.exports=function(e){return r(e)||i(e)||a()}},384:function(e,t,n){"use strict";n.r(t),n.d(t,{useItemListSync:function(){return o}});var r=n(9471),i=n(4876),a=n(1838);function o(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[o,s,l,u,c,d,h]=(0,i.useItemList)(e,t);let p={list:"items-list",listOuter:"items-list-outer"+("string"==typeof e.className?" "+e.className.trim():"")};function f(){l.loadItems()}return(0,r.useEffect)((()=>{h()}),[o]),[s,o,l,u,p,n,t,d,c,function(){return null},function(){return l?1>l.totalPages()||l.loadedAllItems()?null:r.createElement("button",{className:"load-more",onClick:f},(0,a.translateString)("SHOW MORE")):null}]}},403:function(e){"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var a=/^\s*class\b/,o=function(e){try{var t=r.call(e);return a.test(t)}catch(e){return!1}},s=function(e){try{return!o(e)&&(r.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),d=function(){return!1};if("object"==typeof document){var h=document.all;l.call(h)===l.call(document.all)&&(d=function(e){if((c||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!o(e)&&s(e)}:function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(o(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},419:function(e,t,n){"use strict";n.d(t,{jV:function(){return c},pl:function(){return l},r1:function(){return u}});var r=n(338),i=n.n(r);if(201==n.j)var a=n(8255);if(201==n.j)var o=n(5474);var s=function(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))},l=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,a.HP)(e),r={},i=0,o=n.length;i<o;i+=1){var s=n[i];("[object Object]"!==Object.prototype.toString.call(e[s])||":"===s[0]||"@"===s[0]||t.indexOf(s)>=0)&&(r[s]=e[s])}return r},u=function(e,t){for(var n=t.map(s),r=(0,a.HP)(e),i={},o=0,l=r.length;o<l;o+=1){var u=r[o];(t.indexOf(u)>=0||n.indexOf(s(u))>=0)&&(i[u]=e[u])}return i},c=function e(t,n){for(var r=a.h1.apply(void 0,[{},(0,a.cJ)(t,n)].concat(i()((0,a.zu)(u(t,n))))),s=(0,a.HP)(r).filter(o.Y),l=0,c=s.length;l<c;l+=1){var d=s[l],h=e(r[d],n);n.indexOf(d)>=0?(delete r[d],r=(0,a.h1)({},r,h)):r[d]=h}return r}},463:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(4571),i=n.n(r);function a(e,t){let n=i()(e,{});return""!==n.origin&&"null"!==n.origin&&n.origin||(n=i()(t+"/"+e.replace(/^\//g,""),{})),n.toString()}},519:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:function(){return r}})},542:function(){},750:function(e,t,n){"use strict";var r=n(2031),i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}},755:function(e,t,n){"use strict";var r=n(403),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o,s;arguments.length>=3&&(o=n),s=e,"[object Array]"===i.call(s)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,o):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,o):function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,o)}},795:function(e,t,n){"use strict";n.d(t,{E:function(){return v}});var r=n(9471),i=n(5338),a=n(7460),o=n(4571),s=n.n(o),l=n(8790),u=n(7664),c=n(1838),d=n(8974);function h(){const{userCan:e,isAnonymous:t,pages:n}=(0,i.useUser)(),o=(0,r.useContext)(l.LinksContext),h=(0,r.useContext)(l.SidebarContext);d.log("links",o);const p=s()(window.location.href),f=(p.host+p.pathname).replace(/\/+$/,"");function m(e){return e.map((e=>{const t=s()(e.link);return{active:f===t.host+t.pathname,itemType:"link",link:e.link||"#",icon:e.icon||null,iconPos:"left",text:e.text||e.link||"#",itemAttr:{className:e.className||""}}}))}return[function(){if(t)return null;const e=[];return h.hideHomeLink||e.push({link:o.home,icon:"home",text:(0,c.translateString)("Home"),className:"nav-item-home"}),a.PageStore.get("config-enabled").pages.featured&&a.PageStore.get("config-enabled").pages.featured.enabled&&e.push({link:o.featured,icon:"star",text:(0,c.translateString)("Featured"),className:"nav-item-featured"}),a.PageStore.get("config-enabled").pages.recommended&&a.PageStore.get("config-enabled").pages.recommended.enabled&&e.push({link:o.recommended,icon:"done_outline",text:(0,c.translateString)("Recommended"),className:"nav-item-recommended"}),a.PageStore.get("config-enabled").pages.latest&&a.PageStore.get("config-enabled").pages.latest.enabled&&e.push({link:o.latest,icon:"new_releases",text:(0,c.translateString)("Latest"),className:"nav-item-latest"}),!h.hideTagsLink&&a.PageStore.get("config-enabled").taxonomies.tags&&a.PageStore.get("config-enabled").taxonomies.tags.enabled&&e.push({link:o.archive.tags,icon:"local_offer",text:(0,c.translateString)("Tags"),className:"nav-item-tags"}),e.push({link:"./ads.html",icon:"people",text:"Ads tag",className:"nav-item-adstag"}),!h.hideCategoriesLink&&a.PageStore.get("config-enabled").taxonomies.categories&&a.PageStore.get("config-enabled").taxonomies.categories.enabled&&e.push({link:o.archive.categories,icon:"list_alt",text:(0,c.translateString)("Categories"),className:"nav-item-categories"}),a.PageStore.get("config-enabled").pages.members&&a.PageStore.get("config-enabled").pages.members.enabled&&e.push({link:o.members,icon:"people",text:(0,c.translateString)("Members"),className:"nav-item-members"}),a.PageStore.get("config-contents").sidebar.mainMenuExtra.items.forEach((t=>{e.push({link:t.link,icon:t.icon,text:t.text,className:t.className})})),e.length?r.createElement(u.NavigationMenuList,{key:"main-first",items:m(e)}):null}(),function(){if(t)return null;const i=[];return t||(e.addMedia&&(i.push({link:o.user.addMedia,icon:"video_call",text:(0,c.translateString)("Upload"),className:"nav-item-upload-media"}),n.media&&i.push({link:n.media,icon:"video_library",text:(0,c.translateString)("My media"),className:"nav-item-my-media"})),e.saveMedia&&i.push({link:n.playlists,icon:"playlist_play",text:(0,c.translateString)("My playlists"),className:"nav-item-my-playlists"})),i.length?r.createElement(u.NavigationMenuList,{key:"main-second",items:m(i)}):null}(),function(){if(t)return null;const n=[];return a.PageStore.get("config-enabled").pages.history&&a.PageStore.get("config-enabled").pages.history.enabled&&n.push({link:o.user.history,icon:"history",text:(0,c.translateString)("History"),className:"nav-item-history"}),e.likeMedia&&a.PageStore.get("config-enabled").pages.liked&&a.PageStore.get("config-enabled").pages.liked.enabled&&n.push({link:o.user.liked,icon:"thumb_up",text:(0,c.translateString)("Liked media"),className:"nav-item-liked"}),n.length?r.createElement(u.NavigationMenuList,{key:"user",items:m(n)}):null}(),function(){const e=[];return e.push({link:"/about",icon:"contact_support",text:(0,c.translateString)("About"),className:"nav-item-about"}),e.push({link:"/tos",icon:"description",text:(0,c.translateString)("Terms"),className:"nav-item-terms"}),e.push({link:"/contact",icon:"alternate_email",text:(0,c.translateString)("Contact"),className:"nav-item-contact"}),e.push({link:"/setlanguage",icon:"language",text:(0,c.translateString)("Language"),className:"nav-item-language"}),e.length?r.createElement(u.NavigationMenuList,{key:"custom",items:m(e)}):null}(),function(){const t=[];return e.manageMedia&&t.push({link:o.manage.media,icon:"miscellaneous_services",text:(0,c.translateString)("Manage media"),className:"nav-item-manage-media"}),e.manageUsers&&t.push({link:o.manage.users,icon:"miscellaneous_services",text:(0,c.translateString)("Manage users"),className:"nav-item-manage-users"}),e.manageComments&&t.push({link:o.manage.comments,icon:"miscellaneous_services",text:(0,c.translateString)("Manage comments"),className:"nav-item-manage-comments"}),t.length?r.createElement(u.NavigationMenuList,{key:"admin",items:m(t)}):null}()]}function p(){const e=a.PageStore.get("config-contents").sidebar.belowNavMenu;return e?r.createElement("div",{className:"page-sidebar-under-nav-menus",dangerouslySetInnerHTML:{__html:e}}):null}function f(){const e=a.PageStore.get("config-contents").sidebar.belowThemeSwitcher;return e?r.createElement("div",{className:"page-sidebar-below-theme-switcher",dangerouslySetInnerHTML:{__html:e}}):null}var m=n(2140);function g(){const e=a.PageStore.get("config-contents").sidebar.footer;return e?r.createElement("div",{className:"page-sidebar-bottom",dangerouslySetInnerHTML:{__html:e}}):null}function v(){const{visibleSidebar:e,toggleSidebar:t}=(0,i.useLayout)(),n=(0,r.useRef)(null),[o,s]=(0,r.useState)(e||492>window.innerWidth),[l,u]=(0,r.useState)(!0);let c=null,d=null,v=!1,y=!1;function b(){if(v||!a.PageStore.get("config-contents").sidebar.footer)return;c=document.querySelector(".page-sidebar-bottom"),d=c.previousSibling,"relative"!==getComputedStyle(d).position&&(y=!0),v=!0,a.PageStore.on("window_resize",_);let e=0,t=0,n=0;!function r(){const i=d.offsetTop+d.offsetHeight;i!==n?n=i:t+=1,e+=1,10>t&&50>e&&setTimeout(r,10),_()}()}function _(){let e=d,t=c.offsetHeight;y&&(t+=e.offsetHeight,e=e.previousSibling),u(!(e.offsetTop+e.offsetHeight+t>window.innerHeight-n.current.offsetTop))}function E(e){e.preventDefault(),e.stopPropagation(),t()}return(0,r.useEffect)((()=>{s(!0),setTimeout(b,20)}),[e]),(0,r.useEffect)((()=>{(e||o)&&b();const t=document.querySelector(".page-sidebar-content-overlay");return t&&t.addEventListener("click",E),()=>{v&&a.PageStore.removeListener("window_resize",_),t&&t.removeEventListener("click",E)}}),[]),r.createElement("div",{ref:n,className:"page-sidebar"+(l?" fixed-bottom":"")},r.createElement("div",{className:"page-sidebar-inner"},e||o?r.createElement(r.Fragment,null,r.createElement(h,null),r.createElement(p,null),r.createElement(m.SidebarThemeSwitcher,null),r.createElement(f,null),r.createElement(g,null)):null))}},868:function(e,t,n){"use strict";n.d(t,{gR:function(){return g},p9:function(){return v},cN:function(){return y},Et:function(){return b},w3:function(){return _},rc:function(){return A},$2:function(){return P},st:function(){return M},Aj:function(){return T},fR:function(){return I},jf:function(){return x},MU:function(){return L},wN:function(){return C},s0:function(){return O},aH:function(){return R},Tl:function(){return w},A6:function(){return S},z_:function(){return E},fC:function(){return k},$h:function(){return D.$}});var r=n(9471),i=n(4350),a=n(1838),o=n(8713),s=n.n(o),l=n(4571),u=n.n(l),c=n(8790),d=n(7154),h=n(2818),p=n(5615),f=n(8974);function m(e){const t=(0,r.useContext)(c.ApiUrlContext),n=(0,r.useContext)(c.SiteContext),[i,o]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)([]),[b,_]=(0,r.useState)({}),[E,S]=(0,r.useState)([]),[w,T]=(0,r.useState)({}),C={videoQuality:new d.BrowserCache(n.id,86400).get("video-quality")};C.videoQuality=null!==C.videoQuality?C.videoQuality:"Auto";let k=null,A=null,P=null,x=function(){let t=new(u())(e.pageLink).query;return t?(t=t.substring(1),t.split("&"),t=t.length?t.split("="):[]):t=[],t}();if(x.length){let e=0;for(;e<x.length;)"m"===x[e]&&(P=x[e+1]),e+=2}function I(e){if(void 0===e||!e||void 0===e.data||!e.data)return;let t,r;A=e.data;const i=[];let s=null,u=(0,h.uW)(A.encodings_info,A.hls_info),c=null,d=null;if("string"==typeof A.poster_url?s=(0,a.formatInnerLink)(A.poster_url,n.url):"string"==typeof A.thumbnail_url&&(s=(0,a.formatInnerLink)(A.thumbnail_url,n.url)),Object.keys(u).length){const e=(0,h.n1)();let o=C.videoQuality;(null===o||"Auto"===o&&void 0===u.Auto)&&(o=720);let s=(0,h.OQ)(o,u);for("Auto"===o&&void 0!==u.Auto&&i.push({src:u.Auto.url[0]}),r=0;r<u[s].format.length;){if("hls"===u[s].format[r]){i.push({src:u[s].url[r]});break}r+=1}for(r in A.encodings_info[s])A.encodings_info[s].hasOwnProperty(r)&&e.support[r]&&(t=A.encodings_info[s][r].url,t&&(t=(0,a.formatInnerLink)(t,n.url),i.push({src:t,encodings_status:A.encodings_info[s][r].status})))}else u=null;if(1===i.length&&"running"===i[0].encodings_status&&(c="encodingRunning",d="Media encoding is currently running. Try again in few minutes."),null!==c)switch(c){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:f.warn("VIDEO DEBUG:","Video files don't exist")}o(c),l(d),g(s),y(i),_(u),S(A.subtitles_info),T(A.sprites_url?{url:(0,a.formatInnerLink)(A.sprites_url,n.url),frame:{width:160,height:90,seconds:10}}:null);const p=document.querySelector(".feat-first-item .item .item-description > div");p&&(p.innerHTML=A.summary)}function M(e){if(void 0!==e&&void 0!==e.type)switch(e.type){case"network":case"private":case"unavailable":o(e.type),l(void 0!==e.message?e.message:"Αn error occurred while loading the media's data")}}return null!==P&&(k=t.media+"/"+P),(0,r.useEffect)((()=>{null!==k&&(0,a.getRequest)(k,!1,I,M)}),[]),v.length?r.createElement("div",{className:"video-player"},r.createElement(p.VideoPlayer,{siteId:n.id,siteUrl:n.url,info:b,sources:v,poster:m,previewSprite:w,subtitlesInfo:E,enableAutoplay:!1,inEmbed:!1,hasTheaterMode:!1,hasNextLink:!1,hasPreviousLink:!1,errorMessage:s})):null}function g(e){return""===e.description?null:r.createElement("div",{className:"item-description"},r.createElement("div",null,e.description))}function v(e){return r.createElement("div",{className:"item-main"},e.children)}function y(e){return r.createElement(v,null,r.createElement("a",{className:"item-content-link",href:e.link,title:e.title},e.children))}function b(e){return""===e.title?null:r.createElement("h3",null,r.createElement("span",{"aria-label":e.ariaLabel},e.title))}function _(e){return""===e.title?null:r.createElement("h3",null,r.createElement("a",{href:e.link,title:e.title},r.createElement("span",{"aria-label":e.ariaLabel},e.title)))}function E(e){return r.createElement("time",{key:"member-since"},"Member for ",(0,i.GP)(new Date(e.date)).replace(" ago",""))}function S(e){return r.createElement("span",{key:"item-media-count",className:"item-media-count"}," "+e.count," media")}function w(e){return r.createElement("span",{className:"item-meta"},r.createElement("span",{className:"playlist-date"},r.createElement("time",{dateTime:e.dateTime},e.text)))}function T(e){let t=e.link;return t&&window.MediaCMS.site.devEnv&&(t="/edit-media.html"),t?r.createElement("a",{href:t,title:(0,a.translateString)("Edit media"),className:"item-edit-link"},(0,a.translateString)("EDIT MEDIA")):null}function C(e){const t={key:"item-thumb",href:e.link,title:e.title,tabIndex:"-1","aria-hidden":!0,className:"item-thumb"+(e.src?"":" no-thumb"),style:e.src?{backgroundImage:"url('"+e.src+"')"}:null};return r.createElement("a",t,e.src?r.createElement("div",{key:"item-type-icon",className:"item-type-icon"},r.createElement("div",null)):null)}function k(e){const t={key:"item-thumb",href:e.link,title:e.title,tabIndex:"-1","aria-hidden":!0,className:"item-thumb"+(e.src?"":" no-thumb"),style:e.src?{backgroundImage:"url('"+e.src+"')"}:null};return r.createElement("a",t)}function A(e){return""===e.name?null:r.createElement("span",{className:"item-author"},r.createElement("span",null,e.name))}function P(e){return""===e.name?null:r.createElement("span",{className:"item-author"},r.createElement("a",{href:e.link,title:e.name},r.createElement("span",null,e.name)))}function x(e){return r.createElement("span",{className:"item-views"},(0,a.formatViewsNumber)(e.views)+" "+(1>=e.views?(0,a.translateString)("view"):(0,a.translateString)("views")))}function I(e){return r.createElement("span",{className:"item-date"},r.createElement("time",{dateTime:e.dateTime,content:e.time},e.text))}function M(e){return r.createElement("span",{className:"item-duration"},r.createElement("span",{"aria-label":e.ariaLabel,content:e.time},e.text))}function R(e){if(""===e.url)return null;const t=e.url.split(".").slice(0,-1).join("."),n=(0,a.imageExtension)(e.url);return r.createElement("span",{className:"item-img-preview","data-src":t,"data-ext":n})}function O(e){return r.createElement("div",{className:"item-player-wrapper"},r.createElement("div",{className:"item-player-wrapper-inner"},r.createElement(m,{pageLink:e.mediaPageLink})))}function L(e){return r.createElement("div",{className:"item-order-number"},r.createElement("div",null,r.createElement("div",{"data-order":e.index,"data-id":e.media_id},e.inPlayback&&e.index===e.activeIndex?r.createElement("i",{className:"material-icons"},"play_arrow"):e.index)))}if(m.propTypes={pageLink:s().string.isRequired},!/^((10|40|42)1|152|374|543|594|722|983)$/.test(n.j))var D=n(4845)},878:function(e,t,n){"use strict";n.d(t,{c:function(){return u}});var r=n(9471),i=n(8713),a=n.n(i),o=n(6387),s=n(5321),l=n(2828);function u(e){const{thumbnail:t}=(0,o.useUser)(),n={"aria-label":"Account profile photo that opens list of options and settings pages links",className:"thumbnail"};switch(e.isButton?void 0!==e.onClick&&(n.onClick=e.onClick):n.type="span",e.size){case"small":case"large":n.className+=" "+e.size+"-thumb"}return r.createElement(s.i,n,t?r.createElement("img",{src:t,alt:""}):r.createElement(l.Z,{type:"person"}))}u.propTypes={isButton:a().bool,size:a().oneOf(["small","medium","large"]),onClick:a().func},u.defaultProps={isButton:!1,size:"medium"}},919:function(e,t,n){var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},977:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(7143);function i(e,t){return r.register(e[t].bind(e)),e}},1003:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListHeader=void 0;var i=r(n(9471)),a=n(1838);t.MediaListHeader=function(e){var t=e.viewAllText||(0,a.translateString)("VIEW ALL");return i.default.createElement("div",{className:(e.className?e.className+" ":"")+"media-list-header",style:e.style},i.default.createElement("h2",null,e.title),e.viewAllLink?i.default.createElement("h3",null," ",i.default.createElement("a",{href:e.viewAllLink,title:t}," ",t||e.viewAllLink," ")," "):null)}},1024:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=u}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+p]=255&o,p+=f,o/=256,u-=8);e[n+p-f]|=128*m}},1026:function(e,t,n){"use strict";var r=n(237),i=n(8974);function a(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};d.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle&&clearInterval(this.updateTimeIntervalHandle),this.seekCheckIntervalHandle&&clearInterval(this.seekCheckIntervalHandle),this.resizeCheckIntervalHandle&&clearInterval(this.resizeCheckIntervalHandle),this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},d.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},d.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},d.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},d.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},d.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},d.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},d.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},d.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},d.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},d.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},d.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},d.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},d.prototype.getContentPlayer=function(){return this.h5Player},d.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},d.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},d.prototype.unmute=function(){this.vjsPlayer.muted(!1)},d.prototype.mute=function(){this.vjsPlayer.muted(!0)},d.prototype.play=function(){this.vjsPlayer.play()},d.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},d.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},d.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},d.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},d.prototype.getPlayerId=function(){return this.vjsPlayer.id()},d.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},d.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},d.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},d.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},d.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},d.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},d.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},d.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},d.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},d.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},d.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},d.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},d.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},d.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var h=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};h.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},h.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},h.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},h.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},h.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},h.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},h.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},h.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},h.prototype.updateAdUi=function(e,t,n,r,i){var a=Math.floor(t/60),o=Math.floor(t%60);o.toString().length<2&&(o="0"+o);var s=": ";i>1&&(s=" ("+r+" "+this.controller.getSettings().adLabelNofN+" "+i+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+a+":"+o;var l=e/n*100;this.progressDiv.style.width=l+"%"},h.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},h.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},h.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},h.prototype.onMouseMove=function(e){this.changeVolume(e)},h.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},h.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},h.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},h.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},h.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},h.prototype.reset=function(){this.hideAdContainer()},h.prototype.onAdError=function(){this.hideAdContainer()},h.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},h.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},h.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},h.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},h.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},h.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},h.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},h.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},h.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},h.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},h.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},h.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},h.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},h.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},h.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},h.prototype.getAdContainerDiv=function(){return this.adContainerDiv},h.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var p=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};p.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.3.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},p.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach((function(n){e.omidAccessModeRules[n]=t[n]}))}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===o(n)&&Object.keys(n).forEach((function(t){e[t]=n[t]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},p.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},p.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},p.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},p.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},p.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},p.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},p.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},p.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},p.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},p.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},p.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},p.prototype.onAdPaused=function(){this.controller.onAdsPaused()},p.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},p.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},p.prototype.onAdLog=function(e){this.controller.onAdLog(e)},p.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var r,i=0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},p.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},p.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},p.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},p.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},p.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},p.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},p.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},p.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},p.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},p.prototype.getCurrentAd=function(){return this.currentAd},p.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},p.prototype.isAdPlaying=function(){return this.adPlaying},p.prototype.isAdMuted=function(){return this.adMuted},p.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},p.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},p.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},p.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},p.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},p.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},p.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},p.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},p.prototype.getAdsManager=function(){return this.adsManager},p.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var f=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new d(e,r,this),this.adUi=new h(this),this.sdkImpl=new p(this)};f.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},f.prototype.initWithSettings=function(e){this.settings=Object.assign({},f.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},f.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&i.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},f.prototype.getSettings=function(){return this.settings},f.prototype.getIsMobile=function(){return this.isMobile},f.prototype.getIsIos=function(){return this.isIos},f.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},f.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},f.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},f.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},f.prototype.requestAds=function(){this.sdkImpl.requestAds()},f.prototype.setSetting=function(e,t){this.settings[e]=t},f.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},f.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},f.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},f.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},f.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},f.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},f.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},f.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},f.prototype.showAdContainer=function(){this.adUi.showAdContainer()},f.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},f.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},f.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},f.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},f.prototype.onAdPlayheadUpdated=function(e,t,n,r,i){this.adUi.updateAdUi(e,t,n,r,i)},f.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},f.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},f.prototype.playContent=function(){this.playerWrapper.play()},f.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},f.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},f.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},f.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},f.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},f.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},f.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},f.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},f.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},f.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},f.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},f.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},f.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},f.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},f.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},f.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},f.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},f.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},f.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},f.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},f.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},f.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},f.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},f.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},f.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},f.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},f.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},f.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},f.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},f.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},f.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},f.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},f.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},f.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},f.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},f.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},f.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var m=function(e,t,n){this.vjsPlayer=e,this.daiController=n,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};m.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},m.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},m.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},m.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},m.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},m.prototype.getStreamPlayer=function(){return this.h5Player},m.prototype.getVjsPlayer=function(){return this.vjsPlayer},m.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},m.prototype.getPlayerId=function(){return this.vjsPlayer.id()},m.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},m.prototype.onAdBreakStart=function(){this.vjsControls.hide()},m.prototype.onAdBreakEnd=function(){this.vjsControls.show()},m.prototype.reset=function(){this.vjsControls.show()};var g=function(e){this.daiController=e,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.timedMetadata,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};g.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},g.prototype.onAddTrack=function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(e){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(n.activeCues_);try{for(i.s();!(r=i.n()).done;){var a=r.value,o={};o[a.value.key]=a.value.data,t.streamManager.onTimedMetadata(o)}}catch(e){i.e(e)}finally{i.f()}})))},g.prototype.createAdUiDiv=function(){var e=document.createElement("div");e.id="ad-ui",e.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(e),this.adUiDiv=e},g.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},g.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},g.prototype.onSeekEnd=function(e){if("live"!==this.daiController.getSettings().streamType)if(this.isSnapback)this.isSnapback=!1;else{var t=this.streamManager.previousCuePointForStreamTime(e);t&&!t.played&&(this.isSnapback=!0,this.snapForwardTime=e,this.vjsPlayer.currentTime(t.start))}},g.prototype.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},g.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiController.getSettings().bookmarkTime;if(n){var r=this.streamManager.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(r)}}.bind(this))},g.prototype.requestStream=function(){var e,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,e.videoId=this.daiController.getSettings().videoId):"live"===t?(e=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),e.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(e.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(e.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(e.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(e.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){e.omidAccessModeRules={};var n=this.daiController.getSettings().omidMode;n.FULL&&(e.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=n.FULL),n.DOMAIN&&(e.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=n.DOMAIN),n.LIMITED&&(e.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=n.LIMITED)}this.streamManager.requestStream(e),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:e})},g.prototype.onPlayerReady=function(){this.initImaDai()},g.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},g.prototype.getStreamManager=function(){return this.StreamManager},g.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var v=function(e,t){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new m(e,r,this),this.sdkImpl=new g(this)};v.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},v.prototype.initWithSettings=function(e){this.settings=Object.assign({},v.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},v.prototype.warnAboutDeprecatedSettings=function(){var e=this;[].forEach((function(t){void 0!==e.settings[t]&&i.warn("WARNING: videojs.imaDai setting "+t+" is deprecated")}))},v.prototype.getSettings=function(){return this.settings},v.prototype.getIsMobile=function(){return this.isMobile},v.prototype.getIsIos=function(){return this.isIos},v.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},v.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},v.prototype.requestStream=function(){this.sdkImpl.requestStream()},v.prototype.setSetting=function(e,t){this.settings[e]=t},v.prototype.onErrorLoadingAds=function(e){this.playerWrapper.onAdError(e)},v.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},v.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},v.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},v.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},v.prototype.isInAdBreak=function(){return this.inAdBreak},v.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},v.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},v.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},v.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},v.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},v.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},v.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},v.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var y=function(e,t){this.controller=new f(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},b=function(e,t){this.controller=new v(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},_=u((function e(t,n){s(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")})),E=u((function e(t,n,r){s(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof r?(this.streamFormat=t,this.cmsId=n,this.videoId=r):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")})),S=r.A.registerPlugin||r.A.plugin;S("ima",(function(e){this.ima=new y(this,e)})),S("imaDai",(function(e,t){if(e instanceof _)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof E))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new b(this,t)}))},1064:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(2698);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},1095:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(e){var t=e.files,n=i.useRef(),a=i.useContext(r.LocalizationContext).l10n,o=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,s=i.useRef([]),l=a&&a.attachment?a.attachment.clickToDownload:"Click to download",u=function(e){var t=n.current,r=[].slice.call(t.getElementsByClassName("rpv-attachment__item"));if(0!==r.length){r.forEach((function(e){return e.setAttribute("tabindex","-1")}));var i=document.activeElement,a=r[Math.min(r.length-1,Math.max(0,e(r,i)))];a.setAttribute("tabindex","0"),a.focus()}};return r.useIsomorphicLayoutEffect((function(){var e=n.current;if(e){var t=[].slice.call(e.getElementsByClassName("rpv-attachment__item"));if(s.current=t,t.length>0){var r=t[0];r.focus(),r.setAttribute("tabindex","0")}}}),[]),i.createElement("div",{"data-testid":"attachment__list",className:r.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":o}),ref:n,tabIndex:-1,onKeyDown:function(e){switch(e.key){case"ArrowDown":e.preventDefault(),u((function(e,t){return e.indexOf(t)+1}));break;case"ArrowUp":e.preventDefault(),u((function(e,t){return e.indexOf(t)-1}));break;case"End":e.preventDefault(),u((function(e,t){return e.length-1}));break;case"Home":e.preventDefault(),u((function(e,t){return 0}))}}},t.map((function(e){return i.createElement("button",{className:"rpv-attachment__item",key:e.fileName,tabIndex:-1,title:l,type:"button",onClick:function(){return t=e.fileName,r="string"==typeof(n=e.data)?"":URL.createObjectURL(new Blob([n],{type:""})),(i=document.createElement("a")).style.display="none",i.href=r||t,i.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(t)),document.body.appendChild(i),i.click(),document.body.removeChild(i),void(r&&URL.revokeObjectURL(r));var t,n,r,i}},e.fileName)})))},o=function(e){var t=e.doc,n=i.useContext(r.LocalizationContext).l10n,o=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,s=n&&n.attachment?n.attachment.noAttachment:"There is no attachment",l=i.useState({files:[],isLoaded:!1}),u=l[0],c=l[1];return i.useEffect((function(){t.getAttachments().then((function(e){var t=e?Object.keys(e).map((function(t){return{data:e[t].content,fileName:e[t].filename}})):[];c({files:t,isLoaded:!0})}))}),[t]),u.isLoaded?0===u.files.length?i.createElement("div",{"data-testid":"attachment__empty",className:r.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":o})},s):i.createElement(a,{files:u.files}):i.createElement(r.Spinner,null)},s=function(e){var t=e.store,n=i.useState(t.get("doc")),a=n[0],s=n[1],l=function(e){s(e)};return i.useEffect((function(){return t.subscribe("doc",l),function(){t.unsubscribe("doc",l)}}),[]),a?i.createElement(o,{doc:a}):i.createElement("div",{className:"rpv-attachment__loader"},i.createElement(r.Spinner,null))};t.attachmentPlugin=function(){var e=i.useMemo((function(){return r.createStore({})}),[]);return{onDocumentLoad:function(t){e.update("doc",t.doc)},Attachments:function(){return i.createElement(s,{store:e})}}}},1134:function(e,t,n){"use strict";function r(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}function i(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function a(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function o(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}n.d(t,{CX:function(){return o},GT:function(){return u},kN:function(){return r},qk:function(){return i},uU:function(){return s},xi:function(){return l},zc:function(){return a}});const s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,l=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;function u(){const e={document:{visibility:[]},window:{resize:[],scroll:[]}};return document.addEventListener("visibilitychange",(function(){e.document.visibility.map((e=>e()))})),window.addEventListener("resize",(function(){e.window.resize.map((e=>e()))})),window.addEventListener("scroll",(function(){e.window.scroll.map((e=>e()))})),{doc:function(t){"function"==typeof t&&e.document.visibility.push(t)},win:function(t,n){"function"==typeof t&&e.window.resize.push(t),"function"==typeof n&&e.window.scroll.push(n)}}}},1177:function(e,t,n){"use strict";n.d(t,{A:function(){return _}});var r=n(9471),i=n(8713),a=n.n(i),o=n(5338),s=n(8790),l=n(7460),u=n(285),c=n(7664),d=n(5289),h=n(1838),p=n(8974);class f extends r.PureComponent{constructor(e){super(e),this.state={visibleForm:!1,queryVal:l.ProfilePageStore.get("author-query")||""},this.onChange=this.onChange.bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.showForm=this.showForm.bind(this),this.hideForm=this.hideForm.bind(this),this.onFormSubmit=this.onFormSubmit.bind(this),this.updateTimeout=null,this.pendingUpdate=!1}updateQuery(e){this.pendingUpdateValue=null,this.setState({queryVal:e},(function(){"function"==typeof this.props.onQueryChange&&this.props.onQueryChange(this.state.queryVal)}))}onChange(e){this.pendingEvent=e,this.setState({queryVal:e.target.value||""},(function(){this.updateTimeout||(this.pendingEvent=null,"function"==typeof this.props.onQueryChange&&this.props.onQueryChange(this.state.queryVal),this.updateTimeout=setTimeout(function(){this.updateTimeout=null,this.pendingEvent&&this.onChange(this.pendingEvent)}.bind(this),100))}))}onInputFocus(){}onInputBlur(){this.hideForm()}showForm(){this.setState({visibleForm:!0},(function(){"function"==typeof this.props.toggleSearchField&&this.props.toggleSearchField()}))}hideForm(){this.setState({visibleForm:!1},(function(){"function"==typeof this.props.toggleSearchField&&this.props.toggleSearchField()}))}onFormSubmit(e){""===this.refs.SearchInput.value.trim()&&(e.preventDefault(),e.stopPropagation())}render(){return this.state.visibleForm?r.createElement("form",{method:"get",action:s.LinksContext._currentValue.profile.media,onSubmit:this.onFormSubmit},r.createElement("span",null,r.createElement(c.CircleIconButton,{buttonShadow:!1},r.createElement("i",{className:"material-icons"},"search"))),r.createElement("span",null,r.createElement("input",{autoFocus:!0,ref:"SearchInput",type:"text",name:"aq",placeholder:"Search","aria-label":"Search",value:this.state.queryVal,onChange:this.onChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur}))):r.createElement("div",null,r.createElement("span",null,r.createElement(c.CircleIconButton,{buttonShadow:!1,onClick:this.showForm},r.createElement("i",{className:"material-icons"},"search"))))}}function m(e){return r.createElement("li",{className:e.isActive?"active":null},r.createElement("a",{href:e.link,title:e.label},e.label))}f.propTypes={onQueryChange:a().func},f.defaultProps={},m.propTypes={id:a().string.isRequired,label:a().string.isRequired,link:a().string.isRequired,isActive:a().bool.isRequired};class g extends r.PureComponent{constructor(e){super(e),this.state={displayNext:!1,displayPrev:!1},this.inlineSlider=null,this.nextSlide=this.nextSlide.bind(this),this.prevSlide=this.prevSlide.bind(this),this.updateSlider=this.updateSlider.bind(this,!1),this.onToggleSearchField=this.onToggleSearchField.bind(this),l.PageStore.on("window_resize",this.updateSlider),this.sliderRecalTimeout=null,l.PageStore.on("changed_page_sidebar_visibility",function(){clearTimeout(this.sliderRecalTimeout),this.sliderRecalTimeout=setTimeout(function(){this.updateSliderButtonsView(),this.sliderRecalTimeout=setTimeout(function(){this.sliderRecalTimeout=null,this.updateSlider()}.bind(this),50)}.bind(this),150)}.bind(this)),this.previousBtn=r.createElement("span",{className:"previous-slide"},r.createElement(c.CircleIconButton,{buttonShadow:!1,onClick:this.prevSlide},r.createElement("i",{className:"material-icons"},"keyboard_arrow_left"))),this.nextBtn=r.createElement("span",{className:"next-slide"},r.createElement(c.CircleIconButton,{buttonShadow:!1,onClick:this.nextSlide},r.createElement("i",{className:"material-icons"},"keyboard_arrow_right"))),this.userIsAuthor=!s.MemberContext._currentValue.is.anonymous&&l.ProfilePageStore.get("author-data").username===s.MemberContext._currentValue.username}componentDidMount(){this.updateSlider()}nextSlide(){this.inlineSlider.nextSlide(),this.updateSliderButtonsView(),this.inlineSlider.scrollToCurrentSlide()}prevSlide(){this.inlineSlider.previousSlide(),this.updateSliderButtonsView(),this.inlineSlider.scrollToCurrentSlide()}updateSlider(e){this.inlineSlider||(this.inlineSlider=new d.A(this.refs.itemsListWrap,".profile-nav ul li")),this.inlineSlider.updateDataState(document.querySelectorAll(".profile-nav ul li").length,!0,!e),this.updateSliderButtonsView(),this.pendingChangeSlide&&(this.pendingChangeSlide=!1,this.inlineSlider.scrollToCurrentSlide())}updateSliderButtonsView(){this.setState({displayPrev:this.inlineSlider.hasPreviousSlide(),displayNext:this.inlineSlider.hasNextSlide()})}onToggleSearchField(){this.updateSlider()}render(){return r.createElement("nav",{ref:"tabsNav",className:"profile-nav items-list-outer list-inline list-slider"},r.createElement("div",{className:"profile-nav-inner items-list-outer"},this.state.displayPrev?this.previousBtn:null,r.createElement("ul",{className:"items-list-wrap",ref:"itemsListWrap"},r.createElement(m,{id:"about",isActive:"about"===this.props.type,label:(0,h.translateString)("About"),link:s.LinksContext._currentValue.profile.about}),r.createElement(m,{id:"media",isActive:"media"===this.props.type,label:(0,h.translateString)("Media"),link:s.LinksContext._currentValue.profile.media}),r.createElement(m,{id:"live",isActive:"live"===this.props.type,label:(0,h.translateString)("Live"),link:s.LinksContext._currentValue.profile.live}),s.MemberContext._currentValue.can.saveMedia?r.createElement(m,{id:"playlists",isActive:"playlists"===this.props.type,label:(0,h.translateString)("Playlists"),link:s.LinksContext._currentValue.profile.playlists}):null,l.PageStore.get("config-options").pages.profile.includeHistory&&this.userIsAuthor?r.createElement(m,{id:"history",isActive:"history"===this.props.type,label:l.PageStore.get("config-enabled").pages.history.title,link:s.LinksContext._currentValue.user.history}):null,l.PageStore.get("config-options").pages.profile.includeLikedMedia&&this.userIsAuthor?r.createElement(m,{id:"liked",isActive:"liked"===this.props.type,label:l.PageStore.get("config-enabled").pages.liked.title,link:s.LinksContext._currentValue.user.liked}):null,r.createElement("li",{className:"media-search"},r.createElement(f,{onQueryChange:this.props.onQueryChange,toggleSearchField:this.onToggleSearchField}))),this.state.displayNext?this.nextBtn:null))}}function v(e){let t=e.link;return window.MediaCMS.site.devEnv&&(t="/edit-channel.html"),r.createElement("a",{href:t,className:"edit-channel",title:"Add banner"},"ADD BANNER")}function y(e){let t=e.link;return window.MediaCMS.site.devEnv&&(t="/edit-channel.html"),r.createElement("a",{href:t,className:"edit-channel",title:"Edit banner"},"EDIT BANNER")}function b(e){let t=e.link;return window.MediaCMS.site.devEnv&&(t="/edit-profile.html"),r.createElement("a",{href:t,className:"edit-profile",title:"Edit profile"},"EDIT PROFILE")}function _(e){const[t,n,i]=(0,o.usePopup)(),a=(0,r.useRef)(null),d=(0,r.useRef)(null),[h,f]=(0,r.useState)(!1),m={profileNavTop:0},_=!s.MemberContext._currentValue.is.anonymous&&s.MemberContext._currentValue.is.admin,E=!s.MemberContext._currentValue.is.anonymous&&l.ProfilePageStore.get("author-data").username===s.MemberContext._currentValue.username,S=E||!s.MemberContext._currentValue.is.anonymous&&s.MemberContext._currentValue.can.editProfile,w=_||E||!s.MemberContext._currentValue.is.anonymous&&s.MemberContext._currentValue.can.deleteProfile;function T(){m.profileHeaderTop=a.current.offsetTop,m.profileNavTop=m.profileHeaderTop+a.current.offsetHeight-d.current.refs.tabsNav.offsetHeight}function C(){f(m.profileHeaderTop+window.scrollY>m.profileNavTop)}function k(e){setTimeout((function(){u.PageActions.addNotification("Profile removed. Redirecting...","profileDelete"),setTimeout((function(){window.location.href=s.SiteContext._currentValue.url}),2e3)}),100),void 0!==e&&p.info("Removed user's profile '"+e+'"')}function A(e){setTimeout((function(){u.PageActions.addNotification("Profile removal failed","profileDeleteFail")}),100),void 0!==e&&p.info('Profile "'+e+'" removal failed')}function P(){T(),C()}function x(){C()}return(0,r.useEffect)((()=>(w&&(l.ProfilePageStore.on("profile_delete",k),l.ProfilePageStore.on("profile_delete_fail",A)),l.PageStore.on("resize",P),l.PageStore.on("changed_page_sidebar_visibility",P),l.PageStore.on("window_scroll",x),T(),C(),()=>{w&&(l.ProfilePageStore.removeListener("profile_delete",k),l.ProfilePageStore.removeListener("profile_delete_fail",A)),l.PageStore.removeListener("resize",P),l.PageStore.removeListener("changed_page_sidebar_visibility",P),l.PageStore.removeListener("window_scroll",x)})),[]),r.createElement("div",{ref:a,className:"profile-page-header"+(h?" fixed-nav":"")},r.createElement("span",{className:"profile-banner-wrap"},e.author.banner_thumbnail_url?r.createElement("span",{className:"profile-banner",style:{backgroundImage:"url("+s.SiteContext._currentValue.url+"/"+e.author.banner_thumbnail_url.replace(/^\//g,"")+")"}}):null,w?r.createElement("span",{className:"delete-profile-wrap"},r.createElement(i,{contentRef:t},r.createElement("button",{className:"delete-profile",title:""},"REMOVE PROFILE")),r.createElement(n,{contentRef:t},r.createElement(c.PopupMain,null,r.createElement("div",{className:"popup-message"},r.createElement("span",{className:"popup-message-title"},"Profile removal"),r.createElement("span",{className:"popup-message-main"},"You're willing to remove profile permanently?")),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-profile-removal",onClick:function(){t.current.toggle()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-profile-removal",onClick:function(){u.ProfilePageActions.remove_profile(),t.current.toggle()}},"PROCEED"))))):null,S?e.author.banner_thumbnail_url?r.createElement(y,{link:l.ProfilePageStore.get("author-data").default_channel_edit_url}):r.createElement(v,{link:l.ProfilePageStore.get("author-data").default_channel_edit_url}):null),r.createElement("div",{className:"profile-info-nav-wrap"},e.author.thumbnail_url||e.author.name?r.createElement("div",{className:"profile-info"},r.createElement("div",{className:"profile-info-inner"},r.createElement("div",null,e.author.thumbnail_url?r.createElement("img",{src:e.author.thumbnail_url,alt:""}):null),r.createElement("div",null,e.author.name?r.createElement("h1",null,e.author.name):null,S?r.createElement(b,{link:l.ProfilePageStore.get("author-data").edit_url}):null))):null,r.createElement(g,{ref:d,type:e.type,onQueryChange:e.onQueryChange})))}g.propTypes={type:a().string.isRequired,onQueryChange:a().func},_.propTypes={author:a().object.isRequired,type:a().string.isRequired,onQueryChange:a().func},_.defaultProps={type:"media"}},1254:function(e,t,n){"use strict";n.d(t,{z:function(){return S}});var r=n(9471),i=n(7460),a=n(5338),o=n(1838),s=n(8790),l=n(285),u=n(7664);function c(e,t,n){let r,i=[];for(n=!!n,r=0;r<e.length;++r)n?e.substring(r,r+t.length)===t&&i.push(r):e.substring(r,r+t.length).toLowerCase()===t.toLowerCase()&&i.push(r);return i}function d(e){const t=()=>window.innerHeight-98,n=()=>o(t()),[a,o]=(0,r.useState)(t());return(0,r.useEffect)((()=>(i.PageStore.on("window_resize",n),()=>i.PageStore.removeListener("window_resize",n)))),r.createElement("div",{className:"search-predictions-list",style:{maxHeight:a+"px"}},e.children||null)}function h(e){const t=(0,r.useRef)(null);function n(t){let n;switch(t.keyCode||t.charCode){case 13:i();break;case 38:n=e.itemsDomArray(e.previousIndex);break;case 40:n=e.itemsDomArray(e.nextIndex)}void 0!==n&&(n.focus(),t.preventDefault(),t.stopPropagation())}function i(){e.onSelect instanceof Function&&e.onSelect(e.value)}return(0,r.useEffect)((()=>{e.onPredictionItemLoad(e.index,t.current)})),r.createElement("div",{ref:t,tabIndex:"0",className:"search-predictions-item",onFocus:function(e){e.target.onkeydown=n},onBlur:function(e){e.target.onkeydown=null},onClick:i},r.createElement("span",{dangerouslySetInnerHTML:{__html:e.children||""}}))}function p(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[p,f,m]=(0,a.usePopup)(),[g,v]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[_,E]=(0,r.useState)(i.SearchFieldStore.get("search-query")),{visibleMobileSearch:S}=(0,a.useLayout)();function w(e){return-1===e?t.current:g[e]}function T(e){let t=!1;switch(e.keyCode||e.charCode){case 38:t=w(y.length-1);break;case 40:t=w(0)}t&&(t.focus(),e.preventDefault(),e.stopPropagation())}function C(e){b([]),E(e),setTimeout((function(){n.current.submit()}),50)}function k(e,t){const n=g;n[e]=t,v(n)}function A(e,t){let n,i,a,o,s,l,u,d=[];if(e){for(a=[],n=0;n<t.length;){if(o=t[n],s=c(t[n],e,!1),s.length)for(i=s.length-1;i>=0;)o=o.substring(0,s[i])+"<b>"+o.substring(s[i],s[i]+e.length)+"</b>"+o.substring(s[i]+e.length),i--;a.push([t[n],o]),n+=1}for(n=0;n<a.length;)0===n?(l=-1,u=n+1):n===a.length-1?(l=n-1,u=-1):(l=n-1,u=n+1),d.push(r.createElement(h,{key:n,index:n,onPredictionItemLoad:k,value:a[n][0],onSelect:C,itemsDomArray:w,nextIndex:u,previousIndex:l},a[n][1])),n+=1}b(d)}return(0,r.useEffect)((()=>{S&&t.current.focus()}),[S]),(0,r.useEffect)((()=>{y.length?(t.current.onkeydown=t.current.onkeydown||T,p.current.tryToShow()):(t.current.onkeydown=null,p.current.tryToHide())}),[y]),(0,r.useEffect)((()=>(i.SearchFieldStore.on("load_predictions",A),()=>{i.SearchFieldStore.removeListener("load_predictions",A)})),[]),r.createElement("div",{className:"search-field-wrap"},r.createElement("div",null,r.createElement("form",{ref:n,method:"get",action:s.LinksContext._currentValue.search.base,autoComplete:"off",onSubmit:function(e){""===t.current.value.trim()&&(e.preventDefault(),e.stopPropagation())}},r.createElement("div",null,r.createElement("div",{className:"text-field-wrap"},r.createElement("input",{ref:t,type:"text",placeholder:(0,o.translateString)("Search"),"aria-label":"Search",name:"q",value:_,onChange:function(e){let t=e.target.value;t="string"!=typeof t?t.toString():t,E(t),""!==t.trim()&&l.SearchFieldActions.requestPredictions(t.trim())},onFocus:function(){y.length&&(t.current.onkeydown=t.current.onkeydown||T)},onBlur:function(){t.current.onkeydown=null}}),r.createElement(f,{contentRef:p,hideCallback:function(){b([])}},r.createElement(u.PopupMain,null,r.createElement(d,null,y)))),r.createElement("button",{type:"submit","aria-label":"Search"},r.createElement(u.MaterialIcon,{type:"search"}))))))}function f(){const{currentThemeMode:e,changeThemeMode:t}=(0,a.useTheme)(),n=(0,r.useRef)(null);return r.createElement("div",{className:"theme-switch",tabIndex:0,onKeyPress:function(e){0===e.keyCode&&t()},onClick:function(e){e.target!==n.current&&t()}},r.createElement("span",null,"Dark Theme"),r.createElement("span",null,r.createElement("label",{className:"checkbox-label right-selectbox"},r.createElement("span",{className:"checkbox-switcher-wrap"},r.createElement("span",{className:"checkbox-switcher"},r.createElement("input",{ref:n,type:"checkbox",tabIndex:-1,checked:"dark"===e,onChange:function(e){e.stopPropagation(),t()}}))))))}function m(e,t,n){const i={main:null};if(e.is.anonymous)i.main=r.createElement("div",null,r.createElement(u.PopupMain,null,r.createElement(u.NavigationMenuList,{items:t.middle})));else{const a=[];function o(e,t){t.length&&(a.length&&a.push(r.createElement("hr",{key:e+"-nav-seperator"})),a.push(r.createElement(u.NavigationMenuList,{key:e+"-nav",items:t})))}o("top",t.top),o("middle",t.middle),o("bottom",t.bottom),i.main=r.createElement("div",null,r.createElement(u.PopupTop,null,r.createElement("a",{className:"user-menu-top-link",href:e.pages.about,title:e.username},r.createElement("span",null,r.createElement(u.UserThumbnail,{size:"medium"})),r.createElement("span",null,r.createElement("span",{className:"username"},e.username)))),a.length?r.createElement(u.PopupMain,null,a):null)}return n&&(i["switch-theme"]=r.createElement("div",null,r.createElement(u.PopupTop,null,r.createElement("div",null,r.createElement("span",null,r.createElement(u.CircleIconButton,{className:"menu-item-icon change-page","data-page-id":"main","aria-label":"Switch theme"},r.createElement("i",{className:"material-icons"},"arrow_back"))),r.createElement("span",null,"Switch theme"))),r.createElement(u.PopupMain,null,r.createElement(f,null)))),i}function g(e){let{user:t,links:n}=e;return!t.is.anonymous&&t.can.addMedia?r.createElement("div",{className:"hidden-only-in-small"},r.createElement(u.CircleIconButton,{type:"link",href:n.user.addMedia,title:"Upload media"},r.createElement(u.MaterialIcon,{type:"video_call"}),r.createElement("span",{className:"hidden-txt"},"Upload media"))):null}function v(e){let{user:t,link:n,hasHeaderThemeSwitcher:i}=e;return t.is.anonymous&&t.can.login?r.createElement("div",{className:"sign-in-wrap"},r.createElement("a",{href:n,rel:"noffolow",className:"button-link sign-in"+(i?" hidden-only-in-small":" hidden-only-in-extra-small"),title:(0,o.translateString)("Sign in")},(0,o.translateString)("Sign in"))):null}function y(e){let{user:t,link:n,hasHeaderThemeSwitcher:i}=e;return t.is.anonymous&&t.can.register?r.createElement("div",{className:"register-wrap"},r.createElement("a",{href:n,className:"button-link register-link"+(i?" hidden-only-in-small":" hidden-only-in-extra-small"),title:(0,o.translateString)("Register")},(0,o.translateString)("Register"))):null}function b(e){const{toggleMobileSearch:t}=(0,a.useLayout)(),[n,o,l]=(0,a.usePopup)();return r.createElement(s.HeaderConsumer,null,(e=>r.createElement(s.MemberConsumer,null,(a=>r.createElement(s.LinksConsumer,null,(s=>r.createElement("div",{className:"page-header-right"},r.createElement("div",null,r.createElement("div",{className:"mobile-search-toggle"},r.createElement(u.CircleIconButton,{onClick:t,"aria-label":"Search"},r.createElement(u.MaterialIcon,{type:"search"}))),r.createElement(g,{user:a,links:s}),r.createElement("div",{className:(a.is.anonymous?"user-options":"user-thumb")+(!a.is.anonymous||e.hasThemeSwitcher?"":" visible-only-in-extra-small")},r.createElement(l,{contentRef:n},a.is.anonymous?r.createElement(u.CircleIconButton,{"aria-label":"Settings"},r.createElement(u.MaterialIcon,{type:"more_vert"})):r.createElement(u.UserThumbnail,{size:"small",isButton:!0})),r.createElement(o,{contentRef:n},r.createElement(u.NavigationContentApp,{initPage:"main",pages:m(a,e.popupNavItems,e.hasThemeSwitcher),pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"}))),r.createElement(v,{user:a,link:s.signin,hasHeaderThemeSwitcher:e.hasThemeSwitcher}),r.createElement(y,{user:a,link:s.register,hasHeaderThemeSwitcher:e.hasThemeSwitcher}),i.PageStore.get("config-contents").header.right?r.createElement("div",{className:"on-header-right",dangerouslySetInnerHTML:{__html:i.PageStore.get("config-contents").header.right}}):null))))))))}const _=e=>{let{src:t,loading:n="lazy",title:i,alt:a,href:o="#"}=e;return t?r.createElement("div",{className:"logo"},r.createElement("a",{href:o,title:i},r.createElement("span",null,r.createElement("img",{src:t,alt:a||i,title:i,loading:n})))):null};function E(){const{logo:e}=(0,a.useTheme)(),{enabledSidebar:t,toggleMobileSearch:n,toggleSidebar:o}=(0,a.useLayout)();return r.createElement(s.SiteConsumer,null,(a=>r.createElement(s.LinksConsumer,null,(s=>r.createElement("div",{className:"page-header-left"},r.createElement("div",null,r.createElement("div",{className:"close-search-field"},r.createElement(u.CircleIconButton,{onClick:n},r.createElement("i",{className:"material-icons"},"arrow_back"))),t?r.createElement("div",{className:"toggle-sidebar"},r.createElement(u.CircleIconButton,{onClick:o},r.createElement("i",{className:"material-icons"},"menu"))):null,r.createElement(_,{src:e,href:s.home,title:a.title}),i.PageStore.get("config-contents").header.onLogoRight?r.createElement("div",{className:"on-logo-right",dangerouslySetInnerHTML:{__html:i.PageStore.get("config-contents").header.onLogoRight}}):null))))))}function S(e){const{isAnonymous:t}=(0,a.useUser)(),{visibleMobileSearch:n}=(0,a.useLayout)();return(0,r.useEffect)((()=>{!function(){function e(){const e=this.parentNode;(0,o.addClassname)(e,"hiding"),setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)}.bind(this),400)}setTimeout(function(){const t=document.querySelectorAll(".alert.alert-dismissible .close");let n;if(t.length)for(n=0;n<t.length;)t[n].addEventListener("click",e),n+=1}.bind(this),1e3)}(),void 0!==i.PageStore.get("current-page")&&"add-media"!==i.PageStore.get("current-page")||function(){let e=document.querySelector(".media-uploader-wrap");if(e){let t=document.createElement("div");t.setAttribute("class","pre-upload-msg"),t.innerHTML=i.PageStore.get("config-contents").uploader.belowUploadArea,e.appendChild(t)}}()}),[]),r.createElement("header",{className:"page-header"+(n?" mobile-search-field":"")+(t?" anonymous-user":"")},r.createElement(E,null),r.createElement(p,null),r.createElement(b,null))}},1257:function(e,t,n){var r=n(919),i=e.exports={WebVTT:n(5198),VTTCue:n(207),VTTRegion:n(4822)};r.vttjs=i,r.WebVTT=i.WebVTT;var a=i.VTTCue,o=i.VTTRegion,s=r.VTTCue,l=r.VTTRegion;i.shim=function(){r.VTTCue=a,r.VTTRegion=o},i.restore=function(){r.VTTCue=s,r.VTTRegion=l},r.VTTCue||i.shim()},1309:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(1838),o=n(7154),s=n(3997);let l;const u={};class c extends(i()){constructor(){super(),this.mediacms_config=(0,s.$)(window.MediaCMS),l=new o.BrowserCache(this.mediacms_config.site.id,86400),u.inTheaterMode=l.get("in-theater-mode"),u.inTheaterMode=null!==u.inTheaterMode&&u.inTheaterMode,u.playerVolume=l.get("player-volume"),u.playerVolume=null===u.playerVolume?1:Math.max(Math.min(Number(u.playerVolume),1),0),u.playerSoundMuted=l.get("player-sound-muted"),u.playerSoundMuted=null!==u.playerSoundMuted&&u.playerSoundMuted,u.videoQuality=l.get("video-quality"),u.videoQuality=null!==u.videoQuality?u.videoQuality:"Auto",u.videoPlaybackSpeed=l.get("video-playback-speed"),u.videoPlaybackSpeed=null!==u.videoPlaybackSpeed&&u.videoPlaybackSpeed}get(e){let t=null;switch(e){case"player-volume":t=u.playerVolume;break;case"player-sound-muted":t=u.playerSoundMuted;break;case"in-theater-mode":t=u.inTheaterMode;break;case"video-data":t=u.videoData;break;case"video-quality":t=u.videoQuality;break;case"video-playback-speed":t=u.videoPlaybackSpeed}return t}actions_handler(e){switch(e.type){case"TOGGLE_VIEWER_MODE":u.inTheaterMode=!u.inTheaterMode,this.emit("changed_viewer_mode");break;case"SET_VIEWER_MODE":u.inTheaterMode=e.inTheaterMode,l.set("in-theater-mode",u.inTheaterMode),this.emit("changed_viewer_mode");break;case"SET_PLAYER_VOLUME":u.playerVolume=e.playerVolume,l.set("player-volume",e.playerVolume),this.emit("changed_player_volume");break;case"SET_PLAYER_SOUND_MUTED":u.playerSoundMuted=e.playerSoundMuted,l.set("player-sound-muted",e.playerSoundMuted),this.emit("changed_player_sound_muted");break;case"SET_VIDEO_QUALITY":u.videoQuality=e.quality,l.set("video-quality",e.quality),this.emit("changed_video_quality");break;case"SET_VIDEO_PLAYBACK_SPEED":u.videoPlaybackSpeed=e.playbackSpeed,l.set("video-playback-speed",e.playbackSpeed),this.emit("changed_video_playback_speed")}}}t.default=(0,a.exportStore)(new c,"actions_handler")},1329:function(module,__unused_webpack_exports,__webpack_require__){var console=__webpack_require__(8974),Buffer=__webpack_require__(9922).hp,process=__webpack_require__(1385),factory;globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||a(t)},t.bytesToString=function(e){"object"==typeof e&&null!==e&&void 0!==e.length||a("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=n){const a=Math.min(i+n,t),o=e.subarray(i,a);r.push(String.fromCharCode.apply(null,o))}return r.join("")},t.createPromiseCapability=function(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get(){return t}}),e.promise=new Promise((function(n,r){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,r(e)}})),e},t.createValidAbsoluteUrl=function(e,t=null,n=null){if(!e)return null;try{if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{e=h(e)}catch(e){}}const r=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(e){}return null},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getVerbosityLevel=function(){return r},t.info=function(e){r>=n.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},t.objectFromMap=function(e){const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(r=e)},t.shadow=o,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=l,t.stringToPDFString=function(e){if(e[0]>="ï"){let t;if("þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8"),t)try{const n=new TextDecoder(t,{fatal:!0}),r=l(e);return n.decode(r)}catch(e){i(`stringToPDFString: "${e}".`)}}const t=[];for(let n=0,r=e.length;n<r;n++){const r=d[e.charCodeAt(n)];t.push(r?String.fromCharCode(r):e.charAt(n))}return t.join("")},t.stringToUTF8String=h,t.unreachable=a,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=i,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35;t.BASELINE_FACTOR=.35/1.35,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},t.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const n={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=n,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function i(e){r>=n.WARNINGS&&console.log(`Warning: ${e}`)}function a(e){throw new Error(e)}function o(e,t,n,r=!1){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const s=function(){function e(t,n){this.constructor===e&&a("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();function l(e){"string"!=typeof e&&a("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}t.BaseException=s,t.PasswordException=class extends s{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends s{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends s{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends s{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends s{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends s{constructor(e){super(e,"FormatError")}},t.AbortException=class extends s{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return o(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return o(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return o(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?o(this,"platform",{isWin:!1,isMac:!1}):o(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}};const u=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class c{static makeHexColor(e,t,n){return`#${u[e]}${u[t]}${u[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[2],t[2]=n,n=t[1],t[1]=t[3],t[3]=n,e[1]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=c.applyTransform(e,t),r=c.applyTransform(e.slice(2,4),t),i=c.applyTransform([e[0],e[3]],t),a=c.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,s=Math.sqrt((n+a)**2-4*(n*a-i*r))/2,l=o+s||1,u=o-s||1;return[Math.sqrt(l),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,o,s){const l=[],u=[[],[]];let c,d,h,p,f,m,g,v;for(let u=0;u<2;++u)if(0===u?(d=6*e-12*n+6*i,c=-3*e+9*n-9*i+3*o,h=3*n-3*e):(d=6*t-12*r+6*a,c=-3*t+9*r-9*a+3*s,h=3*r-3*t),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;p=-h/d,0<p&&p<1&&l.push(p)}else g=d*d-4*h*c,v=Math.sqrt(g),g<0||(f=(-d+v)/(2*c),0<f&&f<1&&l.push(f),m=(-d-v)/(2*c),0<m&&m<1&&l.push(m));let y,b=l.length;const _=b;for(;b--;)p=l[b],y=1-p,u[0][b]=y*y*y*e+3*y*y*p*n+3*y*p*p*i+p*p*p*o,u[1][b]=y*y*y*t+3*y*y*p*r+3*y*p*p*a+p*p*p*s;return u[0][_]=e,u[1][_]=t,u[0][_+1]=o,u[1][_+1]=s,u[0].length=u[1].length=_+2,[Math.min(...u[0]),Math.min(...u[1]),Math.max(...u[0]),Math.max(...u[1])]}}t.Util=c;const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function h(e){return decodeURIComponent(escape(e))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:e,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=e,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}if(_is_node.isNodeJS){const{PDFNodeStream:e}=__w_pdfjs_require__(21);createPDFNetworkStream=t=>new e(t)}else{const{PDFNetworkStream:e}=__w_pdfjs_require__(24),{PDFFetchStream:t}=__w_pdfjs_require__(25);createPDFNetworkStream=n=>(0,_display_utils.isValidFetchUrl)(n.url)?new t(n):new e(n)}function getDocument(e){if("string"==typeof e||e instanceof URL)e={url:e};else if((0,_util.isArrayBuffer)(e))e={data:e};else if(e instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),e={range:e};else if("object"!=typeof e)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,n=e.url?getUrlProp(e.url):null,r=e.data?getDataProp(e.data):null,i=e.httpHeaders||null,a=!0===e.withCredentials,o=e.password??null,s=e.range instanceof PDFDataRangeTransport?e.range:null,l=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let u=e.worker instanceof PDFWorker?e.worker:null;const c=e.verbosity,d="string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,h="string"==typeof e.cMapUrl?e.cMapUrl:null,p=!1!==e.cMapPacked,f=e.CMapReaderFactory||DefaultCMapReaderFactory,m="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,g=e.StandardFontDataFactory||DefaultStandardFontDataFactory,v=!0!==e.stopAtErrors,y=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,b=!1!==e.isEvalSupported,_="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_is_node.isNodeJS,E="boolean"==typeof e.disableFontFace?e.disableFontFace:_is_node.isNodeJS,S=!0===e.fontExtraProperties,w=!0===e.enableXfa,T=e.ownerDocument||globalThis.document,C=!0===e.disableRange,k=!0===e.disableStream,A=!0===e.disableAutoFetch,P=!0===e.pdfBug,x=s?s.length:e.length??NaN,I="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!_is_node.isNodeJS&&!E,M="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:f===_display_utils.DOMCMapReaderFactory&&g===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI);(0,_util.setVerbosityLevel)(c);const R=M?null:{cMapReaderFactory:new f({baseUrl:h,isCompressed:p}),standardFontDataFactory:new g({baseUrl:m})};if(!u){const e={verbosity:c,port:_worker_options.GlobalWorkerOptions.workerPort};u=e.port?PDFWorker.fromPort(e):new PDFWorker(e),t._worker=u}const O=t.docId,L={docId:O,apiVersion:"3.4.120",data:r,password:o,disableAutoFetch:A,rangeChunkSize:l,length:x,docBaseUrl:d,enableXfa:w,evaluatorOptions:{maxImageSize:y,disableFontFace:E,ignoreErrors:v,isEvalSupported:b,isOffscreenCanvasSupported:_,fontExtraProperties:S,useSystemFonts:I,cMapUrl:M?h:null,standardFontDataUrl:M?m:null}},D={ignoreErrors:v,isEvalSupported:b,disableFontFace:E,fontExtraProperties:S,enableXfa:w,ownerDocument:T,disableAutoFetch:A,pdfBug:P,styleElement:null};return u.promise.then((function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(u,L),o=new Promise((function(e){let t;s?t=new _transport_stream.PDFDataTransportStream({length:x,initialData:s.initialData,progressiveDone:s.progressiveDone,contentDispositionFilename:s.contentDispositionFilename,disableRange:C,disableStream:k},s):r||(t=createPDFNetworkStream({url:n,length:x,httpHeaders:i,withCredentials:a,rangeChunkSize:l,disableRange:C,disableStream:k})),e(t)}));return Promise.all([e,o]).then((function([e,n]){if(t.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(O,e,u.port),i=new WorkerTransport(r,t,n,D,R);t._transport=i,r.send("Ready",null)}))})).catch(t._capability.reject),t}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(_is_node.isNodeJS&&"string"==typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_is_node.isNodeJS&&void 0!==Buffer&&e instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(e);if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return(0,_util.stringToBytes)(e);if("object"==typeof e&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;#t=null;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return this.#t}set onUnsupportedFeature(e){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),this.#t=e}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await(this._transport?.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._ownerDocument=r,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=_util.AnnotationMode.ENABLE,transform:i=null,canvasFactory:a=null,background:o=null,optionalContentConfigPromise:s=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(n,r,c);this.pendingCleanup=!1,s||(s=this._transport.getOptionalContentConfig());let h=this._intentStates.get(d.cacheKey);h||(h=Object.create(null),this._intentStates.set(d.cacheKey,h)),h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null);const p=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(d.renderingIntent&_util.RenderingIntentFlag.PRINT);h.displayReadyCapability||(h.displayReadyCapability=(0,_util.createPromiseCapability)(),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const m=e=>{h.renderTasks.delete(g),(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0),this._tryCleanup(),e?(g.capability.reject(e),this._abortOperatorList({intentState:h,reason:e instanceof Error?e:new Error(e)})):g.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},g=new InternalRenderTask({callback:m,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:h.operatorList,pageIndex:this._pageIndex,canvasFactory:p,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:u});(h.renderTasks||=new Set).add(g);const v=g.task;return Promise.all([h.displayReadyCapability.promise,s]).then((([e,t])=>{this.pendingCleanup?m():(this._stats?.time("Rendering"),g.initializeGraphics({transparency:e,optionalContentConfig:t}),g.operatorListChanged())})).catch(m),v}getOperatorList({intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}={}){const r=this._transport.getRenderingIntent(e,t,n,!0);let i,a=this._intentStates.get(r.cacheKey);return a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(i))},a.opListReadCapability=(0,_util.createPromiseCapability)(),(a.renderTasks||=new Set).add(i),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===t},{highWaterMark:100,size(e){return e.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),i={items:[],styles:Object.create(null)};!function t(){r.read().then((function({value:n,done:r}){r?e(i):(Object.assign(i.styles,n.styles),i.items.push(...n.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const e of t.renderTasks)e.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageMap:n}){const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:n}).getReader(),i=this._intentStates.get(t);i.streamReader=r;const a=()=>{r.read().then((({value:e,done:t})=>{t?i.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,i),a())}),(e=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const e of i.renderTasks)e.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(e);else{if(!i.opListReadCapability)throw e;i.opListReadCapability.reject(e)}}}))};a()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException){let n=RENDERING_CANCELLED_TIMEOUT;return t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})}),n))}}if(e.streamReader.cancel(new _util.AbortException(t.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#n=new Set;#r=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t)};this.#r.then((()=>{for(const e of this.#n)e.call(this,n)}))}addEventListener(e,t){this.#n.add(t)}removeEventListener(e,t){this.#n.delete(t)}terminate(){this.#n.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(e){return!1}const r=new URL(t,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))};class PDFWorker{static#i=new WeakMap;constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(t&&PDFWorker.#i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t)return PDFWorker.#i.set(t,this),void this._initializeFromPort(t);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};t.addEventListener("error",i),n.on("test",(e=>{t.removeEventListener("error",i),this.destroyed?r():e?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())})),n.on("ready",(e=>{if(t.removeEventListener("error",i),this.destroyed)r();else try{a()}catch(e){this._setupFakeWorker()}}));const a=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void a()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const n="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);const i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#i.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#i.has(e.port)?this.#i.get(e.port):new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#a=new Map;#o=new Map;#s=new Map;constructor(e,t,n,r,i){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.cMapReaderFactory=i?.cMapReaderFactory,this.standardFontDataFactory=i?.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}#l(e,t=null){const n=this.#a.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return this.#a.set(e,r),r}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,t=_util.AnnotationMode.ENABLE,n=null,r=!1){let i=_util.RenderingIntentFlag.DISPLAY,a=null;switch(e){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=(i&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${_annotation_storage.AnnotationStorage.getHash(a)}`,annotationStorageMap:a}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const t of this.#o.values())e.push(t._destroy());this.#o.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#a.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function({value:e,done:n}){n?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then((()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&t.onProgress?.(this._lastProgress),r.onProgress=e=>{t.onProgress?.({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function({value:e,done:n}){n?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(e,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":n=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const n=e=>{e instanceof Error?this._passwordCapability.reject(e):this._passwordCapability.resolve({password:e})};try{t.onPassword(n,e.code)}catch(e){this._passwordCapability.reject(e)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise})),e.on("DataLoaded",(e=>{t.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{this.destroyed||this.#o.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(([t,n,r])=>{if(!this.destroyed&&!this.commonObjs.has(t))switch(n){case"Font":const i=this._params;if("error"in r){const e=r.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}let a=null;i.pdfBug&&globalThis.FontInspector?.enabled&&(a={registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}});const o=new _font_loader.FontFaceObject(r,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(o).catch((n=>e.sendWithPromise("FontFallback",{id:t}))).finally((()=>{!i.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(t,o)}));break;case"FontPath":case"Image":this.commonObjs.resolve(t,r);break;default:throw new Error(`Got unknown common object type ${n}`)}})),e.on("obj",(([e,t,n,r])=>{if(this.destroyed)return;const i=this.#o.get(t);if(!i.objs.has(e))switch(n){case"Image":i.objs.resolve(e,r);const t=8e6;if(r){let e;if(r.bitmap){const{width:t,height:n}=r;e=t*n*4}else e=r.data?.length||0;e>t&&(i.cleanupAfterRender=!0)}break;case"Pattern":i.objs.resolve(e,r);break;default:throw new Error(`Got unknown object type ${n}`)}})),e.on("DocProgress",(e=>{this.destroyed||t.onProgress?.({loaded:e.loaded,total:e.total})})),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#s.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(t,e,this,this._params.ownerDocument,this._params.pdfBug);return this.#o.set(t,n),n}));return this.#s.set(t,r),r}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#a.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#a.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#o.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#a.clear()}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}class PDFObjects{#u=Object.create(null);#c(e){return this.#u[e]||(this.#u[e]={capability:(0,_util.createPromiseCapability)(),data:null})}get(e,t=null){if(t){const n=this.#c(e);return n.capability.promise.then((()=>t(n.data))),null}const n=this.#u[e];if(!n?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#u[e];return t?.capability.settled||!1}resolve(e,t=null){const n=this.#c(e);n.data=t,n.capability.resolve()}clear(){for(const e in this.#u){const{data:t}=this.#u[e];t?.bitmap?.close()}this.#u=Object.create(null)}}class RenderTask{#d=null;constructor(e){this.#d=e,this.onContinue=null}get promise(){return this.#d.capability.promise}cancel(e=0){this.#d.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#d.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#d;return e.form||e.canvas&&t?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#h=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:s,useRequestAnimationFrame:l=!1,pdfBug:u=!1,pageColors:c=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=s,this._pdfBug=u,this.pageColors=c,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#h.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#h.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:i,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&InternalRenderTask.#h.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#h.delete(this._canvas),this.callback())))}}const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=n(1),i=n(4),a=n(8);class o{#p=!1;#f=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#f.get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return this.#f.get(e)}remove(e){if(this.#f.delete(e),0===this.#f.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const e of this.#f.values())if(e instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#f.get(e);let r=!1;if(void 0!==n)for(const[e,i]of Object.entries(t))n[e]!==i&&(r=!0,n[e]=i);else r=!0,this.#f.set(e,t);r&&this.#m(),t instanceof i.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#f.has(e)}getAll(){return this.#f.size>0?(0,r.objectFromMap)(this.#f):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#f.size}#m(){this.#p||(this.#p=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#p&&(this.#p=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new s(this)}get serializable(){if(0===this.#f.size)return null;const e=new Map;for(const[t,n]of this.#f){const r=n instanceof i.AnnotationEditor?n.serialize():n;r&&e.set(t,r)}return e}static getHash(e){if(!e)return"";const t=new a.MurmurHash3_64;for(const[n,r]of e)t.update(`${n}:${JSON.stringify(r)}`);return t.hexdigest()}}t.AnnotationStorage=o;class s extends o{#g=null;constructor(e){super(),this.#g=structuredClone(e.serializable)}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#g}}t.PrintAnnotationStorage=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var r=n(5),i=n(1);class a{#v=this.focusin.bind(this);#y=this.focusout.bind(this);#b=!1;#_=!1;#E=!1;_uiManager=null;#S=a._zIndex++;static _colorManager=new r.ColorManager;static _zIndex=1;constructor(e){this.constructor===a&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageDimensions=[n,r],this.pageTranslation=[o,s];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this.#b?this.#b=!1:this.parent.setSelected(this)}focusout(e){if(!this.isAttachedToDOM)return;const t=e.relatedTarget;t?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(e){const t=this.parent.div.getBoundingClientRect();this.startX=e.clientX-t.x,this.startY=e.clientY-t.y,e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(e,t){const[n,r]=this.parentDimensions;[e,t]=this.screenToPageTranslation(e,t),this.x+=e/n,this.y+=t/r,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(e,t){switch(this.parentRotation){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:e}=this._uiManager.viewParameters,[t,n]=this.pageDimensions;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=100*e/n+"%",this.div.style.height=100*t/r+"%"}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=t.endsWith("%");if(r&&i)return;const[a,o]=this.parentDimensions;r||(e.width=100*parseFloat(n)/a+"%"),i||(e.height=100*parseFloat(t)/o+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#v),this.div.addEventListener("focusout",this.#y);const[e,t]=this.getInitialTranslation();return this.translate(e,t),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(e){const{isMac:t}=i.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#b=!0)}getRect(e,t){const n=this.parentScale,[r,i]=this.pageDimensions,[a,o]=this.pageTranslation,s=e/n,l=t/n,u=this.x*r,c=this.y*i,d=this.width*r,h=this.height*i;switch(this.rotation){case 0:return[u+s+a,i-c-l-h+o,u+s+d+a,i-c-l+o];case 90:return[u+l+a,i-c+s+o,u+l+h+a,i-c+s+d+o];case 180:return[u-s-d+a,i-c+l+o,u-s+a,i-c+l+h+o];case 270:return[u-l-h+a,i-c-s-d+o,u-l+a,i-c-s+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,o=i-n,s=a-r;switch(this.rotation){case 0:return[n,t-a,o,s];case 90:return[n,t-r,s,o];case 180:return[i,t-r,o,s];case 270:return[i,t-a,s,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#E=!0}disableEditMode(){this.#E=!1}isInEditMode(){return this.#E}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#v)}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation;const[i,a]=r.pageDimensions,[o,s,l,u]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/i,r.y=s/a,r.width=l/i,r.height=u/a,r}remove(){this.div.removeEventListener("focusin",this.#v),this.div.removeEventListener("focusout",this.#y),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(e,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#_}set isEditing(e){this.#_=e,e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}t.AnnotationEditor=a},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=function(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))},t.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var r=n(1),i=n(6);class a{#w=0;getId(){return`${r.AnnotationEditorPrefix}${this.#w++}`}}class o{#T=[];#C=!1;#k;#A=-1;constructor(e=128){this.#k=e}add({cmd:e,undo:t,mustExec:n,type:r=NaN,overwriteIfSameType:i=!1,keepUndo:a=!1}){if(n&&e(),this.#C)return;const o={cmd:e,undo:t,type:r};if(-1===this.#A)return this.#T.length>0&&(this.#T.length=0),this.#A=0,void this.#T.push(o);if(i&&this.#T[this.#A].type===r)return a&&(o.undo=this.#T[this.#A].undo),void(this.#T[this.#A]=o);const s=this.#A+1;s===this.#k?this.#T.splice(0,1):(this.#A=s,s<this.#T.length&&this.#T.splice(s)),this.#T.push(o)}undo(){-1!==this.#A&&(this.#C=!0,this.#T[this.#A].undo(),this.#C=!1,this.#A-=1)}redo(){this.#A<this.#T.length-1&&(this.#A+=1,this.#C=!0,this.#T[this.#A].cmd(),this.#C=!1)}hasSomethingToUndo(){return-1!==this.#A}hasSomethingToRedo(){return this.#A<this.#T.length-1}destroy(){this.#T=null}}t.CommandManager=o;class s{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=r.FeatureTest.platform;for(const[n,r]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),r),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,r),this.allKeys.add(e.split("+").at(-1)))}}#P(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#P(t));n&&(n.bind(e)(),t.stopPropagation(),t.preventDefault())}}t.KeyboardManager=s;class l{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(e),(0,r.shadow)(this,"_colors",e)}convert(e){const t=(0,i.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[e,n]of this._colors)if(n.every(((e,n)=>e===t[n])))return l._colorsMapping.get(e);return t}getHexCode(e){const t=this._colors.get(e);return t?r.Util.makeHexColor(...t):e}}t.ColorManager=l;class u{#x=null;#I=new Map;#M=new Map;#R=null;#O=new o;#L=0;#D=null;#N=new Set;#F=null;#j=new a;#B=!1;#U=r.AnnotationEditorType.NONE;#q=new Set;#V=this.copy.bind(this);#H=this.cut.bind(this);#z=this.paste.bind(this);#W=this.keydown.bind(this);#G=this.onEditingAction.bind(this);#X=this.onPageChanging.bind(this);#K=this.onScaleChanging.bind(this);#$=this.onRotationChanging.bind(this);#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#Q=null;static _keyboardManager=new s([[["ctrl+a","mac+meta+a"],u.prototype.selectAll],[["ctrl+z","mac+meta+z"],u.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],u.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],u.prototype.delete],[["Escape","mac+Escape"],u.prototype.unselectAll]]);constructor(e,t,n){this.#Q=e,this.#F=t,this.#F._on("editingaction",this.#G),this.#F._on("pagechanging",this.#X),this.#F._on("scalechanging",this.#K),this.#F._on("rotationchanging",this.#$),this.#R=n,this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#J(),this.#F._off("editingaction",this.#G),this.#F._off("pagechanging",this.#X),this.#F._off("scalechanging",this.#K),this.#F._off("rotationchanging",this.#$);for(const e of this.#M.values())e.destroy();this.#M.clear(),this.#I.clear(),this.#N.clear(),this.#x=null,this.#q.clear(),this.#O.destroy()}onPageChanging({pageNumber:e}){this.#L=e-1}focusMainContainer(){this.#Q.focus()}addShouldRescale(e){this.#N.add(e)}removeShouldRescale(e){this.#N.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of this.#N)e.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){e.isEmpty()||!this.#R||this.#R.has(e.id)||this.#R.setValue(e.id,e)}#Z(){this.#Q.addEventListener("keydown",this.#W)}#J(){this.#Q.removeEventListener("keydown",this.#W)}#ee(){document.addEventListener("copy",this.#V),document.addEventListener("cut",this.#H),document.addEventListener("paste",this.#z)}#te(){document.removeEventListener("copy",this.#V),document.removeEventListener("cut",this.#H),document.removeEventListener("paste",this.#z)}copy(e){if(e.preventDefault(),this.#x&&this.#x.commitOrRemove(),!this.hasSelection)return;const t=[];for(const e of this.#q)e.isEmpty()||t.push(e.serialize());0!==t.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();let t=e.clipboardData.getData("application/pdfjs");if(!t)return;try{t=JSON.parse(t)}catch(e){return void(0,r.warn)(`paste: "${e.message}".`)}if(!Array.isArray(t))return;this.unselectAll();const n=this.#M.get(this.#L);try{const e=[];for(const r of t){const t=n.deserialize(r);if(!t)return;e.push(t)}const r=()=>{for(const t of e)this.#ne(t);this.#re(e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:r,undo:i,mustExec:!0})}catch(e){(0,r.warn)(`paste: "${e.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||u._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#ie(e){Object.entries(e).some((([e,t])=>this.#Y[e]!==t))&&this.#F.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)})}#ae(e){this.#F.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#Z(),this.#ee(),this.#ie({isEditing:this.#U!==r.AnnotationEditorType.NONE,isEmpty:this.#oe(),hasSomethingToUndo:this.#O.hasSomethingToUndo(),hasSomethingToRedo:this.#O.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#J(),this.#te(),this.#ie({isEditing:!1}))}registerEditorTypes(e){if(!this.#D){this.#D=e;for(const e of this.#D)this.#ae(e.defaultPropertiesToUpdate)}}getId(){return this.#j.getId()}get currentLayer(){return this.#M.get(this.#L)}get currentPageIndex(){return this.#L}addLayer(e){this.#M.set(e.pageIndex,e),this.#B?e.enable():e.disable()}removeLayer(e){this.#M.delete(e.pageIndex)}updateMode(e){if(this.#U=e,e===r.AnnotationEditorType.NONE)this.setEditingState(!1),this.#se();else{this.setEditingState(!0),this.#le();for(const t of this.#M.values())t.updateMode(e)}}updateToolbar(e){e!==this.#U&&this.#F.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#D){for(const n of this.#q)n.updateParams(e,t);for(const n of this.#D)n.updateDefaultParams(e,t)}}#le(){if(!this.#B){this.#B=!0;for(const e of this.#M.values())e.enable()}}#se(){if(this.unselectAll(),this.#B){this.#B=!1;for(const e of this.#M.values())e.disable()}}getEditors(e){const t=[];for(const n of this.#I.values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return this.#I.get(e)}addEditor(e){this.#I.set(e.id,e)}removeEditor(e){this.#I.delete(e.id),this.unselect(e),this.#R?.remove(e.id)}#ne(e){const t=this.#M.get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#x!==e&&(this.#x=e,e&&this.#ae(e.propertiesToUpdate))}toggleSelected(e){if(this.#q.has(e))return this.#q.delete(e),e.unselect(),void this.#ie({hasSelectedEditor:this.hasSelection});this.#q.add(e),e.select(),this.#ae(e.propertiesToUpdate),this.#ie({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#q)t!==e&&t.unselect();this.#q.clear(),this.#q.add(e),e.select(),this.#ae(e.propertiesToUpdate),this.#ie({hasSelectedEditor:!0})}isSelected(e){return this.#q.has(e)}unselect(e){e.unselect(),this.#q.delete(e),this.#ie({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#q.size}undo(){this.#O.undo(),this.#ie({hasSomethingToUndo:this.#O.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#oe()})}redo(){this.#O.redo(),this.#ie({hasSomethingToUndo:!0,hasSomethingToRedo:this.#O.hasSomethingToRedo(),isEmpty:this.#oe()})}addCommands(e){this.#O.add(e),this.#ie({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#oe()})}#oe(){if(0===this.#I.size)return!0;if(1===this.#I.size)for(const e of this.#I.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#q];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)this.#ne(t)},mustExec:!0})}commitOrRemove(){this.#x?.commitOrRemove()}#re(e){this.#q.clear();for(const t of e)t.isEmpty()||(this.#q.add(t),t.select());this.#ie({hasSelectedEditor:!0})}selectAll(){for(const e of this.#q)e.commit();this.#re(this.#I.values())}unselectAll(){if(this.#x)this.#x.commitOrRemove();else if(0!==this.#q.size){for(const e of this.#q)e.unselect();this.#q.clear(),this.#ie({hasSelectedEditor:!1})}}isActive(e){return this.#x===e}getActive(){return this.#x}getMode(){return this.#U}}t.AnnotationEditorUIManager=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,g(r))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform();return[t,n,r,i,a,o]},t.getCurrentTransformInverse=function(e){const{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform().invertSelf();return[t,n,r,i,a,o]},t.getFilenameFromUrl=function(e,t=!1){return t||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e,t="document.pdf"){if("string"!=typeof e)return t;if(p(e))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let a=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch(e){}return a||t},t.getRGB=g,t.getXfaPageViewport=function(e,{scale:t=1,rotation:n=0}){const{width:r,height:i}=e.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new d({viewBox:a,scale:t,rotation:n})},t.isDataScheme=p,t.isPdfFile=function(e){return"string"==typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=f,t.loadScript=function(e,t=!1){return new Promise(((n,r)=>{const i=document.createElement("script");i.src=e,i.onload=function(e){t&&i.remove(),n(e)},i.onerror=function(){r(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).append(i)}))},t.setLayerDimensions=function(e,t,n=!1,r=!0){if(t instanceof d){const{pageWidth:r,pageHeight:i}=t.rawDims,{style:a}=e,o=`calc(var(--scale-factor) * ${r}px)`,s=`calc(var(--scale-factor) * ${i}px)`;n&&t.rotation%180!=0?(a.width=s,a.height=o):(a.width=o,a.height=s)}r&&e.setAttribute("data-main-rotation",t.rotation)};var r=n(7),i=n(1);t.AnnotationPrefix="pdfjs_internal_id_";class a{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=a;class o extends r.BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function s(e,t=!1){if(f(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);return t?new Uint8Array(await n.arrayBuffer()):(0,i.stringToBytes)(await n.text())}return new Promise(((n,r)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),t&&(a.responseType="arraybuffer"),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){let e;if(t&&a.response?e=new Uint8Array(a.response):!t&&a.responseText&&(e=(0,i.stringToBytes)(a.responseText)),e)return void n(e)}r(new Error(a.statusText))}},a.send(null)}))}t.DOMCanvasFactory=o;class l extends r.BaseCMapReaderFactory{_fetchData(e,t){return s(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=l;class u extends r.BaseStandardFontDataFactory{_fetchData(e){return s(e,!0)}}t.DOMStandardFontDataFactory=u;class c extends r.BaseSVGFactory{_createSVG(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}t.DOMSVGFactory=c;class d{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=i;const o=(e[2]+e[0])/2,s=(e[3]+e[1])/2;let l,u,c,d,h,p,f,m;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,u=0,c=0,d=1;break;case 90:l=0,u=1,c=1,d=0;break;case 270:l=0,u=-1,c=-1,d=0;break;case 0:l=1,u=0,c=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(c=-c,d=-d),0===l?(h=Math.abs(s-e[1])*t+r,p=Math.abs(o-e[0])*t+i,f=(e[3]-e[1])*t,m=(e[2]-e[0])*t):(h=Math.abs(o-e[0])*t+r,p=Math.abs(s-e[1])*t+i,f=(e[2]-e[0])*t,m=(e[3]-e[1])*t),this.transform=[l*t,u*t,c*t,d*t,h-l*t*o-c*t*s,p-u*t*o-d*t*s],this.width=f,this.height=m}get rawDims(){const{viewBox:e}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new d({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return i.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=i.Util.applyTransform([e[0],e[1]],this.transform),n=i.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return i.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=d;class h extends i.BaseException{constructor(e,t,n=0){super(e,"RenderingCancelledException"),this.type=t,this.extraDelay=n}}function p(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function f(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(e){return!1}}let m;function g(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):((0,i.warn)(`Not a valid color format: "${e}"`),[0,0,0])}t.RenderingCancelledException=h,t.StatTimer=class{started=Object.create(null);times=[];time(e){e in this.started&&(0,i.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,i.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:e}of this.times)t=Math.max(e.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms\n`);return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!=typeof e)return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let s=parseInt(t[6],10);s=s>=0&&s<=59?s:0;const l=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let c=parseInt(t[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(a+=u,o+=c):"+"===l&&(a-=u,o-=c),new Date(Date.UTC(n,r,i,a,o,s))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=i;class a{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(t,n).catch((e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)}))}_fetchData(e,t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=a;class o{constructor({baseUrl:e=null}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch((e=>{throw new Error(`Unable to load font data at: ${t}`)}))}_fetchData(e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(1);const i=3285377520,a=4294901760,o=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}update(e){let t,n;if("string"==typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!(0,r.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,l=new Uint32Array(t.buffer,0,i);let u=0,c=0,d=this.h1,h=this.h2;const p=3432918353,f=461845907,m=11601,g=13715;for(let e=0;e<i;e++)1&e?(u=l[e],u=u*p&a|u*m&o,u=u<<15|u>>>17,u=u*f&a|u*g&o,d^=u,d=d<<13|d>>>19,d=5*d+3864292196):(c=l[e],c=c*p&a|c*m&o,c=c<<15|c>>>17,c=c*f&a|c*g&o,h^=c,h=h<<13|h>>>19,h=5*h+3864292196);switch(u=0,s){case 3:u^=t[4*i+2]<<16;case 2:u^=t[4*i+1]<<8;case 1:u^=t[4*i],u=u*p&a|u*m&o,u=u<<15|u>>>17,u=u*f&a|u*g&o,1&i?d^=u:h^=u}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&a|36045*e&o,t=4283543511*t&a|(2950163797*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,e=444984403*e&a|60499*e&o,t=3301882366*t&a|(3120437893*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(1),i=n(10);t.FontLoader=class{constructor({onUnsupportedFeature:e,ownerDocument:t=globalThis.document,styleElement:n=null}){this._onUnsupportedFeature=e,this._document=t,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(e){if(e.attached||e.missingFile)return;if(e.attached=!0,this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(i.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for((0,r.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let a,o;const s=this._document.createElement("canvas");s.width=1,s.height=1;const l=s.getContext("2d");let u=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,c.length,c);const h=1482184792;let p=n(d,16);for(a=0,o=c.length-3;a<o;a+=4)p=p-h+n(c,a)|0;a<c.length&&(p=p-h+n(c+"XXX",a)|0),d=i(d,16,4,(0,r.string32)(p));const f=`@font-face {font-family:"${c}";src:url(data:font/opentype;base64,${btoa(d)});}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const t of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,m.append(e)}this._document.body.append(m),function e(t,n){if(++u>30)return(0,r.warn)("Load test font never loaded."),void n();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{m.remove(),t.complete()}))}},t.FontFaceObject=class{constructor(e,{isEvalSupported:t=!0,disableFontFace:n=!1,ignoreErrors:r=!1,onUnsupportedFeature:i,fontRegistry:a=null}){this.compiledGlyphs=Object.create(null);for(const t in e)this[t]=e[t];this.isEvalSupported=!1!==t,this.disableFontFace=!0===n,this.ignoreErrors=!0===r,this._onUnsupportedFeature=i,this.fontRegistry=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry?.registerFont(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,r.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this.fontRegistry?.registerFont(this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${e}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const e=[];for(const t of n){const n=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const r of n)"scale"===r.cmd&&(r.args=[t,-t]),e[r.cmd].apply(e,r.args)}}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),i=n(6),a=n(12),o=n(13);const s=4096,l=16;class u{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function c(e,t,n,r,a,o,s,l,u,c){const[d,h,p,f,m,g]=(0,i.getCurrentTransform)(e);if(0===h&&0===p){const i=s*d+m,v=Math.round(i),y=l*f+g,b=Math.round(y),_=(s+u)*d+m,E=Math.abs(Math.round(_)-v)||1,S=(l+c)*f+g,w=Math.abs(Math.round(S)-b)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(f),v,b),e.drawImage(t,n,r,a,o,0,0,E,w),e.setTransform(d,h,p,f,m,g),[E,w]}if(0===d&&0===f){const i=l*p+m,v=Math.round(i),y=s*h+g,b=Math.round(y),_=(l+c)*p+m,E=Math.abs(Math.round(_)-v)||1,S=(s+u)*h+g,w=Math.abs(Math.round(S)-b)||1;return e.setTransform(0,Math.sign(h),Math.sign(p),0,v,b),e.drawImage(t,n,r,a,o,0,0,w,E),e.setTransform(d,h,p,f,m,g),[w,E]}return e.drawImage(t,n,r,a,o,s,l,u,c),[Math.hypot(d,h)*u,Math.hypot(p,f)*c]}class d{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=r.Util.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=r.Util.applyTransform(t,e),i=r.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,n[0],i[0]),this.minY=Math.min(this.minY,n[1],i[1]),this.maxX=Math.max(this.maxX,n[0],i[0]),this.maxY=Math.max(this.maxY,n[1],i[1])}updateScalingPathMinMax(e,t){r.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,a,o,s,l,u,c){const d=r.Util.bezierBoundingBox(t,n,i,a,o,s,l,u);if(c)return c[0]=Math.min(c[0],d[0],d[2]),c[1]=Math.max(c[1],d[0],d[2]),c[2]=Math.min(c[2],d[1],d[3]),void(c[3]=Math.max(c[3],d[1],d[3]));this.updateRectMinMax(e,d)}getPathBoundingBox(e=a.PathType.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===a.PathType.STROKE){t||(0,r.unreachable)("Stroke bounding box must include transform.");const e=r.Util.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,a=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=a.PathType.FILL,t=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function h(e,t,n=null){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const i=t.height,a=t.width,o=i%l,s=(i-o)/l,u=0===o?s:s+1,c=e.createImageData(a,l);let d,h=0;const p=t.data,f=c.data;let m,g,v,y,b,_,E,S;if(n)switch(n.length){case 1:b=n[0],_=n[0],E=n[0],S=n[0];break;case 4:b=n[0],_=n[1],E=n[2],S=n[3]}if(t.kind===r.ImageKind.GRAYSCALE_1BPP){const t=p.byteLength,n=new Uint32Array(f.buffer,0,f.byteLength>>2),i=n.length,y=a+7>>3;let b=4294967295,_=r.FeatureTest.isLittleEndian?4278190080:255;for(S&&255===S[0]&&0===S[255]&&([b,_]=[_,b]),m=0;m<u;m++){for(v=m<s?l:o,d=0,g=0;g<v;g++){const e=t-h;let r=0;const i=e>y?a:8*e-7,o=-8&i;let s=0,l=0;for(;r<o;r+=8)l=p[h++],n[d++]=128&l?b:_,n[d++]=64&l?b:_,n[d++]=32&l?b:_,n[d++]=16&l?b:_,n[d++]=8&l?b:_,n[d++]=4&l?b:_,n[d++]=2&l?b:_,n[d++]=1&l?b:_;for(;r<i;r++)0===s&&(l=p[h++],s=128),n[d++]=l&s?b:_,s>>=1}for(;d<i;)n[d++]=0;e.putImageData(c,0,m*l)}}else if(t.kind===r.ImageKind.RGBA_32BPP){const t=!!(b||_||E);for(g=0,y=a*l*4,m=0;m<s;m++){if(f.set(p.subarray(h,h+y)),h+=y,t)for(let e=0;e<y;e+=4)b&&(f[e+0]=b[f[e+0]]),_&&(f[e+1]=_[f[e+1]]),E&&(f[e+2]=E[f[e+2]]);e.putImageData(c,0,g),g+=l}if(m<u){if(y=a*o*4,f.set(p.subarray(h,h+y)),t)for(let e=0;e<y;e+=4)b&&(f[e+0]=b[f[e+0]]),_&&(f[e+1]=_[f[e+1]]),E&&(f[e+2]=E[f[e+2]]);e.putImageData(c,0,g)}}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);{const t=!!(b||_||E);for(v=l,y=a*v,m=0;m<u;m++){for(m>=s&&(v=o,y=a*v),d=0,g=y;g--;)f[d++]=p[h++],f[d++]=p[h++],f[d++]=p[h++],f[d++]=255;if(t)for(let e=0;e<d;e+=4)b&&(f[e+0]=b[f[e+0]]),_&&(f[e+1]=_[f[e+1]]),E&&(f[e+2]=E[f[e+2]]);e.putImageData(c,0,m*l)}}}}function p(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,i=n%l,a=(n-i)/l,s=0===i?a:a+1,u=e.createImageData(r,l);let c=0;const d=t.data,h=u.data;for(let t=0;t<s;t++){const n=t<a?l:i;({srcPos:c}=(0,o.applyMaskImageData)({src:d,srcPos:c,dest:h,width:r,height:n})),e.putImageData(u,0,t*l)}}function f(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function m(e,t){e.strokeStyle=e.fillStyle=t||"#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function g(e,t,n,r){const i=e.length;for(let a=3;a<i;a+=4){const i=e[a];if(0===i)e[a-3]=t,e[a-2]=n,e[a-1]=r;else if(i<255){const o=255-i;e[a-3]=e[a-3]*i+t*o>>8,e[a-2]=e[a-2]*i+n*o>>8,e[a-1]=e[a-1]*i+r*o>>8}}}function v(e,t,n){const r=e.length,i=1/255;for(let a=3;a<r;a+=4){const r=n?n[e[a]]:e[a];t[a]=t[a]*r*i|0}}function y(e,t,n){const r=e.length;for(let i=3;i<r;i+=4){const r=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=n?t[i]*n[r>>8]>>8:t[i]*r>>16}}function b(e,t){const n=r.Util.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:n[0]<=a||n[1]<=a}const _=["butt","round","square"],E=["miter","round","bevel"],S={},w={};class T{constructor(e,t,n,r,{optionalContentConfig:i,markedContentStack:a=null},o,s){this.ctx=e,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=i,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=s?.background||null,this.foregroundColor=s?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,s=r||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const e=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const t=this.backgroundColor=this.ctx.fillStyle;let n=!0,r=s;if(this.ctx.fillStyle=s,r=this.ctx.fillStyle,n="string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r),"#000000"===e&&"#ffffff"===t||e===t||!n)this.foregroundColor=this.backgroundColor=null;else{const[n,a,o]=(0,i.getRGB)(r),s=e=>(e/=255)<=.03928?e/12.92:((e+.055)/1.055)**2.4,l=Math.round(.2126*s(n)+.7152*s(a)+.0722*s(o));this.selectColor=(n,r,i)=>{const a=.2126*s(n)+.7152*s(r)+.0722*s(i);return Math.round(a)===l?t:e}}}if(this.ctx.fillStyle=this.backgroundColor||s,this.ctx.fillRect(0,0,a,o),this.ctx.restore(),n){const e=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx,this.foregroundColor),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,o=e.fnArray;let s=t||0;const l=a.length;if(l===s)return s;const u=l-s>10&&"function"==typeof n,c=u?Date.now()+15:0;let d=0;const h=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if(f=o[s],f!==r.OPS.dependency)this[f].apply(this,a[s]);else for(const e of a[s]){const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),s}if(s++,s===l)return s;if(u&&++d>10){if(Date.now()>c)return n(),s;d=0}}}#ue(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#ue(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear()}_scaleImage(e,t){const n=e.width,r=e.height;let i,a,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),l=n,u=r,c="prescale1";for(;o>2&&l>1||s>2&&u>1;){let t=l,n=u;o>2&&l>1&&(t=Math.ceil(l/2),o/=l/t),s>2&&u>1&&(n=Math.ceil(u/2),s/=u/n),i=this.cachedCanvases.getCanvas(c,t,n),a=i.context,a.clearRect(0,0,t,n),a.drawImage(e,0,0,l,u,0,0,t,n),e=i.canvas,l=t,u=n,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:o}=e,s=this.current.fillColor,l=this.current.patternFill,u=(0,i.getCurrentTransform)(t);let d,h,f,m;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;h=JSON.stringify(l?u:[u.slice(0,4),s]),d=this._cachedBitmapsMap.get(t),d||(d=new Map,this._cachedBitmapsMap.set(t,d));const n=d.get(h);if(n&&!l)return{canvas:n,offsetX:Math.round(Math.min(u[0],u[2])+u[4]),offsetY:Math.round(Math.min(u[1],u[3])+u[5])};f=n}f||(m=this.cachedCanvases.getCanvas("maskCanvas",n,o),p(m.context,e));let g=r.Util.transform(u,[1/n,0,0,-1/o,0,0]);g=r.Util.transform(g,[1,0,0,1,0,-o]);const v=r.Util.applyTransform([0,0],g),y=r.Util.applyTransform([n,o],g),_=r.Util.normalizeRect([v[0],v[1],y[0],y[1]]),E=Math.round(_[2]-_[0])||1,S=Math.round(_[3]-_[1])||1,w=this.cachedCanvases.getCanvas("fillCanvas",E,S),T=w.context,C=Math.min(v[0],y[0]),k=Math.min(v[1],y[1]);T.translate(-C,-k),T.transform(...g),f||(f=this._scaleImage(m.canvas,(0,i.getCurrentTransformInverse)(T)),f=f.img,d&&l&&d.set(h,f)),T.imageSmoothingEnabled=b((0,i.getCurrentTransform)(T),e.interpolate),c(T,f,0,0,f.width,f.height,0,0,n,o),T.globalCompositeOperation="source-in";const A=r.Util.transform((0,i.getCurrentTransformInverse)(T),[1,0,0,1,-C,-k]);return T.fillStyle=l?s.getPattern(t,this,A,a.PathType.FILL):s,T.fillRect(0,0,n,o),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,w.canvas)),{canvas:w.canvas,offsetX:Math.round(C),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=_[e]}setLineJoin(e){this.ctx.lineJoin=E[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=n}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,a,o){t.transform(e,n,r,i,a,o),this.__originalTransform(e,n,r,i,a,o)},e.setTransform=function(e,n,r,i,a,o){t.setTransform(e,n,r,i,a,o),this.__originalSetTransform(e,n,r,i,a,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,a,o){t.bezierCurveTo(e,n,r,i,a,o),this.__originalBezierCurveTo(e,n,r,i,a,o)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;(function(e,t,n,r){const i=r[0],a=r[1],o=r[2]-i,s=r[3]-a;0!==o&&0!==s&&(function(e,t,n,r,i,a,o,s,l,u,c){const d=!!a,h=d?a[0]:0,p=d?a[1]:0,f=d?a[2]:0;let m;m="Luminosity"===i?y:v;const b=Math.min(r,Math.ceil(1048576/n));for(let i=0;i<r;i+=b){const a=Math.min(b,r-i),v=e.getImageData(s-u,i+(l-c),n,a),y=t.getImageData(s,i+l,n,a);d&&g(v.data,h,p,f),m(v.data,y.data,o),t.putImageData(y,s,i+l)}}(t.context,n,o,s,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())})(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const a=this.ctx,o=this.current;let s,l,u=o.x,c=o.y;const d=(0,i.getCurrentTransform)(a),h=0===d[0]&&0===d[3]||0===d[1]&&0===d[2],p=h?n.slice(0):null;for(let n=0,i=0,f=e.length;n<f;n++)switch(0|e[n]){case r.OPS.rectangle:u=t[i++],c=t[i++];const e=t[i++],n=t[i++],f=u+e,m=c+n;a.moveTo(u,c),0===e||0===n?a.lineTo(f,m):(a.lineTo(f,c),a.lineTo(f,m),a.lineTo(u,m)),h||o.updateRectMinMax(d,[u,c,f,m]),a.closePath();break;case r.OPS.moveTo:u=t[i++],c=t[i++],a.moveTo(u,c),h||o.updatePathMinMax(d,u,c);break;case r.OPS.lineTo:u=t[i++],c=t[i++],a.lineTo(u,c),h||o.updatePathMinMax(d,u,c);break;case r.OPS.curveTo:s=u,l=c,u=t[i+4],c=t[i+5],a.bezierCurveTo(t[i],t[i+1],t[i+2],t[i+3],u,c),o.updateCurvePathMinMax(d,s,l,t[i],t[i+1],t[i+2],t[i+3],u,c,p),i+=6;break;case r.OPS.curveTo2:s=u,l=c,a.bezierCurveTo(u,c,t[i],t[i+1],t[i+2],t[i+3]),o.updateCurvePathMinMax(d,s,l,u,c,t[i],t[i+1],t[i+2],t[i+3],p),u=t[i+2],c=t[i+3],i+=4;break;case r.OPS.curveTo3:s=u,l=c,u=t[i+2],c=t[i+3],a.bezierCurveTo(t[i],t[i+1],u,c,u,c),o.updateCurvePathMinMax(d,s,l,t[i],t[i+1],u,c,u,c,p),i+=4;break;case r.OPS.closePath:a.closePath()}h&&o.updateScalingPathMinMax(d,p),o.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=S}eoClip(){this.pendingClip=w}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const a=n.loadedName||"sans-serif";let o="normal";n.black?o="900":n.bold&&(o="bold");const s=n.italic?"italic":"normal",l=`"${a}", ${n.fallbackName}`;let u=t;t<16?u=16:t>100&&(u=100),this.current.fontSizeScale=t/u,this.ctx.font=`${s} ${o} ${u}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,a){const o=this.ctx,s=this.current,l=s.font,u=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,d=u&r.TextRenderingMode.FILL_STROKE_MASK,h=!!(u&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=s.patternFill&&!l.missingFile;let f;(l.disableFontFace||h||p)&&(f=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p?(o.save(),o.translate(t,n),o.beginPath(),f(o,c),a&&o.setTransform(...a),d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||o.fill(),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||o.fillText(e,t,n),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||o.strokeText(e,t,n)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(o),x:t,y:n,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const o=t.fontSize;if(0===o)return;const s=this.ctx,l=t.fontSizeScale,u=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,p=e.length,f=n.vertical,m=f?1:-1,g=n.defaultVMetrics,v=o*t.fontMatrix[0],y=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;let b;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),d>0?s.scale(h,-1):s.scale(h,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,(0,i.getCurrentTransformInverse)(s),a.PathType.FILL);b=(0,i.getCurrentTransform)(s),s.restore(),s.fillStyle=e}let _=t.lineWidth;const E=t.textMatrixScale;if(0===E||0===_){const e=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;e!==r.TextRenderingMode.STROKE&&e!==r.TextRenderingMode.FILL_STROKE||(_=this.getSinglePixelWidth())}else _/=E;if(1!==l&&(s.scale(l,l),_/=l),s.lineWidth=_,n.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;return s.fillText(n.join(""),0,0),t.x+=r*v*h,s.restore(),void this.compose()}let S,w=0;for(S=0;S<p;++S){const t=e[S];if("number"==typeof t){w+=m*t*o/1e3;continue}let r=!1;const i=(t.isSpace?c:0)+u,a=t.fontChar,h=t.accent;let p,_,E,T=t.width;if(f){const e=t.vmetric||g,n=-(t.vmetric?e[1]:.5*T)*v,r=e[2]*v;T=e?-e[0]:T,p=n/l,_=(w+r)/l}else p=w/l,_=0;if(n.remeasure&&T>0){const e=1e3*s.measureText(a).width/o*l;if(T<e&&this.isFontSubpixelAAEnabled){const t=T/e;r=!0,s.save(),s.scale(t,1),p/=t}else T!==e&&(p+=(T-e)/2e3*o/l)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(y&&!h)s.fillText(a,p,_);else if(this.paintChar(a,p,_,b),h){const e=p+o*h.offset.x/l,t=_-o*h.offset.y/l;this.paintChar(h.fontChar,e,t,b)}E=f?T*v-i*d:T*v+i*d,w+=E,r&&s.restore()}f?t.y-=w:t.x+=w*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,o=n.fontDirection,s=i.vertical?1:-1,l=n.charSpacing,u=n.wordSpacing,c=n.textHScale*o,d=n.fontMatrix||r.FONT_IDENTITY_MATRIX,h=e.length;let p,f,m,g;if(n.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==a){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,o),p=0;p<h;++p){if(f=e[p],"number"==typeof f){g=s*f*a/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const o=(f.isSpace?u:0)+l,h=i.charProcOperatorList[f.operatorListId];h?(this.contentVisible&&(this.processingType3=f,this.save(),t.scale(a,a),t.transform(...d),this.executeOperatorList(h),this.restore()),m=r.Util.applyTransform([f.width,0],d)[0]*a+o,t.translate(m,0),n.x+=m*c):(0,r.warn)(`Type3 character "${f.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],r=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),o={createCanvasGraphics:e=>new T(e,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new a.TilingPattern(e,n,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=this.selectColor?.(e,t,n)||r.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=this.selectColor?.(e,t,n)||r.Util.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=(0,a.getShadingPattern)(this.objs.get(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.SHADING);const o=(0,i.getCurrentTransformInverse)(t);if(o){const e=t.canvas,n=e.width,i=e.height,a=r.Util.applyTransform([0,0],o),s=r.Util.applyTransform([0,i],o),l=r.Util.applyTransform([n,0],o),u=r.Util.applyTransform([n,i],o),c=Math.min(a[0],s[0],l[0],u[0]),d=Math.min(a[1],s[1],l[1],u[1]),h=Math.max(a[0],s[0],l[0],u[0]),p=Math.max(a[1],s[1],l[1],u[1]);this.ctx.fillRect(c,d,h-c,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");const n=(0,i.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=r.Util.getAxialAlignedBoundingBox(e.bbox,(0,i.getCurrentTransform)(t));const o=[0,0,t.canvas.width,t.canvas.height];a=r.Util.intersect(a,o)||[0,0,0,0];const l=Math.floor(a[0]),u=Math.floor(a[1]);let c=Math.max(Math.ceil(a[2])-l,1),d=Math.max(Math.ceil(a[3])-u,1),h=1,p=1;c>s&&(h=c/s,c=s),d>s&&(p=d/s,d=s),this.current.startNewPathAndClipBox([0,0,c,d]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,c,d),v=g.context;v.scale(1/h,1/p),v.translate(-l,-u),v.transform(...n),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:u,scaleX:h,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,u),t.scale(h,p),t.save()),f(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=r.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,a,o){if(this.#ue(),m(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const a=t[2]-t[0],s=t[3]-t[1];if(o&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=a,t[3]=s;const[o,l]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:u}=this,c=Math.ceil(a*this.outputScaleX*u),d=Math.ceil(s*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,d);const{canvas:h,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.setTransform(o,0,0,-l,0,s*l),m(this.ctx,this.foregroundColor)}else m(this.ctx,this.foregroundColor),this.ctx.rect(t[0],t[1],a,s),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1;let a,o,s,l=new Uint8Array(i*(n+1));const u=t+7&-8;let c=new Uint8Array(u*n),d=0;for(const t of e.data){let e=128;for(;e>0;)c[d++]=t&e?0:255,e>>=1}let h=0;for(d=0,0!==c[d]&&(l[0]=1,++h),o=1;o<t;o++)c[d]!==c[d+1]&&(l[o]=c[d]?2:1,++h),d++;for(0!==c[d]&&(l[o]=2,++h),a=1;a<n;a++){d=a*u,s=a*i,c[d-u]!==c[d]&&(l[s]=c[d]?1:8,++h);let e=(c[d]?4:0)+(c[d-u]?8:0);for(o=1;o<t;o++)e=(e>>2)+(c[d+1]?4:0)+(c[d-u+1]?8:0),r[e]&&(l[s+o]=r[e],++h),d++;if(c[d-u]!==c[d]&&(l[s+o]=c[d]?2:4,++h),h>1e3)return null}for(d=u*(n-1),s=a*i,0!==c[d]&&(l[s]=8,++h),o=1;o<t;o++)c[d]!==c[d+1]&&(l[s+o]=c[d]?4:8,++h),d++;if(0!==c[d]&&(l[s+o]=4,++h),h>1e3)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),f=new Path2D;for(a=0;h&&a<=n;a++){let e=a*i;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%i,a);const r=e;let o=l[e];do{const t=p[o];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(o=n,l[e]=0):(o=n&51*o>>4,l[e]&=o>>2|o<<2),f.lineTo(e%i,e/i|0),l[e]||--h}while(r!==e);--a}return c=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(f),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,a=0,o,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const u=(0,i.getCurrentTransform)(l);l.transform(t,n,a,o,0,0);const c=this._createMaskCanvas(e);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]);for(let e=0,i=s.length;e<i;e+=2){const i=r.Util.transform(u,[t,n,a,o,s[e],s[e+1]]),[d,h]=r.Util.applyTransform([0,0],i);l.drawImage(c.canvas,d,h)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:e,width:s,height:l,transform:u}=o,d=this.cachedCanvases.getCanvas("maskCanvas",s,l),h=d.context;h.save(),p(h,this.getObject(e,o)),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this,(0,i.getCurrentTransformInverse)(t),a.PathType.FILL):n,h.fillRect(0,0,s,l),h.restore(),t.save(),t.transform(...u),t.scale(1,-1),c(t,d.canvas,0,0,s,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a)return void(0,r.warn)("Dependent image isn't ready yet");const o=a.width,s=a.height,l=[];for(let e=0,r=i.length;e<r;e+=2)l.push({transform:[t,0,0,n,i[e],i[e+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(a,l)}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;let a;if(this.save(),r.scale(1/t,-1/n),"function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,n);h(r.context,e,this.current.transferMaps),a=r.canvas}const o=this._scaleImage(a,(0,i.getCurrentTransformInverse)(r));r.imageSmoothingEnabled=b((0,i.getCurrentTransform)(r),e.interpolate),c(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,r=e.width,i=e.height,a=this.cachedCanvases.getCanvas("inlineImage",r,i);h(a.context,e,this.current.transferMaps);for(const e of t)n.save(),n.transform(...e.transform),n.scale(1,-1),c(n,a.canvas,e.x,e.y,e.w,e.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===w?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,i.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:e}=this.current,t=(0,i.getCurrentTransform)(this.ctx);let n,r;if(0===t[1]&&0===t[2]){const i=Math.abs(t[0]),a=Math.abs(t[3]);if(0===e)n=1/i,r=1/a;else{const t=i*e,o=a*e;n=t<1?1/t:1,r=o<1?1/o:1}}else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.hypot(t[0],t[1]),o=Math.hypot(t[2],t[3]);if(0===e)n=o/i,r=a/i;else{const t=e*i;n=o>t?o/t:1,r=a>t?a/t:1}}this._cachedScaleForStroking=[n,r]}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===a)return void t.stroke();let o,s,l;e&&(o=(0,i.getCurrentTransform)(t),s=t.getLineDash().slice(),l=t.lineDashOffset),t.scale(r,a);const u=Math.max(r,a);t.setLineDash(t.getLineDash().map((e=>e/u))),t.lineDashOffset/=u,t.stroke(),e&&(t.setTransform(...o),t.setLineDash(s),t.lineDashOffset=l)}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}t.CanvasGraphics=T;for(const e in r.OPS)void 0!==T.prototype[e]&&(T.prototype[r.OPS[e]]=T.prototype[e])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new d(e);case"Dummy":return new h}throw new Error(`Unknown IR type: ${e[0]}`)};var r=n(1),i=n(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}t.PathType=a;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends s{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const e of this._colorStops)t.addColorStop(e[0],e[1]);return t}getPattern(e,t,n,s){let l;if(s===a.STROKE||s===a.FILL){const a=t.current.getClippedPathBoundingBox(s,(0,i.getCurrentTransform)(e))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",u,c,!0),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=r.Util.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),o(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),l=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);l.setTransform(p)}else o(e,this._bbox),l=this._createGradient(e);return l}}function u(e,t,n,r,i,a,o,s){const l=t.coords,u=t.colors,c=e.data,d=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=o,o=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=o,o=s,s=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=o,o=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(f>=y)return;const b=u[a],_=u[a+1],E=u[a+2],S=u[o],w=u[o+1],T=u[o+2],C=u[s],k=u[s+1],A=u[s+2],P=Math.round(f),x=Math.round(y);let I,M,R,O,L,D,N,F;for(let e=P;e<=x;e++){if(e<g){let t;t=e<f?0:(f-e)/(f-g),I=p-(p-m)*t,M=b-(b-S)*t,R=_-(_-w)*t,O=E-(E-T)*t}else{let t;t=e>y?1:g===y?0:(g-e)/(g-y),I=m-(m-v)*t,M=S-(S-C)*t,R=w-(w-k)*t,O=T-(T-A)*t}let t;t=e<f?0:e>y?1:(f-e)/(f-y),L=p-(p-v)*t,D=b-(b-C)*t,N=_-(_-k)*t,F=E-(E-A)*t;const n=Math.round(Math.min(I,L)),r=Math.round(Math.max(I,L));let i=d*e+4*n;for(let e=n;e<=r;e++)t=(I-e)/(I-L),t<0?t=0:t>1&&(t=1),c[i++]=M-(M-D)*t|0,c[i++]=R-(R-N)*t|0,c[i++]=O-(O-F)*t|0,c[i++]=255}}function c(e,t,n){const r=t.coords,i=t.colors;let a,o;switch(t.type){case"lattice":const s=t.verticesPerRow,l=Math.floor(r.length/s)-1,c=s-1;for(a=0;a<l;a++){let t=a*s;for(let a=0;a<c;a++,t++)u(e,n,r[t],r[t+1],r[t+s],i[t],i[t+1],i[t+s]),u(e,n,r[t+s+1],r[t+1],r[t+s],i[t+s+1],i[t+1],i[t+s])}break;case"triangles":for(a=0,o=r.length;a<o;a+=3)u(e,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class d extends s{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-i,s=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),u=a/s,d=o/l,h={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/u,scaleY:1/d},p=s+4,f=l+4,m=n.getCanvas("mesh",p,f,!1),g=m.context,v=g.createImageData(s,l);if(t){const e=v.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const e of this._figures)c(v,e,h);return g.putImageData(v,2,2),{canvas:m.canvas,offsetX:r-2*u,offsetY:i-2*d,scaleX:u,scaleY:d}}getPattern(e,t,n,s){let l;if(o(e,this._bbox),s===a.SHADING)l=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(e));else if(l=r.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=r.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*e[0],l[1]*e[1]]}const u=this._createMeshCanvas(l,s===a.SHADING?null:this._background,t.cachedCanvases);return s!==a.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class h extends s{getPattern(){return"hotpink"}}class p{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,a=this.xstep,o=this.ystep,s=this.paintType,l=this.tilingType,u=this.color,c=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+l);const d=n[0],h=n[1],p=n[2],f=n[3],m=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),v=[m[0]*g[0],m[1]*g[1]],y=this.getSizeAndScale(a,this.ctx.canvas.width,v[0]),b=this.getSizeAndScale(o,this.ctx.canvas.height,v[1]),_=e.cachedCanvases.getCanvas("pattern",y.size,b.size,!0),E=_.context,S=c.createCanvasGraphics(E);S.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(S,s,u);let w=d,T=h,C=p,k=f;return d<0&&(w=0,C+=Math.abs(d)),h<0&&(T=0,k+=Math.abs(h)),E.translate(-y.scale*w,-b.scale*T),S.transform(y.scale,0,0,b.scale,0,0),E.save(),this.clipBbox(S,w,T,C,k),S.baseTransform=(0,i.getCurrentTransform)(S.ctx),S.executeOperatorList(t),S.endDrawing(),{canvas:_.canvas,scaleX:y.scale,scaleY:b.scale,offsetX:w,offsetY:T}}getSizeAndScale(e,t,n){e=Math.abs(e);const r=Math.max(p.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,a){const o=r-t,s=a-n;e.ctx.rect(t,n,o,s),e.current.updateRectMinMax((0,i.getCurrentTransform)(e.ctx),[t,n,r,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case 1:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,a.fillColor=e.fillStyle,a.strokeColor=e.strokeStyle;break;case 2:const o=r.Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=o,i.strokeStyle=o,a.fillColor=o,a.strokeColor=o;break;default:throw new r.FormatError(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let o=n;i!==a.SHADING&&(o=r.Util.transform(o,t.baseTransform),this.matrix&&(o=r.Util.transform(o,this.matrix)));const s=this.createPatternCanvas(t);let l=new DOMMatrix(o);l=l.translate(s.offsetX,s.offsetY),l=l.scale(1/s.scaleX,1/s.scaleY);const u=e.createPattern(s.canvas,"repeat");return u.setTransform(l),u}}t.TilingPattern=p},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=function({src:e,srcPos:t=0,dest:n,destPos:i=0,width:a,height:o,inverseDecode:s=!1}){const l=r.FeatureTest.isLittleEndian?4278190080:255,[u,c]=s?[0,l]:[l,0],d=a>>3,h=7&a,p=e.length;n=new Uint32Array(n.buffer);for(let r=0;r<o;r++){for(const r=t+d;t<r;t++){const r=t<p?e[t]:255;n[i++]=128&r?c:u,n[i++]=64&r?c:u,n[i++]=32&r?c:u,n[i++]=16&r?c:u,n[i++]=8&r?c:u,n[i++]=4&r?c:u,n[i++]=2&r?c:u,n[i++]=1&r?c:u}if(0===h)continue;const r=t<p?e[t++]:255;for(let e=0;e<h;e++)n[i++]=r&1<<7-e?c:u}return{srcPos:t,destPos:i}};var r=n(1)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(1);function i(e){switch(e instanceof Error||"object"==typeof e&&null!==e||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"PasswordException":return new r.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this._processStreamMessage(t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");n.reject(i(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,a=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:a,callback:1,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:a,callback:2,callbackId:t.callbackId,reason:i(r)})}))}else t.streamId?this._createStreamSink(t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=(0,r.createPromiseCapability)();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(e){a.reject(e)}return a.promise}sendWithStream(e,t,n,a){const o=this.streamId++,s=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:n=>{const i=(0,r.createPromiseCapability)();return this.streamControllers[o]={controller:n,startCall:i,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:l,action:e,streamId:o,data:t,desiredSize:n.desiredSize},a),i.promise},pull:e=>{const t=(0,r.createPromiseCapability)();return this.streamControllers[o].pullCall=t,u.postMessage({sourceName:s,targetName:l,stream:6,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,r.assert)(e instanceof Error,"cancel must have a valid reason");const t=(0,r.createPromiseCapability)();return this.streamControllers[o].cancelCall=t,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:s,targetName:l,stream:1,streamId:o,reason:i(e)}),t.promise}},n)}_createStreamSink(e){const t=e.streamId,n=this.sourceName,a=e.sourceName,o=this.comObj,s=this,l=this.actionHandler[e.action],u={enqueue(e,i=1,s){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=i,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:4,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:3,streamId:t}),delete s.streamSinks[t])},error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:5,streamId:t,reason:i(e)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise((function(t){t(l(e.data,u))})).then((function(){o.postMessage({sourceName:n,targetName:a,stream:8,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:a,stream:8,streamId:t,reason:i(e)})}))}_processStreamMessage(e){const t=e.streamId,n=this.sourceName,a=e.sourceName,o=this.comObj,s=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case 8:e.success?s.startCall.resolve():s.startCall.reject(i(e.reason));break;case 7:e.success?s.pullCall.resolve():s.pullCall.reject(i(e.reason));break;case 6:if(!l){o.postMessage({sourceName:n,targetName:a,stream:7,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise((function(e){e(l.onPull&&l.onPull())})).then((function(){o.postMessage({sourceName:n,targetName:a,stream:7,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:a,stream:7,streamId:t,reason:i(e)})}));break;case 4:if((0,r.assert)(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case 3:if((0,r.assert)(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this._deleteStreamController(s,t);break;case 5:(0,r.assert)(s,"error should have stream controller"),s.controller.error(i(e.reason)),this._deleteStreamController(s,t);break;case 2:e.success?s.cancelCall.resolve():s.cancelCall.reject(i(e.reason)),this._deleteStreamController(s,t);break;case 1:if(!l)break;new Promise((function(t){t(l.onCancel&&l.onCancel(i(e.reason)))})).then((function(){o.postMessage({sourceName:n,targetName:a,stream:2,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:a,stream:2,streamId:t,reason:i(e)})})),l.sinkCapability.reject(i(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e,t){await Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1);t.Metadata=class{#ce;#de;constructor({parsedData:e,rawData:t}){this.#ce=e,this.#de=t}getRaw(){return this.#de}get(e){return this.#ce.get(e)??null}getAll(){return(0,r.objectFromMap)(this.#ce)}has(e){return this.#ce.has(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(1),i=n(8);const a=Symbol("INTERNAL");class o{#he=!0;constructor(e,t){this.name=e,this.intent=t}get visible(){return this.#he}_setVisible(e,t){e!==a&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#he=t}}t.OptionalContentConfig=class{#pe=null;#fe=new Map;#me=null;#ge=null;constructor(e){if(this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#ge=e.order;for(const t of e.groups)this.#fe.set(t.id,new o(t.name,t.intent));if("OFF"===e.baseState)for(const e of this.#fe.values())e._setVisible(a,!1);for(const t of e.on)this.#fe.get(t)._setVisible(a,!0);for(const t of e.off)this.#fe.get(t)._setVisible(a,!1);this.#me=this.getHash()}}#ve(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let a;if(Array.isArray(t))a=this.#ve(t);else{if(!this.#fe.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;a=this.#fe.get(t).visible}switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===n}isVisible(e){if(0===this.#fe.size)return!0;if(!e)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return this.#fe.has(e.id)?this.#fe.get(e.id).visible:((0,r.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#ve(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#fe.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(this.#fe.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#fe.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(!this.#fe.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#fe.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(!this.#fe.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#fe.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(this.#fe.get(t).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,r.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){this.#fe.has(e)?(this.#fe.get(e)._setVisible(a,!!t),this.#pe=null):(0,r.warn)(`Optional content group not found: ${e}`)}get hasInitialVisibility(){return this.getHash()===this.#me}getOrder(){return this.#fe.size?this.#ge?this.#ge.slice():[...this.#fe.keys()]:null}getGroups(){return this.#fe.size>0?(0,r.objectFromMap)(this.#fe):null}getGroup(e){return this.#fe.get(e)||null}getHash(){if(null!==this.#pe)return this.#pe;const e=new i.MurmurHash3_64;for(const[t,n]of this.#fe)e.update(`${t}:${n.visible}`);return this.#pe=e.hexdigest()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(1),i=n(6);t.PDFDataTransportStream=class{constructor({length:e,initialData:t,progressiveDone:n=!1,contentDispositionFilename:i=null,disableRange:a=!1,disableStream:o=!1},s){if((0,r.assert)(s,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=n,this._contentDispositionFilename=i,t?.length>0){const e=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=s,this._isStreamingSupported=!o,this._isRangeSupported=!a,this._contentLength=e,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const t=this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(n),!0)}));(0,r.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new a(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new o(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}};class a{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=(0,i.isPdfFile)(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function e(r){if(!r)return;let i=null;const a=r.name;if("#text"===a)i=r.value;else{if(!n.shouldBuildText(a))return;r?.attributes?.textContent?i=r.attributes.textContent:r.value&&(i=r.value)}if(null!==i&&t.push({str:i}),r.children)for(const t of r.children)e(t)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=n(7);const i=function(e){return new Promise(((t,n)=>{__webpack_require__(3237).readFile(e,((e,r)=>{!e&&r?t(new Uint8Array(r)):n(new Error(e))}))}))};class a extends r.BaseCanvasFactory{_createCanvas(e,t){return __webpack_require__(7640).createCanvas(e,t)}}t.NodeCanvasFactory=a;class o extends r.BaseCMapReaderFactory{_fetchData(e,t){return i(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=o;class s extends r.BaseStandardFontDataFactory{_fetchData(e){return i(e)}}t.NodeStandardFontDataFactory=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(1),i=n(22);const a=__webpack_require__(3237),o=__webpack_require__(7492),s=__webpack_require__(1815),l=__webpack_require__(6671),u=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=l.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?l.parse(`file:///${e}`):(t.host||(t.protocol="file:"),t)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new m(this):new p(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new g(this,e,t):new f(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class c{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class p extends c{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:a,suggestedLength:o}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n)};this._request=null,"http:"===this._url.protocol?this._request=o.request(h(this._url,e.httpHeaders),t):this._request=s.request(h(this._url,e.httpHeaders),t),this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class f extends d{constructor(e,t,n){super(e),this._httpHeaders={};for(const t in e.httpHeaders){const n=e.httpHeaders[t];void 0!==n&&(this._httpHeaders[t]=n)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e}};this._request=null,"http:"===this._url.protocol?this._request=o.request(h(this._url,this._httpHeaders),i):this._request=s.request(h(this._url,this._httpHeaders),i),this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class m extends c{constructor(e){super(e);let t=decodeURIComponent(this._url.path);u.test(this._url.href)&&(t=t.replace(/^\//,"")),a.lstat(t,((e,n)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=n.size,this._setReadableStream(a.createReadStream(t)),this._headersCapability.resolve()}))}}class g extends d{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);u.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(a.createReadStream(r,{start:t,end:n-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,i.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if((0,a.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function({getResponseHeader:e,isHttp:t,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e("Content-Length"),10);return Number.isInteger(a)?(i.suggestedLength=a,a<=2*n||r||!t||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i):i},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(1),i=n(23),a=n(6)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=s(n);return e=unescape(e),e=l(e),e=u(e),o(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,i]}const a=[];for(let e=0;e<t.length&&e in t;++e){let[n,r]=t[e];r=s(r),n&&(r=unescape(r),0===e&&(r=l(r))),a.push(r)}return a.join("")}(e),n)return o(u(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=s(n);return e=u(e),o(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),a=(0,r.stringToBytes)(n);n=i.decode(a),t=!1}catch(e){}}return n}function o(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){const t=e.indexOf("'");return-1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function u(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return a(t,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(e){}return a(t,r)}))}return""};var r=n(1)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(1),i=n(22);class a{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const e in n)r[e]=n[e];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const n=this.httpHeaders[e];void 0!==n&&t.setRequestHeader(e,n)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError?.(i.status);const a=i.status||200;if((200!==a||206!==n.expectedStatus)&&a!==n.expectedStatus)return void n.onError?.(i.status);const o=function(e){const t=e.response;return"string"!=typeof t?t:(0,r.stringToBytes)(t).buffer}(i);if(206===a){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):n.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new a(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new s(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class o{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class s{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(1),i=n(22);function a(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function o(e){const t=new Headers;for(const n in e){const r=e[n];void 0!==r&&t.append(n,r)}return t}function s(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,r.warn)(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new u(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=o(this._stream.httpHeaders);const n=t.url;fetch(n,a(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:a,suggestedLength:o}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:s(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class u{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const l=s.url;fetch(l,a(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:s(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const t=new c(e);return t._render(),t},t.updateTextLayer=function({container:e,viewport:t,textDivs:n,textDivProperties:r,isOffscreenCanvasSupported:a,mustRotate:o=!0,mustRescale:l=!0}){if(o&&(0,i.setLayerDimensions)(e,{rotation:t.rotation}),l){const e=s(0,a),i={prevFontSize:null,prevFontFamily:null,div:null,scale:t.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const e of n)i.properties=r.get(e),i.div=e,u(i)}};var r=n(1),i=n(6);const a=30,o=new Map;function s(e,t){let n;if(t&&r.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,n=t.getContext("2d",{alpha:!1})}return n}function l(e,t,n){const i=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(i);const u=r.Util.transform(e._transform,t.transform);let c=Math.atan2(u[1],u[0]);const d=n[t.fontName];d.vertical&&(c+=Math.PI/2);const h=Math.hypot(u[2],u[3]),p=h*function(e,t){const n=o.get(e);if(n)return n;const r=s(a,t);r.font=`30px ${e}`;const i=r.measureText("");let l=i.fontBoundingBoxAscent,u=Math.abs(i.fontBoundingBoxDescent);if(l){const t=l/(l+u);return o.set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,a,a),r.strokeText("g",0,0);let c=r.getImageData(0,0,a,a).data;u=0;for(let e=c.length-1-3;e>=0;e-=4)if(c[e]>0){u=Math.ceil(e/4/a);break}r.clearRect(0,0,a,a),r.strokeText("A",0,a),c=r.getImageData(0,0,a,a).data,l=0;for(let e=0,t=c.length;e<t;e+=4)if(c[e]>0){l=a-Math.floor(e/4/a);break}if(r.canvas.width=r.canvas.height=0,l){const t=l/(l+u);return o.set(e,t),t}return o.set(e,.8),.8}(d.fontFamily,e._isOffscreenCanvasSupported);let f,m;0===c?(f=u[4],m=u[5]-p):(f=u[4]+p*Math.sin(c),m=u[5]-p*Math.cos(c));const g="calc(var(--scale-factor)*",v=i.style;e._container===e._rootContainer?(v.left=`${(100*f/e._pageWidth).toFixed(2)}%`,v.top=`${(100*m/e._pageHeight).toFixed(2)}%`):(v.left=`${g}${f.toFixed(2)}px)`,v.top=`${g}${m.toFixed(2)}px)`),v.fontSize=`${g}${h.toFixed(2)}px)`,v.fontFamily=d.fontFamily,l.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==c&&(l.angle=c*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(y=!0)}y&&(l.canvasWidth=d.vertical?t.height:t.width),e._textDivProperties.set(i,l),e._isReadableStream&&e._layoutText(i)}function u(e){const{div:t,scale:n,properties:r,ctx:i,prevFontSize:a,prevFontFamily:o}=e,{style:s}=t;let l="";if(0!==r.canvasWidth&&r.hasText){const{fontFamily:u}=s,{canvasWidth:c,fontSize:d}=r;a===d&&o===u||(i.font=`${d*n}px ${u}`,e.prevFontSize=d,e.prevFontFamily=u);const{width:h}=i.measureText(t.textContent);h>0&&(l=`scaleX(${c*n/h})`)}0!==r.angle&&(l=`rotate(${r.angle}deg) ${l}`),l.length>0&&(s.transform=l)}class c{constructor({textContentSource:e,container:t,viewport:n,textDivs:a,textDivProperties:o,textContentItemsStr:l,isOffscreenCanvasSupported:u}){this._textContentSource=e,this._isReadableStream=e instanceof ReadableStream,this._container=this._rootContainer=t,this._textDivs=a||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=u,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s(0,u)};const{pageWidth:c,pageHeight:d,pageX:h,pageY:p}=n.rawDims;this._transform=[1,0,0,-1,-h,p+d],this._pageWidth=c,this._pageHeight=d,(0,i.setLayerDimensions)(t,n),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const n of e)if(void 0!==n.str)this._textContentItemsStr.push(n.str),l(this,n,t);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==n.id&&this._container.setAttribute("id",`${n.id}`),e.append(this._container)}else"endMarkedContent"===n.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,u(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=(0,r.createPromiseCapability)();let t=Object.create(null);if(this._isReadableStream){const n=()=>{this._reader.read().then((({value:r,done:i})=>{i?e.resolve():(Object.assign(t,r.styles),this._processItems(r.items,t),n())}),e.reject)};this._reader=this._textContentSource.getReader(),n()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:n}=this._textContentSource;this._processItems(t,n),e.resolve()}}e.promise.then((()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,n=e._capability;if(t.length>1e5)n.resolve();else{if(!e._isReadableStream)for(const n of t)e._layoutText(n);n.resolve()}}(this)}),this._capability.reject)}}t.TextLayerRenderTask=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=n(1),i=n(5),a=n(28),o=n(29),s=n(6);class l{#ye;#be=!1;#_e=this.pointerup.bind(this);#Ee=this.pointerdown.bind(this);#Se=new Map;#we=!1;#Te=!1;#Ce;static _initialized=!1;constructor(e){l._initialized||(l._initialized=!0,a.FreeTextEditor.initialize(e.l10n),o.InkEditor.initialize(e.l10n)),e.uiManager.registerEditorTypes([a.FreeTextEditor,o.InkEditor]),this.#Ce=e.uiManager,this.pageIndex=e.pageIndex,this.div=e.div,this.#ye=e.accessibilityManager,this.#Ce.addLayer(this)}get isEmpty(){return 0===this.#Se.size}updateToolbar(e){this.#Ce.updateToolbar(e)}updateMode(e=this.#Ce.getMode()){this.#ke(),e===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#Ce.unselectAll(),e!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===r.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||this.#Ce.getMode()===r.AnnotationEditorType.INK){if(!e)for(const e of this.#Se.values())if(e.isEmpty())return void e.setInBackground();this.#Ae({offsetX:0,offsetY:0}).setInBackground()}}setEditingState(e){this.#Ce.setEditingState(e)}addCommands(e){this.#Ce.addCommands(e)}enable(){this.div.style.pointerEvents="auto";for(const e of this.#Se.values())e.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const e of this.#Se.values())e.disableEditing();this.#ke(),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(e){this.#Ce.getActive()!==e&&this.#Ce.setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",this.#Ee),this.div.addEventListener("pointerup",this.#_e)}disableClick(){this.div.removeEventListener("pointerdown",this.#Ee),this.div.removeEventListener("pointerup",this.#_e)}attach(e){this.#Se.set(e.id,e)}detach(e){this.#Se.delete(e.id),this.#ye?.removePointerInTextLayer(e.contentDiv)}remove(e){this.#Ce.removeEditor(e),this.detach(e),e.div.style.display="none",setTimeout((()=>{e.div.style.display="",e.div.remove(),e.isAttachedToDOM=!1,document.activeElement===document.body&&this.#Ce.focusMainContainer()}),0),this.#Te||this.addInkEditorIfNeeded(!1)}#Pe(e){e.parent!==this&&(this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.#Pe(e),this.#Ce.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}this.moveEditorInDOM(e),e.onceAdded(),this.#Ce.addToAnnotationStorage(e)}moveEditorInDOM(e){this.#ye?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addANewEditor(e){this.addCommands({cmd:()=>{this.addOrRebuild(e)},undo:()=>{e.remove()},mustExec:!0})}addUndoableEditor(e){this.addCommands({cmd:()=>{this.addOrRebuild(e)},undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#Ce.getId()}#xe(e){switch(this.#Ce.getMode()){case r.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(e);case r.AnnotationEditorType.INK:return new o.InkEditor(e)}return null}deserialize(e){switch(e.annotationType){case r.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(e,this,this.#Ce);case r.AnnotationEditorType.INK:return o.InkEditor.deserialize(e,this,this.#Ce)}return null}#Ae(e){const t=this.getNextId(),n=this.#xe({parent:this,id:t,x:e.offsetX,y:e.offsetY,uiManager:this.#Ce});return n&&this.add(n),n}setSelected(e){this.#Ce.setSelected(e)}toggleSelected(e){this.#Ce.toggleSelected(e)}isSelected(e){return this.#Ce.isSelected(e)}unselect(e){this.#Ce.unselect(e)}pointerup(e){const{isMac:t}=r.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&this.#we&&(this.#we=!1,this.#be?this.#Ae(e):this.#be=!0)}pointerdown(e){const{isMac:t}=r.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;this.#we=!0;const n=this.#Ce.getActive();this.#be=!n||n.isEmpty()}drop(e){const t=e.dataTransfer.getData("text/plain"),n=this.#Ce.getEditor(t);if(!n)return;e.preventDefault(),e.dataTransfer.dropEffect="move",this.#Pe(n);const r=this.div.getBoundingClientRect(),i=e.clientX-r.x,a=e.clientY-r.y;n.translate(i-n.startX,a-n.startY),this.moveEditorInDOM(n),n.div.focus()}dragover(e){e.preventDefault()}destroy(){this.#Ce.getActive()?.parent===this&&this.#Ce.setActiveEditor(null);for(const e of this.#Se.values())this.#ye?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#Se.clear(),this.#Ce.removeLayer(this)}#ke(){this.#Te=!0;for(const e of this.#Se.values())e.isEmpty()&&e.remove();this.#Te=!1}render({viewport:e}){this.viewport=e,(0,s.setLayerDimensions)(this.div,e),(0,i.bindEvents)(this,this.div,["dragover","drop"]);for(const e of this.#Ce.getEditors(this.pageIndex))this.add(e);this.updateMode()}update({viewport:e}){this.#Ce.commitOrRemove(),this.viewport=e,(0,s.setLayerDimensions)(this.div,{rotation:e.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}}t.AnnotationEditorLayer=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var r=n(1),i=n(5),a=n(4);class o extends a.AnnotationEditor{#Ie=this.editorDivBlur.bind(this);#Me=this.editorDivFocus.bind(this);#Re=this.editorDivInput.bind(this);#Oe=this.editorDivKeydown.bind(this);#Le;#De="";#Ne=`${this.id}-editor`;#Fe=!1;#je;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],o.prototype.commitOrRemove]]);static _type="freetext";constructor(e){super({...e,name:"freeTextEditor"}),this.#Le=e.color||o._defaultColor||a.AnnotationEditor._defaultLineColor,this.#je=e.fontSize||o._defaultFontSize}static initialize(e){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map((t=>[t,e.get(t)])));const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case r.AnnotationEditorParamsType.FREETEXT_SIZE:o._defaultFontSize=t;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:o._defaultColor=t}}updateParams(e,t){switch(e){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Be(t);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Ue(t)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,o._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,o._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#je],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#Le]]}#Be(e){const t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-this.#je)*this.parentScale),this.#je=e,this.#qe()},n=this.#je;this.addCommands({cmd:()=>{t(e)},undo:()=>{t(n)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Ue(e){const t=this.#Le;this.addCommands({cmd:()=>{this.#Le=this.editorDiv.style.color=e},undo:()=>{this.#Le=this.editorDiv.style.color=t},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){const e=this.parentScale;return[-o._internalPadding*e,-(o._internalPadding+this.#je)*e]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#Oe),this.editorDiv.addEventListener("focus",this.#Me),this.editorDiv.addEventListener("blur",this.#Ie),this.editorDiv.addEventListener("input",this.#Re))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Ne),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#Oe),this.editorDiv.removeEventListener("focus",this.#Me),this.editorDiv.removeEventListener("blur",this.#Ie),this.editorDiv.removeEventListener("input",this.#Re),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}#Ve(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const n of e)t.push(n.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}#qe(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display;t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r}this.width=n.width/e,this.height=n.height/t}commit(){this.isInEditMode()&&(super.commit(),this.#Fe||(this.#Fe=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#De=this.#Ve().trimEnd(),this.#qe())}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(e){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(e){o._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Ne),this.enableEditing(),o._l10nPromise.get("editor_free_text2_aria_label").then((e=>this.editorDiv?.setAttribute("aria-label",e))),o._l10nPromise.get("free_text2_default_content").then((e=>this.editorDiv?.setAttribute("default-content",e))),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#je}px * var(--scale-factor))`,n.color=this.#Le,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r);for(const e of this.#De.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){const i=super.deserialize(e,t,n);return i.#je=e.fontSize,i.#Le=r.Util.makeHexColor(...e.color),i.#De=e.value,i}serialize(){if(this.isEmpty())return null;const e=o._internalPadding*this.parentScale,t=this.getRect(e,e),n=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#Le);return{annotationType:r.AnnotationEditorType.FREETEXT,color:n,fontSize:this.#je,value:this.#De,pageIndex:this.pageIndex,rect:t,rotation:this.rotation}}}t.FreeTextEditor=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return a.fitCurve}});var r=n(1),i=n(4),a=n(30),o=n(5);const s=16;class l extends i.AnnotationEditor{#He=0;#ze=0;#We=0;#Ge=this.canvasPointermove.bind(this);#Xe=this.canvasPointerleave.bind(this);#Ke=this.canvasPointerup.bind(this);#$e=this.canvasPointerdown.bind(this);#Ye=!1;#Qe=!1;#Je=null;#Ze=null;#et=0;#tt=0;#nt=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(e){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map((t=>[t,e.get(t)])))}static updateDefaultParams(e,t){switch(e){case r.AnnotationEditorParamsType.INK_THICKNESS:l._defaultThickness=t;break;case r.AnnotationEditorParamsType.INK_COLOR:l._defaultColor=t;break;case r.AnnotationEditorParamsType.INK_OPACITY:l._defaultOpacity=t/100}}updateParams(e,t){switch(e){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#rt(t);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#Ue(t);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#it(t)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,l._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,l._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*l._defaultOpacity)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||l._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||l._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??l._defaultOpacity))]]}#rt(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,this.#at()},undo:()=>{this.thickness=t,this.#at()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Ue(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,this.#ot()},undo:()=>{this.color=t,this.#ot()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#it(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,this.#ot()},undo:()=>{this.opacity=t,this.#ot()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#st(),this.#lt()),this.isAttachedToDOM||(this.parent.add(this),this.#ut()),this.#at())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Ze.disconnect(),this.#Ze=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,r=this.height*t;this.setDimensions(n,r)}enableEditMode(){this.#Ye||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#$e),this.canvas.addEventListener("pointerup",this.#Ke))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#$e),this.canvas.removeEventListener("pointerup",this.#Ke))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#ct(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}#dt(){const{ctx:e,color:t,opacity:n,thickness:r,parentScale:i,scaleFactor:a}=this;e.lineWidth=r*i/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${(0,o.opacityToHex)(n)}`}#ht(e,t){this.isEditing=!0,this.#Qe||(this.#Qe=!0,this.#ut(),this.thickness||=l._defaultThickness,this.color||=l._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=l._defaultOpacity),this.currentPath.push([e,t]),this.#Je=null,this.#dt(),this.ctx.beginPath(),this.ctx.moveTo(e,t),this.#nt=()=>{this.#nt&&(this.#Je&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#ot(),this.ctx.lineTo(...this.#Je),this.#Je=null,this.ctx.stroke()),window.requestAnimationFrame(this.#nt))},window.requestAnimationFrame(this.#nt)}#pt(e,t){const[n,r]=this.currentPath.at(-1);e===n&&t===r||(this.currentPath.push([e,t]),this.#Je=[e,t])}#ft(e,t){this.ctx.closePath(),this.#nt=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height);const[n,r]=this.currentPath.at(-1);let i;if(e===n&&t===r||this.currentPath.push([e,t]),1!==this.currentPath.length)i=(0,a.fitCurve)(this.currentPath,30,null);else{const n=[e,t];i=[[n,n.slice(),n.slice(),n]]}const o=l.#mt(i);this.currentPath.length=0,this.addCommands({cmd:()=>{this.paths.push(i),this.bezierPath2D.push(o),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#st(),this.#lt()),this.#at())},mustExec:!0})}#ot(){if(this.isEmpty())return void this.#gt();this.#dt();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#gt();for(const e of this.bezierPath2D)t.stroke(e)}commit(){this.#Ye||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Ye=!0,this.div.classList.add("disabled"),this.#at(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(e){super.focusin(e),this.enableEditMode()}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!this.#Ye&&(this.setInForeground(),"mouse"!==e.type&&this.div.focus(),e.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#Xe),this.canvas.addEventListener("pointermove",this.#Ge),this.#ht(e.offsetX,e.offsetY))}canvasPointermove(e){e.stopPropagation(),this.#pt(e.offsetX,e.offsetY)}canvasPointerup(e){0===e.button&&this.isInEditMode()&&0!==this.currentPath.length&&(e.stopPropagation(),this.#vt(e),this.setInBackground())}canvasPointerleave(e){this.#vt(e),this.setInBackground()}#vt(e){this.#ft(e.offsetX,e.offsetY),this.canvas.removeEventListener("pointerleave",this.#Xe),this.canvas.removeEventListener("pointermove",this.#Ge),this.addToAnnotationStorage()}#st(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",l._l10nPromise.get("editor_ink_canvas_aria_label").then((e=>this.canvas?.setAttribute("aria-label",e))),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#lt(){let e=null;this.#Ze=new ResizeObserver((t=>{const n=t[0].contentRect;n.width&&n.height&&(null!==e&&clearTimeout(e),e=setTimeout((()=>{this.fixDims(),e=null}),100),this.setDimensions(n.width,n.height))})),this.#Ze.observe(this.div)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),l._l10nPromise.get("editor_ink2_aria_label").then((e=>this.div?.setAttribute("aria-label",e)));const[n,r,i,a]=this.#ct();if(this.setAt(n,r,0,0),this.setDims(i,a),this.#st(),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this.#Qe=!0,this.#ut(),this.setDims(this.width*n,this.height*r),this.#ot(),this.#yt(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#lt(),this.div}#ut(){if(!this.#Qe)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#gt()}setDimensions(e,t){const n=Math.round(e),r=Math.round(t);if(this.#et===n&&this.#tt===r)return;this.#et=n,this.#tt=r,this.canvas.style.visibility="hidden",this.#He&&Math.abs(this.#He-e/t)>.01&&(t=Math.ceil(e/this.#He),this.setDims(e,t));const[i,a]=this.parentDimensions;this.width=e/i,this.height=t/a,this.#Ye&&this.#bt(e,t),this.#ut(),this.#ot(),this.canvas.style.visibility="visible"}#bt(e,t){const n=this.#_t(),r=(e-n)/this.#We,i=(t-n)/this.#ze;this.scaleFactor=Math.min(r,i)}#gt(){const e=this.#_t()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#mt(e){const t=new Path2D;for(let n=0,r=e.length;n<r;n++){const[r,i,a,o]=e[n];0===n&&t.moveTo(...r),t.bezierCurveTo(i[0],i[1],a[0],a[1],o[0],o[1])}return t}#Et(e,t,n,r){const i=[],a=this.thickness/2;let o,s;for(const l of this.paths){o=[],s=[];for(let i=0,u=l.length;i<u;i++){const[u,c,d,h]=l[i],p=e*(u[0]+t)+a,f=r-e*(u[1]+n)-a,m=e*(c[0]+t)+a,g=r-e*(c[1]+n)-a,v=e*(d[0]+t)+a,y=r-e*(d[1]+n)-a,b=e*(h[0]+t)+a,_=r-e*(h[1]+n)-a;0===i&&(o.push(p,f),s.push(p,f)),o.push(m,g,v,y,b,_),this.#St(p,f,m,g,v,y,b,_,4,s)}i.push({bezier:o,points:s})}return i}#St(e,t,n,r,i,a,o,s,l,u){if(this.#wt(e,t,n,r,i,a,o,s))u.push(o,s);else{for(let c=1;c<l-1;c++){const d=c/l,h=1-d;let p=d*e+h*n,f=d*t+h*r,m=d*n+h*i,g=d*r+h*a;p=d*p+h*m,f=d*f+h*g,m=d*m+h*(d*i+h*o),g=d*g+h*(d*a+h*s),p=d*p+h*m,f=d*f+h*g,u.push(p,f)}u.push(o,s)}}#wt(e,t,n,r,i,a,o,s){const l=(3*n-2*e-o)**2,u=(3*r-2*t-s)**2,c=(3*i-e-2*o)**2,d=(3*a-t-2*s)**2;return Math.max(l,c)+Math.max(u,d)<=10}#Tt(){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(const a of this.paths)for(const[o,s,l,u]of a){const a=r.Util.bezierBoundingBox(...o,...s,...l,...u);e=Math.min(e,a[0]),n=Math.min(n,a[1]),t=Math.max(t,a[2]),i=Math.max(i,a[3])}return[e,n,t,i]}#_t(){return this.#Ye?Math.ceil(this.thickness*this.parentScale):0}#at(e=!1){if(this.isEmpty())return;if(!this.#Ye)return void this.#ot();const t=this.#Tt(),n=this.#_t();this.#We=Math.max(s,t[2]-t[0]),this.#ze=Math.max(s,t[3]-t[1]);const r=Math.ceil(n+this.#We*this.scaleFactor),i=Math.ceil(n+this.#ze*this.scaleFactor),[a,o]=this.parentDimensions;this.width=r/a,this.height=i/o,this.#He=r/i,this.#yt();const l=this.translationX,u=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#ut(),this.#ot(),this.#et=r,this.#tt=i,this.setDims(r,i);const c=e?n/this.scaleFactor/2:0;this.translate(l-this.translationX-c,u-this.translationY-c)}#yt(){const{style:e}=this.div;this.#He>=1?(e.minHeight="16px",e.minWidth=`${Math.round(this.#He*s)}px`):(e.minWidth="16px",e.minHeight=`${Math.round(s/this.#He)}px`)}static deserialize(e,t,n){const i=super.deserialize(e,t,n);i.thickness=e.thickness,i.color=r.Util.makeHexColor(...e.color),i.opacity=e.opacity;const[a,o]=i.pageDimensions,l=i.width*a,u=i.height*o,c=i.parentScale,d=e.thickness/2;i.#He=l/u,i.#Ye=!0,i.#et=Math.round(l),i.#tt=Math.round(u);for(const{bezier:t}of e.paths){const e=[];i.paths.push(e);let n=c*(t[0]-d),r=c*(u-t[1]-d);for(let i=2,a=t.length;i<a;i+=6){const a=c*(t[i]-d),o=c*(u-t[i+1]-d),s=c*(t[i+2]-d),l=c*(u-t[i+3]-d),h=c*(t[i+4]-d),p=c*(u-t[i+5]-d);e.push([[n,r],[a,o],[s,l],[h,p]]),n=h,r=p}const a=this.#mt(e);i.bezierPath2D.push(a)}const h=i.#Tt();return i.#We=Math.max(s,h[2]-h[0]),i.#ze=Math.max(s,h[3]-h[1]),i.#bt(l,u),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=this.rotation%180==0?e[3]-e[1]:e[2]-e[0],n=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#Et(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:e,rotation:this.rotation}}}t.InkEditor=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const r=n(31);t.fitCurve=r},e=>{function t(e,i,a,o,s){var u,c,d,h,p,f,m,g,v,y,b,_,E;if(2===e.length)return _=l.vectorLen(l.subtract(e[0],e[1]))/3,[u=[e[0],l.addArrays(e[0],l.mulItems(i,_)),l.addArrays(e[1],l.mulItems(a,_)),e[1]]];if(c=function(e){var t,n,r,i=[];return e.forEach(((e,a)=>{t=a?n+l.vectorLen(l.subtract(e,r)):0,i.push(t),n=t,r=e})),i=i.map((e=>e/n))}(e),[u,h,f]=n(e,c,c,i,a,s),0===h||h<o)return[u];if(h<o*o)for(d=c,p=h,m=f,E=0;E<20;E++){if(d=r(u,e,d),[u,h,f]=n(e,c,d,i,a,s),h<o)return[u];if(f===m){let e=h/p;if(e>.9999&&e<1.0001)break}p=h,m=f}return b=[],(g=l.subtract(e[f-1],e[f+1])).every((e=>0===e))&&(g=l.subtract(e[f-1],e[f]),[g[0],g[1]]=[-g[1],g[0]]),v=l.normalize(g),y=l.mulItems(v,-1),(b=b.concat(t(e.slice(0,f+1),i,v,o,s))).concat(t(e.slice(f),y,a,o,s))}function n(e,t,n,r,i,s){var c,d,h;return c=function(e,t,n,r){var i,a,o,s,c,d,h,p,f,m,g,v,y,b,_,E,S,w=e[0],T=e[e.length-1];for(i=[w,null,null,T],a=l.zeros_Xx2x2(t.length),y=0,b=t.length;y<b;y++)S=1-(E=t[y]),(o=a[y])[0]=l.mulItems(n,3*E*(S*S)),o[1]=l.mulItems(r,3*S*(E*E));for(s=[[0,0],[0,0]],c=[0,0],y=0,b=e.length;y<b;y++)E=t[y],o=a[y],s[0][0]+=l.dot(o[0],o[0]),s[0][1]+=l.dot(o[0],o[1]),s[1][0]+=l.dot(o[0],o[1]),s[1][1]+=l.dot(o[1],o[1]),_=l.subtract(e[y],u.q([w,w,T,T],E)),c[0]+=l.dot(o[0],_),c[1]+=l.dot(o[1],_);return d=s[0][0]*s[1][1]-s[1][0]*s[0][1],h=s[0][0]*c[1]-s[1][0]*c[0],p=c[0]*s[1][1]-c[1]*s[0][1],m=0===d?0:h/d,(f=0===d?0:p/d)<(g=1e-6*(v=l.vectorLen(l.subtract(w,T))))||m<g?(i[1]=l.addArrays(w,l.mulItems(n,v/3)),i[2]=l.addArrays(T,l.mulItems(r,v/3))):(i[1]=l.addArrays(w,l.mulItems(n,f)),i[2]=l.addArrays(T,l.mulItems(r,m))),i}(e,n,r,i),[d,h]=function(e,t,n){var r,i,s,c,d,h,p,f;i=0,s=Math.floor(e.length/2);const m=a(t,10);for(d=0,h=e.length;d<h;d++)p=e[d],f=o(0,n[d],m,10),(r=(c=l.subtract(u.q(t,f),p))[0]*c[0]+c[1]*c[1])>i&&(i=r,s=d);return[i,s]}(e,c,t),s&&s({bez:c,points:e,params:t,maxErr:d,maxPoint:h}),[c,d,h]}function r(e,t,n){return n.map(((n,r)=>i(e,t[r],n)))}function i(e,t,n){var r=l.subtract(u.q(e,n),t),i=u.qprime(e,n),a=l.mulMatrix(r,i),o=l.sum(l.squareItems(i))+2*l.mulMatrix(r,u.qprimeprime(e,n));return 0===o?n:n-a/o}var a=function(e,t){for(var n,r=[0],i=e[0],a=0,o=1;o<=t;o++)n=u.q(e,o/t),a+=l.vectorLen(l.subtract(n,i)),r.push(a),i=n;return r.map((e=>e/a))};function o(e,t,n,r){if(t<0)return 0;if(t>1)return 1;for(var i,a,o,s,l=1;l<=r;l++)if(t<=n[l]){o=(l-1)/r,a=l/r,s=(t-(i=n[l-1]))/(n[l]-i)*(a-o)+o;break}return s}function s(e,t){return l.normalize(l.subtract(e,t))}class l{static zeros_Xx2x2(e){for(var t=[];e--;)t.push([0,0]);return t}static mulItems(e,t){return e.map((e=>e*t))}static mulMatrix(e,t){return e.reduce(((e,n,r)=>e+n*t[r]),0)}static subtract(e,t){return e.map(((e,n)=>e-t[n]))}static addArrays(e,t){return e.map(((e,n)=>e+t[n]))}static addItems(e,t){return e.map((e=>e+t))}static sum(e){return e.reduce(((e,t)=>e+t))}static dot(e,t){return l.mulMatrix(e,t)}static vectorLen(e){return Math.hypot(...e)}static divItems(e,t){return e.map((e=>e/t))}static squareItems(e){return e.map((e=>e*e))}static normalize(e){return this.divItems(e,this.vectorLen(e))}}class u{static q(e,t){var n=1-t,r=l.mulItems(e[0],n*n*n),i=l.mulItems(e[1],3*n*n*t),a=l.mulItems(e[2],3*n*t*t),o=l.mulItems(e[3],t*t*t);return l.addArrays(l.addArrays(r,i),l.addArrays(a,o))}static qprime(e,t){var n=1-t,r=l.mulItems(l.subtract(e[1],e[0]),3*n*n),i=l.mulItems(l.subtract(e[2],e[1]),6*n*t),a=l.mulItems(l.subtract(e[3],e[2]),3*t*t);return l.addArrays(l.addArrays(r,i),a)}static qprimeprime(e,t){return l.addArrays(l.mulItems(l.addArrays(l.subtract(e[2],l.mulItems(e[1],2)),e[0]),6*(1-t)),l.mulItems(l.addArrays(l.subtract(e[3],l.mulItems(e[2],2)),e[1]),6*t))}}e.exports=function(e,n,r){if(!Array.isArray(e))throw new TypeError("First argument should be an array");if(e.forEach((t=>{if(!Array.isArray(t)||t.some((e=>"number"!=typeof e))||t.length!==e[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")})),(e=e.filter(((t,n)=>0===n||!t.every(((t,r)=>t===e[n-1][r]))))).length<2)return[];const i=e.length,a=s(e[1],e[0]),o=s(e[i-2],e[i-1]);return t(e,a,o,n,r)},e.exports.fitCubic=t,e.exports.createTangent=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var r=n(1),i=n(6),a=n(3),o=n(33),s=n(34);const l=1e3,u=new WeakSet;function c(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class d{static create(e){switch(e.data.annotationType){case r.AnnotationType.LINK:return new p(e);case r.AnnotationType.TEXT:return new f(e);case r.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new g(e);case"Btn":return e.data.radioButton?new y(e):e.data.checkBox?new v(e):new b(e);case"Ch":return new _(e)}return new m(e);case r.AnnotationType.POPUP:return new E(e);case r.AnnotationType.FREETEXT:return new w(e);case r.AnnotationType.LINE:return new T(e);case r.AnnotationType.SQUARE:return new C(e);case r.AnnotationType.CIRCLE:return new k(e);case r.AnnotationType.POLYLINE:return new A(e);case r.AnnotationType.CARET:return new x(e);case r.AnnotationType.INK:return new I(e);case r.AnnotationType.POLYGON:return new P(e);case r.AnnotationType.HIGHLIGHT:return new M(e);case r.AnnotationType.UNDERLINE:return new R(e);case r.AnnotationType.SQUIGGLY:return new O(e);case r.AnnotationType.STRIKEOUT:return new L(e);case r.AnnotationType.STAMP:return new D(e);case r.AnnotationType.FILEATTACHMENT:return new N(e);default:return new h(e)}}}class h{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,t&&(this.container=this._createContainer(n)),r&&(this.quadrilaterals=this._createQuadrilaterals(n))}_createContainer(e=!1){const{data:t,page:n,viewport:i}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id);const{pageWidth:o,pageHeight:s,pageX:l,pageY:u}=i.rawDims,{width:d,height:h}=c(t.rect),p=r.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(!e&&t.borderStyle.width>0){a.style.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t=`calc(${e}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`;a.style.borderRadius=t}else if(this instanceof y){const e=`calc(${d}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;a.style.borderRadius=e}switch(t.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}const i=t.borderColor||null;i?a.style.borderColor=r.Util.makeHexColor(0|i[0],0|i[1],0|i[2]):a.style.borderWidth=0}a.style.left=100*(p[0]-l)/o+"%",a.style.top=100*(p[1]-u)/s+"%";const{rotation:f}=t;return t.hasOwnCanvas||0===f?(a.style.width=100*d/o+"%",a.style.height=100*h/s+"%"):this.setRotation(f,a),a}setRotation(e,t=this.container){const{pageWidth:n,pageHeight:r}=this.viewport.rawDims,{width:i,height:a}=c(this.data.rect);let o,s;e%180==0?(o=100*i/n,s=100*a/r):(o=100*a/n,s=100*i/r),t.style.width=`${o}%`,t.style.height=`${s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e];n.target.style[t]=o.ColorConverters[`${r[0]}_HTML`](r.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:e=>{const t=e.detail.display%2==1;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t,print:0===e.detail.display||3===e.detail.display})},print:e=>{this.annotationStorage.setValue(this.data.id,{print:e.detail.print})},hidden:e=>{this.container.style.visibility=e.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e.detail.hidden})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.detail.readonly?e.target.setAttribute("readonly",""):e.target.removeAttribute("readonly")},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i?.(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];a&&(a({detail:{[r]:i},target:e}),delete t[r])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const t=[],n=this.data.rect;for(const n of this.data.quadPoints)this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y],t.push(this._createContainer(e));return this.data.rect=n,t}_createPopup(e,t){let n=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,n=this.quadrilaterals[0]),e||((e=document.createElement("div")).className="popupTriggerArea",n.append(e));const r=new S({container:n,trigger:e,color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,hideWrapper:!0}).render();r.style.left="100%",n.append(r)}_renderQuadrilaterals(e){for(const t of this.quadrilaterals)t.className=e;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:a,exportValues:o}of i){if(-1===e)continue;if(a===t)continue;const i="string"==typeof o?o:null,s=document.querySelector(`[data-element-id="${a}"]`);!s||u.has(s)?n.push({id:a,exportValue:i,domElement:s}):(0,r.warn)(`_getElementsByName - element not allowed: ${a}`)}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&u.has(r)&&n.push({id:i,exportValue:e,domElement:r})}return n}}class p extends h{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this._bindAttachment(n,e.attachment),r=!0):e.setOCGState?(this.#Ct(n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((e,t)=>{const r=0===t?n:n.cloneNode();return e.append(r),e})):(this.container.className="linkAnnotation",r&&this.container.append(n),this.container)}#kt(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#kt()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#kt()}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,t.content,t.filename),!1),this.#kt()}#Ct(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#kt()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const i=n.get(r);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#kt()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#kt(),!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{n?.();const{fields:e,refs:i,include:a}=t,o=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===a&&o.push(n)}else for(const e of Object.values(this._fieldObjects))o.push(...e);const s=this.annotationStorage,l=[];for(const e of o){const{id:t}=e;switch(l.push(t),e.type){case"text":{const n=e.defaultValue||"";s.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;s.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";s.setValue(t,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${t}"]`);n&&(u.has(n)?n.dispatchEvent(new Event("resetform")):(0,r.warn)(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}}class f extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.append(e),this.container}}class m extends h{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:t,isMac:n}=r.FeatureTest.platform;return t&&e.ctrlKey||n&&e.metaKey}_setEventListener(e,t,n,r){t.includes("mouse")?e.addEventListener(t,(e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(t,(e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e)}})}))}_setEventListeners(e,t,n){for(const[r,i]of t)("Action"===i||this.data.actions?.[i])&&this._setEventListener(e,r,i,n)}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":r.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:t}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,i=e.style;let a;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(r.LINE_FACTOR*n))||1);a=Math.min(n,o(t/r.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(n,o(e/r.LINE_FACTOR))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=r.Util.makeHexColor(t[0],t[1],t[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class g extends m{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let i=r.formattedValue||r.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&i.length>a&&(i=i.slice(0,a));const o={userValue:i,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=i,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",i),this.data.doNotScroll&&(n.style.overflowX="hidden")),u.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=l,this._setRequired(n,this.data.required),a&&(n.maxLength=a),n.addEventListener("input",(r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value")})),n.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue??"";n.value=o.userValue=t,o.formattedValue=null}));let s=e=>{const{formattedValue:t}=o;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(e=>{const{target:t}=e;o.userValue&&(t.value=o.userValue),o.lastCommittedValue=t.value,o.commitKey=1})),n.addEventListener("updatefromsandbox",(n=>{const r={value(n){o.userValue=n.detail.value??"",e.setValue(t,{value:o.userValue.toString()}),n.target.value=o.userValue},formattedValue(n){const{formattedValue:r}=n.detail;o.formattedValue=r,null!=r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{const{charLimit:r}=n.detail,{target:i}=n;if(0===r)return void i.removeAttribute("maxLength");i.setAttribute("maxLength",r);let a=o.userValue;!a||a.length<=r||(a=a.slice(0,r),i.value=o.userValue=a,e.setValue(t,{value:a}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(e=>{o.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(o.commitKey=3):n=2,-1===n)return;const{value:r}=e.target;o.lastCommittedValue!==r&&(o.lastCommittedValue=r,o.userValue=r,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const r=s;s=null,n.addEventListener("blur",(e=>{if(!e.relatedTarget)return;const{value:n}=e.target;o.userValue=n,o.lastCommittedValue!==n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:o.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),r(e)})),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",(e=>{o.lastCommittedValue=null;const{data:n,target:r}=e,{value:i,selectionStart:a,selectionEnd:s}=r;let l=a,u=s;switch(e.inputType){case"deleteWordBackward":{const e=i.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=i.substring(a).match(/^[^\w]*\w*/);e&&(u+=e[0].length);break}case"deleteContentBackward":a===s&&(l-=1);break;case"deleteContentForward":a===s&&(u+=1)}e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,change:n||"",willCommit:!1,selStart:l,selEnd:u}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(s&&n.addEventListener("blur",s),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/a;n.classList.add("comb"),n.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class v extends m{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.className="buttonWidgetAnnotation checkBox";const i=document.createElement("input");return u.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=l,i.addEventListener("change",(r=>{const{name:i,checked:a}=r.target;for(const r of this._getElementsByName(i,n)){const n=a&&r.exportValue===t.exportValue;r.domElement&&(r.domElement.checked=n),e.setValue(r.id,{value:n})}e.setValue(n,{value:a})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class y extends m{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;"string"==typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r}));const i=document.createElement("input");if(u.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=l,i.addEventListener("change",(t=>{const{name:r,checked:i}=t.target;for(const t of this._getElementsByName(r,n))e.setValue(t.id,{value:!1});e.setValue(n,{value:i})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!=n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;i.addEventListener("updatefromsandbox",(t=>{const i={value:t=>{const i=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b extends p{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class _ extends m{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");u.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=l;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const e of r.options)e.selected=e.value===t}));for(const e of this.data.options){const t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,n.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),i=!1),r.append(t)}let a=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let s=o(!1);const c=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const i={value(n){a?.();const i=n.detail.value,l=new Set(Array.isArray(i)?i:[i]);for(const e of r.options)e.selected=l.has(e.value);e.setValue(t,{value:o(!0)}),s=o(!1)},multipleSelection(e){r.multiple=!0},remove(n){const i=r.options,a=n.detail.remove;i[a].selected=!1,r.remove(a),i.length>0&&-1===Array.prototype.findIndex.call(i,(e=>e.selected))&&(i[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),s=o(!1)},insert(n){const{index:i,displayValue:a,exportValue:l}=n.detail.insert,u=r.children[i],d=document.createElement("option");d.textContent=a,d.value=l,u?u.before(d):r.append(d),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:o(!0)}),s=o(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)})),r.addEventListener("input",(n=>{const r=o(!0);e.setValue(t,{value:r}),n.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(n){e.setValue(t,{value:o(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class E extends h{static IGNORE_TYPES=new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]);constructor(e){const{data:t}=e;super(e,{isRenderable:!E.IGNORE_TYPES.has(t.parentType)&&!!(t.titleObj?.str||t.contentsObj?.str||t.richText?.str)})}render(){this.container.className="popupAnnotation";const e=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===e.length)return this.container;const t=new S({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),n=this.page,i=r.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),a=i[0]+this.data.parentRect[2]-this.data.parentRect[0],o=i[1],{pageWidth:s,pageHeight:l,pageX:u,pageY:c}=this.viewport.rawDims;return this.container.style.left=100*(a-u)/s+"%",this.container.style.top=100*(o-c)/l+"%",this.container.append(t.render()),this.container}}class S{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.hidden=!0;const t=document.createElement("div");t.className="popup";const n=this.color;if(n){const e=.7*(255-n[0])+n[0],i=.7*(255-n[1])+n[1],a=.7*(255-n[2])+n[2];t.style.backgroundColor=r.Util.makeHexColor(0|e,0|i,0|a)}const a=document.createElement("h1");a.dir=this.titleObj.dir,a.textContent=this.titleObj.str,t.append(a);const o=i.PDFDateString.toDateObject(this.modificationDate);if(o){const e=document.createElement("span");e.className="popupDate",e.textContent="{{date}}, {{time}}",e.dataset.l10nId="annotation_date_string",e.dataset.l10nArgs=JSON.stringify({date:o.toLocaleDateString(),time:o.toLocaleTimeString()}),t.append(e)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const e=this._formatContents(this.contentsObj);t.append(e)}else s.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:t}),t.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const e of this.trigger)e.addEventListener("click",this._toggle.bind(this)),e.addEventListener("mouseover",this._show.bind(this,!1)),e.addEventListener("mouseout",this._hide.bind(this,!1));return t.addEventListener("click",this._hide.bind(this,!0)),e.append(t),e}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.className="popupContent",n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){const i=r[e];n.append(document.createTextNode(i)),e<t-1&&n.append(document.createElement("br"))}return n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(e=!0){e&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class w extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.textContent=e.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const e=document.createElement("div");e.className="annotationTextContent",e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class T extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:t,height:n}=c(e.rect),r=this.svgFactory.create(t,n,!0),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),this._createPopup(i,e),this.container}}class C extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:t,height:n}=c(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",n-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),this._createPopup(a,e),this.container}}class k extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:t,height:n}=c(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",n/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),this._createPopup(a,e),this.container}}class A extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:n}=c(e.rect),r=this.svgFactory.create(t,n,!0);let i=[];for(const t of e.vertices){const n=t.x-e.rect[0],r=e.rect[3]-t.y;i.push(n+","+r)}i=i.join(" ");const a=this.svgFactory.createElement(this.svgElementName);return a.setAttribute("points",i),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),this._createPopup(a,e),this.container}}class P extends A{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:n}=c(e.rect),r=this.svgFactory.create(t,n,!0);for(const t of e.inkLists){let n=[];for(const r of t){const t=r.x-e.rect[0],i=e.rect[3]-r.y;n.push(`${t},${i}`)}n=n.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("points",n),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),this._createPopup(i,e),r.append(i)}return this.container.append(r),this.container}}class M extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class R extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class O extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class L extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class D extends h{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class N extends h{constructor(e){super(e,{isRenderable:!0});const{filename:t,content:n}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(t,!0),this.content=n,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:t,content:n})}render(){let e;return this.container.className="fileAttachmentAnnotation",this.data.hasAppearance?e=document.createElement("div"):(e=document.createElement("img"),e.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),e.className="popupTriggerArea",e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.append(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class F{static#At(e,t,n,r){const a=e.firstChild||e;a.id=`${i.AnnotationPrefix}${t}`,n.append(e),r?.moveElementInDOM(n,e,a,!1)}static render(e){const{annotations:t,div:n,viewport:o,accessibilityManager:s}=e;(0,i.setLayerDimensions)(n,o);const l={data:null,layer:n,page:e.page,viewport:o,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new a.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects};let u=0;for(const e of t){if(e.annotationType!==r.AnnotationType.POPUP){const{width:t,height:n}=c(e.rect);if(t<=0||n<=0)continue}l.data=e;const t=d.create(l);if(!t.isRenderable)continue;const i=t.render();if(e.hidden&&(i.style.visibility="hidden"),Array.isArray(i))for(const t of i)t.style.zIndex=u++,F.#At(t,e.id,n,s);else i.style.zIndex=u++,t instanceof E?n.prepend(i):F.#At(i,e.id,n,s)}this.#Pt(n,e.annotationCanvasMap)}static update(e){const{annotationCanvasMap:t,div:n,viewport:r}=e;(0,i.setLayerDimensions)(n,{rotation:r.rotation}),this.#Pt(n,t),n.hidden=!1}static#Pt(e,t){if(t){for(const[n,r]of t){const t=e.querySelector(`[data-annotation-id="${n}"]`);if(!t)continue;const{firstChild:i}=t;i?"CANVAS"===i.nodeName?i.replaceWith(r):i.before(r):t.append(r)}t.clear()}}}t.AnnotationLayer=F},(e,t)=>{function n(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_HTML([e]){const t=n(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_HTML([e,t,r]){return`#${n(e)}${n(t)}${n(r)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,a=1-n;return["CMYK",r,i,a,Math.min(r,i,a)]}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(19);t.XfaLayer=class{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==a.value)for(const e of n.children)e.attributes.value===a.value&&(e.attributes.selected=!0);e.addEventListener("input",(e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})}))}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${r}`);for(const[t,n]of Object.entries(a))if(null!=n)switch(t){case"class":n.length&&e.setAttribute(t,n.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",n);break;case"style":Object.assign(e.style,n);break;case"textContent":e.textContent=n;break;default:(!o||"href"!==t&&"newWindow"!==t)&&e.setAttribute(t,n)}o&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:n});const s=[[i,-1,o]],l=e.div;if(l.append(o),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=t}"richText"!==a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];for(;s.length>0;){const[e,i,o]=s.at(-1);if(i+1===e.children.length){s.pop();continue}const l=e.children[++s.at(-1)[1]];if(null===l)continue;const{name:c}=l;if("#text"===c){const e=document.createTextNode(l.value);u.push(e),o.append(e);continue}let d;if(d=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,c):document.createElement(c),o.append(d),l.attributes&&this.setAttributes({html:d,element:l,storage:t,intent:a,linkService:n}),l.children&&l.children.length>0)s.push([l,-1,d]);else if(l.value){const e=document.createTextNode(l.value);r.XfaText.shouldBuildText(c)&&u.push(e),d.append(e)}}for(const e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(6),i=n(1),a=n(10);let o=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=o;{const s={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",c=["butt","round","square"],d=["miter","round","bevel"],h=function(e,t="",n=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`data:${t};base64,`;for(let t=0,n=e.length;t<n;t+=3){const a=255&e[t],o=255&e[t+1],s=255&e[t+2];i+=r[a>>2]+r[(3&a)<<4|o>>4]+r[t+1<n?(15&o)<<2|s>>6:64]+r[t+2<n?63&s:64]}return i},p=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let e=0;e<256;e++){let n=e;for(let e=0;e<8;e++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;t[e]=n}function n(e,n,r,i){let a=i;const o=n.length;r[a]=o>>24&255,r[a+1]=o>>16&255,r[a+2]=o>>8&255,r[a+3]=255&o,a+=4,r[a]=255&e.charCodeAt(0),r[a+1]=255&e.charCodeAt(1),r[a+2]=255&e.charCodeAt(2),r[a+3]=255&e.charCodeAt(3),a+=4,r.set(n,a),a+=n.length;const s=function(e,n,r){let i=-1;for(let a=n;a<r;a++){const n=255&(i^e[a]);i=i>>>8^t[n]}return~i}(r,i+4,a);r[a]=s>>24&255,r[a+1]=s>>16&255,r[a+2]=s>>8&255,r[a+3]=255&s}function r(e){let t=e.length;const n=65535,r=Math.ceil(t/n),i=new Uint8Array(2+t+5*r+4);let a=0;i[a++]=120,i[a++]=156;let o=0;for(;t>n;)i[a++]=0,i[a++]=255,i[a++]=255,i[a++]=0,i[a++]=0,i.set(e.subarray(o,o+n),a),a+=n,o+=n,t-=n;i[a++]=1,i[a++]=255&t,i[a++]=t>>8&255,i[a++]=255&~t,i[a++]=(65535&~t)>>8&255,i.set(e.subarray(o),a),a+=e.length-o;const s=function(e,t,n){let r=1,i=0;for(let t=0;t<n;++t)r=(r+(255&e[t]))%65521,i=(i+r)%65521;return i<<16|r}(e,0,e.length);return i[a++]=s>>24&255,i[a++]=s>>16&255,i[a++]=s>>8&255,i[a++]=255&s,i}return function(t,o,s){return function(t,o,s,l){const u=t.width,c=t.height;let d,p,f;const m=t.data;switch(o){case i.ImageKind.GRAYSCALE_1BPP:p=0,d=1,f=u+7>>3;break;case i.ImageKind.RGB_24BPP:p=2,d=8,f=3*u;break;case i.ImageKind.RGBA_32BPP:p=6,d=8,f=4*u;break;default:throw new Error("invalid format")}const g=new Uint8Array((1+f)*c);let v=0,y=0;for(let e=0;e<c;++e)g[v++]=0,g.set(m.subarray(y,y+f),v),y+=f,v+=f;if(o===i.ImageKind.GRAYSCALE_1BPP&&l){v=0;for(let e=0;e<c;e++){v++;for(let e=0;e<f;e++)g[v++]^=255}}const b=new Uint8Array([u>>24&255,u>>16&255,u>>8&255,255&u,c>>24&255,c>>16&255,c>>8&255,255&c,d,p,0,0,0]),_=function(e){if(!a.isNodeJS)return r(e);try{let t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);const n=__webpack_require__(2787).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(e){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return r(e)}(g),E=e.length+36+b.length+_.length,S=new Uint8Array(E);let w=0;return S.set(e,w),w+=e.length,n("IHDR",b,S,w),w+=12+b.length,n("IDATA",_,S,w),w+=12+_.length,n("IEND",new Uint8Array(0),S,w),h(S,"image/png",s)}(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,o,s)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=s.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=s.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function m(e){let t=[];const n=[];for(const r of e)"save"!==r.fn?"restore"===r.fn?t=n.pop():t.push(r):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t.at(-1).items);return t}function g(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function v(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${g(e[0])} ${g(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2])return`rotate(${g(180*Math.acos(e[0])/Math.PI)})`}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${g(e[4])} ${g(e[5])})`;return`matrix(${g(e[0])} ${g(e[1])} ${g(e[2])} ${g(e[3])} ${g(e[4])} ${g(e[5])})`}let y=0,b=0,_=0;t.SVGGraphics=o=class{constructor(e,t,n=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new f,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const e in i.OPS)this._operatorIdMapping[i.OPS[e]]=e}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,n=e.argsArray;for(let e=0,r=t.length;e<r;e++)if(t[e]===i.OPS.dependency)for(const t of n[e]){const e=t.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{e.get(t,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(e,t,n,r,a,o){const s=[e,t,n,r,a,o];this.transformMatrix=i.Util.transform(this.transformMatrix,s),this.tgrp=null}getSVG(e,t){this.viewport=t;const n=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),n)))}convertOpList(e){const t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,i=[];for(let e=0,a=r.length;e<a;e++){const a=r[e];i.push({fnId:a,fn:t[a],args:n[e]})}return m(i)}executeOpTree(e){for(const t of e){const e=t.fn,n=t.fnId,r=t.args;switch(0|n){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(r);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case i.OPS.setFont:this.setFont(r);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(r[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(r[0],r[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case i.OPS.setHScale:this.setHScale(r[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.setTextRise:this.setTextRise(r[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case i.OPS.setLineWidth:this.setLineWidth(r[0]);break;case i.OPS.setLineJoin:this.setLineJoin(r[0]);break;case i.OPS.setLineCap:this.setLineCap(r[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case i.OPS.setFillColorN:this.setFillColorN(r);break;case i.OPS.shadingFill:this.shadingFill(r[0]);break;case i.OPS.setDash:this.setDash(r[0],r[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case i.OPS.setFlatness:this.setFlatness(r[0]);break;case i.OPS.setGState:this.setGState(r[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.constructPath:this.constructPath(r[0],r[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)(`Unimplemented operator ${e}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,r,i,a){const o=this.current;o.textMatrix=o.lineMatrix=[e,t,n,r,i,a],o.textMatrixScale=Math.hypot(e,t),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${g(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",g(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=i.IDENTITY_MATRIX,e.lineMatrix=i.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${g(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",g(-n.y))}showText(e){const t=this.current,n=t.font,r=t.fontSize;if(0===r)return;const a=t.fontSizeScale,o=t.charSpacing,u=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,h=n.vertical,p=h?1:-1,f=n.defaultVMetrics,m=r*t.fontMatrix[0];let y=0;for(const i of e){if(null===i){y+=c*u;continue}if("number"==typeof i){y+=p*i*r/1e3;continue}const e=(i.isSpace?u:0)+o,s=i.fontChar;let l,d,g,v=i.width;if(h){let e;const t=i.vmetric||f;e=i.vmetric?t[1]:.5*v,e=-e*m;const n=t[2]*m;v=t?-t[0]:v,l=e/a,d=(y+n)/a}else l=y/a,d=0;(i.isInFont||n.missingFile)&&(t.xcoords.push(t.x+l),h&&t.ycoords.push(-t.y+d),t.tspan.textContent+=s),g=h?v*m-e*c:v*m+e*c,y+=g}t.tspan.setAttributeNS(null,"x",t.xcoords.map(g).join(" ")),h?t.tspan.setAttributeNS(null,"y",t.ycoords.map(g).join(" ")):t.tspan.setAttributeNS(null,"y",g(-t.y)),h?t.y-=y:t.x+=y*d,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${g(t.fontSize)}px`),t.fontStyle!==s.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==s.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const b=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==s.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let _=t.textMatrix;0!==t.textRise&&(_=_.slice(),_[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${v(_)} scale(${g(d)}, -1)`),t.txtElement.setAttributeNS(l,"xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=h(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,n=this.commonObjs.get(e[0]);let r=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX;let a="normal";n.black?a="900":n.bold&&(a="bold");const o=n.italic?"italic":"normal";r<0?(r=-r,t.fontDirection=-1):t.fontDirection=1,t.fontSize=r,t.fontFamily=n.loadedName,t.fontWeight=a,t.fontStyle=o,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",g(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=c[e]}setLineJoin(e){this.current.lineJoin=d[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,n){this.current.strokeColor=i.Util.makeHexColor(e,t,n)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,n){this.current.fillColor=i.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const t=this.viewport.width,n=this.viewport.height,r=i.Util.inverseTransform(this.transformMatrix),a=i.Util.applyTransform([0,0],r),o=i.Util.applyTransform([0,n],r),s=i.Util.applyTransform([t,0],r),l=i.Util.applyTransform([t,n],r),u=Math.min(a[0],o[0],s[0],l[0]),c=Math.min(a[1],o[1],s[1],l[1]),d=Math.max(a[0],o[0],s[0],l[0]),h=Math.max(a[1],o[1],s[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",u),p.setAttributeNS(null,"y",c),p.setAttributeNS(null,"width",d-u),p.setAttributeNS(null,"height",h-c),p.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(p)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],n=e[2],r=e[3]||i.IDENTITY_MATRIX,[a,o,s,l]=e[4],u=e[5],c=e[6],d=e[7],h="shading"+_++,[p,f,m,g]=i.Util.normalizeRect([...i.Util.applyTransform([a,o],r),...i.Util.applyTransform([s,l],r)]),[v,y]=i.Util.singularValueDecompose2dScale(r),b=u*v,E=c*y,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",h),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",b),S.setAttributeNS(null,"height",E),S.setAttributeNS(null,"x",`${p}`),S.setAttributeNS(null,"y",`${f}`);const w=this.svg,T=this.transformMatrix,C=this.current.fillColor,k=this.current.strokeColor,A=this.svgFactory.create(m-p,g-f);if(this.svg=A,this.transformMatrix=r,2===d){const e=i.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(n)),this.svg=w,this.transformMatrix=T,this.current.fillColor=C,this.current.strokeColor=k,S.append(A.childNodes[0]),this.defs.append(S),`url(#${h})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading"+_++,n=e[3];let r;switch(e[1]){case"axial":const n=e[4],i=e[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",n[0]),r.setAttributeNS(null,"y1",n[1]),r.setAttributeNS(null,"x2",i[0]),r.setAttributeNS(null,"y2",i[1]);break;case"radial":const a=e[4],o=e[5],s=e[6],l=e[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",o[0]),r.setAttributeNS(null,"cy",o[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",a[0]),r.setAttributeNS(null,"fy",a[1]),r.setAttributeNS(null,"fr",s);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of n){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),r.append(t)}return this.defs.append(r),`url(#${t})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const n=this.current;let r=n.x,a=n.y,o=[],s=0;for(const n of e)switch(0|n){case i.OPS.rectangle:r=t[s++],a=t[s++];const e=r+t[s++],n=a+t[s++];o.push("M",g(r),g(a),"L",g(e),g(a),"L",g(e),g(n),"L",g(r),g(n),"Z");break;case i.OPS.moveTo:r=t[s++],a=t[s++],o.push("M",g(r),g(a));break;case i.OPS.lineTo:r=t[s++],a=t[s++],o.push("L",g(r),g(a));break;case i.OPS.curveTo:r=t[s+4],a=t[s+5],o.push("C",g(t[s]),g(t[s+1]),g(t[s+2]),g(t[s+3]),g(r),g(a)),s+=6;break;case i.OPS.curveTo2:o.push("C",g(r),g(a),g(t[s]),g(t[s+1]),g(t[s+2]),g(t[s+3])),r=t[s+2],a=t[s+3],s+=4;break;case i.OPS.curveTo3:r=t[s+2],a=t[s+3],o.push("C",g(t[s]),g(t[s+1]),g(r),g(a),g(r),g(a)),s+=4;break;case i.OPS.closePath:o.push("Z")}o=o.join(" "),n.path&&e.length>0&&e[0]!==i.OPS.rectangle&&e[0]!==i.OPS.moveTo?o=n.path.getAttributeNS(null,"d")+o:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",o),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(r,a)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath"+y++,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",v(this.transformMatrix));const r=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(r),this.defs.append(n),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;n.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,i.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const n=this.current;let r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",g(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",g(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(g).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",g(t*n.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,i.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const n=e.width,r=e.height,i=p(e,this.forceDataSchema,!!t),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",g(n)),a.setAttributeNS(null,"height",g(r)),this.current.element=a,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(u,"xlink:href",i),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",g(-r)),o.setAttributeNS(null,"width",g(n)+"px"),o.setAttributeNS(null,"height",g(r)+"px"),o.setAttributeNS(null,"transform",`scale(${g(1/n)} ${g(-1/r)})`),t?t.append(o):this._ensureTransformGroup().append(o)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const n=this.current,r=t.width,a=t.height,o=n.fillColor;n.maskId="mask"+b++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",n.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",g(r)),l.setAttributeNS(null,"height",g(a)),l.setAttributeNS(null,"fill",o),l.setAttributeNS(null,"mask",`url(#${n.maskId})`),this.defs.append(s),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,s)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",g(e)),r.setAttributeNS(null,"height",g(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.append(n),this.defs=n;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",v(e.transform)),t.append(r),this.svg=r,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __nested_webpack_exports__={};return(()=>{var e=__nested_webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return s.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),s=__w_pdfjs_require__(32),l=__w_pdfjs_require__(14),u=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__nested_webpack_exports__})(),module.exports=factory()},1385:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],u=!1,c=-1;function d(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=o(d);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},1453:function(e,t,n){"use strict";function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n){var a;return e.length,t<n&&(a=function(e,t,n,i){for(var a=e[t],o=n,s=n;s<i;s++)e[s]<a&&(r(e,s,o),o++);return r(e,i,o),o}(e,n,t,n),i(e,t,a-1),i(e,a+1,n)),e}n.d(t,{g:function(){return i}})},1463:function(e,t){"use strict";t.A=["January","February","March","April","May","June","July","August","September","October","November","December"]},1470:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(9471);const i=()=>r.createElement("div",{className:"page-sidebar-content-overlay"})},1474:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},1535:function(e,t,n){"use strict";n.r(t),n.d(t,{useItem:function(){return s}});var r=n(9471),i=n(1838),a=n(868),o=n(6371);function s(e){const[t,n]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),d=(e.type,e.singleLinkContent?a.cN:a.p9),h=""===e.thumbnail?null:(0,i.formatInnerLink)(e.thumbnail,o.default.get("config-site").url);return(0,r.useEffect)((()=>{void 0!==e.onMount&&e.onMount()}),[]),{titleComponent:function(){let n=e.title;return""!==s&&(n+=" "+s),""!==t&&(n+=" "+t),e.singleLinkContent?r.createElement(a.Et,{title:e.title,ariaLabel:n}):r.createElement(a.w3,{title:e.title,ariaLabel:n,link:e.link})},descriptionComponent:function(){return e.hasMediaViewer&&e.hasMediaViewerDescr?[r.createElement(a.gR,{key:"1",description:e.meta_description?e.meta_description.trim():" "}),r.createElement(a.gR,{key:"2",description:e.description?e.description.trim():" "})]:r.createElement(a.gR,{description:e.description.trim()})},thumbnailUrl:h,UnderThumbWrapper:d}}},1554:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});const r=e=>{if(!e)return;const t=e.split(".");return t[t.length-1]}},1610:function(e,t,n){"use strict";n.r(t),n.d(t,{usePopup:function(){return u}});var r=n(9471),i=n(9834),a=n(1134),o=n(2901);function s(e){const t=(0,r.useRef)(null),[n,s]=(0,r.useState)(!1),l=(0,r.useCallback)((e=>{if((0,a.CX)(e.target,"popup-fullscreen-overlay"))return void d();const n=(0,i.findDOMNode)(t.current);-1===e.path.indexOf(n)&&d()}),[]),u=(0,r.useCallback)((e=>{27===(e.keyCode||e.charCode)&&l(e)}),[]);function c(){s(!0)}function d(){document.removeEventListener("click",l),document.removeEventListener("keydown",u),s(!1)}function h(){n?d():c()}function p(){n&&d()}function f(){n||c()}return(0,r.useEffect)((()=>{n?(document.addEventListener("click",l),document.addEventListener("keydown",u),"function"==typeof e.showCallback&&e.showCallback()):"function"==typeof e.hideCallback&&e.hideCallback()}),[n]),(0,r.useImperativeHandle)(e.contentRef,(()=>({toggle:h,tryToHide:p,tryToShow:f}))),n?r.createElement(o.Ay,{ref:t,className:e.className,style:e.style},e.children):null}function l(e){return r.cloneElement(e.children,{onClick:()=>e.contentRef.current.toggle()})}function u(){return[(0,r.useRef)(null),s,l]}},1650:function(e){e.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}},1661:function(e,t,n){"use strict";e.exports=n(9249)},1662:function(e,t,n){"use strict";e.exports=n(1993)},1701:function(e,t,n){"use strict";var r=n(4912);e.exports=function(e){return!!r(e)}},1702:function(e,t,n){"use strict";n.d(t,{R:function(){return a},e:function(){return o}});var r=n(6403),i=n(8354);const a=function(e,t,n){return void 0===e[t]||(0,i.tR)(e[t])?null:(0,r.m)(["Invalid prop `"+t+"` of type `"+typeof e[t]+"` supplied to `"+(n||"N/A")+"`, expected `positive integer or zero` ("+e[t]+")."])},o=function(e,t,n){return void 0===e[t]||(0,i.q6)(e[t])?null:(0,r.m)(["Invalid prop `"+t+"` of type `"+typeof e[t]+"` supplied to `"+(n||"N/A")+"`, expected `positive integer` ("+e[t]+")."])}},1723:function(e,t,n){"use strict";var r=n(1474);e.exports=function(){return"function"==typeof Object.is?Object.is:r}},1730:function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(6838),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===a.call(e),r=o(e),s=t&&"[object String]"===a.call(e),h=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)h.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)h.push(String(g));else for(var v in e)f&&"prototype"===v||!i.call(e,v)||h.push(String(v));if(l)for(var y=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!i.call(e,c[b])||h.push(c[b]);return h}}e.exports=r},1828:function(e,t,n){"use strict";var r=n(70),i=n(4121),a=n(4114),o=n(7570);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],d=!!o&&o(e,t);if(r)r(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===s&&d?d.enumerable:!s,value:n,writable:null===l&&d?d.writable:!l});else{if(!c&&(s||l||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},1829:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{A:function(){return r}})},1838:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserEvents:function(){return r.GT},PositiveInteger:function(){return p.e},PositiveIntegerOrZero:function(){return p.R},addClassname:function(){return r.zc},cancelAnimationFrame:function(){return r.uU},csrfToken:function(){return u.G},deleteRequest:function(){return g.Fb},error:function(){return d.z},exportStore:function(){return a.A},formatInnerLink:function(){return o.c},formatManagementTableDate:function(){return s.n},formatViewsNumber:function(){return l.A},getRequest:function(){return g.iq},greaterCommonDivision:function(){return h.p7},hasClassname:function(){return r.CX},imageExtension:function(){return c.t},isGt:function(){return h.en},isInteger:function(){return h.Fq},isNumber:function(){return h.Et},isPositive:function(){return h.ep},isPositiveInteger:function(){return h.q6},isPositiveIntegerOrZero:function(){return h.tR},isPositiveNumber:function(){return h.F5},isZero:function(){return h.be},logErrorAndReturnError:function(){return i.m},logWarningAndReturnError:function(){return i.g},postRequest:function(){return g.MB},publishedOnDate:function(){return f.A},putRequest:function(){return g.zi},quickSort:function(){return m.g},removeClassname:function(){return r.qk},replaceString:function(){return y.u},requestAnimationFrame:function(){return r.xi},supportsSvgAsImg:function(){return r.kN},translateString:function(){return v.g},warn:function(){return d.R}});var r=n(1134),i=n(6403),a=n(977),o=n(463);if(!/^(152|201|33|543|594|722)$/.test(n.j))var s=n(8482);var l=n(4632),u=n(5393);if(!/^(152|543|594|722)$/.test(n.j))var c=n(1554);var d=n(8004),h=n(8354),p=n(1702),f=n(7673),m=n(1453),g=n(9659),v=n(4036),y=n(4470)},1871:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),i.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s={left:0,top:8},l=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.download?n.download.download:"Download";return i.createElement(r.Tooltip,{ariaControlsSuffix:"get-file",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:o,testId:"get-file__download-button",onClick:t},i.createElement(a,null)),content:function(){return o},offset:s})},u=function(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)},c=function(e,t,n){var r=URL.createObjectURL(new Blob([e],{type:n}));u(r,t),r&&URL.revokeObjectURL(r)},d=function(e,t){e.getData().then((function(e){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?c(e,t,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?u("data:application/pdf;base64,".concat(function(e){return btoa(Array(e.length).fill("").map((function(t,n){return String.fromCharCode(e[n])})).join(""))}(e)),t):c(e,t,"application/pdf")}))},h=function(e){var t=e.children,n=e.fileNameGenerator,r=e.store,a=i.useState(r.get("file")),o=a[0],s=a[1],u=i.useState(r.get("doc")),c=u[0],h=u[1],p=function(e){h(e)},f=function(e){s(e)};return i.useEffect((function(){return r.subscribe("doc",p),r.subscribe("file",f),function(){r.subscribe("doc",p),r.unsubscribe("file",f)}}),[]),(t||function(e){return i.createElement(l,{onClick:e.onClick})})({onClick:function(){c&&o&&d(c,n(o))}})},p=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.download?n.download.download:"Download";return i.createElement(r.MenuItem,{icon:i.createElement(a,null),testId:"get-file__download-menu",onClick:t},o)};t.DownloadIcon=a,t.getFilePlugin=function(e){var t=i.useMemo((function(){return r.createStore({})}),[]),n=function(e){return e.name?(n=(t=e.name).split("/").pop())?n.split("#")[0].split("?")[0]:t:"document.pdf";var t,n},a=function(r){return i.createElement(h,o({},r,{fileNameGenerator:e&&e.fileNameGenerator||n,store:t}))};return{onDocumentLoad:function(e){t.update("doc",e.doc),t.update("file",e.file)},Download:a,DownloadButton:function(){return i.createElement(a,null,(function(e){return i.createElement(l,o({},e))}))},DownloadMenuItem:function(e){return i.createElement(a,null,(function(t){return i.createElement(p,{onClick:function(){t.onClick(),e.onClick()}})}))}}}},1906:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},1936:function(e,t,n){"use strict";n.r(t),n.d(t,{PageHeader:function(){return r.z},PageMain:function(){return i.P},PageSidebar:function(){return a.E},PageSidebarContentOverlay:function(){return o.B}});var r=n(1254),i=n(3212),a=n(795),o=n(1470)},1981:function(e,t,n){"use strict";n.r(t),n.d(t,{requestPredictions:function(){return a}});var r=n(7143),i=n.n(r);function a(e){i().dispatch({type:"REQUEST_PREDICTIONS",query:e})}},1993:function(e,t,n){"use strict";var r,i=n(7118),a=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471));t.ThumbnailDirection=void 0,(r=t.ThumbnailDirection||(t.ThumbnailDirection={})).Horizontal="Horizontal",r.Vertical="Vertical";var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e){var t=e.doc,n=e.getPageIndex,r=e.renderSpinner,o=e.store,s=e.width,l=t.numPages,u=n?n({numPages:l}):0,c=Math.max(0,Math.min(u,l-1)),d=o.get("pagesRotation")||new Map,h=d.has(c)?d.get(c):0,p=a.useState(""),f=p[0],m=p[1],g=i.useIsMounted(),v=a.useRef(),y=a.useState(o.get("rotation")||0),b=y[0],_=y[1],E=a.useState(h),S=E[0],w=E[1],T=a.useState(!1),C=T[0],k=T[1],A=function(e){var t=e.has(c)?e.get(c):0;w(t)},P=function(e){_(e)},x=i.useIntersectionObserver({onVisibilityChanged:function(e){k(e.isVisible)}});return a.useEffect((function(){if(C){var e=x.current;e&&(m(""),i.getPage(t,c).then((function(t){var n=t.getViewport({scale:1}),r=(n.rotation+b+S)%360,i=Math.abs(b+S)%180==0,a=i?n.width:n.height,o=i?n.height:n.width,l=document.createElement("canvas"),u=l.getContext("2d",{alpha:!1}),c=e.clientWidth,d=e.clientHeight,h=s?s/a:Math.min(c/a,d/o),p=h*a,f=h*o;l.height=f,l.width=p,l.style.opacity="0";var y=t.getViewport({rotation:r,scale:h});v.current=t.render({canvasContext:u,viewport:y}),v.current.promise.then((function(){g.current&&m(l.toDataURL()),l.width=0,l.height=0}),(function(){}))})))}}),[S,C]),a.useEffect((function(){return o.subscribe("pagesRotation",A),o.subscribe("rotation",P),function(){o.unsubscribe("pagesRotation",A),o.unsubscribe("rotation",P)}}),[]),a.useEffect((function(){return function(){var e;null===(e=v.current)||void 0===e||e.cancel()}}),[]),a.createElement("div",{ref:x,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},f?a.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:f}):a.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},r?r():a.createElement(i.Spinner,null)))},l=function(e){var t=e.getPageIndex,n=e.renderSpinner,r=e.store,o=e.width,l=a.useState(r.get("doc")),u=l[0],c=l[1],d=function(e){c(e)};return a.useEffect((function(){return r.subscribe("doc",d),function(){r.unsubscribe("doc",d)}}),[]),a.createElement("div",{className:"rpv-thumbnail__cover"},u?a.createElement(s,{doc:u,getPageIndex:t,renderSpinner:n,store:r,width:o}):a.createElement("div",{className:"rpv-thumbnail__cover-loader"},n?n():a.createElement(i.Spinner,null)))},u=function(){return a.createElement(i.Spinner,null)},c=a.createContext({renderSpinner:u}),d=function(e){var t=e.children,n=e.doc,r=i.useIsMounted(),o=a.useState({loading:!0,labels:[]}),s=o[0],l=o[1];return a.useEffect((function(){n.getPageLabels().then((function(e){r.current&&l({loading:!1,labels:e||[]})}))}),[n.loadingTask.docId]),s.loading?a.createElement(a.Fragment,null):t(s.labels)},h=function(e){var t=e.page,n=e.pageHeight,r=e.pageIndex,o=e.pageWidth,s=e.rotation,l=e.thumbnailHeight,u=e.thumbnailWidth,d=e.onRenderCompleted,h=a.useContext(i.LocalizationContext).l10n,p=a.useRef(),f=a.useState(""),m=f[0],g=f[1],v=h&&h.thumbnail?h.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return a.useEffect((function(){var e=p.current;e&&e.cancel();var i=document.createElement("canvas"),a=i.getContext("2d",{alpha:!1}),l=u,c=l/(o/n),h=l/o;i.height=c,i.width=l,i.style.height="".concat(c,"px"),i.style.width="".concat(l,"px");var f=t.getViewport({rotation:s,scale:h});return p.current=t.render({canvasContext:a,viewport:f}),p.current.promise.then((function(){g(i.toDataURL()),d(r)}),(function(){d(r)})),function(){var e;null===(e=p.current)||void 0===e||e.cancel()}}),[s]),m?a.createElement("img",{"aria-label":v.replace("{{pageIndex}}","".concat(r+1)),src:m,height:"".concat(l,"px"),width:"".concat(u,"px")}):a.useContext(c).renderSpinner()},p=function(e){var t=e.doc,n=e.pageHeight,r=e.pageIndex,o=e.pageRotation,s=e.pageWidth,l=e.rotation,u=e.shouldRender,d=e.thumbnailWidth,p=e.onRenderCompleted,f=e.onVisibilityChanged,m=i.useIsMounted(),g=a.useState({height:n,page:null,viewportRotation:0,width:s}),v=g[0],y=g[1],b=v.page,_=v.height,E=v.width,S=E/_,w=Math.abs(l+o)%180==0,T=w?d:d/S,C=w?d/S:d;a.useEffect((function(){u&&i.getPage(t,r).then((function(e){var t=e.getViewport({scale:1});m.current&&y({height:t.height,page:e,viewportRotation:t.rotation,width:t.width})}))}),[u]);var k=(v.viewportRotation+l+o)%360,A=i.useIntersectionObserver({onVisibilityChanged:function(e){f(r,e)}});return a.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(r),ref:A,style:{height:"".concat(C,"px"),width:"".concat(T,"px")}},b?a.createElement(h,{page:b,pageHeight:w?_:E,pageIndex:r,pageWidth:w?E:_,rotation:k,thumbnailHeight:C,thumbnailWidth:T,onRenderCompleted:p}):a.useContext(c).renderSpinner())},f=function(e){var n=e.currentPage,r=e.doc,o=e.labels,s=e.pagesRotation,l=e.pageHeight,u=e.pageWidth,c=e.renderCurrentPageLabel,d=e.renderThumbnailItem,h=e.rotatedPage,f=e.rotation,m=e.thumbnailDirection,g=e.thumbnailWidth,v=e.viewMode,y=e.onJumpToPage,b=e.onRotatePage,_=r.numPages,E=r.loadingTask.docId,S=a.useRef(null),w=a.useRef([]),T=a.useState(n),C=T[0],k=T[1],A=a.useContext(i.ThemeContext).direction===i.TextDirection.RightToLeft,P=a.useState(-1),x=P[0],I=P[1],M=i.useIsMounted(),R=i.usePrevious(v),O=a.useRef(!1),L=i.useRenderQueue({doc:r}),D=a.useMemo((function(){return Array(_).fill(0).map((function(e,t){return t}))}),[E]),N=a.useMemo((function(){switch(v){case i.ViewMode.DualPage:return i.chunk(D,2);case i.ViewMode.DualPageWithCover:return[[D[0]]].concat(i.chunk(D.slice(1),2));case i.ViewMode.SinglePage:default:return i.chunk(D,1)}}),[E,v]);i.useIsomorphicLayoutEffect((function(){var e=S.current;e&&(w.current=Array.from(e.querySelectorAll(".rpv-thumbnail__item")))}),[v]),a.useEffect((function(){var e=w.current;if(!(0===e.length||C<0||C>e.length)){var t=e[C];t.setAttribute("tabindex","0"),t.focus()}}),[C]),i.useIsomorphicLayoutEffect((function(){var e=S.current,r=w.current;if(!(!e||0===r.length||n<0||n>r.length)){var i=r[n].closest(".rpv-thumbnail__items");i&&(m===t.ThumbnailDirection.Vertical?function(e,t){var n=e.getBoundingClientRect().top-t.getBoundingClientRect().top,r=e.clientHeight,i=t.clientHeight;n<0?t.scrollTop+=n:n+r<=i||(t.scrollTop+=n+r-i)}(i,e):function(e,t){var n=e.getBoundingClientRect().left-t.getBoundingClientRect().left,r=e.clientWidth,i=t.clientWidth;n<0?t.scrollLeft+=n:n+r<=i||(t.scrollLeft+=n+r-i)}(i,e))}}),[n,m]);var F=a.useCallback((function(e){M.current&&(L.markRendered(e),O.current=!1,B())}),[E]),j=a.useCallback((function(e,t){t.isVisible?L.setVisibility(e,t.ratio):L.setOutOfRange(e),B()}),[E]),B=a.useCallback((function(){if(!O.current){var e=L.getHighestPriorityPage();e>-1&&(L.markRendering(e),O.current=!0,I(e))}}),[E]);return a.useEffect((function(){h>=0&&(L.markRendering(h),O.current=!0,I(h))}),[E,h]),i.useIsomorphicLayoutEffect((function(){R!==v&&(L.markNotRendered(),B())}),[v]),a.createElement("div",{ref:S,"data-testid":"thumbnail__list",className:i.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":m===t.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":A,"rpv-thumbnail__list--vertical":m===t.ThumbnailDirection.Vertical}),onKeyDown:function(e){switch(e.key){case"ArrowDown":!function(){if(S.current){var e=w.current,t=C+1;t<e.length&&(C>=0&&e[C].setAttribute("tabindex","-1"),k(t))}}();break;case"ArrowUp":!function(){if(S.current){var e=w.current,t=C-1;t>=0&&(C>=0&&e[C].setAttribute("tabindex","-1"),k(t))}}();break;case"Enter":C>=0&&C<_&&y(C)}}},N.map((function(e,t){var h=!1;switch(v){case i.ViewMode.DualPage:h=n===2*t||n===2*t+1;break;case i.ViewMode.DualPageWithCover:h=0===n&&0===t||t>0&&n===2*t-1||t>0&&n===2*t;break;case i.ViewMode.SinglePage:default:h=n===t}return a.createElement("div",{className:i.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":v===i.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":v===i.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":v===i.ViewMode.SinglePage,"rpv-thumbnail__items--selected":h}),key:"".concat(t,"___").concat(v)},e.map((function(e){return function(e){var t=v===i.ViewMode.DualPageWithCover&&(0===e||_%2==0&&e===_-1),h="".concat(r.loadingTask.docId,"___").concat(e),m=o.length===_?o[e]:"".concat(e+1),E=c?c({currentPage:n,pageIndex:e,numPages:_,pageLabel:m}):m,S=s.has(e)?s.get(e):0,w=a.createElement(p,{doc:r,pageHeight:l,pageIndex:e,pageRotation:S,pageWidth:u,rotation:f,shouldRender:x===e,thumbnailWidth:g,onRenderCompleted:F,onVisibilityChanged:j});return d?d({currentPage:n,key:h,numPages:_,pageIndex:e,renderPageLabel:a.createElement(a.Fragment,null,E),renderPageThumbnail:w,onJumpToPage:function(){return y(e)},onRotatePage:function(t){return b(e,t)}}):a.createElement("div",{key:h},a.createElement("div",{className:i.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":v===i.ViewMode.DualPage&&e%2==0,"rpv-thumbnail__item--dual-odd":v===i.ViewMode.DualPage&&e%2==1,"rpv-thumbnail__item--dual-cover":t,"rpv-thumbnail__item--dual-cover-even":v===i.ViewMode.DualPageWithCover&&!t&&e%2==0,"rpv-thumbnail__item--dual-cover-odd":v===i.ViewMode.DualPageWithCover&&!t&&e%2==1,"rpv-thumbnail__item--single":v===i.ViewMode.SinglePage,"rpv-thumbnail__item--selected":n===e}),role:"button",tabIndex:n===e?0:-1,onClick:function(){return y(e)}},w),a.createElement("div",{"data-testid":"thumbnail__label-".concat(e),className:"rpv-thumbnail__label"},E))}(e)})))})))},m=function(e){var t=e.renderCurrentPageLabel,n=e.renderThumbnailItem,r=e.store,o=e.thumbnailDirection,s=e.thumbnailWidth,l=a.useState(r.get("doc")),u=l[0],h=l[1],p=a.useState(r.get("currentPage")||0),m=p[0],g=p[1],v=a.useState(r.get("pageHeight")||0),y=v[0],b=v[1],_=a.useState(r.get("pageWidth")||0),E=_[0],S=_[1],w=a.useState(r.get("rotation")||0),T=w[0],C=w[1],k=a.useState(r.get("pagesRotation")||new Map),A=k[0],P=k[1],x=a.useState(r.get("rotatedPage")||-1),I=x[0],M=x[1],R=a.useState(r.get("viewMode")),O=R[0],L=R[1],D=function(e){g(e)},N=function(e){h(e)},F=function(e){b(e)},j=function(e){S(e)},B=function(e){C(e)},U=function(e){P(e)},q=function(e){M(e)},V=function(e){L(e)},H=function(e){var t=r.get("jumpToPage");t&&t(e)},z=function(e,t){r.get("rotatePage")(e,t)};return a.useEffect((function(){return r.subscribe("doc",N),r.subscribe("pageHeight",F),r.subscribe("pageWidth",j),r.subscribe("rotatedPage",q),r.subscribe("rotation",B),r.subscribe("pagesRotation",U),r.subscribe("viewMode",V),function(){r.unsubscribe("doc",N),r.unsubscribe("pageHeight",F),r.unsubscribe("pageWidth",j),r.unsubscribe("rotatedPage",q),r.unsubscribe("rotation",B),r.unsubscribe("pagesRotation",U),r.unsubscribe("viewMode",V)}}),[]),i.useIsomorphicLayoutEffect((function(){return r.subscribe("currentPage",D),function(){r.unsubscribe("currentPage",D)}}),[]),u?a.createElement(i.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},a.createElement(d,{doc:u},(function(e){return a.createElement(f,{currentPage:m,doc:u,labels:e,pagesRotation:A,pageHeight:y,pageWidth:E,renderCurrentPageLabel:t,renderThumbnailItem:n,rotatedPage:I,rotation:T,thumbnailDirection:o,thumbnailWidth:s,viewMode:O,onJumpToPage:H,onRotatePage:z})}))):a.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},a.useContext(c).renderSpinner())};t.thumbnailPlugin=function(e){var n=a.useMemo((function(){return i.createStore({rotatePage:function(){},viewMode:i.ViewMode.SinglePage})}),[]),r=a.useState(""),s=r[0],d=r[1];return{install:function(e){n.update("jumpToPage",e.jumpToPage),n.update("rotatePage",e.rotatePage)},onDocumentLoad:function(e){d(e.doc.loadingTask.docId),n.update("doc",e.doc)},onViewerStateChange:function(e){return n.update("currentPage",e.pageIndex),n.update("pagesRotation",e.pagesRotation),n.update("pageHeight",e.pageHeight),n.update("pageWidth",e.pageWidth),n.update("rotation",e.rotation),n.update("rotatedPage",e.rotatedPage),n.update("viewMode",e.viewMode),e},Cover:function(t){return a.createElement(l,o({},t,{renderSpinner:null==e?void 0:e.renderSpinner,store:n}))},Thumbnails:a.useCallback((function(r){return a.createElement(c.Provider,{value:{renderSpinner:(null==e?void 0:e.renderSpinner)||u}},a.createElement(m,{renderCurrentPageLabel:null==e?void 0:e.renderCurrentPageLabel,renderThumbnailItem:null==r?void 0:r.renderThumbnailItem,store:n,thumbnailDirection:(null==r?void 0:r.thumbnailDirection)||t.ThumbnailDirection.Vertical,thumbnailWidth:(null==e?void 0:e.thumbnailWidth)||100}))}),[s])}}},2031:function(e){"use strict";e.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},2063:function(e,t,n){e.exports.Dispatcher=n(5986)},2078:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,{A:function(){return r}})},2099:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10\n            M10.5,5.499v10"}))},o=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e){var t=i.useState(e.get("scale")||0),n=t[0],r=t[1],a=function(e){r(e)};return i.useEffect((function(){return e.subscribe("scale",a),function(){e.unsubscribe("scale",a)}}),[]),{scale:n}},u=function(e){var t=e.children,n=e.store;return(t||function(e){return i.createElement(i.Fragment,null,"".concat(Math.round(100*e.scale),"%"))})({scale:l(n).scale})},c={passive:!1},d=null,h=function(e){var t=e.pagesContainerRef,n=e.store,a=r.useDebounceCallback((function(e){var t=n.get("zoom");t&&t(e)}),40),o=function(e){if(e.ctrlKey){e.preventDefault();var t=e.target.getBoundingClientRect(),r=1-e.deltaY/100,i=e.clientX-t.left,o=e.clientY-t.top,s=n.get("scale"),l=(d||(d=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(i,o).scale(r).translate(-i,-o).scale(s);a(l.a)}};return r.useIsomorphicLayoutEffect((function(){var e=t.current;if(e)return e.addEventListener("wheel",o,c),function(){e.removeEventListener("wheel",o)}}),[]),i.createElement(i.Fragment,null)},p=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f=function(e){return p.find((function(t){return t>e}))||e},m=function(e){var t=p.findIndex((function(t){return t>=e}));return-1===t||0===t?e:p[t-1]},g=function(e){var t=e.containerRef,n=e.store,a=function(e){if(!e.shiftKey&&!e.altKey&&(r.isMac()?e.metaKey:e.ctrlKey)){var i=t.current;if(i&&document.activeElement&&i.contains(document.activeElement)){var a=n.get("zoom");if(a){var o=n.get("scale")||1,s=1;switch(e.key){case"-":s=m(o);break;case"=":s=f(o);break;case"0":s=1;break;default:s=o}s!==o&&(e.preventDefault(),a(s))}}}};return i.useEffect((function(){if(t.current)return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[t.current]),i.createElement(i.Fragment,null)},v=[.5,.75,1,1.25,1.5,2,3,4],y={left:0,top:8},b=function(e){var t=e.levels,n=void 0===t?v:t,a=e.scale,o=e.onZoom,s=i.useContext(r.LocalizationContext).l10n,l=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,u=s&&s.zoom?s.zoom.zoomDocument:"Zoom document";return i.createElement(r.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:r.Position.BottomCenter,target:function(e){return i.createElement(r.MinimalButton,{ariaLabel:u,testId:"zoom__popover-target",onClick:function(){e()}},i.createElement("span",{className:"rpv-zoom__popover-target"},i.createElement("span",{"data-testid":"zoom__popover-target-scale",className:r.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!l,"rpv-zoom__popover-target-scale--rtl":l})},Math.round(100*a),"%"),i.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(e){return i.createElement(r.Menu,null,Object.keys(r.SpecialZoomLevel).map((function(t){var n=t;return i.createElement(r.MenuItem,{key:n,onClick:function(){e(),o(n)}},function(e){switch(e){case r.SpecialZoomLevel.ActualSize:return s&&s.zoom?s.zoom.actualSize:"Actual size";case r.SpecialZoomLevel.PageFit:return s&&s.zoom?s.zoom.pageFit:"Page fit";case r.SpecialZoomLevel.PageWidth:return s&&s.zoom?s.zoom.pageWidth:"Page width"}}(n))})),i.createElement(r.MenuDivider,null),n.map((function(t){return i.createElement(r.MenuItem,{key:t,onClick:function(){e(),o(t)}},"".concat(Math.round(100*t),"%"))})))},offset:y,closeOnClickOutside:!0,closeOnEscape:!0})},_=function(e){var t=e.children,n=e.levels,r=e.store;return(t||function(e){return i.createElement(b,{levels:n,scale:e.scale,onZoom:e.onZoom})})({scale:l(r).scale,onZoom:function(e){var t=r.get("zoom");t&&t(e)}})},E={left:0,top:8},S=function(e){var t=e.enableShortcuts,n=e.onClick,o=i.useContext(r.LocalizationContext).l10n,s=o&&o.zoom?o.zoom.zoomIn:"Zoom in",l=t?r.isMac()?"Meta+=":"Ctrl+=":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"zoom-in",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:l,ariaLabel:s,testId:"zoom__in-button",onClick:n},i.createElement(a,null)),content:function(){return s},offset:E})},w=function(e){var t=e.children,n=e.enableShortcuts,r=e.store,i=l(r).scale;return(t||S)({enableShortcuts:n,onClick:function(){var e=r.get("zoom");e&&e(f(i))}})},T=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.zoom?n.zoom.zoomIn:"Zoom in";return i.createElement(r.MenuItem,{icon:i.createElement(a,null),testId:"zoom__in-menu",onClick:t},o)},C={left:0,top:8},k=function(e){var t=e.enableShortcuts,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,s=a&&a.zoom?a.zoom.zoomOut:"Zoom out",l=t?r.isMac()?"Meta+-":"Ctrl+-":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"zoom-out",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:l,ariaLabel:s,testId:"zoom__out-button",onClick:n},i.createElement(o,null)),content:function(){return s},offset:C})},A=function(e){var t=e.children,n=e.enableShortcuts,r=e.store,i=l(r).scale;return(t||k)({enableShortcuts:n,onClick:function(){var e=r.get("zoom");e&&e(m(i))}})},P=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,a=n&&n.zoom?n.zoom.zoomOut:"Zoom out";return i.createElement(r.MenuItem,{icon:i.createElement(o,null),testId:"zoom__out-menu",onClick:t},a)};t.ZoomInIcon=a,t.ZoomOutIcon=o,t.zoomPlugin=function(e){var t=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},e)}),[]),n=i.useMemo((function(){return r.createStore({})}),[]),a=function(e){return i.createElement(w,s({enableShortcuts:t.enableShortcuts},e,{store:n}))},o=function(e){return i.createElement(A,s({enableShortcuts:t.enableShortcuts},e,{store:n}))},l=function(e){return i.createElement(_,s({},e,{store:n}))};return{renderViewer:function(e){var r=e.slot;if(!t.enableShortcuts)return r;var a={children:i.createElement(i.Fragment,null,i.createElement(g,{containerRef:e.containerRef,store:n}),i.createElement(h,{pagesContainerRef:e.pagesContainerRef,store:n}),r.children)};return s(s({},r),a)},install:function(e){n.update("zoom",e.zoom)},onViewerStateChange:function(e){return n.update("scale",e.scale),e},zoomTo:function(e){var t=n.get("zoom");t&&t(e)},CurrentScale:function(e){return i.createElement(u,s({},e,{store:n}))},ZoomIn:a,ZoomInButton:function(){return i.createElement(a,null,(function(e){return i.createElement(S,s({},e))}))},ZoomInMenuItem:function(e){return i.createElement(a,null,(function(t){return i.createElement(T,{onClick:function(){t.onClick(),e.onClick()}})}))},ZoomOut:o,ZoomOutButton:function(){return i.createElement(o,null,(function(e){return i.createElement(k,s({},e))}))},ZoomOutMenuItem:function(e){return i.createElement(o,null,(function(t){return i.createElement(P,{onClick:function(){t.onClick(),e.onClick()}})}))},Zoom:l,ZoomPopover:function(e){return i.createElement(l,null,(function(t){return i.createElement(b,s({levels:null==e?void 0:e.levels},t))}))}}}},2101:function(e,t,n){"use strict";n.r(t)},2127:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(1838),o=n(3997),s=n(4571),l=n.n(s),u=n(6371),c=n(8974);const d={};class h extends(i()){constructor(){super(),this.mediacms_config=(0,o.$)(window.MediaCMS),this._MEDIA=null,this.pagePlaylistId=null,this.pagePlaylistData=null,this.userList=null,d[Object.defineProperty(this,"id",{value:"MediaPageStoreData_"+Object.keys(d).length}).id]={likedMedia:!1,dislikedMedia:!1,reported_times:0,while:{deleteMedia:!1,submitComment:!1,deleteCommentId:null}},this.removeMediaResponse=this.removeMediaResponse.bind(this),this.removeMediaFail=this.removeMediaFail.bind(this),this.submitCommentFail=this.submitCommentFail.bind(this),this.submitCommentResponse=this.submitCommentResponse.bind(this),this.removeCommentFail=this.removeCommentFail.bind(this),this.removeCommentResponse=this.removeCommentResponse.bind(this)}loadData(){if(!d[this.id].mediaId){let e=function(){let e=new(l())(window.location.href).query;return e?(e=e.substring(1),e.split("&"),e=e.length?e.split("="):[]):e=[],e}();if(e.length){let t=0;for(;t<e.length;)"m"===e[t]&&(d[this.id].mediaId=e[t+1]),t+=2}}if(!d[this.id].mediaId)return c.warn("Invalid media id:",d[this.id].mediaId),!1;this.mediaAPIUrl=this.mediacms_config.api.media+"/"+d[this.id].mediaId,this.dataResponse=this.dataResponse.bind(this),this.dataErrorResponse=this.dataErrorResponse.bind(this),(0,a.getRequest)(this.mediaAPIUrl,!1,this.dataResponse,this.dataErrorResponse)}loadPlaylistData(){const e=this.mediacms_config.api.playlists+"/"+this.pagePlaylistId;this.playlistDataResponse=this.playlistDataResponse.bind(this),this.playlistDataErrorResponse=this.playlistDataErrorResponse.bind(this),(0,a.getRequest)(e,!1,this.playlistDataResponse,this.playlistDataErrorResponse)}playlistDataResponse(e){if(e&&e.data){let t=!1,n=0;for(;n<e.data.playlist_media.length;){if(d[this.id].mediaId===e.data.playlist_media[n].friendly_token){t=!0;break}n+=1}t?this.pagePlaylistData=e.data:this.pagePlaylistId=null,this.emit("loaded_viewer_playlist_data")}else this.pagePlaylistId=null;this.emit("loaded_page_playlist_data")}playlistDataErrorResponse(e){this.emit("loaded_viewer_playlist_error"),this.emit("loaded_page_playlist_data")}loadComments(){this.commentsAPIUrl=this.mediacms_config.api.media+"/"+d[this.id].mediaId+"/comments",this.commentsResponse=this.commentsResponse.bind(this),(0,a.getRequest)(this.commentsAPIUrl,!1,this.commentsResponse)}loadUsers(){this.usersAPIUrl=this.mediacms_config.api.users,this.usersResponse=this.usersResponse.bind(this),(0,a.getRequest)(this.usersAPIUrl,!1,this.usersResponse)}loadPlaylists(){this.mediacms_config.member.can.saveMedia&&(this.playlistsAPIUrl=this.mediacms_config.api.user.playlists+this.mediacms_config.member.username,this.playlistsResponse=this.playlistsResponse.bind(this),(0,a.getRequest)(this.playlistsAPIUrl,!1,this.playlistsResponse))}dataResponse(e){if(e&&e.data){switch(d[this.id].data=e.data,d[this.id].reported_times=!!d[this.id].data.reported_times,this.get("media-type")){case"video":case"audio":case"image":this.emit("loaded_"+this.get("media-type")+"_data")}this.emit("loaded_media_data")}this.loadPlaylists(),!0===MediaCMS.features.media.actions.comment_mention&&this.loadUsers(),this.mediacms_config.member.can.readComment&&this.loadComments()}dataErrorResponse(e){if(void 0!==e.type)switch(e.type){case"network":case"private":case"unavailable":d[this.id].loadErrorType=e.type,d[this.id].loadErrorMessage=void 0!==e.message?e.message:"Αn error occurred while loading the media's data",this.emit("loaded_media_error")}}commentsResponse(e){e&&e.data&&(d[this.id].comments=e.data.count?e.data.results:[],this.emit("comments_load"))}usersResponse(e){e&&e.data&&(d.userList=e.data.count?e.data.results:[],this.emit("users_load"))}playlistsResponse(e){if(e&&e.data){let t=e.data.count?e.data.results:[];d[this.id].playlists=[];let n=0,r=0;for(;n<t.length;)(function(e){let n=this;if(t[e].user===this.mediacms_config.member.username){let i=d[n.id].playlists.length;d[n.id].playlists[i]={playlist_id:function(e){let t=e.split("/");return 1<t.length?t[t.length-1]:null}(t[e].url),title:t[e].title,description:t[e].description,add_date:t[e].add_date},(0,a.getRequest)(this.mediacms_config.site.url+"/"+t[e].api_url.replace(/^\//g,""),!1,(function(e){if(e&&e.data){d[n.id].playlists[i].media_list=[];let t,r=0;for(;r<e.data.playlist_media.length;)t=e.data.playlist_media[r].url.split("m="),2===t.length&&d[n.id].playlists[i].media_list.push(t[1]),r+=1}r+=1,r===t.length&&this.emit("playlists_load")}))}}).bind(this)(n),n+=1}}requestMediaLike(){if(!d[this.id].mediaId)return c.warn("Invalid media id:",d[this.id].mediaId),!1;const e=this.mediacms_config.api.media+"/"+d[this.id].mediaId+"/actions";this.likeActionResponse=this.likeActionResponse.bind(this),(0,a.postRequest)(e,{type:"like"},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.likeActionResponse,function(){this.emit("liked_media_failed_request")}.bind(this))}likeActionResponse(e){e&&(e instanceof Error||e.data&&(d[this.id].likedMedia=!0,this.emit("liked_media")))}requestMediaDislike(){if(!d[this.id].mediaId)return c.warn("Invalid media id:",d[this.id].mediaId),!1;const e=this.mediacms_config.api.media+"/"+d[this.id].mediaId+"/actions";this.dislikeActionResponse=this.dislikeActionResponse.bind(this),(0,a.postRequest)(e,{type:"dislike"},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.dislikeActionResponse,function(){this.emit("disliked_media_failed_request")}.bind(this))}dislikeActionResponse(e){e&&(e instanceof Error||e.data&&(d[this.id].dislikedMedia=!0,this.emit("disliked_media")))}requestMediaReport(e){if(!d[this.id].mediaId)return c.warn("Invalid media id:",d[this.id].mediaId),!1;const t=this.mediacms_config.api.media+"/"+d[this.id].mediaId+"/actions";this.reportActionResponse=this.reportActionResponse.bind(this),(0,a.postRequest)(t,{type:"report",extra_info:e},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.reportActionResponse,this.reportActionResponse)}reportActionResponse(e){e&&(e instanceof Error||e.data&&(d[this.id].reported_times+=1,this.emit("reported_media")))}set(e,t){switch(e){case"media-load-error-type":d[this.id].loadErrorType=t;break;case"media-load-error-message":d[this.id].loadErrorMessage=t}}get(e){let t,n,r,i,a=null;switch(e){case"users":a=d.userList||[];break;case"playlists":a=d[this.id].playlists||[];break;case"media-load-error-type":a=void 0!==d[this.id].loadErrorType?d[this.id].loadErrorType:null;break;case"media-load-error-message":a=void 0!==d[this.id].loadErrorMessage?d[this.id].loadErrorMessage:null;break;case"media-comments":a=d[this.id].comments||[];break;case"media-data":a=d[this.id].data||null;break;case"media-id":a=d[this.id].mediaId;break;case"media-url":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.url?d[this.id].data.url:"N/A";break;case"media-edit-subtitle-url":a=void 0!==d[this.id].data&&"string"==typeof d[this.id].data.add_subtitle_url?d[this.id].data.add_subtitle_url:null;break;case"media-likes":t=d[this.id].likedMedia?1:0,a=t?void 0!==d[this.id].data&&void 0!==d[this.id].data.likes?d[this.id].data.likes+t:t:void 0!==d[this.id].data&&void 0!==d[this.id].data.likes?d[this.id].data.likes:"N/A";break;case"media-dislikes":t=d[this.id].dislikedMedia?1:0,a=t?void 0!==d[this.id].data&&void 0!==d[this.id].data.dislikes?d[this.id].data.dislikes+t:t:void 0!==d[this.id].data&&void 0!==d[this.id].data.dislikes?d[this.id].data.dislikes:"N/A";break;case"media-summary":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.summary?d[this.id].data.summary:null;break;case"media-categories":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.categories_info?d[this.id].data.categories_info:[];break;case"media-tags":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.tags_info?d[this.id].data.tags_info:[];break;case"media-type":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.media_type?d[this.id].data.media_type:null;break;case"media-original-url":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.original_media_url?d[this.id].data.original_media_url:null;break;case"media-thumbnail-url":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.thumbnail_url?d[this.id].data.thumbnail_url:null;break;case"user-liked-media":a=d[this.id].likedMedia;break;case"user-disliked-media":a=d[this.id].dislikedMedia;break;case"media-author-thumbnail-url":a=void 0!==d[this.id].data&&void 0!==d[this.id].data.author_thumbnail?this.mediacms_config.site.url+"/"+d[this.id].data.author_thumbnail.replace(/^\//g,""):null;break;case"playlist-data":a=this.pagePlaylistData;break;case"playlist-id":a=this.pagePlaylistId;break;case"playlist-next-media-url":if(!this.pagePlaylistData)break;for(n=0,i=0;i<this.pagePlaylistData.playlist_media.length;){if(d[this.id].mediaId===this.pagePlaylistData.playlist_media[i].friendly_token){n=i;break}i+=1}let e=n+1;e===this.pagePlaylistData.playlist_media.length&&(r=u.default.get("browser-cache"),!0===r.get("loopPlaylist["+this.pagePlaylistId+"]")&&(e=0)),void 0!==this.pagePlaylistData.playlist_media[e]&&(a=this.pagePlaylistData.playlist_media[e].url+"&pl="+this.pagePlaylistId);break;case"playlist-previous-media-url":if(!this.pagePlaylistData)break;for(n=0,i=0;i<this.pagePlaylistData.playlist_media.length;){if(d[this.id].mediaId===this.pagePlaylistData.playlist_media[i].friendly_token){n=i;break}i+=1}let o=n-1;0===n&&(o=null,r=u.default.get("browser-cache"),!0===r.get("loopPlaylist["+this.pagePlaylistId+"]")&&(o=this.pagePlaylistData.playlist_media.length-1)),void 0!==this.pagePlaylistData.playlist_media[o]&&(a=this.pagePlaylistData.playlist_media[o].url+"&pl="+this.pagePlaylistId)}return a}isVideo(){return"video"===this.get("media-type")}onPlaylistCreationCompleted(e){e&&e.data&&this.emit("playlist_creation_completed",e.data)}onPlaylistCreationFailed(){this.emit("playlist_creation_failed")}onPlaylistMediaAdditionCompleted(e,t){if(t){let t=0;for(;t<d[this.id].playlists.length;){if(e===d[this.id].playlists[t].playlist_id){d[this.id].playlists[t].media_list.push(d[this.id].mediaId);break}t+=1}this.emit("media_playlist_addition_completed",e)}}onPlaylistMediaAdditionFailed(e,t){this.emit("media_playlist_addition_failed")}onPlaylistMediaRemovalCompleted(e,t){if(t){let t,n,r=0;for(;r<d[this.id].playlists.length;){if(e===d[this.id].playlists[r].playlist_id){for(n=[],t=0;t<d[this.id].playlists[r].media_list.length;)d[this.id].mediaId!==d[this.id].playlists[r].media_list[t]&&n.push(d[this.id].playlists[r].media_list[t]),t+=1;d[this.id].playlists[r].media_list=n;break}r+=1}this.emit("media_playlist_removal_completed",e)}}onPlaylistMediaRemovalFailed(e,t){this.emit("media_playlist_removal_failed")}actions_handler(e){switch(e.type){case"LOAD_MEDIA_DATA":d[this.id].mediaId=window.MediaCMS.mediaId||d[this.id].mediaId,this.pagePlaylistId=function(){let e=null;const t=window.location.search;if(""!==t){let n=t.split("?");if(2===n.length){let t;n=n[1].split("&");let r=0;for(;r<n.length;){if(t=n[r].split("="),"pl"===t[0]){2===t.length&&(e=t[1]);break}r+=1}}}return e}(),this.pagePlaylistId?(this.loadPlaylistData(),this.loadData()):(this.emit("loaded_page_playlist_data"),this.loadData());break;case"LIKE_MEDIA":d[this.id].likedMedia||d[this.id].dislikedMedia||this.requestMediaLike();break;case"DISLIKE_MEDIA":d[this.id].likedMedia||d[this.id].dislikedMedia||this.requestMediaDislike();break;case"REPORT_MEDIA":d[this.id].reported_times||""!==e.reportDescription&&this.requestMediaReport(e.reportDescription);break;case"COPY_SHARE_LINK":e.inputElement instanceof HTMLElement&&(e.inputElement.select(),document.execCommand("copy"),this.emit("copied_media_link"));break;case"COPY_EMBED_MEDIA_CODE":e.inputElement instanceof HTMLElement&&(e.inputElement.select(),document.execCommand("copy"),this.emit("copied_embed_media_code"));break;case"REMOVE_MEDIA":if(d[this.id].while.deleteMedia)return;d[this.id].while.deleteMedia=!0,(0,a.deleteRequest)(this.mediaAPIUrl,{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.removeMediaResponse,this.removeMediaFail);break;case"SUBMIT_COMMENT":if(d[this.id].while.submitComment)return;d[this.id].while.submitComment=!0,(0,a.postRequest)(this.commentsAPIUrl,{text:e.commentText},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.submitCommentResponse,this.submitCommentFail);break;case"DELETE_COMMENT":if(null!==d[this.id].while.deleteCommentId)return;d[this.id].while.deleteCommentId=e.commentId,(0,a.deleteRequest)(this.commentsAPIUrl+"/"+e.commentId,{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.removeCommentResponse,this.removeCommentFail);break;case"CREATE_PLAYLIST":(0,a.postRequest)(this.mediacms_config.api.playlists,{title:e.playlist_data.title,description:e.playlist_data.description},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.onPlaylistCreationCompleted.bind(this),this.onPlaylistCreationFailed.bind(this));break;case"ADD_MEDIA_TO_PLAYLIST":(0,a.putRequest)(this.mediacms_config.api.playlists+"/"+e.playlist_id,{type:"add",media_friendly_token:e.media_id},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.onPlaylistMediaAdditionCompleted.bind(this,e.playlist_id),this.onPlaylistMediaAdditionFailed.bind(this,e.playlist_id));break;case"REMOVE_MEDIA_FROM_PLAYLIST":(0,a.putRequest)(this.mediacms_config.api.playlists+"/"+e.playlist_id,{type:"remove",media_friendly_token:e.media_id},{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.onPlaylistMediaRemovalCompleted.bind(this,e.playlist_id),this.onPlaylistMediaRemovalFailed.bind(this,e.playlist_id));break;case"APPEND_NEW_PLAYLIST":d[this.id].playlists.push(e.playlist_data),this.emit("playlists_load")}}removeMediaResponse(e){e&&204===e.status&&this.emit("media_delete",d[this.id].mediaId)}removeMediaFail(){this.emit("media_delete_fail",d[this.id].mediaId),setTimeout((function(e){d[e.id].while.deleteMedia=null}),100,this)}removeCommentFail(e){this.emit("comment_delete_fail",d[this.id].while.deleteCommentId),setTimeout((function(e){d[e.id].while.deleteCommentId=null}),100,this)}removeCommentResponse(e){if(e&&204===e.status){let e,t=[];for(e in d[this.id].comments)d[this.id].comments.hasOwnProperty(e)&&d[this.id].while.deleteCommentId!==d[this.id].comments[e].uid&&t.push(d[this.id].comments[e]);d[this.id].comments=t,t=null,this.emit("comment_delete",d[this.id].while.deleteCommentId)}setTimeout((function(e){d[e.id].while.deleteCommentId=null}),100,this)}submitCommentFail(e){this.emit("comment_submit_fail"),setTimeout((function(e){d[e.id].while.submitComment=!1}),100,this)}submitCommentResponse(e){e&&201===e.status&&e.data&&Object.keys(e.data)&&(d[this.id].comments.push(e.data),this.emit("comment_submit",e.data.uid)),setTimeout((function(e){d[e.id].while.submitComment=!1}),100,this)}}t.default=(0,a.exportStore)(new h,"actions_handler")},2140:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarThemeSwitcher=void 0;var i=r(n(9471)),a=n(5338);t.SidebarThemeSwitcher=function(){var e=(0,a.useTheme)(),t=e.currentThemeMode,n=e.changeThemeMode,r=e.themeModeSwitcher;return r.enabled&&"sidebar"===r.position&&i.default.createElement("div",{className:"sidebar-theme-switcher"},i.default.createElement("div",{className:"sidebar-theme-switcher-inner"},i.default.createElement("span",{className:"theme-icon"+("dark"===t?"":" active")},i.default.createElement("i",{className:"material-icons","data-icon":"wb_sunny"})),i.default.createElement("span",null,i.default.createElement("span",{className:"checkbox-switcher"},i.default.createElement("input",{type:"checkbox",checked:"dark"===t,onChange:n}))),i.default.createElement("span",{className:"theme-icon"+("dark"===t?" active":"")},i.default.createElement("i",{className:"material-icons","data-icon":"brightness_3"}))))}},2175:function(e,t,n){"use strict";var r=n(5817),i=n(6031),a=n(9677);e.exports=r?function(e){return r(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return i(e)}:a?function(e){return a(e)}:null},2264:function(e,t,n){"use strict";var r=n(9718),i=n(2756),a=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&a(e,".prototype.")>-1?i(n):n}},2289:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function l(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),c=l(/Edge/i),d=l(/firefox/i),h=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),f=l(/chrome/i)&&l(/android/i),m={capture:!1,passive:!1};function g(e,t,n){e.addEventListener(t,n,!u&&m)}function v(e,t,n){e.removeEventListener(t,n,!u&&m)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function b(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||r&&e===n)return e;if(e===n)break}while(e=b(e))}return null}var E,S=/\s+/g;function w(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(S," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(S," ")}}function T(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function C(e,t){var n="";if("string"==typeof e)n=e;else do{var r=T(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function k(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function A(){return document.scrollingElement||document.documentElement}function P(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var a,o,s,l,c,d,h;if(e!==window&&e.parentNode&&e!==A()?(o=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,d=a.height,h=a.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!u))do{if(i&&i.getBoundingClientRect&&("none"!==T(i,"transform")||n&&"static"!==T(i,"position"))){var p=i.getBoundingClientRect();o-=p.top+parseInt(T(i,"border-top-width")),s-=p.left+parseInt(T(i,"border-left-width")),l=o+a.height,c=s+a.width;break}}while(i=i.parentNode);if(r&&e!==window){var f=C(i||e),m=f&&f.a,g=f&&f.d;f&&(l=(o/=g)+(d/=g),c=(s/=m)+(h/=m))}return{top:o,left:s,bottom:l,right:c,width:h,height:d}}}function x(e,t,n){for(var r=L(e,!0),i=P(e)[t];r;){var a=P(r)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return r;if(r===A())break;r=L(r,!1)}return!1}function I(e,t,n,r){for(var i=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==Fe.ghost&&(r||o[a]!==Fe.dragged)&&_(o[a],n.draggable,e,!1)){if(i===t)return o[a];i++}a++}return null}function M(e,t){for(var n=e.lastElementChild;n&&(n===Fe.ghost||"none"===T(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function R(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Fe.clone||t&&!y(e,t)||n++;return n}function O(e){var t=0,n=0,r=A();if(e)do{var i=C(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function L(e,t){if(!e||!e.getBoundingClientRect)return A();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=T(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return A();if(r||t)return n;r=!0}}}while(n=n.parentNode);return A()}function D(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function N(e,t){return function(){if(!E){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),E=setTimeout((function(){E=void 0}),t)}}}function F(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function j(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function B(e,t,n){var r={};return Array.from(e.children).forEach((function(i){var a,o,s,l;if(_(i,t.draggable,e,!1)&&!i.animated&&i!==n){var u=P(i);r.left=Math.min(null!==(a=r.left)&&void 0!==a?a:1/0,u.left),r.top=Math.min(null!==(o=r.top)&&void 0!==o?o:1/0,u.top),r.right=Math.max(null!==(s=r.right)&&void 0!==s?s:-1/0,u.right),r.bottom=Math.max(null!==(l=r.bottom)&&void 0!==l?l:-1/0,u.bottom)}})),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var U="Sortable"+(new Date).getTime();var q=[],V={initializeByDefault:!0},H={mount:function(e){for(var t in V)V.hasOwnProperty(t)&&!(t in e)&&(e[t]=V[t]);q.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),q.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var a=e+"Global";q.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][a]&&t[r.pluginName][a](i({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](i({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in q.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,s(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return q.forEach((function(r){"function"==typeof r.eventProperties&&s(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return q.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};var z=["evt"],W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,z);H.pluginEvent.bind(Fe)(e,t,i({dragEl:X,parentEl:K,ghostEl:$,rootEl:Y,nextEl:Q,lastDownEl:J,cloneEl:Z,cloneHidden:ee,dragStarted:pe,putSortable:oe,activeSortable:Fe.active,originalEvent:r,oldIndex:te,oldDraggableIndex:re,newIndex:ne,newDraggableIndex:ie,hideGhostForTarget:Oe,unhideGhostForTarget:Le,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){G({sortable:t,name:e,originalEvent:r})}},a))};function G(e){!function(e){var t=e.sortable,n=e.rootEl,r=e.name,a=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,d=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[U]){var y,b=t.options,_="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||u||c?(y=document.createEvent("Event")).initEvent(r,!0,!0):y=new CustomEvent(r,{bubbles:!0,cancelable:!0}),y.to=s||n,y.from=l||n,y.item=a||n,y.clone=o,y.oldIndex=d,y.newIndex=h,y.oldDraggableIndex=p,y.newDraggableIndex=f,y.originalEvent=m,y.pullMode=g?g.lastPutMode:void 0;var E=i(i({},v),H.getEventProperties(r,t));for(var S in E)y[S]=E[S];n&&n.dispatchEvent(y),b[_]&&b[_].call(t,y)}}(i({putSortable:oe,cloneEl:Z,targetEl:X,rootEl:Y,oldIndex:te,oldDraggableIndex:re,newIndex:ne,newDraggableIndex:ie},e))}var X,K,$,Y,Q,J,Z,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,de,he,pe,fe,me,ge,ve,ye=!1,be=!1,_e=[],Ee=!1,Se=!1,we=[],Te=!1,Ce=[],ke="undefined"!=typeof document,Ae=p,Pe=c||u?"cssFloat":"float",xe=ke&&!f&&!p&&"draggable"in document.createElement("div"),Ie=function(){if(ke){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Me=function(e,t){var n=T(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=I(e,0,t),a=I(e,1,t),o=i&&T(i),s=a&&T(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+P(i).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&"none"!==o.float){var c="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=r&&"none"===n[Pe]||a&&"none"===n[Pe]&&l+u>r)?"vertical":"horizontal"},Re=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,a,o),n)(r,i,a,o);var l=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==a(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Oe=function(){!Ie&&$&&T($,"display","none")},Le=function(){!Ie&&$&&T($,"display","")};ke&&!f&&document.addEventListener("click",(function(e){if(be)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),be=!1,!1}),!0);var De=function(e){if(X){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,a=e.clientY,_e.some((function(e){var t=e[U].options.emptyInsertThreshold;if(t&&!M(e)){var n=P(e),r=i>=n.left-t&&i<=n.right+t,s=a>=n.top-t&&a<=n.bottom+t;return r&&s?o=e:void 0}})),o);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[U]._onDragOver(n)}}var i,a,o},Ne=function(e){X&&X.parentNode[U]._isOutsideThisEl(e.target)};function Fe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=s({},t),e[U]=this;var n,r,a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&(!h||p),emptyInsertThreshold:5};for(var o in H.initializePlugins(this,e,a),a)!(o in t)&&(t[o]=a[o]);for(var l in Re(t),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!t.forceFallback&&xe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?g(e,"pointerdown",this._onTapStart):(g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),_e.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),s(this,(r=[],{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==T(e,"display")&&e!==Fe.ghost){r.push({target:e,rect:P(e)});var t=i({},r[r.length-1].rect);if(e.thisAnimationDuration){var n=C(e,!0);n&&(t.top-=n.f,t.left-=n.e)}e.fromRect=t}}))},addAnimationState:function(e){r.push(e)},removeAnimationState:function(e){r.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(r,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var i=!1,a=0;r.forEach((function(e){var n=0,r=e.target,o=r.fromRect,s=P(r),l=r.prevFromRect,u=r.prevToRect,c=e.rect,d=C(r,!0);d&&(s.top-=d.f,s.left-=d.e),r.toRect=s,r.thisAnimationDuration&&D(l,s)&&!D(o,s)&&(c.top-s.top)/(c.left-s.left)==(o.top-s.top)/(o.left-s.left)&&(n=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,l,u,t.options)),D(s,o)||(r.prevFromRect=o,r.prevToRect=s,n||(n=t.options.animation),t.animate(r,c,s,n)),n&&(i=!0,a=Math.max(a,n),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),n),r.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof e&&e()}),a):"function"==typeof e&&e(),r=[]},animate:function(e,t,n,r){if(r){T(e,"transition",""),T(e,"transform","");var i=C(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!l,T(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),T(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),T(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){T(e,"transition",""),T(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}))}function je(e,t,n,r,i,a,o,s){var l,d,h=e[U],p=h.options.onMove;return!window.CustomEvent||u||c?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=a||P(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),p&&(d=p.call(h,l,o)),d}function Be(e){e.draggable=!1}function Ue(){Te=!1}function qe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ve(e){return setTimeout(e,0)}function He(e){return clearTimeout(e)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(fe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=r.filter;if(function(e){Ce.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Ce.push(r)}}(n),!X&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!h||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=_(s,r.draggable,n,!1))&&s.animated||J===s)){if(te=R(s),re=R(s,r.draggable),"function"==typeof u){if(u.call(this,e,s,this))return G({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),W("filter",t,{evt:e}),void(i&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=_(l,r.trim(),n,!1))return G({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),W("filter",t,{evt:e}),!0}))))return void(i&&e.preventDefault());r.handle&&!_(l,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,a=i.el,o=i.options,s=a.ownerDocument;if(n&&!X&&n.parentNode===a){var l=P(n);if(Y=a,K=(X=n).parentNode,Q=X.nextSibling,J=n,ae=o.group,Fe.dragged=X,se={target:X,clientX:(t||e).clientX,clientY:(t||e).clientY},de=se.clientX-l.left,he=se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",r=function(){W("delayEnded",i,{evt:e}),Fe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!d&&i.nativeDraggable&&(X.draggable=!0),i._triggerDragStart(e,t),G({sortable:i,name:"choose",originalEvent:e}),w(X,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){k(X,e.trim(),Be)})),g(s,"dragover",De),g(s,"mousemove",De),g(s,"touchmove",De),o.supportPointer?(g(s,"pointerup",i._onDrop),!this.nativeDraggable&&g(s,"pointercancel",i._onDrop)):(g(s,"mouseup",i._onDrop),g(s,"touchend",i._onDrop),g(s,"touchcancel",i._onDrop)),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),W("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(c||u))r();else{if(Fe.eventCanceled)return void this._onDrop();o.supportPointer?(g(s,"pointerup",i._disableDelayedDrag),g(s,"pointercancel",i._disableDelayedDrag)):(g(s,"mouseup",i._disableDelayedDrag),g(s,"touchend",i._disableDelayedDrag),g(s,"touchcancel",i._disableDelayedDrag)),g(s,"mousemove",i._delayedDragTouchMoveHandler),g(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&g(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&Be(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"pointerup",this._disableDelayedDrag),v(e,"pointercancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):g(document,t?"touchmove":"mousemove",this._onTouchMove):(g(X,"dragend",this),g(Y,"dragstart",this._onDragStart));try{document.selection?Ve((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(ye=!1,Y&&X){W("dragStarted",this,{evt:t}),this.nativeDraggable&&g(document,"dragover",Ne);var n=this.options;!e&&w(X,n.dragClass,!1),w(X,n.ghostClass,!0),Fe.active=this,e&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,Oe();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if(X.parentNode[U]._isOutsideThisEl(e),t)do{if(t[U]&&t[U]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=b(t));Le()}},_onTouchMove:function(e){if(se){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=$&&C($,!0),o=$&&a&&a.a,s=$&&a&&a.d,l=Ae&&ve&&O(ve),u=(i.clientX-se.clientX+r.x)/(o||1)+(l?l[0]-we[0]:0)/(o||1),c=(i.clientY-se.clientY+r.y)/(s||1)+(l?l[1]-we[1]:0)/(s||1);if(!Fe.active&&!ye){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if($){a?(a.e+=u-(ue||0),a.f+=c-(ce||0)):a={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");T($,"webkitTransform",d),T($,"mozTransform",d),T($,"msTransform",d),T($,"transform",d),ue=u,ce=c,le=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$){var e=this.options.fallbackOnBody?document.body:Y,t=P(X,!0,Ae,!0,e),n=this.options;if(Ae){for(ve=e;"static"===T(ve,"position")&&"none"===T(ve,"transform")&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=A()),t.top+=ve.scrollTop,t.left+=ve.scrollLeft):ve=A(),we=O(ve)}w($=X.cloneNode(!0),n.ghostClass,!1),w($,n.fallbackClass,!0),w($,n.dragClass,!0),T($,"transition",""),T($,"transform",""),T($,"box-sizing","border-box"),T($,"margin",0),T($,"top",t.top),T($,"left",t.left),T($,"width",t.width),T($,"height",t.height),T($,"opacity","0.8"),T($,"position",Ae?"absolute":"fixed"),T($,"zIndex","100000"),T($,"pointerEvents","none"),Fe.ghost=$,e.appendChild($),T($,"transform-origin",de/parseInt($.style.width)*100+"% "+he/parseInt($.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;W("dragStart",this,{evt:e}),Fe.eventCanceled?this._onDrop():(W("setupClone",this),Fe.eventCanceled||((Z=j(X)).removeAttribute("id"),Z.draggable=!1,Z.style["will-change"]="",this._hideClone(),w(Z,this.options.chosenClass,!1),Fe.clone=Z),n.cloneId=Ve((function(){W("clone",n),Fe.eventCanceled||(n.options.removeCloneOnHide||Y.insertBefore(Z,X),n._hideClone(),G({sortable:n,name:"clone"}))})),!t&&w(X,i.dragClass,!0),t?(be=!0,n._loopId=setInterval(n._emulateDragOver,50)):(v(document,"mouseup",n._onDrop),v(document,"touchend",n._onDrop),v(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,X)),g(document,"drop",n),T(X,"transform","translateZ(0)")),ye=!0,n._dragStartId=Ve(n._dragStarted.bind(n,t,e)),g(document,"selectstart",n),pe=!0,window.getSelection().removeAllRanges(),h&&T(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,a,o=this.el,s=e.target,l=this.options,u=l.group,c=Fe.active,d=ae===u,h=l.sort,p=oe||c,f=this,m=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=_(s,l.draggable,o,!0),q("dragOver"),Fe.eventCanceled)return m;if(X.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return H(!1);if(be=!1,c&&!l.disabled&&(d?h||(r=K!==Y):oe===this||(this.lastPutMode=ae.checkPull(this,c,X,e))&&u.checkPut(this,c,X,e))){if(a="vertical"===this._getDirection(e,s),t=P(X),q("dragOverValid"),Fe.eventCanceled)return m;if(r)return K=Y,V(),this._hideClone(),q("revert"),Fe.eventCanceled||(Q?Y.insertBefore(X,Q):Y.appendChild(X)),H(!0);var g=M(o,l.draggable);if(!g||function(e,t,n){var r=P(M(n.el,n.options.draggable)),i=B(n.el,n.options,$);return t?e.clientX>i.right+10||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+10||e.clientX>r.right&&e.clientY>r.top}(e,a,this)&&!g.animated){if(g===X)return H(!1);if(g&&o===e.target&&(s=g),s&&(n=P(s)),!1!==je(Y,o,X,t,s,n,e,!!s))return V(),g&&g.nextSibling?o.insertBefore(X,g.nextSibling):o.appendChild(X),K=o,z(),H(!0)}else if(g&&function(e,t,n){var r=P(I(n.el,0,n.options,!0)),i=B(n.el,n.options,$);return t?e.clientX<i.left-10||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-10||e.clientY<r.bottom&&e.clientX<r.left}(e,a,this)){var v=I(o,0,l,!0);if(v===X)return H(!1);if(n=P(s=v),!1!==je(Y,o,X,t,s,n,e,!1))return V(),o.insertBefore(X,v),K=o,z(),H(!0)}else if(s.parentNode===o){n=P(s);var y,b,E,S=X.parentNode!==o,C=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===o||i===s||r+a/2===o+l/2}(X.animated&&X.toRect||t,s.animated&&s.toRect||n,a),k=a?"top":"left",A=x(s,"top","top")||x(X,"top","top"),O=A?A.scrollTop:void 0;if(fe!==s&&(b=n[k],Ee=!1,Se=!C&&l.invertSwap||S),y=function(e,t,n,r,i,a,o,s){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!o)if(s&&ge<u*i){if(!Ee&&(1===me?l>c+u*a/2:l<d-u*a/2)&&(Ee=!0),Ee)h=!0;else if(1===me?l<c+ge:l>d-ge)return-me}else if(l>c+u*(1-i)/2&&l<d-u*(1-i)/2)return function(e){return R(X)<R(e)?1:-1}(t);return(h=h||o)&&(l<c+u*a/2||l>d-u*a/2)?l>c+u/2?1:-1:0}(e,s,n,a,C?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Se,fe===s),0!==y){var L=R(X);do{L-=y,E=K.children[L]}while(E&&("none"===T(E,"display")||E===$))}if(0===y||E===s)return H(!1);fe=s,me=y;var D=s.nextElementSibling,N=!1,j=je(Y,o,X,t,s,n,e,N=1===y);if(!1!==j)return 1!==j&&-1!==j||(N=1===j),Te=!0,setTimeout(Ue,30),V(),N&&!D?o.appendChild(X):s.parentNode.insertBefore(X,N?D:s),A&&F(A,0,O-A.scrollTop),K=X.parentNode,void 0===b||Se||(ge=Math.abs(b-P(s)[k])),z(),H(!0)}if(o.contains(X))return H(!1)}return!1}function q(l,u){W(l,f,i({evt:e,isOwner:d,axis:a?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:s,completed:H,onMove:function(n,r){return je(Y,o,X,t,n,P(n),e,r)},changed:z},u))}function V(){q("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function H(t){return q("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(f),f!==p&&(w(X,oe?oe.options.ghostClass:c.options.ghostClass,!1),w(X,l.ghostClass,!0)),oe!==f&&f!==Fe.active?oe=f:f===Fe.active&&oe&&(oe=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){q("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===X&&!X.animated||s===o&&!s.animated)&&(fe=null),l.dragoverBubble||e.rootEl||s===document||(X.parentNode[U]._isOutsideThisEl(e.target),!t&&De(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function z(){ne=R(X),ie=R(X,l.draggable),G({sortable:f,name:"change",toEl:o,newIndex:ne,newDraggableIndex:ie,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",De),v(document,"mousemove",De),v(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"pointercancel",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ne=R(X),ie=R(X,n.draggable),W("drop",this,{evt:e}),K=X&&X.parentNode,ne=R(X),ie=R(X,n.draggable),Fe.eventCanceled||(ye=!1,Se=!1,Ee=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),He(this.cloneId),He(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&T(document.body,"user-select",""),T(X,"transform",""),e&&(pe&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(Y===K||oe&&"clone"!==oe.lastPutMode)&&Z&&Z.parentNode&&Z.parentNode.removeChild(Z),X&&(this.nativeDraggable&&v(X,"dragend",this),Be(X),X.style["will-change"]="",pe&&!ye&&w(X,oe?oe.options.ghostClass:this.options.ghostClass,!1),w(X,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),Y!==K?(ne>=0&&(G({rootEl:K,name:"add",toEl:K,fromEl:Y,originalEvent:e}),G({sortable:this,name:"remove",toEl:K,originalEvent:e}),G({rootEl:K,name:"sort",toEl:K,fromEl:Y,originalEvent:e}),G({sortable:this,name:"sort",toEl:K,originalEvent:e})),oe&&oe.save()):ne!==te&&ne>=0&&(G({sortable:this,name:"update",toEl:K,originalEvent:e}),G({sortable:this,name:"sort",toEl:K,originalEvent:e})),Fe.active&&(null!=ne&&-1!==ne||(ne=te,ie=re),G({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){W("nulling",this),Y=X=K=$=Q=Z=J=ee=se=le=pe=ne=ie=te=re=fe=me=oe=ae=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Ce.forEach((function(e){e.checked=!0})),Ce.length=ue=ce=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)_(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||qe(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var i=r.children[t];_(i,this.options.draggable,r,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=H.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Re(n)},destroy:function(){W("destroy",this);var e=this.el;e[U]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),_e.splice(_e.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(W("hideClone",this),Fe.eventCanceled)return;T(Z,"display","none"),this.options.removeCloneOnHide&&Z.parentNode&&Z.parentNode.removeChild(Z),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(W("showClone",this),Fe.eventCanceled)return;X.parentNode!=Y||this.options.group.revertClone?Q?Y.insertBefore(Z,Q):Y.appendChild(Z):Y.insertBefore(Z,X),this.options.group.revertClone&&this.animate(X,Z),T(Z,"display",""),ee=!1}}else this._hideClone()}},ke&&g(document,"touchmove",(function(e){(Fe.active||ye)&&e.cancelable&&e.preventDefault()})),Fe.utils={on:g,off:v,css:T,find:k,is:function(e,t){return!!_(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:N,closest:_,toggleClass:w,clone:j,index:R,nextTick:Ve,cancelNextTick:He,detectDirection:Me,getChild:I,expando:U},Fe.get=function(e){return e[U]},Fe.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Fe.utils=i(i({},Fe.utils),e.utils)),H.mount(e)}))},Fe.create=function(e,t){return new Fe(e,t)},Fe.version="1.15.6";var ze,We,Ge,Xe,Ke,$e,Ye=[],Qe=!1;function Je(){Ye.forEach((function(e){clearInterval(e.pid)})),Ye=[]}function Ze(){clearInterval($e)}var et=N((function(e,t,n,r){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=A(),c=!1;We!==n&&(We=n,Je(),ze=t.scroll,i=t.scrollFn,!0===ze&&(ze=L(n,!0)));var d=0,h=ze;do{var p=h,f=P(p),m=f.top,g=f.bottom,v=f.left,y=f.right,b=f.width,_=f.height,E=void 0,S=void 0,w=p.scrollWidth,C=p.scrollHeight,k=T(p),x=p.scrollLeft,I=p.scrollTop;p===u?(E=b<w&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),S=_<C&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(E=b<w&&("auto"===k.overflowX||"scroll"===k.overflowX),S=_<C&&("auto"===k.overflowY||"scroll"===k.overflowY));var M=E&&(Math.abs(y-a)<=s&&x+b<w)-(Math.abs(v-a)<=s&&!!x),R=S&&(Math.abs(g-o)<=s&&I+_<C)-(Math.abs(m-o)<=s&&!!I);if(!Ye[d])for(var O=0;O<=d;O++)Ye[O]||(Ye[O]={});Ye[d].vx==M&&Ye[d].vy==R&&Ye[d].el===p||(Ye[d].el=p,Ye[d].vx=M,Ye[d].vy=R,clearInterval(Ye[d].pid),0==M&&0==R||(c=!0,Ye[d].pid=setInterval(function(){r&&0===this.layer&&Fe.active._onTouchMove(Ke);var t=Ye[this.layer].vy?Ye[this.layer].vy*l:0,n=Ye[this.layer].vx?Ye[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(Fe.dragged.parentNode[U],n,t,e,Ke,Ye[this.layer].el)||F(Ye[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==u&&(h=L(h,!1)));Qe=c}}),30),tt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;o();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function nt(){}function rt(){}nt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=I(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:tt},s(nt,{pluginName:"revertOnSpill"}),rt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:tt},s(rt,{pluginName:"removeOnSpill"}),Fe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):t.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Ze(),Je(),clearTimeout(E),E=void 0},nulling:function(){Ke=We=ze=Qe=$e=Ge=Xe=null,Ye.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(Ke=e,t||this.options.forceAutoScrollFallback||c||u||h){et(e,this.options,a,t);var o=L(a,!0);!Qe||$e&&r===Ge&&i===Xe||($e&&Ze(),$e=setInterval((function(){var a=L(document.elementFromPoint(r,i),!0);a!==o&&(o=a,Je()),et(e,n.options,a,t)}),10),Ge=r,Xe=i)}else{if(!this.options.bubbleScroll||L(a,!0)===A())return void Je();et(e,this.options,L(a,!1),!1)}}},s(e,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(rt,nt),t.Ay=33==n.j?Fe:null},2365:function(e,t,n){"use strict";var r=n(1723),i=n(5935);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},2379:function(e,t,n){"use strict";var r,i=n(4449),a=n(3774)(/^\s*(?:function)?\*/),o=n(4903)(),s=n(2175),l=i("Object.prototype.toString"),u=i("Function.prototype.toString");e.exports=function(e){if("function"!=typeof e)return!1;if(a(u(e)))return!0;if(!o)return"[object GeneratorFunction]"===l(e);if(!s)return!1;if(void 0===r){var t=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&s(t)}return s(e)===r}},2387:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\n            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\n            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\n            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\n            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\n            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\n            M13.5,1.75L10,4.25l3.5,2.5"}))},o=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\n            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\n            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\n            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\n            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\n            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\n            M10.5,1.75l3.5,2.5l-3.5,2.5"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l={left:0,top:8},u=function(e){var t=e.direction,n=e.onClick,s=i.useContext(r.LocalizationContext).l10n,u=s&&s.rotate?s.rotate.rotateBackward:"Rotate counterclockwise",c=s&&s.rotate?s.rotate.rotateForward:"Rotate clockwise",d=t===r.RotateDirection.Backward?u:c,h=t===r.RotateDirection.Backward?i.createElement(a,null):i.createElement(o,null);return i.createElement(r.Tooltip,{ariaControlsSuffix:"rotate",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:d,testId:t===r.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:n},h),content:function(){return d},offset:l})},c=function(e){var t=e.children,n=e.direction,r=e.store;return(t||function(e){return i.createElement(u,{direction:e.direction,onClick:e.onClick})})({direction:n,onClick:function(){var e=r.get("rotate");e&&e(n)}})},d=function(e){var t=e.direction,n=e.onClick,s=i.useContext(r.LocalizationContext).l10n,l=s&&s.rotate?s.rotate.rotateBackward:"Rotate counterclockwise",u=s&&s.rotate?s.rotate.rotateForward:"Rotate clockwise",c=t===r.RotateDirection.Backward?l:u,d=t===r.RotateDirection.Backward?i.createElement(a,null):i.createElement(o,null);return i.createElement(r.MenuItem,{icon:d,testId:t===r.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:n},c)},h=function(e){var t=e.children,n=e.store;return t({onRotatePage:function(e,t){var r=n.get("rotatePage");r&&r(e,t)}})};t.RotateBackwardIcon=a,t.RotateForwardIcon=o,t.rotatePlugin=function(){var e=i.useMemo((function(){return r.createStore()}),[]),t=function(t){return i.createElement(c,s({},t,{store:e}))};return{install:function(t){e.update("rotate",t.rotate),e.update("rotatePage",t.rotatePage)},Rotate:t,RotateBackwardButton:function(){return i.createElement(t,{direction:r.RotateDirection.Backward},(function(e){return i.createElement(u,s({},e))}))},RotateBackwardMenuItem:function(e){return i.createElement(t,{direction:r.RotateDirection.Backward},(function(t){return i.createElement(d,{direction:t.direction,onClick:function(){t.onClick(),e.onClick()}})}))},RotateForwardButton:function(){return i.createElement(t,{direction:r.RotateDirection.Forward},(function(e){return i.createElement(u,s({},e))}))},RotateForwardMenuItem:function(e){return i.createElement(t,{direction:r.RotateDirection.Forward},(function(t){return i.createElement(d,{direction:t.direction,onClick:function(){t.onClick(),e.onClick()}})}))},RotatePage:function(t){return i.createElement(h,s({},t,{store:e}))}}}},2401:function(e,t,n){"use strict";n.r(t),n.d(t,{LinksConsumer:function(){return o},LinksContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).url),o=a.Consumer},2411:function(e){"use strict";e.exports=Math.floor},2418:function(e,t,n){"use strict";var r=n(9722),i=n(2698)(),a=n(4449),o=n(3095),s=a("Array.prototype.push"),l=a("Object.prototype.propertyIsEnumerable"),u=i?o.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var n=o(e);if(1===arguments.length)return n;for(var a=1;a<arguments.length;++a){var c=o(arguments[a]),d=r(c),h=i&&(o.getOwnPropertySymbols||u);if(h)for(var p=h(c),f=0;f<p.length;++f){var m=p[f];l(c,m)&&s(d,m)}for(var g=0;g<d.length;++g){var v=d[g];if(l(c,v)){var y=c[v];n[v]=y}}}return n}},2495:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var r=n(9471),i=n(7664);function a(e){return r.createElement("div",{className:e.className},r.createElement("div",{className:"items-list-wrap items-list-wrap-waiting"},r.createElement(i.SpinnerLoader,null)))}},2505:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,a,o=[];for(a in"string"!=typeof t&&(t="?"),e)if(n.call(e,a)){if((r=e[a])||null!=r&&!isNaN(r)||(r=""),a=i(a),r=i(r),null===a||null===r)continue;o.push(a+"="+r)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var a=r(t[1]),o=r(t[2]);null===a||null===o||a in i||(i[a]=o)}return i}},2531:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}n.d(t,{A:function(){return r}})},2579:function(e,t,n){"use strict";n.r(t),n.d(t,{ShareOptionsContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).media.share.options)},2586:function(e,t,n){"use strict";n.r(t),n.d(t,{set_player_sound_muted:function(){return s},set_player_volume:function(){return o},set_video_playback_speed:function(){return u},set_video_quality:function(){return l},set_viewer_mode:function(){return a}});var r=n(7143),i=n.n(r);function a(e){i().dispatch({type:"SET_VIEWER_MODE",inTheaterMode:e})}function o(e){i().dispatch({type:"SET_PLAYER_VOLUME",playerVolume:e})}function s(e){i().dispatch({type:"SET_PLAYER_SOUND_MUTED",playerSoundMuted:e})}function l(e){i().dispatch({type:"SET_VIDEO_QUALITY",quality:e})}function u(e){i().dispatch({type:"SET_VIDEO_PLAYBACK_SPEED",playbackSpeed:e})}},2698:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var r in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},2715:function(e){"use strict";e.exports=Math.max},2756:function(e,t,n){"use strict";var r=n(6930),i=n(70),a=n(5953),o=n(6898);e.exports=function(e){var t=a(arguments),n=e.length-(arguments.length-1);return r(t,1+(n>0?n:0),!0)},i?i(e.exports,"apply",{value:o}):e.exports.apply=o},2757:function(e,t,n){"use strict";n.r(t),n.d(t,{itemClassname:function(){return u},useMediaItem:function(){return c}});var r=n(9471),i=n(4350),a=n(1838),o=n(7460),s=n(868),l=n(1535);function u(e,t,n){let r=e;return""!==t&&(r+=" "+t),n&&(r+=" pl-active-item"),r}function c(e){const{titleComponent:t,descriptionComponent:n,thumbnailUrl:u,UnderThumbWrapper:c}=(0,l.useItem)({...e});return[t,n,u,c,function(){return r.createElement(s.Aj,{link:e.editLink})},function(){return e.hideAllMeta?null:r.createElement("span",{className:"item-meta"},function(){if(e.hideAuthor)return null;if(e.singleLinkContent)return r.createElement(s.rc,{name:e.author_name});const t=""===e.author_link?null:(0,a.formatInnerLink)(e.author_link,o.PageStore.get("config-site").url);return r.createElement(s.$2,{name:e.author_name,link:t})}(),e.hideViews?null:r.createElement(s.jf,{views:e.views}),function(){if(e.hideDate)return null;const t=(0,a.replaceString)((0,i.GP)(new Date(e.publish_date))),n="string"==typeof e.publish_date?Date.parse(e.publish_date):Date.parse(new Date(e.publish_date));return r.createElement(s.fR,{time:e.publish_date,dateTime:n,text:t})}())}]}},2763:function(e,t,n){"use strict";var r=n(1385);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var r,i,a;r=e,i=t,a=n[t],(i=s(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!==m(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}function l(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},c(e)}function d(e,t,n){return d=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},d.apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var g=n(6818).inspect,v=n(9852).codes.ERR_INVALID_ARG_TYPE;function y(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var b="",_="",E="",S="",w={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function T(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function C(e){return g(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var k=function(e,t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(k,e);var n,i,s,c,d=(n=k,i=h(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return l(this,e)});function k(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),"object"!==m(e)||null===e)throw new v("options","Object",e);var n=e.message,i=e.operator,a=e.stackStartFn,o=e.actual,s=e.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)t=d.call(this,String(n));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(b="[34m",_="[32m",S="[39m",E="[31m"):(b="",_="",S="",E="")),"object"===m(o)&&null!==o&&"object"===m(s)&&null!==s&&"stack"in o&&o instanceof Error&&"stack"in s&&s instanceof Error&&(o=T(o),s=T(s)),"deepStrictEqual"===i||"strictEqual"===i)t=d.call(this,function(e,t,n){var i="",a="",o=0,s="",l=!1,u=C(e),c=u.split("\n"),d=C(t).split("\n"),h=0,p="";if("strictEqual"===n&&"object"===m(e)&&"object"===m(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===c.length&&1===d.length&&c[0]!==d[0]){var f=c[0].length+d[0].length;if(f<=10){if(!("object"===m(e)&&null!==e||"object"===m(t)&&null!==t||0===e&&0===t))return"".concat(w[n],"\n\n")+"".concat(c[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==n&&f<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;c[0][h]===d[0][h];)h++;h>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",h),"^"),h=0)}}for(var g=c[c.length-1],v=d[d.length-1];g===v&&(h++<2?s="\n  ".concat(g).concat(s):i=g,c.pop(),d.pop(),0!==c.length&&0!==d.length);)g=c[c.length-1],v=d[d.length-1];var T=Math.max(c.length,d.length);if(0===T){var k=u.split("\n");if(k.length>30)for(k[26]="".concat(b,"...").concat(S);k.length>27;)k.pop();return"".concat(w.notIdentical,"\n\n").concat(k.join("\n"),"\n")}h>3&&(s="\n".concat(b,"...").concat(S).concat(s),l=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var A=0,P=w[n]+"\n".concat(_,"+ actual").concat(S," ").concat(E,"- expected").concat(S),x=" ".concat(b,"...").concat(S," Lines skipped");for(h=0;h<T;h++){var I=h-o;if(c.length<h+1)I>1&&h>2&&(I>4?(a+="\n".concat(b,"...").concat(S),l=!0):I>3&&(a+="\n  ".concat(d[h-2]),A++),a+="\n  ".concat(d[h-1]),A++),o=h,i+="\n".concat(E,"-").concat(S," ").concat(d[h]),A++;else if(d.length<h+1)I>1&&h>2&&(I>4?(a+="\n".concat(b,"...").concat(S),l=!0):I>3&&(a+="\n  ".concat(c[h-2]),A++),a+="\n  ".concat(c[h-1]),A++),o=h,a+="\n".concat(_,"+").concat(S," ").concat(c[h]),A++;else{var M=d[h],R=c[h],O=R!==M&&(!y(R,",")||R.slice(0,-1)!==M);O&&y(M,",")&&M.slice(0,-1)===R&&(O=!1,R+=","),O?(I>1&&h>2&&(I>4?(a+="\n".concat(b,"...").concat(S),l=!0):I>3&&(a+="\n  ".concat(c[h-2]),A++),a+="\n  ".concat(c[h-1]),A++),o=h,a+="\n".concat(_,"+").concat(S," ").concat(R),i+="\n".concat(E,"-").concat(S," ").concat(M),A+=2):(a+=i,i="",1!==I&&0!==h||(a+="\n  ".concat(R),A++))}if(A>20&&h<T-2)return"".concat(P).concat(x,"\n").concat(a,"\n").concat(b,"...").concat(S).concat(i,"\n")+"".concat(b,"...").concat(S)}return"".concat(P).concat(l?x:"","\n").concat(a).concat(i).concat(s).concat(p)}(o,s,i));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var h=w[i],p=C(o).split("\n");if("notStrictEqual"===i&&"object"===m(o)&&null!==o&&(h=w.notStrictEqualObject),p.length>30)for(p[26]="".concat(b,"...").concat(S);p.length>27;)p.pop();t=1===p.length?d.call(this,"".concat(h," ").concat(p[0])):d.call(this,"".concat(h,"\n\n").concat(p.join("\n"),"\n"))}else{var f=C(o),g="",A=w[i];"notDeepEqual"===i||"notEqual"===i?(f="".concat(w[i],"\n\n").concat(f)).length>1024&&(f="".concat(f.slice(0,1021),"...")):(g="".concat(C(s)),f.length>512&&(f="".concat(f.slice(0,509),"...")),g.length>512&&(g="".concat(g.slice(0,509),"...")),"deepEqual"===i||"equal"===i?f="".concat(A,"\n\n").concat(f,"\n\nshould equal\n\n"):g=" ".concat(i," ").concat(g)),t=d.call(this,"".concat(f).concat(g))}return Error.stackTraceLimit=c,t.generatedMessage=!n,Object.defineProperty(u(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=o,t.expected=s,t.operator=i,Error.captureStackTrace&&Error.captureStackTrace(u(t),a),t.stack,t.name="AssertionError",l(t)}return s=k,(c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(e,t){return g(this,a(a({},t),{},{customInspect:!1,depth:0}))}}])&&o(s.prototype,c),Object.defineProperty(s,"prototype",{writable:!1}),k}(c(Error),g.custom);e.exports=k},2818:function(e,t,n){"use strict";n.d(t,{OQ:function(){return c},n1:function(){return l},uW:function(){return u}});var r=n(8790),i=n(1838),a=n(8974);const o=["hls","h265","vp9","h264","vp8","mp4","theora"];function s(e,t){let n=null,r=document.createElement("video");if(r.canPlayType)try{switch(e){case"hls":case"mp4":n=!0;break;case"h265":n="probably"===r.canPlayType('video/mp4; codecs="hvc1.1.L0.0"')||"probably"===r.canPlayType('video/mp4; codecs="hev1.1.L0.0"');break;case"h264":n="probably"===r.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"===r.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');break;case"vp9":n="probably"===r.canPlayType('video/webm; codecs="vp9"');break;case"vp8":n="probably"===r.canPlayType('video/webm; codecs="vp8, vorbis"');break;case"theora":n="probably"===r.canPlayType('video/ogg; codecs="theora"')}if(t=(t instanceof Boolean||0===t||1==t)&&t){if("no"===r.canPlayType("video/nonsense")&&a.warn('BUGGY: Codec detection bug in Firefox 3.5.0 - 3.5.1 and Safari 4.0.0 - 4.0.4 that answer "no" to unknown codecs instead of an empty string'),"probably"===r.canPlayType("video/webm")&&a.warn('BUGGY: Codec detection bug that Firefox 27 and earlier always says "probably" when asked about WebM, even when the codecs string is not present'),"maybe"===r.canPlayType('video/mp4; codecs="avc1.42E01E"'))switch(r.canPlayType("video/mp4")){case"probably":a.warn('BUGGY: Codec detection bug in iOS 4.1 and earlier that switches "maybe" and "probably" around');break;case"maybe":a.warn('BUGGY: Codec detection bug in Android where no better answer than "maybe" is given')}"probably"===r.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')&&"probably"!==r.canPlayType('video/mp4; codecs="avc1.42E01E"')&&a.warn("BUGGY: Codec detection bug in Internet Explorer 9 that requires both audio and video codec on test")}}catch(e){a.warn(e)}return n}function l(e){let t=[],n={},r=document.createElement("video");return r.canPlayType&&(n.hls=!0,t.push("hls"),(r.canPlayType('video/mp4; codecs="hvc1.1.L0.0"')||"probably"===r.canPlayType('video/mp4; codecs="hev1.1.L0.0"'))&&(n.h265=!0,t.push("h265")),"probably"===r.canPlayType('video/mp4; codecs="avc1.42E01E"')&&(n.h264=!0,t.push("h264")),"probably"===r.canPlayType('video/webm; codecs="vp9"')&&(n.vp9=!0,t.push("vp9")),e&&("probably"===r.canPlayType('video/webm; codecs="vp8, vorbis"')&&(n.vp8=!0,t.push("vp8")),"probably"===r.canPlayType('video/ogg; codecs="theora"')&&(n.theora=!0,t.push("theora"))),"probably"===r.canPlayType('video/mp4; codecs="mp4v.20.8"')&&(n.mp4=!0,t.push("mp4"))),{order:t,support:n}}function u(e,t,n){const u={};let c,d,h;n=void 0===n?l():n;const p={hls:["m3u8"],h265:["mp4","webm"],h264:["mp4","webm"],vp9:["mp4","webm"],vp8:["mp4","webm"],theora:["ogg"],mp4:["mp4"]};for(c in t)t.hasOwnProperty(c)&&(d=null,"master_file"===c?d="Auto":(d=c.split("_playlist"),d=2===d.length?d[0]:null),null!==d&&(u[d]=void 0===u[d]?{format:[],url:[]}:u[d],u[d].format.push("hls"),u[d].url.push((0,i.formatInnerLink)(t[c],r.SiteContext._currentValue.url))));for(d in e)if(e.hasOwnProperty(d)&&Object.keys(e[d]).length&&(1080>=parseInt(d,10)||1080<window.screen.width&&1080<window.screen.height))for(c=0;c<o.length;)void 0!==e[d][o[c]]&&s(o[c],!1)&&e[d][o[c]]&&e[d][o[c]].url&&(100!==e[d][o[c]].progress&&a.warn("VIDEO DEBUG:","PROGRESS value is",e[d][o[c]].progress),"success"!==e[d][o[c]].status&&a.warn("VIDEO DEBUG:","STATUS value is",e[d][o[c]].status),h=e[d][o[c]].url.split("."),h.length&&0<=p[o[c]].indexOf(h[h.length-1])&&(u[d]=void 0===u[d]?{format:[],url:[]}:u[d],u[d].format.push(o[c]),u[d].url.push((0,i.formatInnerLink)(e[d][o[c]].url,r.SiteContext._currentValue.url)))),c+=1;return u}function c(e,t){let n,r=Object.keys(t);if(void 0!==t[e])return e;if(parseInt(e,10)>=parseInt(r[r.length-1],10))return r[r.length-1];if(parseInt(e,10)<=parseInt(r[0],10))return r[0];for(n=r.length-1;n>=0;){if(parseInt(e,10)>=parseInt(r[n],10))return r[n+1];n-=1}}},2828:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9471);const i=e=>{let{type:t}=e;return t?r.createElement("i",{className:"material-icons","data-icon":t}):null}},2831:function(e,t,n){"use strict";var r=n(237);function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){var t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:function(){return t.enabled_()},set:function(e){t.enabled_(e)}}),t},o=function(e){var t,n;function r(){var t,n=i(i(t=e.call(this)||this));return n.levels_=[],n.selectedIndex_=-1,Object.defineProperty(n,"selectedIndex",{get:function(){return n.selectedIndex_}}),Object.defineProperty(n,"length",{get:function(){return n.levels_.length}}),n||i(t)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new a(e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},o.removeQualityLevel=function(e){for(var t=null,n=0,r=this.length;n<r;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},o.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var r=this[t];if(r.id===e)return r}return null},o.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},r}(r.A.EventTarget);for(var s in o.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},o.prototype.allowedEvents_)o.prototype["on"+s]=null;var l="2.2.1",u=function(e){return t=this,r.A.mergeOptions({},e),n=t.qualityLevels,i=new o,t.on("dispose",(function e(){i.dispose(),t.qualityLevels=n,t.off("dispose",e)})),t.qualityLevels=function(){return i},t.qualityLevels.VERSION=l,i;var t,n,i};(r.A.registerPlugin||r.A.plugin)("qualityLevels",u),u.VERSION=l},2855:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListWrapper=void 0;var i=r(n(9471)),a=n(6190);n(2101),t.MediaListWrapper=function(e){var t=e.title,n=e.viewAllLink,r=e.viewAllText,o=e.className,s=e.style,l=e.children;return i.default.createElement("div",{className:(o?o+" ":"")+"media-list-wrapper",style:s},i.default.createElement(a.MediaListRow,{title:t,viewAllLink:n,viewAllText:r},l||null))}},2901:function(e,t,n){"use strict";n.d(t,{AP:function(){return o},cp:function(){return a}});var r=n(9471);const i=r.forwardRef(((e,t)=>void 0!==e.children?r.createElement("div",{ref:t,className:"popup"+(void 0!==e.className?" "+e.className:""),style:e.style},e.children):null));function a(e){return void 0!==e.children?r.createElement("div",{className:"popup-top"+(void 0!==e.className?" "+e.className:""),style:e.style},e.children):null}function o(e){return void 0!==e.children?r.createElement("div",{className:"popup-main"+(void 0!==e.className?" "+e.className:""),style:e.style},e.children):null}t.Ay=i},2907:function(e,t,n){"use strict";n.r(t),n.d(t,{useItemListInlineSlider:function(){return l}});var r=n(9471),i=n(1838),a=n(7664),o=n(5289),s=n(4876);function l(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[l,u,c,d,h,p,f]=(0,s.useItemList)(e,t),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,_]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null),[w,T]=(0,r.useState)(null);let C=null,k=null,A=!0,P={list:"items-list",listOuter:"items-list-outer list-inline list-slider"+(e.className?" "+e.className:"")};function x(){m.updateDataStateOnResize(l.length,c.loadedAllItems()),m.scrollToCurrentSlide(),(0,i.removeClassname)(n.current,"resizing"),C=null}function I(){m.nextSlide(),O(),!c.loadedAllItems()&&m.loadMoreItems()?(A=!0,c.loadItems(m.itemsFit())):m.scrollToCurrentSlide()}function M(){m.previousSlide(),O(),m.scrollToCurrentSlide()}function R(e){null!==m?(m.updateDataState(l.length,c.loadedAllItems(),!e),!c.loadedAllItems()&&m.loadItemsToFit()?c.loadItems(m.itemsFit()):(O(),A&&(A=!1,m.scrollToCurrentSlide()))):n.current&&g(new o.A(n.current,".item"))}function O(){m&&(y(m.hasNextSlide()),_(m.hasPreviousSlide()))}return(0,r.useEffect)((()=>{f(),R(!0)}),[l]),(0,r.useEffect)((()=>{R(!0)}),[m]),(0,r.useEffect)((()=>{null!==m?(clearTimeout(C),(0,i.addClassname)(n.current,"resizing"),m.updateDataStateOnResize(l.length,c.loadedAllItems()),m.scrollToCurrentSlide(),C=setTimeout(x,200)):R(!1)}),[E]),(0,r.useEffect)((()=>{clearTimeout(k),k=setTimeout((function(){O(),k=setTimeout((function(){k=null,R()}),50)}),150)}),[w]),[l,u,c,P,d,p,h,function(){S(new Date)},function(){T(new Date)},n,t,function(){return b?r.createElement("span",{className:"previous-slide"},r.createElement(a.CircleIconButton,{buttonShadow:!0,onClick:M},r.createElement("i",{className:"material-icons"},"keyboard_arrow_left"))):null},function(){return v?r.createElement("span",{className:"next-slide"},r.createElement(a.CircleIconButton,{buttonShadow:!0,onClick:I},r.createElement("i",{className:"material-icons"},"keyboard_arrow_right"))):null}]}},2954:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var o=void 0!==/a/g.flags,s=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},l=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},u=Object.is?Object.is:n(3354),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},d=Number.isNaN?Number.isNaN:n(9836);function h(e){return e.call.bind(e)}var p=h(Object.prototype.hasOwnProperty),f=h(Object.prototype.propertyIsEnumerable),m=h(Object.prototype.toString),g=n(6818).types,v=g.isAnyArrayBuffer,y=g.isArrayBufferView,b=g.isDate,_=g.isMap,E=g.isRegExp,S=g.isSet,w=g.isNativeError,T=g.isBoxedPrimitive,C=g.isNumberObject,k=g.isStringObject,A=g.isBooleanObject,P=g.isBigIntObject,x=g.isSymbolObject,I=g.isFloat32Array,M=g.isFloat64Array;function R(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function O(e){return Object.keys(e).filter(R).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function L(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function D(e,t,n,r){if(e===t)return 0!==e||!n||u(e,t);if(n){if("object"!==a(e))return"number"==typeof e&&d(e)&&d(t);if("object"!==a(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==a(e))return(null===t||"object"!==a(t))&&e==t;if(null===t||"object"!==a(t))return!1}var i,s,l,c,h=m(e);if(h!==m(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var p=O(e),f=O(t);return p.length===f.length&&F(e,t,n,r,1,p)}if("[object Object]"===h&&(!_(e)&&_(t)||!S(e)&&S(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(E(e)){if(!E(t)||(l=e,c=t,!(o?l.source===c.source&&l.flags===c.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(c))))return!1}else if(w(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(n||!I(e)&&!M(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===L(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var g=O(e),R=O(t);return g.length===R.length&&F(e,t,n,r,0,g)}if(S(e))return!(!S(t)||e.size!==t.size)&&F(e,t,n,r,2);if(_(e))return!(!_(t)||e.size!==t.size)&&F(e,t,n,r,3);if(v(e)){if(s=t,(i=e).byteLength!==s.byteLength||0!==L(new Uint8Array(i),new Uint8Array(s)))return!1}else if(T(e)&&!function(e,t){return C(e)?C(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):k(e)?k(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):A(e)?A(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):P(e)?P(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):x(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return F(e,t,n,r,0)}function N(e,t){return t.filter((function(t){return f(e,t)}))}function F(e,t,n,i,o,u){if(5===arguments.length){u=Object.keys(e);var d=Object.keys(t);if(u.length!==d.length)return!1}for(var h=0;h<u.length;h++)if(!p(t,u[h]))return!1;if(n&&5===arguments.length){var m=c(e);if(0!==m.length){var g=0;for(h=0;h<m.length;h++){var v=m[h];if(f(e,v)){if(!f(t,v))return!1;u.push(v),g++}else if(f(t,v))return!1}var y=c(t);if(m.length!==y.length&&N(t,y).length!==g)return!1}else{var b=c(t);if(0!==b.length&&0!==N(t,b).length)return!1}}if(0===u.length&&(0===o||1===o&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var _=i.val1.get(e);if(void 0!==_){var E=i.val2.get(t);if(void 0!==E)return _===E}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var S=function(e,t,n,i,o,u){var c=0;if(2===u){if(!function(e,t,n,r){for(var i=null,o=s(e),l=0;l<o.length;l++){var u=o[l];if("object"===a(u)&&null!==u)null===i&&(i=new Set),i.add(u);else if(!t.has(u)){if(n)return!1;if(!U(e,t,u))return!1;null===i&&(i=new Set),i.add(u)}}if(null!==i){for(var c=s(t),d=0;d<c.length;d++){var h=c[d];if("object"===a(h)&&null!==h){if(!j(i,h,n,r))return!1}else if(!n&&!e.has(h)&&!j(i,h,n,r))return!1}return 0===i.size}return!0}(e,t,n,o))return!1}else if(3===u){if(!function(e,t,n,i){for(var o=null,s=l(e),u=0;u<s.length;u++){var c=r(s[u],2),d=c[0],h=c[1];if("object"===a(d)&&null!==d)null===o&&(o=new Set),o.add(d);else{var p=t.get(d);if(void 0===p&&!t.has(d)||!D(h,p,n,i)){if(n)return!1;if(!q(e,t,d,h,i))return!1;null===o&&(o=new Set),o.add(d)}}}if(null!==o){for(var f=l(t),m=0;m<f.length;m++){var g=r(f[m],2),v=g[0],y=g[1];if("object"===a(v)&&null!==v){if(!V(o,e,v,y,n,i))return!1}else if(!(n||e.has(v)&&D(e.get(v),y,!1,i)||V(o,e,v,y,!1,i)))return!1}return 0===o.size}return!0}(e,t,n,o))return!1}else if(1===u)for(;c<e.length;c++){if(!p(e,c)){if(p(t,c))return!1;for(var d=Object.keys(e);c<d.length;c++){var h=d[c];if(!p(t,h)||!D(e[h],t[h],n,o))return!1}return d.length===Object.keys(t).length}if(!p(t,c)||!D(e[c],t[c],n,o))return!1}for(c=0;c<i.length;c++){var f=i[c];if(!D(e[f],t[f],n,o))return!1}return!0}(e,t,n,u,i,o);return i.val1.delete(e),i.val2.delete(t),S}function j(e,t,n,r){for(var i=s(e),a=0;a<i.length;a++){var o=i[a];if(D(t,o,n,r))return e.delete(o),!0}return!1}function B(e){switch(a(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(d(e))return!1}return!0}function U(e,t,n){var r=B(n);return null!=r?r:t.has(r)&&!e.has(r)}function q(e,t,n,r,i){var a=B(n);if(null!=a)return a;var o=t.get(a);return!(void 0===o&&!t.has(a)||!D(r,o,!1,i))&&!e.has(a)&&D(r,o,!1,i)}function V(e,t,n,r,i,a){for(var o=s(e),l=0;l<o.length;l++){var u=o[l];if(D(n,u,i,a)&&D(r,t.get(u),i,a))return e.delete(u),!0}return!1}e.exports={isDeepEqual:function(e,t){return D(e,t,!1)},isDeepStrictEqual:function(e,t){return D(e,t,!0)}}},2985:function(e,t,n){"use strict";n.d(t,{C:function(){return c},z:function(){return d}});var r=n(9471),i=n(9834),a=n(5465),o=n(5320),s=n(4463),l=n(1936);const u=e=>{let{children:t}=e;return r.createElement(o.LayoutProvider,null,r.createElement(a.ThemeProvider,null,r.createElement(s.UserProvider,null,t)))};function c(e,t){const n=document.getElementById("app-header"),c=document.getElementById("app-sidebar"),d=e?document.getElementById(e):void 0;d&&t?i.render(r.createElement(u,null,n?i.createPortal(r.createElement(l.PageHeader,null),n):null,c?i.createPortal(r.createElement(l.PageSidebar,null),c):null,r.createElement(t,null)),d):n&&c?i.render(r.createElement(u,null,i.createPortal(r.createElement(l.PageHeader,null),n),r.createElement(l.PageSidebar,null)),c):n?i.render(r.createElement(o.LayoutProvider,null,r.createElement(a.ThemeProvider,null,r.createElement(s.UserProvider,null,r.createElement(l.PageHeader,null)))),c):c&&i.render(r.createElement(u,null,r.createElement(l.PageSidebar,null)),c)}function d(e,t){const n=e?document.getElementById(e):void 0;n&&t&&i.render(r.createElement(t,null),n)}},2999:function(e,t,n){"use strict";var r=n(237),i=n(8974);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=r.A.getComponent("MenuItem"),l=r.A.getComponent("Component"),u=function(e){function t(t,n){return n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}a(t,e);var n=t.prototype;return n.handleClick=function(){var t=this.options_;i.log("Changing quality to:",t.label),e.prototype.handleClick.call(this);for(var n=this.player().qualityLevels(),r=0;r<n.length;r++)t.index==n.length||t.index==r?n[r].enabled=!0:n[r].enabled=!1},n.update=function(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==e)},t}(s);l.registerComponent("SourceMenuItem",u);var c=r.A.getComponent("MenuButton"),d=function(e){function t(t,n){var i;i=e.call(this,t,n)||this,c.apply(o(i),arguments);var a=i.player().qualityLevels();if(n&&n.default)if("low"==n.default)for(var s=0;s<a.length;s++)a[s].enabled=0==s;else if(n.default="high")for(s=0;s<a.length;s++)a[s].enabled=s==a.length-1;return i.player().qualityLevels().on(["change","addqualitylevel"],r.A.bind(o(i),i.update)),i}a(t,e);var n=t.prototype;return n.createEl=function(){return r.A.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},n.buildCSSClass=function(){return c.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},n.update=function(){return c.prototype.update.call(this)},n.createItems=function(){for(var e=[],t=this.player().qualityLevels(),n=[],r=0;r<t.length;r++){var i=t.length-(r+1),a=i===t.selectedIndex,o=""+i,s=i;t[i].height?(o=t[i].height+"p",s=parseInt(t[i].height,10)):t[i].bitrate&&(o=Math.floor(t[i].bitrate/1e3)+" kbps",s=parseInt(t[i].bitrate,10)),n.indexOf(o)>=0||(n.push(o),e.push(new u(this.player_,{label:o,index:i,selected:a,sortVal:s})))}return t.length>1&&e.push(new u(this.player_,{label:"Auto",index:t.length,selected:!1,sortVal:99999})),e.sort((function(e,t){return e.options_.sortVal<t.options_.sortVal?1:e.options_.sortVal>t.options_.sortVal?-1:0})),e},t}(c),h={},p=function(e){var t=this;this.ready((function(){!function(e){if(e.addClass("vjs-http-source-selector"),i.log("videojs-http-source-selector initialized!"),i.log("player.techName_:"+e.techName_),"Html5"!=e.techName_)return!1;e.on(["loadedmetadata"],(function(t){if(e.qualityLevels(),r.A.log("loadmetadata event"),"undefined"==e.videojs_http_source_selector_initialized||1==e.videojs_http_source_selector_initialized)i.log("player.videojs_http_source_selector_initialized == true");else{i.log("player.videojs_http_source_selector_initialized == false"),e.videojs_http_source_selector_initialized=!0;var n=e.controlBar,a=n.getChild("fullscreenToggle").el();n.el().insertBefore(n.addChild("SourceMenuButton").el(),a)}}))}(t,r.A.mergeOptions(h,e))})),r.A.registerComponent("SourceMenuButton",d),r.A.registerComponent("SourceMenuItem",u)};(r.A.registerPlugin||r.A.plugin)("httpSourceSelector",p),p.VERSION="1.1.6"},3063:function(e,t,n){"use strict";e.exports=n(1095)},3095:function(e){"use strict";e.exports=Object},3114:function(e,t,n){"use strict";e.exports=n(6881)},3129:function(e,t,n){"use strict";var r,i=n(7118),a=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),o=function(){return a.createElement(i.Icon,{size:16},a.createElement("path",{d:"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\n            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\n            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\n            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};t.SelectionMode=void 0,(r=t.SelectionMode||(t.SelectionMode={})).Hand="Hand",r.Text="Text";var l=function(){return a.createElement(i.Icon,{size:16},a.createElement("path",{d:"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\n            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\n            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\n            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z"}))},u=function(e){var n=e.children,r=e.mode,s=e.onClick,u=a.useContext(i.LocalizationContext).l10n,c="",d=a.createElement(l,null);switch(r){case t.SelectionMode.Hand:c=u&&u.selectionMode?u.selectionMode.handTool:"Hand tool",d=a.createElement(o,null);break;case t.SelectionMode.Text:default:c=u&&u.selectionMode?u.selectionMode.textSelectionTool:"Text selection tool",d=a.createElement(l,null)}return n({icon:d,label:c,onClick:s})},c={left:0,top:8},d=function(e){var n=e.isSelected,r=e.mode,o=e.onClick,s="";switch(r){case t.SelectionMode.Hand:s="selection-mode__hand-button";break;case t.SelectionMode.Text:default:s="selection-mode__text-button"}return a.createElement(u,{mode:r,onClick:o},(function(e){return a.createElement(i.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:i.Position.BottomCenter,target:a.createElement(i.MinimalButton,{ariaLabel:e.label,isSelected:n,testId:s,onClick:e.onClick},e.icon),content:function(){return e.label},offset:c})}))},h=function(e){var t=e.children,n=e.mode,r=e.store,i=n===r.get("selectionMode");return(t||function(e){return a.createElement(d,{isSelected:i,mode:e.mode,onClick:e.onClick})})({isSelected:i,mode:n,onClick:function(){return r.update("selectionMode",n)}})},p=function(e){var n=e.isSelected,r=e.mode,o=e.onClick,s="";switch(r){case t.SelectionMode.Hand:s="selection-mode__hand-menu";break;case t.SelectionMode.Text:default:s="selection-mode__text-menu"}return a.createElement(u,{mode:r,onClick:o},(function(e){return a.createElement(i.MenuItem,{checked:n,icon:e.icon,testId:s,onClick:e.onClick},e.label)}))},f=function(e){var n=e.store,r=a.useRef(null),i=a.useState(t.SelectionMode.Text),o=i[0],s=i[1],l=a.useRef({top:0,left:0,x:0,y:0}),u=function(e){var t=r.current;t&&(t.scrollTop=l.current.top-(e.clientY-l.current.y),t.scrollLeft=l.current.left-(e.clientX-l.current.x))},c=function(){var e=r.current;e&&(e.classList.add("rpv-selection-mode__grab"),e.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c))},d=function(e){var n=r.current;n&&o!==t.SelectionMode.Text&&(n.classList.remove("rpv-selection-mode__grab"),n.classList.add("rpv-selection-mode__grabbing"),e.preventDefault(),e.stopPropagation(),l.current={left:n.scrollLeft,top:n.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",u),document.addEventListener("mouseup",c))},h=function(e){r.current=e()},p=function(e){s(e)};return a.useEffect((function(){var e=r.current;if(e)return o===t.SelectionMode.Hand?e.classList.add("rpv-selection-mode__grab"):e.classList.remove("rpv-selection-mode__grab"),e.addEventListener("mousedown",d),function(){e.removeEventListener("mousedown",d)}}),[o]),a.useEffect((function(){return n.subscribe("getPagesContainer",h),n.subscribe("selectionMode",p),function(){n.unsubscribe("getPagesContainer",h),n.unsubscribe("selectionMode",p)}}),[]),a.createElement(a.Fragment,null)};t.HandToolIcon=o,t.TextSelectionIcon=l,t.selectionModePlugin=function(e){var n=a.useMemo((function(){return i.createStore()}),[]),r=function(e){return a.createElement(h,s({},e,{store:n}))};return{install:function(r){n.update("selectionMode",e&&e.selectionMode?e.selectionMode:t.SelectionMode.Text),n.update("getPagesContainer",r.getPagesContainer)},renderViewer:function(e){var t=e.slot;return t.subSlot&&t.subSlot.children&&(t.subSlot.children=a.createElement(a.Fragment,null,a.createElement(f,{store:n}),t.subSlot.children)),t},SwitchSelectionMode:r,SwitchSelectionModeButton:function(e){return a.createElement(r,{mode:e.mode},(function(e){return a.createElement(d,{isSelected:e.isSelected,mode:e.mode,onClick:function(){e.onClick()}})}))},SwitchSelectionModeMenuItem:function(e){return a.createElement(r,{mode:e.mode},(function(t){return a.createElement(p,{isSelected:t.isSelected,mode:t.mode,onClick:function(){t.onClick(),e.onClick()}})}))}}}},3135:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(9471),i=n(8713),a=n.n(i),o=n(2828);function s(e){const[t,n]=(0,r.useState)(e.active);return r.createElement("div",{className:"mi-filters-toggle"},r.createElement("button",{className:t?"active":"","aria-label":"Filter",onClick:function(){n(!t),void 0!==e.onClick&&e.onClick()}},r.createElement(o.Z,{type:"filter_list"}),r.createElement("span",{className:"filter-button-label"},r.createElement("span",{className:"filter-button-label-text"},"FILTERS"))))}s.propTypes={onClick:a().func,active:a().bool},s.defaultProps={active:!1}},3212:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(9471),i=n(5338),a=n(1470),o=n(8974);function s(e){const{enabledSidebar:t}=(0,i.useLayout)();return o.log("props page main",e),r.createElement("div",{className:"page-main"},e.children||null,t?r.createElement(a.B,null):null)}},3270:function(e,t,n){"use strict";n.r(t),n.d(t,{useLayout:function(){return a}});var r=n(9471),i=n(8790);const a=()=>(0,r.useContext)(i.LayoutContext)},3289:function(e){"use strict";e.exports=Math.min},3320:function(e,t,n){"use strict";e.exports=n(3973)},3337:function(e,t,n){"use strict";n.r(t),n.d(t,{UpNextLoaderView:function(){return i}});var r=n(1838);function i(e){var t,n=function(){window.location.href=e.url},i=function(){(0,r.removeClassname)(this.vjsPlayerElem,"vjs-mediacms-up-next-hidden")}.bind(this),a=function(){this.cancelTimer(),(0,r.addClassname)(this.vjsPlayerElem,"vjs-mediacms-up-next-hidden")}.bind(this),o={nextMediaPoster:document.createElement("div"),wrapper:document.createElement("div"),inner:document.createElement("div"),innerContent:document.createElement("div"),upNextLabel:document.createElement("div"),nextMediaTitle:document.createElement("div"),nextMediaAuthor:document.createElement("div"),cancelNext:document.createElement("div"),cancelNextButton:document.createElement("button"),goNext:document.createElement("div")};o.nextMediaPoster.setAttribute("class","next-media-poster"),o.wrapper.setAttribute("class","up-next-loader"),o.inner.setAttribute("class","up-next-loader-inner"),o.goNext.setAttribute("class","go-next"),o.cancelNext.setAttribute("class","up-next-cancel"),o.upNextLabel.setAttribute("class","up-next-label"),o.nextMediaTitle.setAttribute("class","next-media-title"),o.nextMediaAuthor.setAttribute("class","next-media-author"),o.upNextLabel.innerHTML=(0,r.translateString)("Up Next"),o.nextMediaTitle.innerHTML=e.title,o.nextMediaAuthor.innerHTML=e.author_name,o.goNext.innerHTML='<a href="'+e.url+'"><svg class="radial-timer"><circle r="30" cx="32" cy="32"></circle><circle r="25" cx="28" cy="28"></circle></svg><span></span><i class="material-icons">skip_next</i></a>',o.cancelNextButton.innerHTML="CANCEL",o.cancelNextButton.addEventListener("click",a),o.nextMediaPoster.style.backgroundImage="url('"+e.thumbnail_url+"')",o.cancelNext.appendChild(o.cancelNextButton),o.innerContent.appendChild(o.upNextLabel),o.innerContent.appendChild(o.nextMediaTitle),o.innerContent.appendChild(o.nextMediaAuthor),o.innerContent.appendChild(o.goNext),o.innerContent.appendChild(o.cancelNext),o.inner.appendChild(o.innerContent),o.wrapper.appendChild(o.nextMediaPoster),o.wrapper.appendChild(o.inner);var s=!1;function l(){var e=this.vjsPlayerElem.getBoundingClientRect();window.pageYOffset||document.documentElement.scrollTop,0>=this.vjsPlayerElem.offsetHeight-56+e.top?(s||this.cancelTimer(!0),s=!0):(s&&this.startTimer(),s=!1)}l=l.bind(this),this.vjsPlayerElem=null,this.html=function(){return o.wrapper},this.startTimer=function(){i(),t=setTimeout(n,1e4),this.vjsPlayerElem&&(0,r.removeClassname)(this.vjsPlayerElem,"vjs-mediacms-canceled-next"),window.addEventListener("scroll",l)},this.cancelTimer=function(e){(e=!!e)||window.removeEventListener("scroll",l),clearTimeout(t),t=null,this.vjsPlayerElem&&(0,r.addClassname)(this.vjsPlayerElem,"vjs-mediacms-canceled-next")},this.setVideoJsPlayerElem=function(e){e&&(this.vjsPlayerElem=e,(0,r.addClassname)(this.vjsPlayerElem,"vjs-mediacms-has-up-next-view"))},this.showTimerView=function(e){(e=!!e)?this.startTimer():i()},this.hideTimerView=function(){a()}}},3354:function(e,t,n){"use strict";var r=n(5935),i=n(2756),a=n(1474),o=n(1723),s=n(2365),l=i(o(),Object);r(l,{getPolyfill:o,implementation:a,shim:s}),e.exports=l},3369:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\n            L23.541,5.627"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\n            L0.535,18.373"}))},s=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\n            M23.5,23.5\n            l-5.929-5.929"}))},l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},u={keyword:"",regExp:new RegExp(" "),wholeWords:!1},c=function(e){return{left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),height:"".concat(e.height,"%"),width:"".concat(e.width,"%")}},d=function(e){var t=e.index,n=e.area,a=e.onHighlightKeyword,o=i.useRef();return r.useIsomorphicLayoutEffect((function(){var e=o.current;a&&e&&a({highlightEle:e,keyword:n.keyword})}),[]),i.createElement("div",{className:"rpv-search__highlight","data-index":t,ref:o,style:c(n),title:n.keywordStr.trim()})},h=function(e){var t=e.parentNode;t&&t.removeChild(e)},p=function(e){var t=e.parentNode;if(t){var n=document.createRange();n.selectNodeContents(e),function(e,t){h(e);var n=t.parentNode;n&&n.insertBefore(e,t),h(t)}(n.extractContents(),e),t.normalize()}},f=function(e,t){return e.top<t.top?-1:e.top>t.top?1:e.left<t.left?-1:e.left>t.left?1:0},m=function(e){var t=e.numPages,n=e.pageIndex,a=e.renderHighlights,o=e.store,s=e.onHighlightKeyword,l=i.useRef(),h=i.useCallback((function(e){return i.createElement(i.Fragment,null,e.highlightAreas.map((function(e,t){return i.createElement(d,{index:t,key:t,area:e,onHighlightKeyword:s})})))}),[]),m=a||h,g=i.useState(o.get("matchPosition")),v=g[0],y=g[1],b=i.useState(o.get("keyword")||[u]),_=b[0],E=b[1],S=i.useState({pageIndex:n,scale:1,status:r.LayerRenderStatus.PreRender}),w=S[0],T=S[1],C=i.useRef(null),k=i.useRef([]),A=i.useState([]),P=A[0],x=A[1],I=function(){return!0},M=i.useCallback((function(){return o.get("targetPageFilter")||I}),[o.get("targetPageFilter")]),R=function(e){e&&e.length>0&&E(e)},O=function(e){return y(e)},L=function(e){if(e.has(n)){var t=e.get(n);t&&T({ele:t.ele,pageIndex:n,scale:t.scale,status:t.status})}},D=function(){return 0===_.length||1===_.length&&""===_[0].keyword.trim()};return i.useEffect((function(){if(!D()&&w.status===r.LayerRenderStatus.DidRender&&!k.current.length){var e=w.ele,t=[].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")).map((function(e){return e.textContent})).reduce((function(e,t,n){return e.concat(t.split("").map((function(e,t){return{char:e,charIndexInSpan:t,spanIndex:n}})))}),[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);k.current=t}}),[_,w.status]),i.useEffect((function(){if(!D()&&w.ele&&w.status===r.LayerRenderStatus.DidRender&&M()({pageIndex:n,numPages:t})){var e=function(e){var r=k.current;if(0===r.length)return[];var i=[],a=[].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")),o=r.map((function(e){return e.char})).join("");return _.forEach((function(s){var l=s.keyword;if(l.trim()){for(var u,c=-1===s.regExp.flags.indexOf("g")?new RegExp(s.regExp,"".concat(s.regExp.flags,"g")):s.regExp,d=[];null!==(u=c.exec(o));)d.push({keyword:c,startIndex:u.index,endIndex:c.lastIndex});d.map((function(e){return{keyword:e.keyword,indexes:r.slice(e.startIndex,e.endIndex)}})).forEach((function(r){var o=r.indexes.reduce((function(e,t){return e[t.spanIndex]=(e[t.spanIndex]||[]).concat([t]),e}),{});Object.values(o).forEach((function(o){if(1!==o.length||""!==o[0].char.trim()){var u=s.wholeWords?o.slice(1,-1):o,c=function(e,r,i,a,o){var s=document.createRange(),l=a.firstChild;if(!l||l.nodeType!==Node.TEXT_NODE)return null;var u=l.textContent.length,c=o[0].charIndexInSpan,d=1===o.length?c:o[o.length-1].charIndexInSpan;if(c>u||d+1>u)return null;s.setStart(l,c),s.setEnd(l,d+1);var h=document.createElement("span");s.surroundContents(h);var f=h.getBoundingClientRect(),m=i.getBoundingClientRect(),g=m.height,v=m.width,y=100*(f.left-m.left)/v,b=100*(f.top-m.top)/g,_=100*f.height/g,E=100*f.width/v;return p(h),{keyword:r,keywordStr:e,numPages:t,pageIndex:n,left:y,top:b,height:_,width:E,pageHeight:g,pageWidth:v}}(l,r.keyword,e,a[u[0].spanIndex],u);c&&i.push(c)}}))}))}})),i.sort(f)}(w.ele);x(e)}}),[_,v,w.status,k.current]),i.useEffect((function(){D()&&w.ele&&w.status===r.LayerRenderStatus.DidRender&&x([])}),[_,w.status]),i.useEffect((function(){if(0!==P.length){var e=l.current;if(v.pageIndex===n&&e&&w.status===r.LayerRenderStatus.DidRender){var t=e.querySelector('.rpv-search__highlight[data-index="'.concat(v.matchIndex,'"]'));if(t){var i=function(e,t){for(var n=e.offsetTop,r=e.offsetLeft,i=e.parentElement;i&&i!==t;)n+=i.offsetTop,r+=i.offsetLeft,i=i.parentElement;return{left:r,top:n}}(t,e),a=i.left,s=i.top,u=o.get("jumpToDestination");u&&(u({pageIndex:n,bottomOffset:(e.getBoundingClientRect().height-s)/w.scale,leftOffset:a/w.scale,scaleTo:w.scale}),C.current&&C.current.classList.remove("rpv-search__highlight--current"),C.current=t,t.classList.add("rpv-search__highlight--current"))}}}}),[P,v]),i.useEffect((function(){return o.subscribe("keyword",R),o.subscribe("matchPosition",O),o.subscribe("renderStatus",L),function(){o.unsubscribe("keyword",R),o.unsubscribe("matchPosition",O),o.unsubscribe("renderStatus",L)}}),[]),i.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(n),ref:l},m({getCssProperties:c,highlightAreas:P}))},g=function(e){var t,n=e.wholeWords?" ".concat(e.keyword," "):e.keyword,r=e.matchCase?"g":"gi";return{keyword:e.keyword,regExp:new RegExp((t=n,t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),r),wholeWords:e.wholeWords||!1}},v=function(e,t,n){return e instanceof RegExp?{keyword:e.source,regExp:e,wholeWords:n||!1}:"string"==typeof e?""===e?u:g({keyword:e,matchCase:t||!1,wholeWords:n||!1}):(void 0!==t&&(e.matchCase=t),void 0!==n&&(e.wholeWords=n),g(e))},y=function(e){var t,n=e.get("initialKeyword"),a=i.useMemo((function(){if(n&&1===n.length){var e=v(n[0]);return{matchCase:-1===e.regExp.flags.indexOf("i"),wholeWords:e.wholeWords}}return{matchCase:!1,wholeWords:!1}}),[]),o=function(e){var t=i.useRef(e.get("doc")),n=function(e){t.current=e};return i.useEffect((function(){return e.subscribe("doc",n),function(){e.unsubscribe("doc",n)}}),[]),t}(e),s=i.useState(n),l=s[0],c=s[1],d=i.useState([]),h=d[0],p=d[1],f=i.useState(0),m=f[0],g=f[1],y=i.useState(a.matchCase),b=y[0],_=y[1],E=i.useRef([]),S=i.useState(a.wholeWords),w=S[0],T=S[1],C=function(){return!0},k=i.useCallback((function(){return e.get("targetPageFilter")||C}),[e.get("targetPageFilter")]),A=function(e){var t=h.length;if(0===l.length||0===t)return null;var n=e===t+1?1:Math.max(1,Math.min(t,e));return g(n),x(h[n-1])},P=function(e){return c(""===e?[]:[e])},x=function(t){var n=e.get("jumpToPage");return n&&n(t.pageIndex),e.update("matchPosition",{matchIndex:t.matchIndex,pageIndex:t.pageIndex}),t},I=function(t,n,i){var a=o.current;if(!a)return Promise.resolve([]);var s=a.numPages,l=t.map((function(e){return v(e,n,i)}));return e.update("keyword",l),g(0),p([]),new Promise((function(e,t){var n=0===E.current.length?function(){var e=o.current;if(!e)return Promise.resolve([]);var t=Array(e.numPages).fill(0).map((function(t,n){return r.getPage(e,n).then((function(e){return e.getTextContent()})).then((function(e){var t=e.items.map((function(e){return e.str||""})).join("");return Promise.resolve({pageContent:t,pageIndex:n})}))}));return Promise.all(t).then((function(e){return e.sort((function(e,t){return e.pageIndex-t.pageIndex})),Promise.resolve(e.map((function(e){return e.pageContent})))}))}().then((function(e){return E.current=e,Promise.resolve(e)})):Promise.resolve(E.current);n.then((function(t){var n=[];t.forEach((function(e,t){k()({pageIndex:t,numPages:s})&&l.forEach((function(r){for(var i,a=0;null!==(i=r.regExp.exec(e));)n.push({keyword:r.regExp,matchIndex:a,pageIndex:t,pageText:e,startIndex:i.index,endIndex:r.regExp.lastIndex}),a++}))})),p(n),n.length>0&&(g(1),x(n[0])),e(n)}))}))};return i.useEffect((function(){E.current=[]}),[o.current]),{clearKeyword:function(){e.update("keyword",[u]),P(""),g(0),p([]),_(!1),T(!1)},changeMatchCase:function(e){_(e),l.length>0&&I(l,e,w)},changeWholeWords:function(e){T(e),l.length>0&&I(l,b,e)},currentMatch:m,jumpToMatch:A,jumpToNextMatch:function(){return A(m+1)},jumpToPreviousMatch:function(){return A(m-1)},keywords:l,matchCase:b,numberOfMatches:h.length,wholeWords:w,search:function(){return I(l,b,w)},searchFor:I,setKeywords:c,keyword:0===l.length?"":(t=l[0],t instanceof RegExp?t.source:"string"==typeof t?t:t.keyword),setKeyword:P,setTargetPages:function(t){e.update("targetPageFilter",t)}}},b=function(e){var t=e.children,n=e.store,r=y(n),a=i.useState(!1),o=a[0],s=a[1],u=function(e){return s(!0)};return i.useEffect((function(){return n.subscribe("doc",u),function(){n.unsubscribe("doc",u)}}),[]),t(l(l({},r),{isDocumentLoaded:o}))},_=function(e){var t=e.containerRef,n=e.store,a=i.useRef(!1),o=function(){a.current=!0},s=function(){a.current=!1},l=function(e){var i=t.current;i&&(e.shiftKey||e.altKey||"f"!==e.key||(r.isMac()?e.metaKey&&!e.ctrlKey:e.ctrlKey)&&(a.current||document.activeElement&&i.contains(document.activeElement))&&(e.preventDefault(),n.update("areShortcutsPressed",!0)))};return i.useEffect((function(){var e=t.current;if(e)return document.addEventListener("keydown",l),e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",s),function(){document.removeEventListener("keydown",l),e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",s)}}),[t.current]),i.createElement(i.Fragment,null)},E={left:0,top:8},S=function(e){var t=e.store,n=e.onToggle,s=i.useContext(r.LocalizationContext).l10n,l=i.useContext(r.ThemeContext).direction,u=i.useState(!1),c=u[0],d=u[1],h=i.useState(!1),p=h[0],f=h[1],m=l===r.TextDirection.RightToLeft,g=y(t),v=g.clearKeyword,b=g.changeMatchCase,_=g.changeWholeWords,S=g.currentMatch,w=g.jumpToNextMatch,T=g.jumpToPreviousMatch,C=g.keyword,k=g.matchCase,A=g.numberOfMatches,P=g.wholeWords,x=g.search,I=g.setKeyword,M=function(e){d(!0),x().then((function(t){d(!1),f(!0),e&&e()}))};i.useEffect((function(){var e=t.get("initialKeyword");e&&1===e.length&&C&&M((function(){t.update("initialKeyword",[])}))}),[]);var R=s&&s.search?s.search.enterToSearch:"Enter to search",O=s&&s.search?s.search.previousMatch:"Previous match",L=s&&s.search?s.search.nextMatch:"Next match",D=s&&s.search?s.search.close:"Close";return i.createElement("div",{className:"rpv-search__popover"},i.createElement("div",{className:"rpv-search__popover-input-counter"},i.createElement(r.TextBox,{ariaLabel:R,autoFocus:!0,placeholder:R,type:"text",value:C,onChange:function(e){f(!1),I(e)},onKeyDown:function(e){"Enter"===e.key&&C&&(p?w():M())}}),i.createElement("div",{className:r.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!m,"rpv-search__popover-counter--rtl":m})},c&&i.createElement(r.Spinner,{testId:"search__popover-searching",size:"1rem"}),!c&&i.createElement("span",{"data-testid":"search__popover-num-matches"},S,"/",A))),i.createElement("label",{className:"rpv-search__popover-label"},i.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:k,type:"checkbox",onChange:function(e){f(!1),b(e.target.checked)}})," ",s&&s.search?s.search.matchCase:"Match case"),i.createElement("label",{className:"rpv-search__popover-label"},i.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:P,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(e){f(!1),_(e.target.checked)}})," ",s&&s.search?s.search.wholeWords:"Whole words"),i.createElement("div",{className:"rpv-search__popover-footer"},i.createElement("div",{className:"rpv-search__popover-footer-item"},i.createElement(r.Tooltip,{ariaControlsSuffix:"search-previous-match",position:m?r.Position.BottomRight:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:O,isDisabled:S<=1,onClick:T},i.createElement(o,null)),content:function(){return O},offset:E})),i.createElement("div",{className:"rpv-search__popover-footer-item"},i.createElement(r.Tooltip,{ariaControlsSuffix:"search-next-match",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:L,isDisabled:S>A-1,onClick:w},i.createElement(a,null)),content:function(){return L},offset:E})),i.createElement("div",{className:r.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!m,"rpv-search__popover-footer-button--rtl":m})},i.createElement(r.Button,{onClick:function(){n(),v()}},D))))},w=function(e){var t=e.children,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,o=a&&a.search?a.search.search:"Search";return t({icon:i.createElement(s,null),label:o,onClick:n})},T={left:0,top:8},C=function(e){var t=e.enableShortcuts,n=e.store,a=e.onClick,o=t?r.isMac()?"Meta+F":"Ctrl+F":"",s=function(e){e&&a()};return i.useEffect((function(){return n.subscribe("areShortcutsPressed",s),function(){n.unsubscribe("areShortcutsPressed",s)}}),[]),i.createElement(w,{onClick:a},(function(e){return i.createElement(r.Tooltip,{ariaControlsSuffix:"search-popover",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:o,ariaLabel:e.label,testId:"search__popover-button",onClick:a},e.icon),content:function(){return e.label},offset:T})}))},k={left:0,top:8},A=function(e){var t=e.children,n=e.enableShortcuts,a=e.store,o=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft?r.Position.BottomRight:r.Position.BottomLeft,s=t||function(e){return i.createElement(C,l({enableShortcuts:n,store:a},e))};return i.createElement(r.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:o,target:function(e){return s({onClick:e})},content:function(e){return i.createElement(S,{store:a,onToggle:e})},offset:k,closeOnClickOutside:!1,closeOnEscape:!0})},P=function(e){return Array.isArray(e)?e.map((function(e){return v(e)})):[v(e)]};t.NextIcon=a,t.PreviousIcon=o,t.SearchIcon=s,t.searchPlugin=function(e){var t=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},e)}),[]),n=i.useMemo((function(){return r.createStore({initialKeyword:e&&e.keyword?Array.isArray(e.keyword)?e.keyword:[e.keyword]:[],keyword:e&&e.keyword?P(e.keyword):[u],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})}),[]),a=y(n),o=a.clearKeyword,s=a.jumpToMatch,c=a.jumpToNextMatch,d=a.jumpToPreviousMatch,h=a.searchFor,p=a.setKeywords,f=a.setTargetPages,g=function(e){return i.createElement(A,l({enableShortcuts:t.enableShortcuts},e,{store:n}))};return{install:function(t){var r=e&&e.keyword?Array.isArray(e.keyword)?e.keyword:[e.keyword]:[],i=e&&e.keyword?P(e.keyword):[u];n.update("initialKeyword",r),n.update("jumpToDestination",t.jumpToDestination),n.update("jumpToPage",t.jumpToPage),n.update("keyword",i)},renderPageLayer:function(r){return i.createElement(m,{key:r.pageIndex,numPages:r.doc.numPages,pageIndex:r.pageIndex,renderHighlights:null==e?void 0:e.renderHighlights,store:n,onHighlightKeyword:t.onHighlightKeyword})},renderViewer:function(e){var r=e.slot;return r.subSlot&&(r.subSlot.children=i.createElement(i.Fragment,null,t.enableShortcuts&&i.createElement(_,{containerRef:e.containerRef,store:n}),r.subSlot.children)),r},uninstall:function(e){var t=n.get("renderStatus");t&&t.clear()},onDocumentLoad:function(e){n.update("doc",e.doc)},onTextLayerRender:function(e){var t=n.get("renderStatus");t&&(t=t.set(e.pageIndex,e),n.update("renderStatus",t))},Search:function(e){return i.createElement(b,l({},e,{store:n}))},ShowSearchPopover:g,ShowSearchPopoverButton:function(){return i.createElement(g,null,(function(e){return i.createElement(C,l({enableShortcuts:t.enableShortcuts,store:n},e))}))},clearHighlights:function(){o()},highlight:function(e){var t=Array.isArray(e)?e:[e];return p(t),h(t)},jumpToMatch:s,jumpToNextMatch:c,jumpToPreviousMatch:d,setTargetPages:f}}},3407:function(e){var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(n=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:r.getUint32(0)*t+r.getUint32(4)},MAX_UINT32:t}},3496:function(e,t,n){"use strict";n.r(t),n.d(t,{MemberConsumer:function(){return o},MemberContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).member),o=a.Consumer},3534:function(e,t,n){"use strict";var r=n(9383),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},E=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var C=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case a:l=!0}}if(l)return o=o(l=e),e=""===r?"."+k(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),A(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+k(s=e[u],u);l+=A(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,n,c=r+k(s,u++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function x(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function M(){var e=I.current;if(null===e)throw Error(p(321));return e}var R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var a=r({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];a.children=u}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="17.0.2"},3537:function(e,t,n){"use strict";n.r(t),n.d(t,{HeaderConsumer:function(){return h},HeaderContext:function(){return d}});var r=n(9471),i=n(3997),a=n(1838);const o=(0,i.$)(window.MediaCMS),s=o.url,l=o.theme,u=o.member,c=l.switch.enabled&&"header"===l.switch.position,d=(0,r.createContext)({hasThemeSwitcher:c,popupNavItems:{top:function(){const e=[];return u.is.anonymous||(u.can.addMedia&&(e.push({link:s.user.addMedia,icon:"video_call",text:(0,a.translateString)("Upload media"),itemAttr:{className:"visible-only-in-small"}}),u.pages.media&&e.push({link:u.pages.media,icon:"video_library",text:(0,a.translateString)("My media")})),e.push({link:s.signout,icon:"exit_to_app",text:(0,a.translateString)("Sign out")})),e}(),middle:function(){const e=[];return c&&e.push({itemType:"open-subpage",icon:"brightness_4",iconPos:"left",text:"Switch theme",buttonAttr:{className:"change-page","data-page-id":"switch-theme"}}),u.is.anonymous?(u.can.login&&e.push({itemType:"link",icon:"login",iconPos:"left",text:(0,a.translateString)("Sign in"),link:s.signin,linkAttr:{className:c?"visible-only-in-small":"visible-only-in-extra-small"}}),u.can.register&&e.push({itemType:"link",icon:"person_add",iconPos:"left",text:(0,a.translateString)("Register"),link:s.register,linkAttr:{className:c?"visible-only-in-small":"visible-only-in-extra-small"}})):(e.push({link:s.user.editProfile,icon:"brush",text:(0,a.translateString)("Edit profile")}),u.can.changePassword&&e.push({link:s.changePassword,icon:"lock",text:(0,a.translateString)("Change password")})),e}(),bottom:function(){const e=[];return u.is.admin&&e.push({link:s.admin,icon:"admin_panel_settings",text:"MediaCMS administration"}),e}()}}),h=d.Consumer},3615:function(e,t,n){"use strict";var r=n(1385),i=n(8974);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e){if("object"!==a(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(i)?i:String(i)),r)}var i}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var l,u,c=n(9852).codes,d=c.ERR_AMBIGUOUS_ARGUMENT,h=c.ERR_INVALID_ARG_TYPE,p=c.ERR_INVALID_ARG_VALUE,f=c.ERR_INVALID_RETURN_VALUE,m=c.ERR_MISSING_ARGS,g=n(2763),v=n(6818).inspect,y=n(6818).types,b=y.isPromise,_=y.isRegExp,E=n(8267)(),S=n(1723)(),w=n(2264)("RegExp.prototype.test");function T(){var e=n(2954);l=e.isDeepEqual,u=e.isDeepStrictEqual}new Map;var C=!1,k=e.exports=I,A={};function P(e){if(e.message instanceof Error)throw e.message;throw new g(e)}function x(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var a=new g({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw a.generatedMessage=i,a}}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];x.apply(void 0,[I,t.length].concat(t))}k.fail=function e(t,n,a,o,s){var l,u=arguments.length;if(0===u?l="Failed":1===u?(a=t,t=void 0):(!1===C&&(C=!0,(r.emitWarning?r.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(o="!=")),a instanceof Error)throw a;var c={actual:t,expected:n,operator:void 0===o?"fail":o,stackStartFn:s||e};void 0!==a&&(c.message=a);var d=new g(c);throw l&&(d.message=l,d.generatedMessage=!0),d},k.AssertionError=g,k.ok=I,k.equal=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");t!=n&&P({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},k.notEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");t==n&&P({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},k.deepEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");void 0===l&&T(),l(t,n)||P({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},k.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");void 0===l&&T(),l(t,n)&&P({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},k.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");void 0===l&&T(),u(t,n)||P({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},k.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");void 0===l&&T(),u(t,n)&&P({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},k.strictEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");S(t,n)||P({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},k.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new m("actual","expected");S(t,n)&&P({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var M=s((function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"==typeof r[e]&&_(t[e])&&w(t[e],r[e])?i[e]=r[e]:i[e]=t[e])}))}));function R(e,t,n,r){if("function"!=typeof t){if(_(t))return w(t,e);if(2===arguments.length)throw new h("expected",["Function","RegExp"],t);if("object"!==a(e)||null===e){var i=new g({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(0===o.length)throw new p("error",t,"may not be an empty object");return void 0===l&&T(),o.forEach((function(i){"string"==typeof e[i]&&_(t[i])&&w(t[i],e[i])||function(e,t,n,r,i,a){if(!(n in e)||!u(e[n],t[n])){if(!r){var o=new M(e,i),s=new M(t,i,e),l=new g({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}P({actual:e,expected:t,message:r,operator:a.name,stackStartFn:a})}}(e,t,i,n,o,r)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function O(e){if("function"!=typeof e)throw new h("fn","Function",e);try{e()}catch(e){return e}return A}function L(e){return b(e)||null!==e&&"object"===a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function D(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!L(t=e()))throw new f("instance of Promise","promiseFn",t)}else{if(!L(e))throw new h("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return A})).catch((function(e){return e}))}))}function N(e,t,n,r){if("string"==typeof n){if(4===arguments.length)throw new h("error",["Object","Error","Function","RegExp"],n);if("object"===a(t)&&null!==t){if(t.message===n)throw new d("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new d("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==a(n)&&"function"!=typeof n)throw new h("error",["Object","Error","Function","RegExp"],n);if(t===A){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var o="rejects"===e.name?"rejection":"exception";P({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(n&&!R(t,n,r,e))throw t}function F(e,t,n,r){if(t!==A){if("string"==typeof n&&(r=n,n=void 0),!n||R(t,n)){var i=r?": ".concat(r):".",a="doesNotReject"===e.name?"rejection":"exception";P({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(a).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function j(e,t,n,r,i){if(!_(t))throw new h("regexp","RegExp",t);var o="match"===i;if("string"!=typeof e||w(t,e)!==o){if(n instanceof Error)throw n;var s=!n;n=n||("string"!=typeof e?'The "string" argument must be of type string. Received type '+"".concat(a(e)," (").concat(v(e),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(v(t),". Input:\n\n").concat(v(e),"\n"));var l=new g({actual:e,expected:t,message:n,operator:i,stackStartFn:r});throw l.generatedMessage=s,l}}function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];x.apply(void 0,[B,t.length].concat(t))}k.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.apply(void 0,[e,O(t)].concat(r))},k.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(t).then((function(t){return N.apply(void 0,[e,t].concat(r))}))},k.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];F.apply(void 0,[e,O(t)].concat(r))},k.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(t).then((function(t){return F.apply(void 0,[e,t].concat(r))}))},k.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===a(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=v(t);var r=new g({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),i=t.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var s=r.stack.split("\n"),l=0;l<o.length;l++){var u=s.indexOf(o[l]);if(-1!==u){s=s.slice(0,u);break}}r.stack="".concat(s.join("\n"),"\n").concat(o.join("\n"))}throw r}},k.match=function e(t,n,r){j(t,n,r,e,"match")},k.doesNotMatch=function e(t,n,r){j(t,n,r,e,"doesNotMatch")},k.strict=E(B,k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict},3639:function(e,t,n){"use strict";n.r(t),n.d(t,{useTheme:function(){return a}});var r=n(9471),i=n(8790);const a=()=>(0,r.useContext)(i.ThemeContext)},3640:function(e,t,n){"use strict";var r=n(6035),i=n.n(r);if(201==n.j)var a=n(419);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=201==n.j?["animationName"]:null;t.A=201==n.j?function(e){var t=e.style,n=e.className;return s(s({},t?{style:(0,a.pl)(t,l)}:{}),n?{className:n}:{})}:null},3680:function(e,t,n){"use strict";var r=n(919);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,i,a){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var o=a;if(t)if(r.TextDecoder){var s=(void 0===(l=i.headers&&i.headers["content-type"])&&(l=""),l.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),r=n[0],i=n[1];return"charset"===r.trim()?i.trim():e}),"utf-8"));try{o=new TextDecoder(s).decode(a)}catch(e){}}else o=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:o})}else e(null,a);var l}}},3706:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(9471),i=n(8713),a=n.n(i),o=n(285),s=n(7460),l=n(1838);function u(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),[u,c]=(0,r.useState)(e.id||null),[d,h]=(0,r.useState)(e.id?s.PlaylistPageStore.get("title"):""),[p,f]=(0,r.useState)(e.id?s.PlaylistPageStore.get("description"):""),[m,g]=(0,r.useState)(-1);function v(t){setTimeout((function(){o.PageActions.addNotification("Playlist created","playlistCreationCompleted");const n={playlist_id:function(e){let t=e.split("/");return 1<t.length?t[t.length-1]:null}(t.url),add_date:t.add_date,description:t.description,title:t.title,media_list:[]};e.onPlaylistSave(n)}),100)}function y(){setTimeout((function(){o.PageActions.addNotification("Playlist creation failed","playlistCreationFailed")}),100)}return(0,r.useEffect)((()=>(s.MediaPageStore.on("playlist_creation_completed",v),s.MediaPageStore.on("playlist_creation_failed",y),n.current.focus(),()=>{s.MediaPageStore.removeListener("playlist_creation_completed",v),s.MediaPageStore.removeListener("playlist_creation_failed",y)})),[]),r.createElement("div",{className:"playlist-form-wrap"},r.createElement("div",{className:"playlist-form-field playlist-title",ref:t},r.createElement("span",{className:"playlist-form-label"},"Title"),r.createElement("input",{ref:n,type:"text",placeholder:"Enter playlist title...",value:d,onChange:function(){h(n.current.value)},onFocus:function(){(0,l.addClassname)(t.current,"focused")},onBlur:function(){(0,l.removeClassname)(t.current,"focused")},onClick:function(){(0,l.removeClassname)(t.current,"invalid")}})),r.createElement("div",{className:"playlist-form-field playlist-description",ref:i},r.createElement("span",{className:"playlist-form-label"},"Description"),r.createElement("textarea",{ref:a,rows:"1",placeholder:"Enter playlist description...",value:p,onChange:function(){a.current.style.height="";const e=a.current.scrollHeight-2,t=0<m?m:parseFloat(window.getComputedStyle(a.current).lineHeight);a.current.style.height=3+Math.max(21,t*Math.floor(e/t))+"px",g(t),f(a.current.value)},onFocus:function(){(0,l.addClassname)(i.current,"focused")},onBlur:function(){(0,l.removeClassname)(i.current,"focused")}})),r.createElement("div",{className:"playlist-form-actions"},r.createElement("button",{className:"cancel-btn",onClick:function(){e.onCancel()}},"CANCEL"),r.createElement("button",{className:"create-btn",onClick:function(){let e=n.current.value.trim();if(""!==e){let t=a.current.value.trim();u?o.PlaylistPageActions.updatePlaylist({title:e,description:t}):o.MediaPageActions.createPlaylist({title:e,description:t})}else(0,l.addClassname)(t.current,"invalid")}},u?"UPDATE":"CREATE")))}u.propTypes={id:a().string,onCancel:a().func.isRequired,onPlaylistSave:a().func.isRequired}},3774:function(e,t,n){"use strict";var r=n(4449),i=n(78),a=r("RegExp.prototype.exec"),o=n(4114);e.exports=function(e){if(!i(e))throw new o("`regex` must be a RegExp");return function(t){return null!==a(e,t)}}},3789:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),i.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),i.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),i.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),i.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M0.5 12L23.5 12"}),i.createElement("path",{d:"M11.5 1L11.5 23"}),i.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),i.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),i.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),i.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l={left:0,top:8},u=function(e){var t=e.enableShortcuts,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,s=a&&a.fullScreen?a.fullScreen.enterFullScreen:"Full screen",u=t?r.isMac()?"Meta+Ctrl+F":"F11":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:u,ariaLabel:s,isDisabled:!r.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:n},i.createElement(o,null)),content:function(){return s},offset:l})},c={left:0,top:8},d=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.fullScreen?n.fullScreen.exitFullScreen:"Exit full screen";return i.createElement(r.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:o,testId:"full-screen__exit-button-with-tooltip",onClick:t},i.createElement(a,null)),content:function(){return o},offset:c})},h=function(e,t){var n=i.useState(t.get("fullScreenMode")),a=n[0],o=n[1],s=i.useCallback((function(e){o(e)}),[]);return i.useEffect((function(){return t.subscribe("fullScreenMode",s),function(){t.unsubscribe("fullScreenMode",s)}}),[]),{enterFullScreen:function(){var n=t.get("getPagesContainer");if(n){var r=e(n());t.get("enterFullScreenMode")(r)}},exitFullScreen:function(){t.get("exitFullScreenMode")()},isFullScreen:a===r.FullScreenMode.Entering||a===r.FullScreenMode.EnteredCompletely}},p=function(e){var t=e.children,n=e.enableShortcuts,r=e.getFullScreenTarget,a=e.store,o=h(r,a),s=o.enterFullScreen,l=o.exitFullScreen,c=o.isFullScreen;return(t||function(e){return c?i.createElement(d,{onClick:e.onClick}):i.createElement(u,{enableShortcuts:n,onClick:e.onClick})})({onClick:c?l:s})},f=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,a=n&&n.fullScreen?n.fullScreen.enterFullScreen:"Full screen";return i.createElement(r.MenuItem,{icon:i.createElement(o,null),isDisabled:!r.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:t},a)},m=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,s=n&&n.fullScreen?n.fullScreen.exitFullScreen:"Exit full screen";return i.createElement("div",{className:r.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!o,"rpv-full-screen__exit-button--rtl":o})},i.createElement(r.MinimalButton,{ariaLabel:s,testId:"full-screen__exit-button",onClick:t},i.createElement(a,null)))},g=function(e){var t=e.children,n=e.getFullScreenTarget,r=e.store,a=h(n,r),o=a.enterFullScreen,s=a.exitFullScreen,l=a.isFullScreen;return l&&(t||function(e){return i.createElement(m,{onClick:e.onClick})})({onClick:l?s:o})},v=function(e){var t=e.store,n=e.onEnterFullScreen,a=e.onExitFullScreen,o=i.useState(t.get("fullScreenMode")),s=o[0],l=o[1],u=i.useCallback((function(e){l(e)}),[]);return i.useEffect((function(){switch(s){case r.FullScreenMode.EnteredCompletely:n(t.get("zoom"));break;case r.FullScreenMode.Exited:a(t.get("zoom"))}}),[s]),i.useEffect((function(){return t.subscribe("fullScreenMode",u),function(){t.unsubscribe("fullScreenMode",u)}}),[]),(s===r.FullScreenMode.Entering||s===r.FullScreenMode.Entered)&&i.createElement("div",{className:"rpv-full-screen__overlay"},i.createElement(r.Spinner,null))},y=function(e){var t=e.containerRef,n=e.getFullScreenTarget,a=e.store,o=h(n,a).enterFullScreen,s=function(e){if(!e.shiftKey&&!e.altKey&&(r.isMac()?e.metaKey&&e.ctrlKey&&"f"===e.key:"F11"===e.key)){var n=t.current;n&&document.activeElement&&n.contains(document.activeElement)&&(e.preventDefault(),o())}};return i.useEffect((function(){if(t.current)return document.addEventListener("keydown",s),function(){document.removeEventListener("keydown",s)}}),[t.current]),i.createElement(i.Fragment,null)};t.ExitFullScreenIcon=a,t.FullScreenIcon=o,t.fullScreenPlugin=function(e){var t=(null==e?void 0:e.getFullScreenTarget)||function(e){return e},n=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},e)}),[]),a=i.useMemo((function(){return r.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:r.FullScreenMode.Normal,zoom:function(){}})}),[]),o=function(e){return i.createElement(p,s({},e,{enableShortcuts:n.enableShortcuts,getFullScreenTarget:t,store:a}))},l=function(){return i.createElement(g,{getFullScreenTarget:t,store:a},null==e?void 0:e.renderExitFullScreenButton)};return{install:function(e){a.update("enterFullScreenMode",e.enterFullScreenMode),a.update("exitFullScreenMode",e.exitFullScreenMode),a.update("getPagesContainer",e.getPagesContainer),a.update("zoom",e.zoom)},onViewerStateChange:function(e){return a.update("fullScreenMode",e.fullScreenMode),e},renderViewer:function(e){var r=e.slot;return r.subSlot&&(r.subSlot.children=i.createElement(i.Fragment,null,n.enableShortcuts&&i.createElement(y,{containerRef:e.containerRef,getFullScreenTarget:t,store:a}),i.createElement(v,{store:a,onEnterFullScreen:n.onEnterFullScreen,onExitFullScreen:n.onExitFullScreen}),i.createElement(l,null),r.subSlot.children)),r},EnterFullScreen:o,EnterFullScreenButton:function(){return i.createElement(o,null,(function(e){return i.createElement(u,s({enableShortcuts:n.enableShortcuts},e))}))},EnterFullScreenMenuItem:function(e){return i.createElement(o,null,(function(t){return i.createElement(f,{onClick:function(){t.onClick(),e.onClick()}})}))}}}},3818:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(9471),i=n(8713),a=n.n(i);function o(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[i,a]=(0,r.useState)(null),[o,s]=(0,r.useState)(null);return(0,r.useEffect)((()=>{a(function(e,t,n){if(void 0!==e){let r=null;return r=void 0!==t&&t>e?t:e,r=void 0!==n&&n<r?n:r,r}return void 0!==t?t:void 0!==n?n:void 0}(0+e.defaultValue,e.minValue,e.maxValue)),s(function(e,t){if(!t||!t.length)return null;let n=0;for(;n<t.length;){if(void 0!==t[n].key&&e===t[n].key)return t[n].key;n+=1}return t[0].key}(e.defaultUnit,e.units))})),r.createElement("div",{className:"num-value-unit"},void 0!==e.label?r.createElement("span",{className:"label"},e.label):null,r.createElement("input",{ref:t,className:"value-input",type:"number",value:null!==i?i:"",min:void 0!==e.minValue?e.minValue:null,max:void 0!==e.maxValue?e.maxValue:null,onChange:function(){a(t.current.value),void 0!==e.valueCallback&&e.valueCallback(t.current.value)}}),r.createElement("select",{ref:n,className:"value-unit",onChange:function(){s(n.current.value),void 0!==e.unitCallback&&e.unitCallback(n.current.value)},value:null!==o?o:""},function(){if(!e.units.length)return null;const t=[];let n=0;for(;n<e.units.length;)void 0!==e.units[n].key&&t.push(r.createElement("option",{key:e.units[n].key,value:e.units[n].key},void 0!==e.units[n].label?e.units[n].label:e.units[n].key)),n+=1;return t}()))}o.propTypes={label:a().string,units:a().array.isRequired,defaultUnit:a().string,defaultValue:a().number,minValue:a().number,maxValue:a().number,valueCallback:a().func,unitCallback:a().func}},3844:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},3929:function(e,t,n){"use strict";var r=n(4903)(),i=n(4449)("Object.prototype.toString"),a=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"callee"in e&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=s?a:o},3973:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),i.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e){var t=i.useRef(),n=function(){var n=t.current;n&&(n.click(),e.get("triggerOpenFile")&&e.update("triggerOpenFile",!1))},r=function(e){e&&n()};return i.useEffect((function(){return e.subscribe("triggerOpenFile",r),function(){e.unsubscribe("triggerOpenFile",r)}}),[]),{inputRef:t,openFile:n}},l={left:0,top:8},u=function(e){var t=e.enableShortcuts,n=e.store,o=e.onClick,u=i.useContext(r.LocalizationContext).l10n,c=u&&u.open?u.open.openFile:"Open file",d=s(n),h=d.inputRef,p=d.openFile,f=t?r.isMac()?"Meta+O":"Ctrl+O":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"open",position:r.Position.BottomCenter,target:i.createElement("div",{className:"rpv-open__input-wrapper"},i.createElement("input",{accept:".pdf",ref:h,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:o}),i.createElement(r.MinimalButton,{ariaKeyShortcuts:f,ariaLabel:c,testId:"open__button",onClick:p},i.createElement(a,null))),content:function(){return c},offset:l})},c=function(e){var t=e.children,n=e.enableShortcuts,r=e.store;return(t||function(e){return i.createElement(u,{enableShortcuts:n,store:r,onClick:e.onClick})})({onClick:function(e){var t=e.target.files;if(t&&t.length){var n=r.get("openFile");n&&n(t[0])}}})},d=function(e){var t=e.store,n=e.onClick,o=i.useContext(r.LocalizationContext).l10n,l=o&&o.open?o.open.openFile:"Open file",u=s(t),c=u.inputRef,d=u.openFile;return i.createElement(r.MenuItem,{icon:i.createElement(a,null),testId:"open__menu",onClick:d},i.createElement("div",{className:"rpv-open__input-wrapper"},i.createElement("input",{accept:".pdf",ref:c,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:n}),l))},h=function(e){var t=e.containerRef,n=e.store,a=function(e){if(!e.shiftKey&&!e.altKey&&"o"===e.key&&(r.isMac()?e.metaKey:e.ctrlKey)){var i=t.current;i&&document.activeElement&&i.contains(document.activeElement)&&(e.preventDefault(),n.update("triggerOpenFile",!0))}};return i.useEffect((function(){if(t.current)return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[t.current]),i.createElement(i.Fragment,null)};t.OpenFileIcon=a,t.openPlugin=function(e){var t=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},e)}),[]),n=i.useMemo((function(){return r.createStore({})}),[]),a=function(e){return i.createElement(c,o({enableShortcuts:t.enableShortcuts},e,{store:n}))};return{install:function(e){n.update("openFile",e.openFile)},renderViewer:function(e){var r=e.slot,a={children:i.createElement(i.Fragment,null,t.enableShortcuts&&i.createElement(h,{containerRef:e.containerRef,store:n}),r.children)};return o(o({},r),a)},Open:a,OpenButton:function(){return i.createElement(a,null)},OpenMenuItem:function(){return i.createElement(a,null,(function(e){return i.createElement(d,{store:n,onClick:e.onClick})}))}}}},3997:function(e,t,n){"use strict";n.d(t,{$:function(){return P}});var r=n(8974);const i=n(4571);let a=null,o=null;function s(e,t){const n=a.toString().replace(/\/+$/,"");for(let r in t)"string"==typeof t[r]?e[r]=n+"/"+t[r].replace(/^\//g,""):s(e[r],t[r])}function l(e){a.toString();const t=e;return s(t,e),t}let u=null,c=null,d=null,h=null,p=null,f=null;function m(e){const t={right:"",onLogoRight:""};return void 0!==e&&("string"==typeof e.right&&(t.right=e.right.trim()),"string"==typeof e.onLogoRight&&(t.onLogoRight=e.onLogoRight.trim())),t}function g(e){const t={navMenu:{items:[]},mainMenuExtra:{items:[]},belowNavMenu:"",belowThemeSwitcher:"",footer:""};if(void 0!==e){if(void 0!==e.mainMenuExtraItems){let n=0;for(;n<e.mainMenuExtraItems.length;)"string"==typeof e.mainMenuExtraItems[n].text&&"string"==typeof e.mainMenuExtraItems[n].link&&"string"==typeof e.mainMenuExtraItems[n].icon&&t.mainMenuExtra.items.push({text:e.mainMenuExtraItems[n].text,link:e.mainMenuExtraItems[n].link,icon:e.mainMenuExtraItems[n].icon,className:e.mainMenuExtraItems[n].className}),n+=1}if(void 0!==e.navMenuItems){let n=0;for(;n<e.navMenuItems.length;)"string"==typeof e.navMenuItems[n].text&&"string"==typeof e.navMenuItems[n].link&&"string"==typeof e.navMenuItems[n].icon&&t.navMenu.items.push({text:e.navMenuItems[n].text,link:e.navMenuItems[n].link,icon:e.navMenuItems[n].icon,className:e.navMenuItems[n].className}),n+=1}"string"==typeof e.belowNavMenu&&(t.belowNavMenu=e.belowNavMenu.trim()),"string"==typeof e.belowThemeSwitcher&&(t.belowThemeSwitcher=e.belowThemeSwitcher.trim()),"string"==typeof e.footer&&(t.footer=e.footer.trim())}return t}function v(e){const t={belowUploadArea:"",postUploadMessage:""};return void 0!==e&&("string"==typeof e.belowUploadArea&&(t.belowUploadArea=e.belowUploadArea.trim()),"string"==typeof e.postUploadMessage&&(t.postUploadMessage=e.postUploadMessage.trim())),t}let y=null;function b(){return y}let _=null,E=null,S=null,w=null,T=null,C=null;var k=n(8974);let A=null;function P(e){return A||(k.log("glbl",e),function(e){if(y={latest:{enabled:!1,title:"Recent uploads"},featured:{enabled:!1,title:"Featured"},recommended:{enabled:!1,title:"Recommended"},members:{enabled:!1,title:"Members"},liked:{enabled:!1,title:"Liked media"},history:{enabled:!1,title:"History"}},void 0!==e)for(let t in y)void 0!==e[t]&&(y[t].enabled=!0,void 0!==e[t].enabled&&!1===e[t].enabled&&(y[t].enabled=!1),"string"==typeof e[t].title&&(y[t].title=e[t].title.trim()))}({...e.site.pages,...e.site.userPages}),P=e.pages.home,x=e.pages.search,I=e.pages.media,M=e.pages.profile,R=b(),S={home:{sections:{latest:{title:""},featured:{title:""},recommended:{title:""}}},search:{advancedFilters:!1},media:{categoriesWithTitle:!1,htmlInDescription:!1,displayViews:!0,related:{initialSize:10}},profile:{htmlInDescription:!1,includeHistory:!1,includeLikedMedia:!1}},void 0!==P&&void 0!==P.sections&&(void 0!==P.sections.latest&&"string"==typeof P.sections.latest.title&&(S.home.sections.latest.title=P.sections.latest.title.trim()),void 0!==P.sections.featured&&"string"==typeof P.sections.featured.title&&(S.home.sections.featured.title=P.sections.featured.title.trim()),void 0!==P.sections.recommended&&"string"==typeof P.sections.recommended.title&&(S.home.sections.recommended.title=P.sections.recommended.title.trim())),void 0!==x&&!0===x.advancedFilters&&(S.search.advancedFilters=x.advancedFilters),""===S.home.sections.latest.title&&(S.home.sections.latest.title=void 0!==R.latest?R.latest.title:"Latest"),""===S.home.sections.featured.title&&(S.home.sections.featured.title=void 0!==R.featured?R.featured.title:"Featured"),""===S.home.sections.recommended.title&&(S.home.sections.recommended.title=void 0!==R.recommended?R.recommended.title:"Recommended"),void 0!==I&&(!0===I.categoriesWithTitle&&(S.media.categoriesWithTitle=I.categoriesWithTitle),!0===I.hideViews&&(S.media.displayViews=!1),!0===I.htmlInDescription&&(S.media.htmlInDescription=I.htmlInDescription)),void 0!==M&&(!0===M.htmlInDescription&&(S.profile.htmlInDescription=M.htmlInDescription),!0===M.includeHistory&&(S.profile.includeHistory=M.includeHistory),!0===M.includeLikedMedia&&(S.profile.includeLikedMedia=M.includeLikedMedia)),function(e){h={};for(let t in e)h[t]=e[t]}({home:e.url.home,admin:!e.user.is.anonymous&&e.user.is.admin?e.url.admin:"",error404:e.url.error404,embed:e.site.url.replace(/\/+$/,"")+"/embed?m=",latest:e.url.latestMedia,featured:e.url.featuredMedia,recommended:e.url.recommendedMedia,signin:e.url.signin,signout:e.user.is.anonymous?"":e.url.signout,register:e.url.register,changePassword:e.user.is.anonymous?"":e.url.changePassword,members:e.url.members,search:{base:e.url.search,query:e.url.search+"?q=",tag:e.url.search+"?t=",category:e.url.search+"?c="},profile:e.site.devEnv?{media:e.user.pages.media,about:e.user.pages.about,playlists:e.user.pages.playlists,live:e.user.pages.live}:{media:e.site.url.replace(/\/$/,"")+"/user/"+e.profileId,live:e.site.url.replace(/\/$/,"")+"/user/"+e.profileId+"/live",about:e.site.url.replace(/\/$/,"")+"/user/"+e.profileId+"/about",playlists:e.site.url.replace(/\/$/,"")+"/user/"+e.profileId+"/playlists"},user:{liked:e.url.likedMedia,history:e.url.history,addMedia:e.url.addMedia,editChannel:e.url.editChannel,editProfile:e.url.editProfile},archive:{tags:e.url.tags,categories:e.url.categories,ads:e.api.ads.list,category_ads:"/category-ads"},manage:{media:e.user.is.anonymous?"":e.url.manageMedia,users:e.user.is.anonymous?"":e.url.manageUsers,comments:e.user.is.anonymous?"":e.url.manageComments}}),s=e.site,c={id:"media-cms",url:"",api:"",title:""},void 0!==s&&("string"==typeof s.id&&(c.id=s.id.trim()),"string"==typeof s.url&&(c.url=s.url.trim()),"string"==typeof s.api&&(c.api=s.api.trim()),"string"==typeof s.title&&(c.title=s.title.trim())),O=e.contents,f={header:m(O.header),sidebar:g(O.sidebar),uploader:v(O.uploader)},t=e.site.api,n=e.api,r.log("endpoints",n),a=i(t),o=l({media:n.media,featured:n.media+"?show=featured",recommended:n.media+"?show=recommended",playlists:n.playlists,users:n.members,user:{liked:n.liked,history:n.history,playlists:n.playlists+"?author=",live:n.live+"?author="},archive:{tags:n.tags,categories:n.categories,ads:n.ads,category_ads:n.category_ads},manage:{media:n.manage_media,users:n.manage_users,comments:n.manage_comments},search:{query:n.search+"?q=",titles:n.search+"?show=titles&q=",tag:n.search+"?t=",category:n.search+"?c="}}),function(e){_={hideHomeLink:!1,hideTagsLink:!1,hideCategoriesLink:!1},void 0!==e&&("boolean"==typeof e.hideHomeLink&&(_.hideHomeLink=e.hideHomeLink),"boolean"==typeof e.hideTagsLink&&(_.hideTagsLink=e.hideTagsLink),"boolean"==typeof e.hideCategoriesLink&&(_.hideCategoriesLink=e.hideCategoriesLink))}(e.features.sideBar),function(e){if(E={tags:{enabled:!1,title:"Tags"},categories:{enabled:!1,title:"Categories"},adstag:{enabled:!1,title:"Ads"}},void 0!==e)for(let t in E)void 0!==e[t]&&(E[t].enabled=!0,void 0!==e[t].enabled&&!1===e[t].enabled&&(E[t].enabled=!1),"string"==typeof e[t].title&&(E[t].title=e[t].title.trim()))}(e.site.taxonomies),function(e,t){if(p={name:null,username:null,thumbnail:null,is:{admin:!1,anonymous:!0},can:{login:!0,register:!0,addMedia:!1,editProfile:!1,changePassword:!0,deleteProfile:!1,readComment:!0,addComment:!1,mentionComment:!1,deleteComment:!1,editMedia:!1,deleteMedia:!1,editSubtitle:!1,manageMedia:!1,manageUsers:!1,manageComments:!1,reportMedia:!1,downloadMedia:!1,saveMedia:!1,likeMedia:!0,dislikeMedia:!0,shareMedia:!0,contactUser:!1},pages:{home:null,about:null,media:null,playlists:null}},void 0!==e&&(p.is.anonymous=!0===e.is.anonymous,p.is.anonymous||(p.is.admin=!0===e.is.admin,p.name="string"==typeof e.name?e.name.trim():"",p.name=""===p.name?null:p.name,p.username="string"==typeof e.username?e.username.trim():"",p.username=""===p.username?null:p.username,p.thumbnail="string"==typeof e.thumbnail?e.thumbnail.trim():"",p.thumbnail=""===p.thumbnail?null:p.thumbnail,p.can.changePassword=!1!==e.can.changePassword&&p.can.changePassword,p.can.deleteProfile=!0===e.can.deleteProfile,p.can.addComment=!0===e.can.addComment,p.can.mentionComment=!0===e.can.mentionComment,p.can.deleteComment=!0===e.can.deleteComment,p.can.editMedia=!0===e.can.editMedia,p.can.deleteMedia=!0===e.can.deleteMedia,p.can.editSubtitle=!0===e.can.editSubtitle,p.can.manageMedia=!0===e.can.manageMedia,p.can.manageUsers=!0===e.can.manageUsers,p.can.manageComments=!0===e.can.manageComments,p.can.contactUser=!0===e.can.contactUser,void 0!==e.pages&&("string"==typeof e.pages.about&&(p.pages.about=e.pages.about.trim(),p.pages.about=""===p.pages.about?null:p.pages.about),"string"==typeof e.pages.media&&(p.pages.media=e.pages.media.trim(),p.pages.media=""===p.pages.media?null:p.pages.media),"string"==typeof e.pages.playlists&&(p.pages.playlists=e.pages.playlists.trim(),p.pages.playlists=""===p.pages.playlists?null:p.pages.playlists))),p.can.addMedia=!0===e.can.addMedia,p.can.editProfile=!0===e.can.editProfile,p.can.readComment=!1!==e.can.readComment),void 0!==t){if(void 0!==t.media&&void 0!==t.media.actions){const e=t.media.actions;p.can.addComment=p.can.addComment&&!0===e.comment,p.can.mentionComment=p.can.mentionComment&&!0===e.comment_mention,p.can.likeMedia=!1!==e.like,p.can.dislikeMedia=!1!==e.dislike,p.can.reportMedia=!1!==e.report,p.can.downloadMedia=!0===e.download,p.can.saveMedia=!0===e.save,p.can.shareMedia=!0===e.share}void 0!==t.headerBar&&(!0===t.headerBar.hideLogin&&(p.can.login=!1),!0===t.headerBar.hideRegister&&(p.can.register=!1))}}(e.user,e.features),L=e.site.theme,D=e.site.logo,d={mode:"light",switch:{enabled:!0,position:"header"},logo:{lightMode:{img:"",svg:""},darkMode:{img:"",svg:""}}},void 0!==L&&("string"==typeof L.mode&&(d.mode=L.mode.trim(),d.mode="dark"===d.mode?"dark":"light"),void 0!==L.switch&&(!1===L.switch.enabled&&(d.switch.enabled=L.switch.enabled),"string"==typeof L.switch.position&&(d.switch.position=L.switch.position.trim(),d.switch.position="sidebar"===L.switch.position?"sidebar":"header"))),void 0!==D&&(void 0!==D.lightMode&&("string"==typeof D.lightMode.img&&(d.logo.lightMode.img=D.lightMode.img.trim()),"string"==typeof D.lightMode.svg&&(d.logo.lightMode.svg=D.lightMode.svg.trim())),void 0!==D.darkMode&&("string"==typeof D.darkMode.img&&(d.logo.darkMode.img=D.darkMode.img.trim()),"string"==typeof D.darkMode.svg&&(d.logo.darkMode.svg=D.darkMode.svg.trim()))),N=e.features.embeddedVideo,w={video:{dimensions:{width:560,widthUnit:"px",height:315,heightUnit:"px"}}},void 0!==N&&void 0!==N.initialDimensions&&(isNaN(N.initialDimensions.width)||(w.video.dimensions.width=N.initialDimensions.width),"string"==typeof N.initialDimensions.widthUnit&&"percent"===N.initialDimensions.widthUnit&&(N.initialDimensions.widthUnit="percent"),isNaN(N.initialDimensions.height)||(w.video.dimensions.height=N.initialDimensions.height),"string"==typeof N.initialDimensions.heightUnit&&"percent"===N.initialDimensions.heightUnit&&(N.initialDimensions.heightUnit="percent")),function(e,t){if(u={item:{displayAuthor:!0,displayViews:!0,displayPublishDate:!0},share:{options:[]}},void 0!==e&&(!0===e.hideAuthor&&(u.item.displayAuthor=!1),!0===e.hideViews&&(u.item.displayViews=!1),!0===e.hideDate&&(u.item.displayPublishDate=!1)),void 0!==t){const e=["embed","fb","tw","whatsapp","telegram","reddit","tumblr","vk","pinterest","mix","linkedin","email"];let n=0;for(;n<t.length;)-1<e.indexOf(t[n])&&u.share.options.push(t[n]),n+=1}}(e.features.mediaItem,e.features.media.shareOptions),function(e){if(T={mediaTypes:[]},void 0!==e&&void 0!==e.mediaTypes&&e.mediaTypes.length){T.mediaTypes=[];let t=0;for(;t<e.mediaTypes.length;){switch(e.mediaTypes[t]){case"audio":case"video":T.mediaTypes.push(e.mediaTypes[t])}t+=1}}T.mediaTypes.length||(T.mediaTypes=["audio","video"])}(e.features.playlists),function(e){let t,n;if(C={messages:{addToLiked:"Added to liked media",removeFromLiked:"Removed from liked media",addToDisliked:"Added to disliked media",removeFromDisliked:"Removed from disliked media"}},void 0!==e)for(t in C)if(void 0!==e[t]&&"messages"===t)for(n in C[t])"string"==typeof e[t][n]&&(C[t][n]=e[t][n])}(e.contents.notifications),A={site:c,theme:d,member:p,media:u,playlists:T,url:h,api:o,sidebar:_,contents:f,options:{pages:S,embedded:w},enabled:{pages:b(),taxonomies:E},notifications:C},A);var t,n,s,P,x,I,M,R,O,L,D,N}},4036:function(e,t,n){"use strict";function r(e){return window.TRANSLATION&&window.TRANSLATION[e]?window.TRANSLATION[e]:e}n.d(t,{g:function(){return r}})},4114:function(e){"use strict";e.exports=TypeError},4121:function(e){"use strict";e.exports=SyntaxError},4237:function(e,t,n){var r=n(3407).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=r(e.subarray(i)),n.firstOffset=r(e.subarray(i+8)),i+=16),i+=2;var a=t.getUint16(i);for(i+=2;a>0;i+=12,a--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n}},4247:function(e,t,n){"use strict";n.r(t),n.d(t,{MediaDurationInfo:function(){return a}});var r=n(1838);const i={};class a{constructor(e){i[Object.defineProperty(this,"id",{value:"MediaDurationInfo_"+Object.keys(i).length}).id]={fn:{infoToString:function(e){return e<10?"0"+e:e}}},(0,r.isPositiveIntegerOrZero)(e)&&this.update(e)}update(e){i[this.id].toString=void 0,i[this.id].ariaLabel=void 0,(0,r.isPositiveIntegerOrZero)(e)&&(i[this.id].days=Math.floor(e/86400),i[this.id].seconds=e%86400,i[this.id].date=i[this.id].seconds?new Date(1e3*i[this.id].seconds):null,i[this.id].hours=i[this.id].date?24*i[this.id].days+i[this.id].date.getUTCHours():0,i[this.id].minutes=i[this.id].date?i[this.id].date.getUTCMinutes():0,i[this.id].seconds=i[this.id].date?i[this.id].date.getSeconds():0)}toString(){return void 0===i[this.id].toString&&(i[this.id].toString=(0<i[this.id].hours?i[this.id].hours+":":"")+(0<i[this.id].hours&&10>i[this.id].minutes?"0":"")+i[this.id].minutes+":"+i[this.id].fn.infoToString(i[this.id].seconds)),i[this.id].toString}ariaLabel(){if(void 0===i[this.id].ariaLabel){let e=[];0<i[this.id].hours&&e.push(i[this.id].hours+" hours"),0<i[this.id].minutes&&e.push(i[this.id].minutes+" minutes"),0<i[this.id].seconds&&e.push(i[this.id].seconds+" seconds"),i[this.id].ariaLabel=e.join(", ")}return i[this.id].ariaLabel}ISO8601(){return"P0Y0M0DT"+i[this.id].hours+"H"+i[this.id].minutes+"M"+i[this.id].seconds+"S"}}},4301:function(e,t,n){"use strict";e.exports=n(2099)},4350:function(e,t,n){"use strict";n.d(t,{GP:function(){return u}});var r=["second","minute","hour","day","week","month","year"],i=["秒","分钟","小时","天","周","个月","年"],a={},o=function(e,t){a[e]=t},s=[60,60,24,7,365/7/12,12];function l(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}var u=function(e,t,n){var r=function(e,t){return(+(t?l(t):new Date)-+l(e))/1e3}(e,n&&n.relativeDate);return function(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),i=0;e>=s[i]&&i<s.length;i++)e/=s[i];return(e=Math.floor(e))>(0==(i*=2)?9:1)&&(i+=1),t(e,i,r)[n].replace("%s",e.toString())}(r,function(e){return a[e]||a.en_US}(t))};o("en_US",(function(e,t){if(0===t)return["just now","right now"];var n=r[Math.floor(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]})),o("zh_CN",(function(e,t){if(0===t)return["刚刚","片刻后"];var n=i[~~(t/2)];return[e+" "+n+"前",e+" "+n+"后"]}))},4388:function(e,t,n){"use strict";n.r(t),n.d(t,{addMediaToPlaylist:function(){return m},addNewPlaylist:function(){return v},copyEmbedMediaCode:function(){return c},copyShareLink:function(){return u},createPlaylist:function(){return f},deleteComment:function(){return p},dislikeMedia:function(){return s},likeMedia:function(){return o},loadMediaData:function(){return a},removeMedia:function(){return d},removeMediaFromPlaylist:function(){return g},reportMedia:function(){return l},submitComment:function(){return h}});var r=n(7143),i=n.n(r);function a(){i().dispatch({type:"LOAD_MEDIA_DATA"})}function o(){i().dispatch({type:"LIKE_MEDIA"})}function s(){i().dispatch({type:"DISLIKE_MEDIA"})}function l(e){i().dispatch({type:"REPORT_MEDIA",reportDescription:e?e.replace(/\s/g,""):""})}function u(e){i().dispatch({type:"COPY_SHARE_LINK",inputElement:e})}function c(e){i().dispatch({type:"COPY_EMBED_MEDIA_CODE",inputElement:e})}function d(){i().dispatch({type:"REMOVE_MEDIA"})}function h(e){i().dispatch({type:"SUBMIT_COMMENT",commentText:e})}function p(e){i().dispatch({type:"DELETE_COMMENT",commentId:e})}function f(e){i().dispatch({type:"CREATE_PLAYLIST",playlist_data:e})}function m(e,t){i().dispatch({type:"ADD_MEDIA_TO_PLAYLIST",playlist_id:e,media_id:t})}function g(e,t){i().dispatch({type:"REMOVE_MEDIA_FROM_PLAYLIST",playlist_id:e,media_id:t})}function v(e){i().dispatch({type:"APPEND_NEW_PLAYLIST",playlist_data:e})}},4389:function(e,t,n){"use strict";var r,i=n(7118),a=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(){return a.createElement(i.Icon,{size:16},a.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},l=function(){return a.createElement(i.Icon,{size:16},a.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},u=function(e){var t=e.bookmark,n=e.depth,r=e.doc,u=e.index,d=e.isBookmarkExpanded,h=e.numberOfSiblings,p=e.pathFromRoot,f=e.renderBookmarkItem,m=e.store,g=p?"".concat(p,".").concat(u):"".concat(u),v=a.useMemo((function(){return function(e){var t=e.count,n=e.items;if(t>=0)return!1;var r=n.length;if(0===r)return!1;for(var i=n.concat([]);i.length>0;){var a=i.shift(),o=a.items;a.count&&o&&a.count>0&&o.length>0&&(r+=o.length,i=i.concat(o))}return Math.abs(t)===r}(t)}),[t]),y=m.get("bookmarkExpandedMap"),b=d?d({bookmark:t,doc:r,depth:n,index:u}):y.has(g)?y.get(g):!v,_=a.useState(b),E=_[0],S=_[1],w=t.items&&t.items.length>0,T=function(){var e=!E;m.updateCurrentValue("bookmarkExpandedMap",(function(t){return t.set(g,e)})),S(e)},C=function(){var e=t.dest,n=m.get("jumpToDestination");i.getDestination(r,e).then((function(e){n&&n(o({label:t.title},e))}))},k=function(){w&&t.dest&&C()},A=function(){!w&&t.dest&&C()},P=function(e,t){return a.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*n,"rem")},onClick:e},t)},x=function(e,t){return w?a.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(n,"-").concat(u),onClick:T},E?e:t):a.createElement("span",{className:"rpv-bookmark__toggle"})},I=function(e){return t.url?a.createElement("a",{className:"rpv-bookmark__title",href:t.url,rel:"noopener noreferrer nofollow",target:t.newWindow?"_blank":""},t.title):a.createElement("div",{className:"rpv-bookmark__title","aria-label":t.title,onClick:e},t.title)};return a.createElement("li",{"aria-expanded":E?"true":"false","aria-label":t.title,"aria-level":n+1,"aria-posinset":u+1,"aria-setsize":h,role:"treeitem",tabIndex:-1},f?f({bookmark:t,depth:n,hasSubItems:w,index:u,isExpanded:E,path:g,defaultRenderItem:P,defaultRenderTitle:I,defaultRenderToggle:x,onClickItem:A,onClickTitle:k,onToggleSubItems:T}):P(A,a.createElement(a.Fragment,null,x(a.createElement(s,null),a.createElement(l,null)),I(k))),w&&E&&a.createElement(c,{bookmarks:t.items,depth:n+1,doc:r,isBookmarkExpanded:d,isRoot:!1,pathFromRoot:g,renderBookmarkItem:f,store:m}))},c=function(e){var t=e.bookmarks,n=e.depth,r=void 0===n?0:n,i=e.doc,o=e.isBookmarkExpanded,s=e.isRoot,l=e.pathFromRoot,c=e.renderBookmarkItem,d=e.store;return a.createElement("ul",{className:"rpv-bookmark__list",role:s?"tree":"group",tabIndex:-1},t.map((function(e,n){return a.createElement(u,{bookmark:e,depth:r,doc:i,index:n,isBookmarkExpanded:o,key:n,numberOfSiblings:t.length,pathFromRoot:l,renderBookmarkItem:c,store:d})})))};!function(e){e[e.Collapse=0]="Collapse",e[e.Expand=1]="Expand"}(r||(r={}));var d=function(e){var t=e.bookmarks,n=e.doc,i=e.isBookmarkExpanded,o=e.renderBookmarkItem,s=e.store,l=a.useRef(),u=function(e){var t=l.current;if(t&&e.target instanceof HTMLElement&&t.contains(e.target))switch(e.key){case"ArrowDown":e.preventDefault(),h((function(e,t){return e.indexOf(t)+1}));break;case"ArrowLeft":e.preventDefault(),p(r.Collapse);break;case"ArrowRight":e.preventDefault(),p(r.Expand);break;case"ArrowUp":e.preventDefault,h((function(e,t){return e.indexOf(t)-1}));break;case"End":e.preventDefault(),h((function(e,t){return e.length-1}));break;case" ":case"Enter":case"Space":e.preventDefault(),d();break;case"Home":e.preventDefault(),h((function(e,t){return 0}))}},d=function(){var e=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");e&&e.click()},h=function(e){var t=l.current,n=[].slice.call(t.getElementsByClassName("rpv-bookmark__item"));if(0!==n.length){var r=document.activeElement,i=n[Math.min(n.length-1,Math.max(0,e(n,r)))];r.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),i.focus()}},p=function(e){var t=l.current;if(0!==[].slice.call(t.getElementsByClassName("rpv-bookmark__item")).length){var n=document.activeElement.closest(".rpv-bookmark__item"),i=e===r.Collapse?"true":"false";if(n&&n.parentElement.getAttribute("aria-expanded")===i){var a=n.querySelector(".rpv-bookmark__toggle");a&&a.click()}}};return a.useEffect((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}),[]),a.useEffect((function(){var e=l.current;if(e){var t=[].slice.call(e.getElementsByClassName("rpv-bookmark__item"));t.length>0&&(t[0].focus(),t[0].setAttribute("tabindex","0"))}}),[]),a.createElement("div",{ref:l},a.createElement(c,{bookmarks:t,depth:0,doc:n,isBookmarkExpanded:i,isRoot:!0,pathFromRoot:"",renderBookmarkItem:o,store:s}))},h=function(e){var t=e.doc,n=e.isBookmarkExpanded,r=e.renderBookmarkItem,o=e.store,s=a.useContext(i.LocalizationContext).l10n,l=a.useContext(i.ThemeContext).direction===i.TextDirection.RightToLeft,u=a.useState({isLoaded:!1,items:[]}),c=u[0],h=u[1];return a.useEffect((function(){h({isLoaded:!1,items:[]}),t.getOutline().then((function(e){h({isLoaded:!0,items:e||[]})}))}),[t]),c.isLoaded?0===c.items.length?a.createElement("div",{"data-testid":"bookmark__empty",className:i.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":l})},s&&s.bookmark?s.bookmark.noBookmark:"There is no bookmark"):a.createElement("div",{"data-testid":"bookmark__container",className:i.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":l})},a.createElement(d,{bookmarks:c.items,doc:t,isBookmarkExpanded:n,renderBookmarkItem:r,store:o})):a.createElement("div",{className:"rpv-bookmark__loader"},a.createElement(i.Spinner,null))},p=function(e){var t=e.isBookmarkExpanded,n=e.renderBookmarkItem,r=e.store,o=a.useState(r.get("doc")),s=o[0],l=o[1],u=function(e){l(e)};return a.useEffect((function(){return r.subscribe("doc",u),function(){r.unsubscribe("doc",u)}}),[]),s?a.createElement(h,{doc:s,isBookmarkExpanded:t,renderBookmarkItem:n,store:r}):a.createElement("div",{className:"rpv-bookmark__loader"},a.createElement(i.Spinner,null))};t.DownArrowIcon=s,t.RightArrowIcon=l,t.bookmarkPlugin=function(){var e=a.useMemo((function(){return i.createStore({bookmarkExpandedMap:new Map})}),[]);return{install:function(t){e.update("jumpToDestination",t.jumpToDestination)},onDocumentLoad:function(t){e.update("doc",t.doc)},Bookmarks:function(t){return a.createElement(p,{isBookmarkExpanded:null==t?void 0:t.isBookmarkExpanded,renderBookmarkItem:null==t?void 0:t.renderBookmarkItem,store:e})}}}},4402:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(1838),o=n(3997);const s={};class l extends(i()){constructor(){super(),this.mediacms_config=(0,o.$)(window.MediaCMS);const e=(t={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,n,r){t[n]=r})),t);var t;const n=e.q,r=e.c,i=e.t;s[Object.defineProperty(this,"id",{value:"SearchFieldStoreData_"+Object.keys(s).length}).id]={searchQuery:n?decodeURIComponent(n).replace(/\+/g," "):"",categoriesQuery:r?decodeURIComponent(r).replace(/\+/g," "):"",tagsQuery:i?decodeURIComponent(i).replace(/\+/g," "):"",predictions:[]},this.dataResponse=this.dataResponse.bind(this)}dataResponse(e){if(e&&e.data){let t=0;for(s[this.id].predictions=[];t<e.data.length;)s[this.id].predictions[t]=e.data[t].title,t+=1;this.emit("load_predictions",s[this.id].requestedQuery,s[this.id].predictions),s[this.id].pendingRequested?(s[this.id].requestedQuery=s[this.id].pendingRequested.query,(0,a.getRequest)(s[this.id].pendingRequested.url,!1,this.dataResponse),s[this.id].pendingRequested=null):s[this.id].requestedQuery=null}}get(e){switch(e){case"search-query":return s[this.id].searchQuery;case"search-categories":return s[this.id].categoriesQuery;case"search-tags":return s[this.id].tagsQuery}return null}actions_handler(e){if("REQUEST_PREDICTIONS"===e.type){let t=e.query,n=this.mediacms_config.api.search.titles+t;if(s[this.id].requestedQuery)return void(s[this.id].requestedQuery.q!==t&&(s[this.id].pendingRequested={query:t,url:n}));s[this.id].requestedQuery=t,(0,a.getRequest)(n,!1,this.dataResponse)}}}t.default=(0,a.exportStore)(new l,"actions_handler")},4433:function(e,t,n){"use strict";n.d(t,{c:function(){return k},k:function(){return C}});var r=n(9471),i=n(8790),a=n(7460),o=n(8713),s=n.n(o),l=n(5338),u=n(1838),c=n(7154),d=n(285),h=n(7664);function p(e){const[t,n,i]=(0,l.usePopup)(),[o,s]=(0,r.useState)("main"),[c]=(0,r.useState)({main:r.createElement(h.PopupMain,null,r.createElement(h.NavigationMenuList,{items:[{itemType:"open-subpage",text:"Remove from playlist",icon:"delete",buttonAttr:{className:"change-page","data-page-id":"proceedMediaPlaylistRemoval"}}]})),proceedMediaPlaylistRemoval:r.createElement(h.PopupMain,null,r.createElement("div",{className:"popup-message"},r.createElement("span",{className:"popup-message-title"},"Media playlist removal"),r.createElement("span",{className:"popup-message-main"},"You're willing to remove media from playlist permanently?")),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-playlist-removal",onClick:function(){t.current.toggle()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-playlist-removal",onClick:function(){(0,u.putRequest)(a.PageStore.get("api-playlists")+"/"+e.playlist_id,{type:"remove",media_friendly_token:e.media_id},{headers:{"X-CSRFToken":(0,u.csrfToken)()}},!1,p,f)}},"PROCEED")))});function p(){t.current.tryToHide();const n=e.media_id,r=e.playlist_id;setTimeout((function(){d.PageActions.addNotification("Media removed from playlist","mediaPlaylistRemove"),d.PlaylistPageActions.removedMediaFromPlaylist(n,r)}),100)}function f(){t.current.tryToHide(),setTimeout((function(){d.PageActions.addNotification("Media removal from playlist failed","mediaPlaylistRemoveFail")}),100)}return r.createElement("div",{className:"item-playlist-options-wrap"+("main"===o?" item-playlist-options-main":"")},r.createElement(i,{contentRef:t},r.createElement(h.CircleIconButton,null,r.createElement(h.MaterialIcon,{type:"more_vert"}))),r.createElement(n,{contentRef:t,hideCallback:function(){s("main")}},r.createElement(h.NavigationContentApp,{pageChangeCallback:function(e){s(e)},initPage:o,focusFirstItemOnPageChange:!1,pages:c,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})))}p.propTypes={},p.propTypes.media_id=s().string.isRequired,p.propTypes.playlist_id=s().string.isRequired;var f=n(868);function m(e){}function g(e){const t=e.type,[n,i,a,o,s,u]=(0,l.useMediaItem)({...e,type:t}),c=(0,f.$h)("item "+t+"-item",e.class_name.trim(),e.playlistOrder===e.playlistActiveItem);return r.createElement("div",{className:c},r.createElement("div",{className:"item-content"},s(),r.createElement(f.wN,{src:a,title:e.title,link:e.link}),r.createElement(o,{title:e.title,link:e.link},n(),u(),i())))}function v(e){const t=e.type,[n,i,a,o,s,u]=(0,l.useMediaItem)({...e,type:t}),d=new c.MediaDurationInfo;d.update(e.duration);const h=d.ariaLabel(),m=d.toString(),g=d.ISO8601(),v=(0,f.$h)("item "+t+"-item",e.class_name.trim(),e.playlistOrder===e.playlistActiveItem);return r.createElement("div",{className:v},e.hidePlaylistOrderNumber?null:r.createElement(f.MU,{index:e.playlistOrder,inPlayback:e.inPlaylistView,activeIndex:e.playlistActiveItem}),r.createElement("div",{className:"item-content"},s(),function(){const t={key:"item-thumb",href:e.link,title:e.title,tabIndex:"-1","aria-hidden":!0,className:"item-thumb"+(a?"":" no-thumb"),style:a?{backgroundImage:"url('"+a+"')"}:null};return r.createElement("a",t,e.inPlaylistView?null:r.createElement(f.st,{ariaLabel:h,time:g,text:m}))}(),r.createElement(o,{title:e.title,link:e.link},n(),u(),i()),function(){let t=e.link.split("=")[1];return t=t.split("&")[0],e.hidePlaylistOptions?null:r.createElement(p,{key:"options",media_id:t,playlist_id:e.playlist_id})}()))}function y(e){const t=e.type,[n,i,a,o,s,u]=(0,l.useMediaItem)({...e,type:t}),d=new c.MediaDurationInfo;d.update(e.duration);const h=d.ariaLabel(),m=d.toString(),g=d.ISO8601(),v=(0,f.$h)("item "+t+"-item",e.class_name.trim(),e.playlistOrder===e.playlistActiveItem);return r.createElement("div",{className:v},e.hidePlaylistOrderNumber?null:r.createElement(f.MU,{index:e.playlistOrder,inPlayback:e.inPlaylistView,activeIndex:e.playlistActiveItem}),r.createElement("div",{className:"item-content"},s(),e.hasMediaViewer?r.createElement(f.s0,{mediaPageLink:e.link}):function(){const t={key:"item-thumb",href:e.link,title:e.title,tabIndex:"-1","aria-hidden":!0,className:"item-thumb"+(a?"":" no-thumb"),style:a?{backgroundImage:"url('"+a+"')"}:null};return r.createElement("a",t,e.inPlaylistView?null:r.createElement(f.st,{ariaLabel:h,time:g,text:m}),e.inPlaylistView||e.inPlaylistPage?null:r.createElement(f.aH,{url:e.preview_thumbnail}))}(),r.createElement(o,{title:e.title,link:e.link},n(),u(),i())),function(){let t=e.link.split("=")[1];return t=t.split("&")[0],e.hidePlaylistOptions?null:r.createElement(p,{key:"options",media_id:t,playlist_id:e.playlist_id})}())}m.propTypes={order:u.PositiveIntegerOrZero,title:s().string.isRequired,link:s().string.isRequired,singleLinkContent:s().bool.isRequired,description:s().string,meta_description:s().string,thumbnail:s().string,onMount:s().func,publish_date:s().oneOfType([s().string,s().number]),editLink:s().string},m.defaultProps={title:"",link:"#",singleLinkContent:!1,description:"",meta_description:"",thumbnail:"",publish_date:0},g.propTypes={...m.propTypes,type:s().string.isRequired,class_name:s().string,views:u.PositiveIntegerOrZero,hideViews:s().bool,hideDate:s().bool,hideAuthor:s().bool,author_name:s().string,author_link:s().string,playlistOrder:u.PositiveInteger,playlistActiveItem:u.PositiveIntegerOrZero,inPlaylistView:s().bool,hidePlaylistOrderNumber:s().bool},g.defaultProps={...m.defaultProps,class_name:"",views:0,hideViews:!1,hideDate:!1,hideAuthor:!1,author_name:"",author_link:"#",playlistOrder:1,playlistActiveItem:1,inPlaylistView:!1,hidePlaylistOrderNumber:!0},v.propTypes={...g.propTypes,type:s().string.isRequired,duration:u.PositiveIntegerOrZero,hidePlaylistOptions:s().bool,hasMediaViewer:s().bool,hasMediaViewerDescr:s().bool,playlist_id:s().string},v.defaultProps={...g.defaultProps,type:"audio",duration:0,hidePlaylistOptions:!0,hasMediaViewer:!1,hasMediaViewerDescr:!1},y.propTypes={...g.propTypes,type:s().string.isRequired,duration:u.PositiveIntegerOrZero,hidePlaylistOptions:s().bool,hasMediaViewer:s().bool,hasMediaViewerDescr:s().bool,playlist_id:s().string},y.defaultProps={...g.defaultProps,type:"video",duration:0,hidePlaylistOptions:!0,hasMediaViewer:!1,hasMediaViewerDescr:!1};var b=n(4350);function _(e){const{titleComponent:t,thumbnailUrl:n,UnderThumbWrapper:i}=(0,l.useItem)({...e,type:"playlist"});return r.createElement("div",{className:"item playlist-item"},r.createElement("div",{className:"item-content"},r.createElement("a",{className:"item-thumb"+(n?"":" no-thumb"),href:e.link,title:e.title,tabIndex:"-1","aria-hidden":"true",style:n?{backgroundImage:"url('"+n+"')"}:null},r.createElement("div",{className:"playlist-count"},r.createElement("div",null,r.createElement("div",null,r.createElement("span",null,e.media_count),r.createElement("i",{className:"material-icons"},"playlist_play")))),r.createElement("div",{className:"playlist-hover-play-all"},r.createElement("div",null,r.createElement("div",null,r.createElement("i",{className:"material-icons"},"play_arrow"),r.createElement("span",null,"PLAY ALL"))))),r.createElement(i,{title:e.title,link:e.link},t(),function(){const t=(0,b.GP)(new Date(e.publish_date)),n="string"==typeof e.publish_date?Date.parse(e.publish_date):Date.parse(new Date(e.publish_date));return r.createElement(f.Tl,{dateTime:n,text:"Created "+t})}(),r.createElement("a",{href:e.link,title:"",className:"view-full-playlist"},"VIEW FULL PLAYLIST"))))}function E(e){const t=e.type,{titleComponent:n,descriptionComponent:i,thumbnailUrl:a,UnderThumbWrapper:o}=(0,l.useItem)({...e,type:t}),s=(0,f.$h)("item "+t+"-item",e.class_name.trim(),!1);return r.createElement("div",{className:s},r.createElement("div",{className:"item-content"},function(){const t={key:"item-thumb",href:e.link,title:e.title,tabIndex:"-1","aria-hidden":!0,className:"item-thumb"+(a?"":" no-thumb"),style:a?{backgroundImage:"url('"+a+"')"}:null};return r.createElement("a",t)}(),r.createElement(o,{title:e.title,link:e.link},n(),e.hideAllMeta?null:r.createElement("span",{className:"item-meta"},r.createElement(f.A6,{count:e.media_count})),i())))}function S(e){const{titleComponent:t,descriptionComponent:n,thumbnailUrl:i,UnderThumbWrapper:a}=(0,l.useItem)({...e,type:"user"});return r.createElement("div",{className:"item member-item"},r.createElement("div",{className:"item-content"},r.createElement(f.fC,{src:i,title:e.title,link:e.link}),r.createElement(a,{title:e.title,link:e.link},t(),e.hideAllMeta?null:r.createElement("span",{className:"item-meta"},r.createElement(f.z_,{date:e.publish_date})),n())))}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(null,arguments)}function T(e,t){if(e.inCategoriesList)return i.LinksContext._currentValue.search.category+t.title.replace(" ","%20");if(e.inTagsList)return i.LinksContext._currentValue.search.tag+t.title.replace(" ","%20");const n=function(){let e=null;const t=window.location.search;if(""!==t){let n=t.split("?");if(2===n.length){let t;n=n[1].split("&");let r=0;for(;r<n.length;){if(t=n[r].split("="),"pl"===t[0]){2===t.length&&(e=t[1]);break}r+=1}}}return e}();return e.inPlaylistView&&n?t.url+"&pl="+n:void 0!==e.playlistId&&null!==e.playlistId?t.url+"&pl="+e.playlistId:t.url}function C(e,t,n){const r=e.inCategoriesList||e.inTagsList,i=!r&&void 0!==t.username,o=!r&&!i&&("playlist"===t.media_type||void 0!==t.url&&-1<t.url.indexOf("playlists")),s=!r&&!i&&!o,l="search-results"===a.PageStore.get("current-page"),u={view:T(e,t),edit:e.canEdit?t.url.replace("view?m=","edit?m="):null};window.MediaCMS.site.devEnv&&-1<u.view.indexOf("view?")&&(u.view="/media.html?"+u.view.split("view?")[1]);const c=t.stream&&""!==t.stream&&null!==t.stream?"http://localhost/media/userlogos/live_poster.jpg":t.thumbnail_url||"",d=t.stream&&""!==t.stream&&null!==t.stream?"http://localhost/media/userlogos/live_poster.jpg":t.preview_url||"";let h,p,f,m,g;p=void 0!==t.username&&"string"==typeof t.username?t.username:void 0!==t.title&&"string"==typeof t.title?t.title:null,f=void 0!==t.date_added&&"string"==typeof t.date_added?t.date_added:void 0!==t.add_date&&"string"==typeof t.add_date?t.add_date:null,i?h="user":o?h="playlist":s&&(h=t.media_type);const v={current:!1,type:null},y={current:e.inPlaylistPage,id:e.playlistId,hideOptions:e.hidePlaylistOptions||!1,hideOrderNumber:e.hidePlaylistOrderNumber||!1},b={current:e.inPlaylistView,id:e.playlistId,activeItem:e.playlistActiveItem||!1,hideOrderNumber:e.hidePlaylistOrderNumber||!1};r&&(e.inCategoriesList?v.type="categories":e.inTagsList&&(v.type="tags"),null!==v.type&&(v.current=!0));const _={name:t.author_name||t.user,url:t.author_profile?t.author_profile.replace(" ","%20"):null},E={views:t.views||null},S={allMeta:e.hideAllMeta||!1};let w={order:n+1,type:h,title:p,date:f,url:u,author:_,stats:E,thumbnail:c,taxonomyPage:v,playlistPage:y,playlistPlayback:b,canEdit:null!==u.edit,singleLinkContent:e.singleLinkContent||!1,hasMediaViewer:0===n&&"video"===t.media_type&&!!e.firstItemViewer,hasMediaViewerDescr:!1};return w.hasMediaViewerDescr=w.hasMediaViewer&&!!e.firstItemDescr,w.hasMediaViewerDescr?(m=e.firstItemViewer?"string"==typeof e.summary?e.summary.trim():null:"string"==typeof t.description?t.description.trim():null,m=null===m?m:m.replace(/(<([^>]+)>)/gi,""),w.description=m,e.summary&&(g=e.summary.trim(),g=null===g?g:g.replace(/(<([^>]+)>)/gi,""),w.meta_description=g)):(m=e.preferSummary&&"string"==typeof e.summary?e.summary.trim():"string"==typeof t.description?t.description.trim():null,m=null===m?m:m.replace(/(<([^>]+)>)/gi,""),l||e.inCategoriesList||"user"===h?w.description=m:w.meta_description=m),"video"===h&&(w.previewThumbnail=d),"video"!==h&&"audio"!==h||(w.duration=t.duration),!r&&!o||isNaN(t.media_count)||(w.media_count=parseInt(t.media_count,10)),s&&(S.date=e.hideDate||!1,S.views=e.hideViews||!1,S.author=e.hideAuthor||!1),w={...w,hide:S},w}function k(e){let t=!1;const n={order:e.order,title:e.title,link:e.url.view,thumbnail:e.thumbnail,publish_date:e.date,singleLinkContent:e.singleLinkContent,hasMediaViewer:e.hasMediaViewer,hasMediaViewerDescr:e.hasMediaViewerDescr};switch(e.type){case"user":case"playlist":break;case"video":t=!0,n.duration=e.duration,n.preview_thumbnail=e.previewThumbnail;break;case"audio":t=!0,n.duration=e.duration;break;case"image":case"pdf":t=!0}if(void 0!==e.description&&(n.description=e.description),void 0!==e.meta_description&&(n.meta_description=e.meta_description),!e.taxonomyPage.current&&"playlist"!==e.type||isNaN(e.media_count)||(n.media_count=e.media_count),n.hideAllMeta=e.hide.allMeta,t&&(n.views=e.stats.views,n.author_name=e.author.name,n.author_link=e.author.url,n.hideDate=e.hide.date,n.hideViews=e.hide.views,n.hideAuthor=e.hide.author),(e.playlistPage.current||e.playlistPlayback.current)&&(n.playlistOrder=e.order,e.playlistPlayback.current?(n.playlist_id=e.playlistPlayback.id,n.playlistActiveItem=e.playlistPlayback.activeItem,n.hidePlaylistOrderNumber=e.playlistPlayback.hideOrderNumber):(n.playlist_id=e.playlistPage.id,n.hidePlaylistOptions=e.playlistPage.hideOptions,n.hidePlaylistOrderNumber=e.playlistPage.hideOrderNumber)),e.canEdit&&(n.editLink=e.url.edit),e.taxonomyPage.current)switch(e.taxonomyPage.type){case"categories":return r.createElement(E,w({},n,{type:"category"}));case"tags":return r.createElement(E,w({},n,{type:"tag"}))}switch(e.type){case"user":return r.createElement(S,n);case"playlist":return window.MediaCMS.site.devEnv&&(n.link=n.link.replace("/playlists/","playlist.html?pl=")),r.createElement(_,n);case"video":return r.createElement(y,n);case"audio":return r.createElement(v,n);case"image":return r.createElement(g,w({},n,{type:"image"}));case"pdf":return r.createElement(g,w({},n,{type:"pdf"}))}return r.createElement(g,w({},n,{type:"attachment"}))}_.propTypes={...m.propTypes,media_count:u.PositiveIntegerOrZero},_.defaultProps={...m.defaultProps,media_count:0},E.propTypes={...m.propTypes,type:s().string.isRequired,class_name:s().string,media_count:u.PositiveIntegerOrZero},E.defaultProps={...m.defaultProps,class_name:"",media_count:0},S.propTypes={...m.propTypes},S.defaultProps={...m.defaultProps}},4441:function(e,t,n){"use strict";var r=n(237),i=n(919),a=n.n(i),o=n(6870),s=n.n(o),l="6.9.0",u=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},c=function(e,t,n){u(0,n),e.trigger({type:t+n.type,originalEvent:n})};function d(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&c(e,"content",t):c(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(u(0,t),e.trigger("resumeended")):c(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(c(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())c(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;c(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?c(e,"ad",t):e.ads.isContentResuming()&&c(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?c(this,"content",e):c(this,"ad",e))}var h={},p=function(){!function(){if(r.A.dom.isInFrame()&&"function"!=typeof a().__tcfapi){for(var e,t=a(),n={};t;){try{if(t.frames.__tcfapiLocator){e=t;break}}catch(e){}if(t===a().top)break;t=t.parent}if(!e)return;a().__tcfapi=function(t,r,i,a){var o=Math.random()+"",s={__tcfapiCall:{command:t,parameter:a,version:r,callId:o}};n[o]=i,e.postMessage(s,"*")},a().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var r=t.__tcfapiReturn;r&&"function"==typeof n[r.callId]&&(n[r.callId](r.returnValue,r.success),n[r.callId]=null)}),!1)}}(),"function"==typeof a().__tcfapi&&a().__tcfapi("addEventListener",2,(function(e,t){t&&(h=e)}))},f=function(e,t){return t?encodeURIComponent(e):e},m=function(e,t,n){if(e&&e[n])for(var r=e[n],i=Object.keys(r),a=0;a<i.length;a++)t["{mediainfo."+n+"."+i[a]+"}"]=r[i[a]]};function g(e,t,n){var i=this,o={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,n){return o["{"+t+"}"]=n,"{"+t+"}"})),void 0===t&&(t=!1);var l={};for(var u in void 0!==n&&(l=n),l["{player.id}"]=this.options_["data-player"]||this.id_,l["{player.height}"]=this.currentHeight(),l["{player.width}"]=this.currentWidth(),l["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",l["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",l["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",l["{player.duration}"]=this.duration(),l["{player.pageUrl}"]=r.A.dom.isInFrame()?s().referrer:a().location.href,l["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",l["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",l["{timestamp}"]=(new Date).getTime(),l["{document.referrer}"]=s().referrer,l["{window.location.href}"]=a().location.href,l["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){i.mediainfo&&i.mediainfo[e]?l["{mediainfo."+e+"}"]=i.mediainfo[e]:o["{mediainfo."+e+"}"]?l["{mediainfo."+e+"}"]=o["{mediainfo."+e+"}"]:l["{mediainfo."+e+"}"]=""})),m(this.mediainfo,l,"custom_fields"),m(this.mediainfo,l,"customFields"),Object.keys(h).forEach((function(e){l["{tcf."+e+"}"]=h[e]})),l["{tcf.gdprAppliesInt}"]=h.gdprApplies?1:0,l)e=e.split(u).join(f(l[u],t));for(var c in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,n){for(var i,s=a(),l=n.split("."),u=0;u<l.length;u++)u===l.length-1?i=s[l[u]]:s=s[l[u]];var c=typeof i;return null===i?"null":void 0===i?o["{pageVariable."+n+"}"]?o["{pageVariable."+n+"}"]:(r.A.log.warn('Page variable "'+n+'" not found'),""):"string"!==c&&"number"!==c&&"boolean"!==c?(r.A.log.warn('Page variable "'+n+'" is not a supported type'),""):f(String(i),t)})),o)e=e.replace(c,o[c]);return e}var v={processMetadataTracks:function(e,t){for(var n=e.textTracks(),r=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},i=0;i<n.length;i++)r(n[i]);n.addEventListener("addtrack",(function(e){r(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},y=function(e,t){return void 0!==t&&e.ads.includedCues[t]},b=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function _(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}v.processAdTrack=function(e,t,n,i){e.ads.includedCues={};for(var a=0;a<t.length;a++){var o=t[a],s=this.getSupportedAdCue(e,o);if(!this.isSupportedAdCue(e,o))return void r.A.log.warn("Skipping as this is not a supported ad cue.",o);var l=this.getCueId(e,o),u=o.startTime;if(y(e,l))return void r.A.log("Skipping ad already seen with ID "+l);i&&i(e,s,l,u),n(e,s,l,u),b(e,l)}};var E={},S=r.A;E.isMiddlewareMediatorSupported=function(){return!S.browser.IS_IOS&&!S.browser.IS_ANDROID&&!!(S.use&&S.middleware&&S.middleware.TERMINATOR)},E.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,S.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||r.A.browser.IS_SAFARI||e.trigger("pause")}))}}},E.testHook=function(e){S=e};var w=E.playMiddleware,T=E.isMiddlewareMediatorSupported,C=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),k=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n.init.apply(n,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){r.A.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){r.A.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){r.A.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){r.A.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){r.A.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function A(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}C.registerState("State",k);var P=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}A(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=C.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=C.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(k);C.registerState("AdState",P);var x=function(e){function t(){return e.apply(this,arguments)||this}A(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=C.getState("BeforePreroll"),n=C.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(k);C.registerState("ContentState",x);var I,M=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){r.A.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(C.getState("ContentState"));C.registerState("AdsDone",M);var R=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=r.A.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),i=e.textTracks?e.textTracks():[],a=[],o={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(o.style=n.getAttribute("style"));for(var s=0;s<i.length;s++){var l=i[s];a.push({track:l,mode:l.mode}),l.mode="disabled"}return o.suppressedTracks=a,o}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},O=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var i,a=e.$(".vjs-tech"),o=20,s=n.suppressedTracks,l=function(){for(var e=0;e<s.length;e++)(i=s[e]).track.mode=i.mode},u=function(){var t;if(r.A.browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var i=e.play();i&&i.catch&&i.catch((function(e){r.A.log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var a=e.play();a&&a.catch&&a.catch((function(e){r.A.log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},c=function t(){if(e.off("contentcanplay",t),I&&e.clearTimeout(I),(a=e.el().querySelector(".vjs-tech")).readyState>1)return u();if(void 0===a.seekable)return u();if(a.seekable.length>0)return u();if(o--)e.setTimeout(t,50);else try{u()}catch(e){r.A.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&a.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",l),r.A.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",c),I=e.setTimeout(c,2e3);else{if(l(),!e.ended()){var d=e.play();d&&d.catch&&d.catch((function(e){r.A.log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())},L=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(r=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),r),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?r.A.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;r.A.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?r.A.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,R(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,O(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?r.A.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?r.A.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||r.A.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(C.getState("AdState"));C.registerState("Preroll",L);var D=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=C.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(C.getState("ContentState"));C.registerState("BeforePreroll",D);var N=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",R(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),O(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(C.getState("AdState"));C.registerState("Midroll",N);var F=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=C.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?r.A.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,R(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=C.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),O(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?r.A.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=C.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=C.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?r.A.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=C.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(C.getState("AdState"));C.registerState("Postroll",F);var j=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=C.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=C.getState("Midroll");this.transitionTo(e)},t}(C.getState("ContentState"));C.registerState("ContentPlayback",j);var B=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=C.getState("StitchedAdRoll");this.transitionTo(e)},t}(C.getState("ContentState"));C.registerState("StitchedContentPlayback",B);var U=function(e){function t(){return e.apply(this,arguments)||this}A(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",R(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=C.getState("StitchedContentPlayback");O(this.player),this.transitionTo(e)},t}(C.getState("AdState"));C.registerState("StitchedAdRoll",U);var q=E.isMiddlewareMediatorSupported,V=r.A.getTech("Html5").Events,H={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:r.A.options.normalizeAutoplay||!1},z=function(e){var t=this,n=r.A.mergeOptions(H,e),i=[];V.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),t.on(i,d),q()||function(e,t){t&&r.A.log("Using cancelContentPlay to block content playback"),e.on("play",_)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||r.A.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){r.A.log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:l,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(r.A.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===r.A.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!r.A.browser.IS_IOS&&!r.A.browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?r.A.log("ADS: "+t[0]):r.A.log.apply(r.A,["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(C.getState("StitchedContentPlayback"))(t):t.ads._state=new(C.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=v,t.ads.adMacroReplacement=g.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var a=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&r.A.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var i=e[n];"showing"===i.mode&&(i.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",a)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",a)})),p(),t.ads.listenToTcf=p};z.VERSION=l,function(e){!function(){if(r.A.getPlugin)return Boolean(r.A.getPlugin("ads"));var e=r.A.getComponent("Player");return Boolean(e&&e.prototype.ads)}(r.A)&&((r.A.registerPlugin||r.A.plugin)("ads",e),T()&&!r.A.usingContribAdsMiddleware_&&(r.A.use("*",w),r.A.usingContribAdsMiddleware_=!0,r.A.log.debug("Play middleware has been registered with videojs")))}(z)},4449:function(e,t,n){"use strict";var r=n(9718),i=n(5953),a=i([r("%String.prototype.indexOf%")]);e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&a(e,".prototype.")>-1?i([n]):n}},4463:function(e,t,n){"use strict";n.r(t),n.d(t,{UserConsumer:function(){return l},UserContext:function(){return a},UserProvider:function(){return s}});var r=n(9471),i=n(3997);const a=(0,r.createContext)(),o=(0,i.$)(window.MediaCMS).member,s=e=>{let{children:t}=e;const n={isAnonymous:o.is.anonymous,username:o.username,thumbnail:o.thumbnail,userCan:o.can,pages:o.pages};return r.createElement(a.Provider,{value:n},t)},l=a.Consumer;t.default=a},4470:function(e,t,n){"use strict";function r(e){for(const t in window.REPLACEMENTS)e=e.replace(t,window.REPLACEMENTS[t]);return e}n.d(t,{u:function(){return r}})},4473:function(e,t,n){"use strict";var r,i=n(1385),a=n(7118),o=n(9471),s=n(9834),l=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(o),u=function(){return l.createElement(a.Icon,{size:16},l.createElement("path",{d:"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\n            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\n            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\n            C18.395,3.394,18.5,3.649,18.5,3.914V4.5\n            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\n            M3.5,8.499\n            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\n            M14.5,0.499v4h4"}))},c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d={left:0,top:8},h=function(e){var t=e.enableShortcuts,n=e.onClick,r=l.useContext(a.LocalizationContext).l10n,i=r&&r.print?r.print.print:"Print",o=t?a.isMac()?"Meta+P":"Ctrl+P":"";return l.createElement(a.Tooltip,{ariaControlsSuffix:"print",position:a.Position.BottomCenter,target:l.createElement(a.MinimalButton,{ariaKeyShortcuts:o,ariaLabel:i,testId:"print__button",onClick:n},l.createElement(u,null)),content:function(){return i},offset:d})};!function(e){e.CheckingPermission="CheckingPermission",e.Inactive="Inactive",e.Preparing="Preparing",e.Cancelled="Cancelled",e.Ready="Ready"}(r||(r={}));var p=function(e){var t=e.children,n=e.enableShortcuts,i=e.store;return(t||h)({enableShortcuts:n,onClick:function(){i.update("printStatus",r.CheckingPermission)}})},f=function(e){var t=e.doc,n=e.store,i=l.useContext(a.LocalizationContext).l10n,o=l.useState(!0),s=o[0],u=o[1];return l.useEffect((function(){t.getPermissions().then((function(e){null===e||e.includes(4)||e.includes(2048)?n.update("printStatus",r.Preparing):u(!1)}))}),[]),s?l.createElement(l.Fragment,null):l.createElement(a.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(e){return l.createElement(l.Fragment,null,l.createElement("div",{className:"rpv-print__permission-body"},i&&i.print?i.print.disallowPrint:"The document does not allow to print"),l.createElement("div",{className:"rpv-print__permission-footer"},l.createElement(a.Button,{onClick:function(){e(),n.update("printStatus",r.Cancelled)}},i&&i.print?i.print.close:"Close")))},isOpened:!0})},m=function(e){var t=e.numLoadedPages,n=e.numPages,r=e.onCancel,i=l.useContext(a.LocalizationContext).l10n,o=l.useContext(a.ThemeContext).direction===a.TextDirection.RightToLeft,s=Math.floor(100*t/n);return l.createElement("div",{className:"rpv-print__progress"},l.createElement("div",{className:a.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":o})},l.createElement("div",{className:"rpv-print__progress-message"},i&&i.print?i.print.preparingDocument:"Preparing document ..."),l.createElement("div",{className:"rpv-print__progress-bar"},l.createElement(a.ProgressBar,{progress:s})),l.createElement(a.Button,{onClick:r},i&&i.print?i.print.cancel:"Cancel")))},g=function(e){var t=e.canvas,n=e.page,r=e.pageHeight,o=e.pageIndex,s=e.pageWidth,u=e.rotation,c=e.onLoad,d=a.useIsMounted(),h=l.useRef(),p=l.useState(""),f=p[0],m=p[1],g=l.useMemo((function(){return void 0!==i&&void 0!=={MEDIACMS_ID:"mediacms-frontend",MEDIACMS_TITLE:"MediaCMS Frontend",MEDIACMS_URL:"http://localhost",MEDIACMS_API:"http://localhost/api/v1",MEDIACMS_USER_IS_ADMIN:"true",MEDIACMS_USER_IS_ANONYMOUS:"false",MEDIACMS_USER_USERNAME:"admin",MEDIACMS_USER_NAME:"Admin",MEDIACMS_USER_THUMB:"http://localhost/media/userlogos/user.jpg"}.JEST_WORKER_ID}),[]);return l.useEffect((function(){var e=h.current;e&&e.cancel();var i=150/72;t.height=Math.floor(r*i),t.width=Math.floor(s*i);var a=t.getContext("2d");a.save(),a.fillStyle="rgb(255, 255, 255)",a.fillRect(0,0,t.width,t.height),a.restore();var o=n.getViewport({rotation:u,scale:1});h.current=n.render({canvasContext:a,intent:"print",transform:[i,0,0,i,0,0],viewport:o}),h.current.promise.then((function(){"toBlob"in t&&"createObjectURL"in URL?t.toBlob((function(e){d.current&&m(URL.createObjectURL(e)),g&&c()})):(d.current&&m(t.toDataURL()),g&&c())}),(function(){}))}),[]),f&&l.createElement("div",{className:"rpv-print__page"},l.createElement("img",{"data-testid":"print__thumbnail-".concat(o),src:f,onLoad:function(){g||c()}}))},v=function(e){var t=e.canvas,n=e.doc,r=e.pageIndex,i=e.pageRotation,o=e.pageSize,s=e.rotation,u=e.shouldRender,c=e.onLoad,d=a.useIsMounted(),h=l.useState(null),p=h[0],f=h[1],m=Math.abs(s+i)%180==0;l.useEffect((function(){u&&a.getPage(n,r).then((function(e){d.current&&f(e)}))}),[u]);var v=(o.rotation+s+i)%360;return p&&l.createElement(g,{canvas:t,page:p,pageHeight:m?o.pageHeight:o.pageWidth,pageIndex:r,pageWidth:m?o.pageWidth:o.pageHeight,rotation:v,onLoad:c})},y=function(e){var t=e.doc,n=e.numLoadedPages,i=e.pagesRotation,a=e.pageSizes,o=e.printPages,u=e.printStatus,c=e.rotation,d=e.onCancel,h=e.onLoad,p=l.useMemo((function(){return document.createElement("canvas")}),[]),f=l.useMemo((function(){var e=document.querySelector(".rpv-print__zone");if(e)return e;var t=document.createElement("div");return t.classList.add("rpv-print__zone"),t.setAttribute("data-testid","print__zone"),document.body.appendChild(t),t}),[]);l.useEffect((function(){u===r.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var e=function(){if(u===r.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var t=document.querySelectorAll(".rpv-print__zone");t&&t.forEach((function(e){e.parentElement.removeChild(e)})),p.height=0,p.width=0,document.removeEventListener("mousemove",e),d()}};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}),[u]);var m=a[0].pageHeight,g=a[0].pageWidth;return s.createPortal(l.createElement(l.Fragment,null,o.map((function(e,r){return l.createElement(v,{key:e,canvas:p,doc:t,pageIndex:e,pageRotation:i.has(e)?i.get(e):0,pageSize:a[e],rotation:c,shouldRender:r===n,onLoad:h})})),l.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(g,"pt ").concat(m,"pt }")}})),f)},b=function(e){var t=e.doc,n=e.pagesRotation,i=e.pageSizes,a=e.renderProgressBar,o=e.rotation,s=e.setPages,u=e.store,c=l.useState(r.Inactive),d=c[0],h=c[1],p=l.useState(0),g=p[0],v=p[1],b=l.useMemo((function(){var e=t.numPages;return s(t).filter((function(t){return t>=0&&t<e}))}),[t,s]),_=b.length,E=function(){v(0),h(r.Inactive)},S=function(e){return h(e)};return l.useEffect((function(){return u.subscribe("printStatus",S),function(){u.unsubscribe("printStatus",S)}}),[]),l.createElement(l.Fragment,null,d===r.CheckingPermission&&l.createElement(f,{doc:t,store:u}),d===r.Preparing&&(a?a(g,_,E):l.createElement(m,{numLoadedPages:g,numPages:_,onCancel:E})),(d===r.Preparing||d===r.Ready)&&g<=_&&l.createElement(y,{doc:t,numLoadedPages:g,pagesRotation:n,pageSizes:i,printPages:b,printStatus:d,rotation:o,onCancel:E,onLoad:function(){var e=g+1;e<=_&&(v(e),e===_&&h(r.Ready))}}))},_=function(e){var t=e.onClick,n=l.useContext(a.LocalizationContext).l10n,r=n&&n.print?n.print.print:"Print";return l.createElement(a.MenuItem,{icon:l.createElement(u,null),testId:"print__menu",onClick:t},r)},E=function(e){var t=e.containerRef,n=e.store,i=function(e){if(!e.shiftKey&&!e.altKey&&"p"===e.key&&(a.isMac()?e.metaKey:e.ctrlKey)){var i=t.current;i&&document.activeElement&&i.contains(document.activeElement)&&(e.preventDefault(),n.update("printStatus",r.Preparing))}};return l.useEffect((function(){if(t.current)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[t.current]),l.createElement(l.Fragment,null)};t.PrintIcon=u,t.getAllPagesNumbers=function(e){return Array(e.numPages).fill(0).map((function(e,t){return t}))},t.getCustomPagesNumbers=function(e){return function(t){var n,r=[];return e.replace(/\s+/g,"").split(",").forEach((function(e){var t,n,i=e.split("-").map((function(e){return parseInt(e,10)})).filter((function(e){return Number.isInteger(e)}));1===i.length?r.push(i[0]-1):2===i.length&&r.push.apply(r,(t=i[0]-1,n=i[1]-1,Array(n-t+1).fill(0).map((function(e,n){return t+n}))))})),(n=r,n.filter((function(e){return n.indexOf(e)===n.lastIndexOf(e)}))).filter((function(e){return e>=0&&e<t.numPages}))}},t.getEvenPagesNumbers=function(e){return Array(e.numPages).fill(0).map((function(e,t){return t})).filter((function(e){return(e+1)%2==0}))},t.getOddPagesNumbers=function(e){return Array(e.numPages).fill(0).map((function(e,t){return t})).filter((function(e){return(e+1)%2==1}))},t.printPlugin=function(e){var t=l.useMemo((function(){return Object.assign({},{enableShortcuts:!0,setPages:function(e){return Array(e.numPages).fill(0).map((function(e,t){return t}))}},e)}),[]),n=l.useMemo((function(){return a.createStore({printStatus:r.Inactive})}),[]),i=function(e){return l.createElement(p,c({enableShortcuts:t.enableShortcuts},e,{store:n}))};return{print:function(){n.update("printStatus",r.CheckingPermission)},renderViewer:function(r){var i=r.slot,a={children:l.createElement(l.Fragment,null,t.enableShortcuts&&l.createElement(E,{containerRef:r.containerRef,store:n}),l.createElement(b,{doc:r.doc,pagesRotation:r.pagesRotation,pageSizes:r.pageSizes,renderProgressBar:null==e?void 0:e.renderProgressBar,rotation:r.rotation,setPages:t.setPages,store:n}),i.children)};return c(c({},i),a)},Print:i,PrintButton:function(){return l.createElement(i,null,(function(e){return l.createElement(h,c({},e))}))},PrintMenuItem:function(e){return l.createElement(i,null,(function(t){return l.createElement(_,{onClick:function(){t.onClick(),e.onClick()}})}))},setPages:function(e){t.setPages=e}}}},4539:function(e,t,n){"use strict";if(201==n.j)var r=n(8255);t.A=201==n.j?function(e){if(!e)return[];if("string"==typeof e)return[e];if(!Array.isArray(e)){var t=e;return(0,r.HP)(e).reduce((function(e,n){return e.concat(t[n]?[n]:[])}),[])}return e}:null},4571:function(e,t,n){"use strict";var r=n(6168),i=n(2505),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(a,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},a=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===a)for(t in i=new v(e,{}),p)delete i[t];else if("object"===a){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(o,""),t=t||{};var n,r=u.exec(e),i=r[1]?r[1].toLowerCase():"",a=!!r[2],s=!!r[3],l=0;return a?s?(n=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(n=r[2]+r[4],l=r[2].length):s?(n=r[3]+r[4],l=r[3].length):n=r[4],"file:"===i?l>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?a&&(n=n.slice(2)):l>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:a||m(i),slashesCount:l,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(o,""),!(this instanceof v))return new v(e,t,n);var a,s,l,u,p,y,b=h.slice(),_=typeof t,E=this,S=0;for("object"!==_&&"string"!==_&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),a=!(s=g(e||"",t=f(t))).protocol&&!s.slashes,E.slashes=s.slashes||a&&t.slashes,E.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||c.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(E.protocol)))&&(b[3]=[/(.*)/,"pathname"]);S<b.length;S++)"function"!=typeof(u=b[S])?(l=u[0],y=u[1],l!=l?E[y]=e:"string"==typeof l?~(p="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof u[2]?(E[y]=e.slice(0,p),e=e.slice(p+u[2])):(E[y]=e.slice(p),e=e.slice(0,p))):(p=l.exec(e))&&(E[y]=p[1],e=e.slice(0,p.index)),E[y]=E[y]||a&&u[3]&&t[y]||"",u[4]&&(E[y]=E[y].toLowerCase())):e=u(e,E);n&&(E.query=n(E.query)),a&&t.slashes&&"/"!==E.pathname.charAt(0)&&(""!==E.pathname||""!==t.pathname)&&(E.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],a=!1,o=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),o++):o&&(0===r&&(a=!0),n.splice(r,1),o--);return a&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(E.pathname,t.pathname)),"/"!==E.pathname.charAt(0)&&m(E.protocol)&&(E.pathname="/"+E.pathname),r(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(~(p=E.auth.indexOf(":"))?(E.username=E.auth.slice(0,p),E.username=encodeURIComponent(decodeURIComponent(E.username)),E.password=E.auth.slice(p+1),E.password=encodeURIComponent(decodeURIComponent(E.password))):E.username=encodeURIComponent(decodeURIComponent(E.auth)),E.auth=E.password?E.username+":"+E.password:E.username),E.origin="file:"!==E.protocol&&m(E.protocol)&&E.host?E.protocol+"//"+E.host:"null",E.href=E.toString()}v.prototype={set:function(e,t,n){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),a[e]=t;break;case"port":a[e]=t,r(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,l.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";a[e]=t.charAt(0)!==o?o+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<h.length;u++){var c=h[u];c[4]&&(a[c[1]]=a[c[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&m(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var o=a+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(o+="@"),(":"===r[r.length-1]||l.test(n.hostname)&&!n.port)&&(r+=":"),o+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},v.extractProtocol=g,v.location=f,v.trimLeft=d,v.qs=i,e.exports=v},4581:function(e,t,n){"use strict";e.exports=n(2387)},4632:function(e,t,n){"use strict";function r(e,t){function n(e,t,n){return Number(parseFloat(e/t).toFixed(e<10*t?1:0))+n}return t?e.toLocaleString():function(e,t,r,i,a,o){for(;t>=i;)a*=r,i*=r,e+=1;return e<o.length?n(t,a,o[e]):n(t*(r*(e-(o.length-1))),a,o[o.length-1])}(0,e,1e3,1e3,1,["","K","M","B","T"])}n.d(t,{A:function(){return r}})},4685:function(e,t,n){"use strict";n.r(t),n.d(t,{ItemListAsync:function(){return h}});var r=n(9471),i=n(8713),a=n.n(i),o=n(5338),s=n(4737),l=n(2495),u=n(4433),c=n(5633);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}function h(e){const[t,n,i,a,s,h,p,f,m,g,v]=(0,o.useItemListSync)(e);return(0,r.useEffect)((()=>(a(new c.B(e.pageItems,e.maxItems,e.firstItemRequestUrl,e.requestUrl,f,m)),()=>{i&&(i.cancelAll(),a(null))})),[]),t?n.length?r.createElement("div",{className:s.listOuter},g(),r.createElement("div",{ref:h,className:"items-list-wrap"},r.createElement("div",{ref:p,className:s.list},n.map(((t,n)=>r.createElement(u.c,d({key:n},(0,u.k)(e,t,n))))))),v()):null:r.createElement(l.e,{className:s.listOuter})}h.propTypes={...s.k.propTypes,items:a().array,requestUrl:a().string.isRequired,firstItemRequestUrl:a().string},h.defaultProps={...s.k.defaultProps,requestUrl:null,firstItemRequestUrl:null,pageItems:24}},4737:function(e,t,n){"use strict";n.d(t,{k:function(){return h}});var r=n(9471),i=n(8713),a=n.n(i),o=n(5338),s=n(1838),l=n(2495),u=n(4433);function c(e,t,n,r,i){const a={maxItems:n||255,pageItems:t?Math.min(n,t):1},o={totalItems:0,totalPages:0};let s=e;const l=[],u=[];function c(e){e=isNaN(e)?a.pageItems:e;let t=Math.min(e,u.length);if(t){let e=0;for(;e<t;)l.push(u.shift()),e+=1;"function"==typeof i&&i(l)}}let d=0;for(;d<s.length&&a.maxItems>u.length;)u.push(s[d]),d+=1;return o.totalItems=Math.min(a.maxItems,s.length),o.totalPages=Math.ceil(o.totalItems/a.pageItems),"function"==typeof r&&r(o.totalItems),c(),{loadItems:function(e){l.length<o.totalItems&&c(e)},totalPages:function(){return o.totalPages},loadedAllItems:function(){return l.length===o.totalItems},cancelAll:function(){r=null,i=null}}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}function h(e){const[t,n,i,a,s,h,p,f,m,g,v]=(0,o.useItemListSync)(e);return(0,r.useEffect)((()=>(a(new c(e.items,e.pageItems,e.maxItems,f,m)),()=>{i&&(i.cancelAll(),a(null))})),[]),t?n.length?r.createElement("div",{className:s.listOuter},g(),r.createElement("div",{ref:h,className:"items-list-wrap"},r.createElement("div",{ref:p,className:s.list},n.map(((t,n)=>r.createElement(u.c,d({key:n},(0,u.k)(e,t,n))))))),v()):null:r.createElement(l.e,{className:s.listOuter})}h.propTypes={items:a().array.isRequired,className:a().string,hideDate:a().bool,hideViews:a().bool,hideAuthor:a().bool,hidePlaylistOptions:a().bool,hidePlaylistOrderNumber:a().bool,hideAllMeta:a().bool,preferSummary:a().bool,inPlaylistView:a().bool,inPlaylistPage:a().bool,playlistActiveItem:s.PositiveIntegerOrZero,playlistId:a().string,maxItems:a().number.isRequired,pageItems:a().number.isRequired,horizontalItemsOrientation:a().bool.isRequired,singleLinkContent:a().bool.isRequired,inTagsList:a().bool,inCategoriesList:a().bool,itemsCountCallback:a().func,itemsLoadCallback:a().func,firstItemViewer:a().bool,firstItemDescr:a().bool,canEdit:a().bool},h.defaultProps={hideDate:!1,hideViews:!1,hideAuthor:!1,hidePlaylistOptions:!0,hidePlaylistOrderNumber:!0,hideAllMeta:!1,preferSummary:!1,inPlaylistView:!1,inPlaylistPage:!1,playlistActiveItem:1,playlistId:void 0,maxItems:99999,pageItems:24,horizontalItemsOrientation:!1,singleLinkContent:!1,inTagsList:!1,inCategoriesList:!1,firstItemViewer:!1,firstItemDescr:!1,canEdit:!1}},4822:function(e,t,n){var r=n(8974),i={"":!0,up:!0};function a(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,t=3,n=0,o=100,s=0,l=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!a(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!a(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!a(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return l},set:function(e){if(!a(e))throw new Error("ViewportAnchorY must be between 0 and 100.");l=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!a(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!i[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?r.warn("Scroll: an invalid or illegal string was specified."):u=t}}})}},4845:function(e,t,n){"use strict";function r(e,t,n){let r=e;return""!==t&&(r+=" "+t),n&&(r+=" pl-active-item"),r}n.d(t,{$:function(){return r}})},4876:function(e,t,n){"use strict";n.r(t),n.d(t,{useItemList:function(){return g}});var r,i,a=n(9471),o=n(7460),s=n(1838);Array.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};var l=".item-img-preview";class u{constructor(e){if(!Array.isArray(e))return null;this.extensions={};const t=["png","jpg","jpeg"];let n,r;if(this.element=null,-1<e.indexOf("webp")&&(r=document.createElement("source"),r.type="image/webp",this.extensions.anim=this.extensions.anim||[],this.extensions.anim.push({elem:r,type:"webp"}),1===e.length&&(this.extensions.fallback={elem:document.createElement("img"),type:"webp"})),-1<e.indexOf("gif")&&(r=document.createElement("source"),r.type="image/gif",this.extensions.anim=this.extensions.anim||[],this.extensions.anim.push({elem:r,type:"gif"}),this.extensions.fallback={elem:document.createElement("img"),type:"gif"}),-1<e.indexOf("jpg")&&(r=document.createElement("source"),r.type="image/jpg",this.extensions.anim=this.extensions.anim||[],this.extensions.anim.push({elem:r,type:"jpg"}),this.extensions.fallback={elem:document.createElement("img"),type:"jpg"}),-1<e.indexOf("jpeg")&&(r=document.createElement("source"),r.type="image/jpeg",this.extensions.anim=this.extensions.anim||[],this.extensions.anim.push({elem:r,type:"jpeg"}),this.extensions.fallback={elem:document.createElement("img"),type:"jpeg"}),!this.extensions.fallback.elem)for(n=0;n<fallback_extensions.length;){if(-1<e.indexOf(t[n])){this.extensions.fallback={elem:document.createElement("img"),type:t[n]};break}n+=1}if(this.extensions.anim.length||this.extensions.fallback.elem){if(this.element=document.createElement("picture"),this.extensions.anim.length)for(n=0;n<this.extensions.anim.length;)this.element.appendChild(this.extensions.anim[n].elem),n+=1;this.extensions.fallback.elem&&this.element.appendChild(this.extensions.fallback.elem),this.image=this.element.querySelector("img"),this.image.addEventListener("load",function(e,t){i=(0,s.requestAnimationFrame)((function(){e.wrapperItem&&((0,s.addClassname)(e.wrapperItem,"on-hover-preview"),i=void 0,e.wrapperItem=void 0)}))}.bind(null,this))}}elementEvents(e){e.addEventListener("mouseenter",this.onMediaItemMouseEnter.bind(null,this)),e.addEventListener("mouseleave",this.onMediaItemMouseLeave.bind(null,this))}newImage(e,t,n,a){let o;if(void 0!==r&&clearTimeout(r),void 0!==i&&(0,s.cancelAnimationFrame)(i),this.extensions.anim.length)for(o=0;o<this.extensions.anim.length;)this.extensions.anim[o].elem.setAttribute("srcset",e+"."+this.extensions.anim[o].type),o+=1;this.extensions.fallback.elem&&this.extensions.fallback.elem.setAttribute("src",e+"."+this.extensions.fallback.type),this.extensions.fallback.elem&&(this.extensions.fallback.elem.setAttribute("width",t+"px"),this.extensions.fallback.elem.setAttribute("height",n+"px")),a.querySelector(l).appendChild(this.element),this.wrapperItem=a}onMediaItemMouseEnter(e,t){var n,i;e.image&&(n=t.target.querySelector(l),i=o.PageStore.get("config-site").url+"/"+n.getAttribute("data-src").replace(/^\//g,""),r=setTimeout((function(){e.newImage(i,1+n.offsetWidth,1+n.offsetHeight,t.target)}),100))}onMediaItemMouseLeave(e,t){void 0!==r&&clearTimeout(r),void 0!==i&&(0,s.cancelAnimationFrame)(i),e.wrapperItem=void 0}}let c=null;class d{constructor(e){if(!Node.prototype.isPrototypeOf(e))return null;let t;this.element=e,this.previewer={element:e.querySelector(".item-img-preview")},this.previewer.element&&(t=this.previewer.element.getAttribute("data-src"),t&&(this.previewer.src=t.trim())),this.previewer.src&&(t=this.previewer.element.getAttribute("data-ext"),t&&(this.previewer.extensions=t.trim().split(","))),this.previewer.extensions&&(c=c||new u(this.previewer.extensions),c.elementEvents(this.element))}element(){return this.element}}const h={};class p{constructor(e,t){if(!Node.prototype.isPrototypeOf(e))return null;h[Object.defineProperty(this,"id",{value:"MediaItemsList_"+Object.keys(h).length}).id]={},this.items=[],this.container=e,this.horizontalItems=(0,s.hasClassname)(this.container,"items-list-hor"),this.appendItems(t)}dataObject(){return h}appendItems(e){var t;if(NodeList.prototype.isPrototypeOf(e))for(t=0;t<e.length;)this.items.push(new d(e[t])),t+=1;else Node.prototype.isPrototypeOf(e)&&this.items.push(new d(e))}}var f={mediaItems:".item"},m=[];function g(e,t){let n=0,r=null;const[i,o]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[u,c]=(0,a.useState)(null);return(0,a.useEffect)((()=>{void 0!==e.itemsLoadCallback&&e.itemsLoadCallback()}),[i]),[i,s,u,c,function(e){o([...e])},function(t){l(!0),void 0!==e.itemsCountCallback&&e.itemsCountCallback(t)},function(){if(n<i.length){null===r&&(r=function(e){if(!e.length)return null;let t,n=0;for(;n<e.length;)t=e[n].querySelectorAll(f.mediaItems),t.length&&(m=m||[]).push(new p(e[n],t)),n+=1;return m}([t.current])[0]);const e=t.current.querySelectorAll(".item");if(!e||!e.length)return;let a=n;for(;a<i.length;)r.appendItems(e[a]),a+=1;n=i.length}}]}},4903:function(e,t,n){"use strict";var r=n(2698);e.exports=function(){return r()&&!!Symbol.toStringTag}},4912:function(e,t,n){"use strict";var r=n(755),i=n(750),a=n(2756),o=n(4449),s=n(7570),l=n(2175),u=o("Object.prototype.toString"),c=n(4903)(),d="undefined"==typeof globalThis?n.g:globalThis,h=i(),p=o("String.prototype.slice"),f=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},m={__proto__:null};r(h,c&&s&&l?function(e){var t=new d[e];if(Symbol.toStringTag in t&&l){var n=l(t),r=s(n,Symbol.toStringTag);if(!r&&n){var i=l(n);r=s(i,Symbol.toStringTag)}m["$"+e]=a(r.get)}}:function(e){var t=new d[e],n=t.slice||t.set;n&&(m["$"+e]=a(n))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=p(u(e),8,-1);return f(h,t)>-1?t:"Object"===t&&function(e){var t=!1;return r(m,(function(n,r){if(!t)try{n(e),t=p(r,1)}catch(e){}})),t}(e)}return s?function(e){var t=!1;return r(m,(function(n,r){if(!t)try{"$"+n(e)===r&&(t=p(r,1))}catch(e){}})),t}(e):null}},5020:function(e,t,n){"use strict";var r=n(8228);e.exports=function(e){return r(e)||0===e?e:e<0?-1:1}},5039:function(e,t,n){var r=n(6927);r.DOMImplementation,r.XMLSerializer,t.DOMParser=n(6111).DOMParser},5187:function(e){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},5198:function(e,t,n){var r=n(6870),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=i(null)}function l(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&t(o[0].trim(),o[1].trim())}}function u(e,t,n){var r=e;function i(){var t=o(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=i(),u(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),u(),t.endTime=i(),u(),function(e,t){var r=new s;l(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}a.prototype=i(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=r.createElement&&r.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function i(t,n){var r=d[t];if(!r)return null;var i=e.document.createElement(r),a=p[t];return a&&n&&(i[a]=n.trim()),i}for(var a,s,l=e.document.createElement("div"),u=l,m=[];null!==(a=n());)if("<"!==a[0])u.appendChild(e.document.createTextNode((s=a,c.innerHTML=s,s=c.textContent,c.textContent="",s)));else{if("/"===a[1]){m.length&&m[m.length-1]===a.substr(2).replace(">","")&&(m.pop(),u=u.parentNode);continue}var g,v=o(a.substr(1,a.length-2));if(v){g=e.document.createProcessingInstruction("timestamp",v),u.appendChild(g);continue}var y=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(g=i(y[1],y[3])))continue;if(!r(u,g))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(h.hasOwnProperty(n)){var r=t?"background-color":"color",i=h[n];g.style[r]=i}})),g.className=b.join(" ")}m.push(y[1]),u.appendChild(g),u=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var a=0;a<n.length;a++)if(v(n.charCodeAt(a)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=m(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":case"line-left":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":case"line-right":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function E(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function S(e,t,n,r){var i=new E(t),a=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),s=[];if(a.snapToLines){var l;switch(a.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=i.lineHeight,c=u*Math.round(o),d=n[l]+u,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),i.move(h,c)}else{var p=i.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new E(t)}var f=function(e,t){for(var i,a=new E(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(i=new E(e),o=l),e=new E(a)}return i||a}(i,s);t.move(f.toCSSCompatValues(n))}function w(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=i(b.prototype),_.prototype.constructor=_,E.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},E.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},E.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},E.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},E.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},E.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},E.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},E.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},w.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},w.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null},w.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],a=E.getSimpleBoxPosition(r),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,l=0;l<t.length;l++)s=t[l],n=new _(e,s,o),r.appendChild(n.div),S(0,n,a,i),s.displayState=n.div,i.push(E.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},w.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},w.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function r(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var c=(i=r()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new a(a.Errors.BadSignature);n.state="HEADER"}for(var d=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(d?d=!1:i=r(),n.state){case"HEADER":/:/.test(i)?(t=i).match(/X-TIMESTAMP-MAP/)?l(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new s;l(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",o(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):l(t,(function(e,t){"Region"===e&&function(e){var t=new s;if(l(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var i=new s;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var r=new(n.vttjs.VTTRegion||n.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)}),/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{u(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var h=-1!==i.indexOf("--\x3e");if(!i||h&&(d=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=w},5288:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});class r{constructor(e){if(!Node.prototype.isPrototypeOf(e))return null;this.element=e}element(){return this.element}}},5289:function(e,t,n){"use strict";function r(e,t,n){return e.scrollLeft?1+Math.ceil(e.scrollLeft/t):n}function i(e,t){void 0!==e&&(this.data={dom:{wrapper:e,firstItem:e.querySelector(t)},item:{width:null}},this.data.item.width=this.data.dom.firstItem.offsetWidth,this.state={initedAllStateValues:!1,currentSlide:1,maxSlideIndex:null,slideItemsFit:null,slideItems:null,totalItems:null,wrapper:{width:null,scrollWidth:null}})}n.d(t,{A:function(){return i}}),i.prototype.updateDataStateOnResize=function(e,t){this.data.item.width=this.data.dom.firstItem.offsetWidth,this.state.wrapper.width=this.data.dom.wrapper.offsetWidth,this.state.wrapper.scrollWidth=this.data.dom.wrapper.scrollWidth,this.state.slideItemsFit=Math.floor(this.state.wrapper.width/this.data.item.width),this.state.slideItems=Math.max(1,this.state.slideItemsFit),t&&this.state.slideItems<=this.state.slideItemsFit&&(this.state.itemsLengthFit=this.state.slideItems),this.state.totalItems=e,this.state.maxSlideIndex=Math.max(this.state.totalItems-this.state.slideItemsFit+1),this.state.currentSlide=Math.min(this.state.currentSlide,this.state.maxSlideIndex||1),this.state.currentSlide=0>=this.state.currentSlide?1:this.state.currentSlide},i.prototype.updateDataState=function(e,t,n){!n&&this.state.initedAllStateValues||(this.state.initedAllStateValues=!0,this.state.wrapper.width=this.data.dom.wrapper.offsetWidth,this.state.wrapper.scrollWidth=this.data.dom.wrapper.scrollWidth,this.state.slideItemsFit=Math.floor(this.state.wrapper.width/this.data.item.width),this.state.slideItems=Math.max(1,this.state.slideItemsFit),t&&this.state.slideItems<=this.state.slideItemsFit&&(this.state.itemsLengthFit=this.state.slideItems)),this.state.totalItems=e,this.state.maxSlideIndex=Math.max(1,this.state.totalItems-this.state.slideItemsFit+1),this.state.currentSlide=Math.min(this.state.currentSlide,this.state.maxSlideIndex),this.state.currentSlide=0>=this.state.currentSlide?1:this.state.currentSlide},i.prototype.nextSlide=function(){this.state.currentSlide=Math.min(r(this.data.dom.wrapper,this.data.item.width,this.state.currentSlide)+this.state.slideItems,this.state.maxSlideIndex)},i.prototype.previousSlide=function(){this.state.currentSlide=Math.max(1,r(this.data.dom.wrapper,this.data.item.width,this.state.currentSlide)-this.state.slideItems)},i.prototype.scrollToCurrentSlide=function(){this.data.dom.wrapper.scrollLeft=this.data.item.width*(this.state.currentSlide-1)},i.prototype.hasNextSlide=function(){return this.state.currentSlide<this.state.maxSlideIndex},i.prototype.hasPreviousSlide=function(){return 1<this.state.currentSlide},i.prototype.currentSlide=function(){return this.state.currentSlide},i.prototype.loadItemsToFit=function(){return 2*this.state.slideItemsFit>this.state.totalItems},i.prototype.loadMoreItems=function(){return this.state.currentSlide+this.state.slideItemsFit>=this.state.maxSlideIndex},i.prototype.itemsFit=function(){return this.state.slideItemsFit}},5305:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(9471),i=n(9834),a=n(8713),o=n.n(a);function s(e){const t=(0,r.useRef)(null),[n,a]=(0,r.useState)(null);let o=[];function s(t,n){var r;n.preventDefault(),n.stopPropagation(),r=o[t].id,void 0!==e.pages[r]&&a(r)}return(0,r.useEffect)((()=>{void 0!==e.pages[e.initPage]?a(e.initPage):Object.keys(e.pages).length?a(Object.keys(e.pages)[0]):a(null)}),[e.initPage]),(0,r.useEffect)((()=>{!function(){let e=0;for(;e<o.length;)o[e].elem.removeEventListener("click",o[e].listener),e+=1;o=[]}(),n&&(function(){let n,r,a=(0,i.findDOMNode)(t.current),l=a.querySelectorAll(e.pageChangeSelector);if(l.length)for(n=0;n<l.length;)r=l[n].getAttribute(e.pageIdSelectorAttr),r=r?r.trim():r,r&&(o[n]={id:r,elem:l[n]},o[n].listener=(e=>t=>s(e,t))(n),o[n].elem.addEventListener("click",o[n].listener)),n+=1;e.focusFirstItemOnPageChange&&a.focus()}(),"function"==typeof e.pageChangeCallback&&e.pageChangeCallback(n))}),[n]),n?r.createElement("div",{ref:t},r.cloneElement(e.pages[n])):null}s.propTypes={initPage:o().string,pages:o().object.isRequired,pageChangeSelector:o().string.isRequired,pageIdSelectorAttr:o().string.isRequired,focusFirstItemOnPageChange:o().bool,pageChangeCallback:o().func},s.defaultProps={focusFirstItemOnPageChange:!0}},5320:function(e,t,n){"use strict";n.r(t),n.d(t,{LayoutConsumer:function(){return d},LayoutContext:function(){return u},LayoutProvider:function(){return c}});var r=n(9471),i=n(7154),a=n(7460),o=n(1838),s=n(8899);let l;const u=(0,r.createContext)(),c=e=>{let{children:t}=e;const n=(0,r.useContext)(s.default),c=new i.BrowserCache("MediaCMS["+n.id+"][layout]",86400),d=!(!document.getElementById("app-sidebar")&&!document.querySelector(".page-sidebar")),[h,p]=(0,r.useState)(c.get("visible-sidebar")),[f,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h?(0,o.addClassname)(document.body,"visible-sidebar"):(0,o.removeClassname)(document.body,"visible-sidebar"),"media"!==a.PageStore.get("current-page")&&1023<window.innerWidth&&c.set("visible-sidebar",h)}),[h]),(0,r.useEffect)((()=>{a.PageStore.once("page_init",(()=>{"media"===a.PageStore.get("current-page")&&(p(!1),(0,o.removeClassname)(document.body,"visible-sidebar"))})),p("media"!==a.PageStore.get("current-page")&&1023<window.innerWidth&&(null===h||h))}),[]);const g={enabledSidebar:d,visibleSidebar:h,setVisibleSidebar:p,visibleMobileSearch:f,toggleMobileSearch:()=>{m(!f)},toggleSidebar:()=>{const e=!h;!function(e){clearTimeout(l),(0,o.addClassname)(document.body,"sliding-sidebar"),l=setTimeout((function(){"media"===a.PageStore.get("current-page")?e?(0,o.addClassname)(document.body,"overflow-hidden"):(0,o.removeClassname)(document.body,"overflow-hidden"):!e||767<window.innerWidth?(0,o.removeClassname)(document.body,"overflow-hidden"):(0,o.addClassname)(document.body,"overflow-hidden"),e?(0,o.addClassname)(document.body,"visible-sidebar"):(0,o.removeClassname)(document.body,"visible-sidebar"),l=setTimeout((function(){l=null,(0,o.removeClassname)(document.body,"sliding-sidebar")}),220)}),20)}(e),p(e)}};return r.createElement(u.Provider,{value:g},t)},d=u.Consumer},5321:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(9471),i=n(8713),a=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}function s(e){const t=r.createElement("span",null,r.createElement("span",null,e.children)),n={tabIndex:e.tabIndex||null,title:e.title||null,className:"circle-icon-button"+(void 0!==e.className?" "+e.className:"")+(e.buttonShadow?" button-shadow":"")};return void 0!==e["data-page-id"]&&(n["data-page-id"]=e["data-page-id"]),void 0!==e["aria-label"]&&(n["aria-label"]=e["aria-label"]),"link"===e.type?r.createElement("a",o({},n,{href:e.href||null,rel:e.rel||null}),t):"span"===e.type?r.createElement("span",o({},n,{onClick:e.onClick||null}),t):r.createElement("button",o({},n,{onClick:e.onClick||null}),t)}s.propTypes={type:a().oneOf(["button","link","span"]),buttonShadow:a().bool,className:a().string},s.defaultProps={type:"button",buttonShadow:!1}},5325:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:function(){return r}})},5328:function(e){"use strict";e.exports=function(e){return e!=e}},5338:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1535),t),i(n(4876),t),i(n(2907),t),i(n(8629),t),i(n(384),t),i(n(3270),t),i(n(5510),t),i(n(6552),t),i(n(2757),t),i(n(1610),t),i(n(3639),t),i(n(6387),t)},5385:function(e,t,n){"use strict";function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,{A:function(){return r}})},5393:function(e,t,n){"use strict";function r(){var e,t,n,r=null;if(document.cookie&&""!==document.cookie)for(t=document.cookie.split(";"),e=0;e<t.length;){if("csrftoken="===(n=t[e].trim()).substring(0,10)){r=decodeURIComponent(n.substring(10));break}e+=1}return r}n.d(t,{G:function(){return r}})},5439:function(e,t,n){"use strict";var r=n(9471);if(201==n.j)var i=n(6802);if(201==n.j)var a=n(7619);t.A=201==n.j?function(e,t,n){var o=t.style,s=t.className,l=t.classNames,u=(0,r.useContext)(i.b);return(0,r.useMemo)((function(){return(0,a.A)({style:o,className:s,classNames:l},u)}),[o,s,l,u])(n,e)}:null},5453:function(e,t,n){"use strict";e.exports=n(6653)},5465:function(e,t,n){"use strict";n.r(t),n.d(t,{ThemeConsumer:function(){return d},ThemeContext:function(){return u},ThemeProvider:function(){return c}});var r=n(9471),i=n(7154),a=n(1838),o=n(3997),s=n(8899);const l=(0,o.$)(window.MediaCMS),u=(0,r.createContext)(),c=e=>{let{children:t}=e;const n=(0,r.useContext)(s.default),o=new i.BrowserCache("MediaCMS["+n.id+"][theme]",86400),[c,d]=(0,r.useState)((h=o.get("mode"),p=l.theme.mode,"light"===h||"dark"===h?h:p));var h,p;const f=function(e){let t=null,n=null;return void 0!==e.darkMode&&((0,a.supportsSvgAsImg)()&&void 0!==e.darkMode.svg&&""!==e.darkMode.svg?n=e.darkMode.svg:void 0!==e.darkMode.img&&""!==e.darkMode.img&&(n=e.darkMode.img)),void 0!==e.lightMode&&((0,a.supportsSvgAsImg)()&&void 0!==e.lightMode.svg&&""!==e.lightMode.svg?t=e.lightMode.svg:void 0!==e.lightMode.img&&""!==e.lightMode.img&&(t=e.lightMode.img)),null===t&&null===n||(null===t?t=n:null===n&&(n=t)),{light:t,dark:n}}(l.theme.logo),[m,g]=(0,r.useState)(f[c]);(0,r.useEffect)((()=>{"dark"===c?(0,a.addClassname)(document.body,"dark_theme"):(0,a.removeClassname)(document.body,"dark_theme"),o.set("mode",c),g(f[c])}),[c]);const v={logo:m,currentThemeMode:c,changeThemeMode:()=>{d("light"===c?"dark":"light")},themeModeSwitcher:l.theme.switch};return r.createElement(u.Provider,{value:v},t)},d=u.Consumer},5474:function(e,t,n){"use strict";n.d(t,{Y:function(){return r},v:function(){return i}});var r=function(e){return"&"===e[0]},i=function(e){return!r(e)}},5503:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(1838),o=n(6371),s=n(2127);class l extends(i()){constructor(){super(),this.data={playlistId:null,enabledLoop:null,enabledShuffle:null,savedPlaylist:!1,response:null},this.browserCache=o.default.get("browser-cache")}get(e){switch(e){case"logged-in-user-playlist":return!1;case"enabled-loop":return null===this.data.playlistId&&(this.data.playlistId=s.default.get("playlist-id"),this.data.enabledLoop=this.browserCache.get("loopPlaylist["+this.data.playlistId+"]"),this.data.enabledLoop=null===this.data.enabledLoop||this.data.enabledLoop),this.data.enabledLoop;case"enabled-shuffle":return null===this.data.playlistId&&(this.data.playlistId=s.default.get("playlist-id"),this.data.enabledShuffle=this.browserCache.get("shufflePlaylist["+this.data.playlistId+"]"),this.data.enabledShuffle=null!==this.data.enabledShuffle&&this.data.enabledShuffle),this.data.enabledShuffle;case"saved-playlist":return this.data.savedPlaylist}return null}actions_handler(e){switch(e.type){case"TOGGLE_LOOP":null===this.data.playlistId&&(this.data.playlistId=s.default.get("playlist-id"),this.data.enabledLoop=this.browserCache.get("loopPlaylist["+this.data.playlistId+"]"),this.data.enabledLoop=null===this.data.enabledLoop||this.data.enabledLoop),this.data.enabledLoop=!this.data.enabledLoop,this.browserCache.set("loopPlaylist["+this.data.playlistId+"]",this.data.enabledLoop),this.emit("loop-repeat-updated");break;case"TOGGLE_SHUFFLE":null===this.data.playlistId&&(this.data.playlistId=s.default.get("playlist-id"),this.data.enabledShuffle=this.browserCache.get("shufflePlaylist["+this.data.playlistId+"]"),this.data.enabledShuffle=null!==this.data.enabledShuffle&&this.data.enabledShuffle),this.data.enabledShuffle=!this.data.enabledShuffle,this.browserCache.set("shufflePlaylist["+this.data.playlistId+"]",this.data.enabledShuffle),this.emit("shuffle-updated");break;case"TOGGLE_SAVE":this.data.savedPlaylist=!this.data.savedPlaylist,this.emit("saved-updated")}}}t.default=(0,a.exportStore)(new l,"actions_handler")},5510:function(e,t,n){"use strict";n.r(t),n.d(t,{useManagementTableHeader:function(){return i}});var r=n(9471);function i(e){const[t,n]=(0,r.useState)(e.sort),[i,a]=(0,r.useState)(e.order),[o,s]=(0,r.useState)(e.selected);return(0,r.useEffect)((()=>{n(e.sort)}),[e.sort]),(0,r.useEffect)((()=>{a(e.order)}),[e.order]),(0,r.useEffect)((()=>{s(e.selected)}),[e.selected]),[t,i,o,function(r){const o=r.currentTarget.getAttribute("id"),s=o,l=t===o&&"desc"===i?"asc":"desc";n(s),a(l),void 0!==e.onClickColumnSort&&e.onClickColumnSort(s,l)},function(){const t=!o;s(!t),void 0!==e.onCheckAllRows&&e.onCheckAllRows(t,e.type)}]}},5518:function(e,t,n){"use strict";function r(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}n.d(t,{A:function(){return r}})},5541:function(e){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},5577:function(e){"use strict";e.exports=Math.abs},5615:function(e,t,n){"use strict";n.d(t,{lg:function(){return d}});var r=n(9471),i=n(8713),a=n.n(i),o=n(4571),s=n.n(o),l=n(237),u=(n(4441),n(2831),n(2999),n(1026),n(8974));function c(e,t){let n=s()(e,{});return""!==n.origin&&"null"!==n.origin&&n.origin||(n=s()(t+"/"+e.replace(/^\//g,""),{})),n.toString()}function d(e){return r.createElement("div",{className:"error-container"},r.createElement("div",{className:"error-container-inner"},r.createElement("span",{className:"icon-wrap"},r.createElement("i",{className:"material-icons"},"error_outline")),r.createElement("span",{className:"msg-wrap"},e.errorMessage)))}function h(e){u.log("props player embed",e);const t=(0,r.useRef)(null),n=(0,r.useRef)(null),i={playerVolume:e.playerVolume??1,playerSoundMuted:e.playerSoundMuted??!1,videoQuality:e.videoQuality??"Auto",videoPlaybackSpeed:e.videoPlaybackSpeed??1,inTheaterMode:e.inTheaterMode??!1},a=()=>{if(n.current||e.errorMessage||!t.current)return;e.inEmbed||(window.removeEventListener("focus",a),document.removeEventListener("visibilitychange",a),t.current.focus());const r={on:!1,languages:[]};let o;e.subtitlesInfo?.length&&(e.subtitlesInfo.forEach((t=>{t.src&&t.srclang&&t.label&&r.languages.push({src:c(t.src,e.siteUrl),srclang:t.srclang,label:t.label})})),r.on=r.languages.length>0),u.log("props",e);const s=e.url.split("m=")[1];if(""!==e.stream){const t=(e=>{try{return new URL(e).pathname.split("/").filter(Boolean)[0]||null}catch{return null}})(e.stream),n=e.playback_url_token?.[t],r=n?`${e.stream}?${n.token}`:e.stream;u.log("🎯 Stream key detectado:",t),u.log("🔐 Token aplicado:",n?.token),u.log("▶️ Final HLS URL:",r),o=[{src:r,type:"application/x-mpegURL"}]}else o=[{src:"https://scl.edge.grupoz.cl/mediavms-development/smil:"+s+".smil/playlist.m3u8",type:"application/x-mpegURL"}];const d=(0,l.A)(t.current,{enabledTouchControls:!0,controls:!0,autoplay:!0,muted:!1,liveui:!0,poster:e.poster,sources:o,bigPlayButton:!0,volume:i.playerVolume,soundMuted:i.playerSoundMuted,theaterMode:i.inTheaterMode,videoPreviewThumb:e.previewSprite,controlBar:{theaterMode:e.hasTheaterMode,pictureInPictureToggle:!1,next:e.hasNextLink,previous:e.hasPreviousLink,enableLowInitialPlaylist:!1}});d.qualityLevels(),d.httpSourceSelector({default:"auto"}),""!==e.hls_file&&(d.volume(0),d.muted(!0)),r.on&&r.languages.forEach((e=>{d.addRemoteTextTrack({kind:"subtitles",src:e.src,srclang:e.srclang,label:e.label,default:!1},!1)})),u.log("props video embed",e.adsTag),null!==e.adsTag&&d.ima({id:"content_video_html5_api",adTagUrl:e.adsTag.url}),d.ready((function(){d.on("loadedmetadata",(()=>{t=d.duration()}));let t=0,n={25:!1,50:!1,75:!1};t=d.duration(),d.on("play",(()=>{window._paq&&(u.log("play"),window._paq.push(["trackEvent","Video","Play",e.title||"Video sin título"]))})),d.on("ended",(()=>{u.log("ended"),window._paq&&window._paq.push(["trackEvent","Video","Ended",e.title||"Video sin título"])})),d.on("timeupdate",(()=>{const r=d.currentTime()/t*100,i=Math.floor(r);i>=25&&!n[25]&&(window._paq.push(["trackEvent","Video","25%",e.title]),n[25]=!0),i>=50&&!n[50]&&(window._paq.push(["trackEvent","Video","50%",e.title]),n[50]=!0),i>=75&&!n[75]&&(window._paq.push(["trackEvent","Video","75%",e.title]),n[75]=!0)}))}))};return(0,r.useEffect)((()=>{if(window.google?.ima)a();else{const e=document.createElement("script");e.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",e.async=!0,e.onload=()=>{u.log("✅ Google IMA SDK cargado"),a()},document.body.appendChild(e)}return()=>{n.current&&(n.current.dispose(),n.current=null)}}),[]),null===e.errorMessage?r.createElement("video",{ref:t,id:"content_video",className:"video-js vjs-mediacms native-dimensions"}):r.createElement(d,{errorMessage:e.errorMessage})}d.propTypes={errorMessage:a().string.isRequired},h.propTypes={playerVolume:a().string,playerSoundMuted:a().bool,videoQuality:a().string,videoPlaybackSpeed:a().number,inTheaterMode:a().bool,siteId:a().string.isRequired,siteUrl:a().string.isRequired,errorMessage:a().string,cornerLayers:a().object,inEmbed:a().bool.isRequired,sources:a().array.isRequired,info:a().object.isRequired,enableAutoplay:a().bool.isRequired,hasTheaterMode:a().bool.isRequired,poster:a().string,adsTag:a().object,hls_file:a().string,previewSprite:a().object,onClickPreviousCallback:a().func,onClickNextCallback:a().func,onPlayerInitCallback:a().func,onStateUpdateCallback:a().func,onUnmountCallback:a().func},h.defaultProps={errorMessage:null,cornerLayers:{}}},5633:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var r=n(7460),i=n(1838);function a(e,t,n,a,o,s){const l={maxItems:t||255,pageItems:e?Math.min(t,e):1},u={totalItems:0,totalPages:0,nextRequestUrl:(0,i.formatInnerLink)(a,r.PageStore.get("config-site").url)},c={pageItems:0,requestResponse:!1};let d=null;const h=[],p=[];function f(e){let t,n;if(e=isNaN(e)?l.pageItems:e,c.pageItems&&c.pageItems<=p.length?(t=c.pageItems,n=!1,c.pageItems=0):(t=Math.min(e,p.length),n=e>p.length&&!!u.nextRequestUrl,c.pageItems=n?e-p.length:0),t){let e=0;for(;e<t;)h.push(p.shift()),e+=1;"function"==typeof s&&s(h)}n&&m()}function m(e){c.requestResponse=!0,(0,i.getRequest)(u.nextRequestUrl,!1,(function(t){if(c.requestResponse=!1,!t||!t.data)return;let n=t.data,r=void 0!==n.results?n.results:n,i=0;for(;i<r.length&&l.maxItems>p.length;)null!==d&&d===r[i].url||p.push(r[i]),i+=1;u.nextRequestUrl=n.next&&l.maxItems>p.length?n.next:null,e&&(u.totalItems=n.count?n.count:p.length,u.totalItems=Math.min(l.maxItems,u.totalItems),u.totalPages=Math.ceil(u.totalItems/l.pageItems),"function"==typeof o&&o(u.totalItems)),f()})),u.nextRequestUrl=null}return null!=n?(0,i.getRequest)((0,i.formatInnerLink)(n,r.PageStore.get("config-site").url),!1,(function(e){if(e&&e.data){let t=e.data,n=void 0!==t.results?t.results:t;n.length&&(d=n[0].url,h.push(n[0]))}m(!0)})):m(!0),{loadItems:function(e){!c.requestResponse&&h.length<u.totalItems&&f(e)},totalPages:function(){return u.totalPages},loadedAllItems:function(){return h.length===u.totalItems},cancelAll:function(){o=null,s=null}}}},5712:function(e){"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var a,o=function(e){for(var t=[],n=1,r=0;n<e.length;n+=1,r+=1)t[r]=e[n];return t}(arguments),s=n(0,i.length-o.length),l=[],u=0;u<s;u++)l[u]="$"+u;if(a=Function("binder","return function ("+function(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var t=i.apply(this,r(o,arguments));return Object(t)===t?t:this}return i.apply(e,r(o,arguments))})),i.prototype){var c=function(){};c.prototype=i.prototype,a.prototype=new c,c.prototype=null}return a}},5714:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{A:function(){return r}})},5785:function(e){"use strict";e.exports=RangeError},5817:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},5886:function(e,t,n){"use strict";n.r(t),n.d(t,{TextsConsumer:function(){return o},TextsContext:function(){return a}});var r=n(9471);const i={notifications:(0,n(3997).$)(window.MediaCMS).notifications.messages},a=(0,r.createContext)(i),o=a.Consumer},5928:function(e,t,n){"use strict";e.exports=n(9761)},5935:function(e,t,n){"use strict";var r=n(9722),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=n(1828),l=n(6177)(),u=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==a.call(i)||!r())return;var i;l?s(e,t,n,!0):s(e,t,n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)u(e,a[s],t[a[s]],n[a[s]])};c.supportsDescriptors=!!l,e.exports=c},5953:function(e,t,n){"use strict";var r=n(9932),i=n(4114),a=n(7901),o=n(7679);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return o(r,a,e)}},5986:function(e,t,n){"use strict";function r(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(7331),a=function(){function e(){r(this,"_callbacks",void 0),r(this,"_isDispatching",void 0),r(this,"_isHandled",void 0),r(this,"_isPending",void 0),r(this,"_lastID",void 0),r(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var t=e.prototype;return t.register=function(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t},t.unregister=function(e){this._callbacks[e]||i(!1),delete this._callbacks[e]},t.waitFor=function(e){this._isDispatching||i(!1);for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?this._isHandled[n]||i(!1):(this._callbacks[n]||i(!1),this._invokeCallback(n))}},t.dispatch=function(e){this._isDispatching&&i(!1),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},t.isDispatching=function(){return this._isDispatching},t._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},t._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},t._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=a},5996:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6031:function(e,t,n){"use strict";var r=n(3095);e.exports=r.getPrototypeOf||null},6035:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},6077:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserCache:function(){return o}});var r=n(1838),i=n(8974);function a(){var e="test-slug";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function o(e,t){return t=parseInt(t,10)||3600,a||i.warn(["Current browser does not support localStorage."]),e?{prefix:e,seconds:t,set:function(n,i,o,s){if(a){(o=o||t)||(s=(0,r.logWarningAndReturnError)(["Invalid cache expiration value",o]));try{localStorage.setItem(e+"["+n+"]",JSON.stringify({value:i,expire:(new Date).getTime()+1e3*o})),s=!0}catch(e){s=(0,r.logWarningAndReturnError)([e])}}return s},get:function(t,n){return null!==(n=(n=a?localStorage.getItem(e+"["+t+"]"):null)?JSON.parse(n):null)?void 0!==n.expire&&n.expire>(new Date).getTime()?n.value:null:n},clear:function(){var t;if(a&&Object.keys(localStorage).length)for(t in localStorage)localStorage.hasOwnProperty(t)&&0===t.indexOf(e)&&localStorage.removeItem(t);return!0}}:(0,r.logErrorAndReturnError)(["Cache object prefix is required"])}},6089:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var r=n(9471),i=n(6371);let a=/^(152|543|594|722)$/.test(n.j)?null:[];function o(e){const[t,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!0);let o=null,s=null;return(0,r.useEffect)((()=>(o=setTimeout((function(){s=setTimeout((function(){a(!1),s=null}),1e3),o=null,n(!0),e.onHide(e.id)}),5e3),()=>{o&&clearTimeout(o),s&&clearTimeout(s)})),[]),i?r.createElement("div",{className:"notification-item"+(t?" hidden":"")},r.createElement("div",null,e.children||null)):null}function s(){const[e,t]=(0,r.useState)(a.length);function n(){t(i.default.get("notifications-size")+a.length)}function s(e){const t=[];a.map((n=>{n[0]!==e&&t.push(n)})),a=t}return(0,r.useEffect)((()=>(n(),i.default.on("added_notification",n),()=>i.default.removeListener("added_notification",n))),[]),e?r.createElement("div",{className:"notifications"},r.createElement("div",null,function(){const e=i.default.get("notifications");return[...a.map((e=>r.createElement(o,{key:e[0],id:e[0],onHide:s},e[1]))),...e.map((e=>(a.push(e),r.createElement(o,{key:e[0],id:e[0],onHide:s},e[1]))))]}())," "):null}},6098:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},6109:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),i.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),i.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l={left:0,top:8},u=function(e){var t=e.onClick,n=i.useContext(r.ThemeContext),s=i.useContext(r.LocalizationContext).l10n,u="dark"===n.currentTheme,c=s&&s.theme?u?s.theme.switchLightTheme:s.theme.switchDarkTheme:u?"Switch to the light theme":"Switch to the dark theme";return i.createElement(r.Tooltip,{ariaControlsSuffix:"theme-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:c,testId:"theme__switch-button",onClick:t},u?i.createElement(o,null):i.createElement(a,null)),content:function(){return c},offset:l})},c=function(e){var t=e.children,n=i.useContext(r.ThemeContext);return(t||function(e){return i.createElement(u,{onClick:e.onClick})})({onClick:function(){return n.setCurrentTheme("dark"===n.currentTheme?"light":"dark")}})},d=function(e){var t=e.onClick,n=i.useContext(r.ThemeContext),s=i.useContext(r.LocalizationContext).l10n,l="dark"===n.currentTheme,u=s&&s.theme?l?s.theme.switchLightTheme:s.theme.switchDarkTheme:l?"Switch to the light theme":"Switch to the dark theme";return i.createElement(r.MenuItem,{icon:l?i.createElement(o,null):i.createElement(a,null),testId:"theme__switch-menu",onClick:t},u)};t.DarkIcon=a,t.LightIcon=o,t.themePlugin=function(){var e=function(e){return i.createElement(c,s({},e))};return{SwitchTheme:e,SwitchThemeButton:function(){return i.createElement(e,null,(function(e){return i.createElement(u,s({},e))}))},SwitchThemeMenuItem:function(t){return i.createElement(e,null,(function(e){return i.createElement(d,{onClick:function(){e.onClick(),t.onClick()}})}))}}}},6111:function(e,t,n){var r=n(8974),i=n(6495),a=n(6927),o=n(7372),s=n(7771),l=a.DOMImplementation,u=i.NAMESPACE,c=s.ParseError,d=s.XMLReader;function h(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function f(){this.cdata=!1}function m(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function v(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function y(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var n=this.options,r=new d,i=n.domBuilder||new f,a=n.errorHandler,s=n.locator,l=n.xmlns||{},c=/\/x?html?$/.test(t),p=c?o.HTML_ENTITIES:o.XML_ENTITIES;s&&i.setDocumentLocator(s),r.errorHandler=function(e,t,n){if(!e){if(t instanceof f)return t;e=t}var r={},i=e instanceof Function;function a(t){var a=e[t];!a&&i&&(a=2==e.length?function(n){e(t,n)}:e),r[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+g(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),r}(a,i,s),r.domBuilder=n.domBuilder||i,c&&(l[""]=u.HTML),l.xml=l.xml||u.XML;var m=n.normalizeLineEndings||h;return e&&"string"==typeof e?r.parse(m(e),l,p):r.errorHandler.error("invalid doc source"),i.doc},f.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),o=r.length;y(this,a),this.currentElement=a,this.locator&&m(this.locator,a);for(var s=0;s<o;s++){e=r.getURI(s);var l=r.getValue(s),u=(n=r.getQName(s),i.createAttributeNS(e,n));this.locator&&m(r.getLocator(s),u),u.value=u.nodeValue=l,a.setAttributeNode(u)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&m(this.locator,n),y(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=v.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&m(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=v.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&m(this.locator,r),y(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&m(this.locator,i),y(this,i),this.doc.doctype=i}},warning:function(e){r.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){r.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new c(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){f.prototype[e]=function(){return null}})),t.DOMParser=p},6168:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6177:function(e,t,n){"use strict";var r=n(70),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},6190:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListRow=void 0;var i=r(n(9471)),a=n(1003);t.MediaListRow=function(e){return i.default.createElement("div",{className:(e.className?e.className+" ":"")+"media-list-row",style:e.style},e.title?i.default.createElement(a.MediaListHeader,{title:e.title,viewAllLink:e.viewAllLink,viewAllText:e.viewAllText}):null,e.children||null)}},6308:function(e,t,n){"use strict";e.exports=n(3129)},6371:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(7154),o=n(1838),s=n(3997);function l(){let e=new Uint32Array(3);return window.crypto.getRandomValues(e),(performance.now().toString(36)+Array.from(e).map((e=>e.toString(36))).join("")).replace(/./g,""+Math.random()+Intl.DateTimeFormat().resolvedOptions().timeZone+Date.now())}let u,c=null,d=null;class h extends(i()){constructor(e){super(),d=(0,s.$)(window.MediaCMS),u=new a.BrowserCache(d.site.id,86400),c={mediaAutoPlay:u.get("media-auto-play")},c.mediaAutoPlay=null===c.mediaAutoPlay||c.mediaAutoPlay,this.browserEvents=(0,o.BrowserEvents)(),this.browserEvents.doc(this.onDocumentVisibilityChange.bind(this)),this.browserEvents.win(this.onWindowResize.bind(this),this.onWindowScroll.bind(this)),this.notifications=function(e){let t=[];function n(e){"string"==typeof e&&t.push([l(),e])}return e.map(n),{size:function(){return t.length},push:n,clear:function(){t=[]},messages:function(){return[...t]}}}(void 0!==window.MediaCMS&&void 0!==window.MediaCMS.notifications?window.MediaCMS.notifications:[])}onDocumentVisibilityChange(){this.emit("document_visibility_change")}onWindowScroll(){this.emit("window_scroll")}onWindowResize(){this.emit("window_resize")}initPage(e){c.currentPage=e}get(e){let t;switch(e){case"browser-cache":t=u;break;case"media-auto-play":t=c.mediaAutoPlay;break;case"config-contents":t=d.contents;break;case"config-enabled":t=d.enabled;break;case"config-media-item":t=d.media.item;break;case"config-options":t=d.options;break;case"config-site":t=d.site;break;case"api-playlists":n=e.split("-")[1],t=d.api[n]||null;break;case"notifications-size":t=this.notifications.size();break;case"notifications":t=this.notifications.messages(),this.notifications.clear();break;case"current-page":t=c.currentPage}var n;return t}actions_handler(e){switch(e.type){case"INIT_PAGE":this.initPage(e.page),this.emit("page_init");break;case"TOGGLE_AUTO_PLAY":c.mediaAutoPlay=!c.mediaAutoPlay,u.set("media-auto-play",c.mediaAutoPlay),this.emit("switched_media_auto_play");break;case"ADD_NOTIFICATION":this.notifications.push(e.notification),this.emit("added_notification")}}}t.default=(0,o.exportStore)(new h,"actions_handler")},6387:function(e,t,n){"use strict";n.r(t),n.d(t,{useUser:function(){return a}});var r=n(9471),i=n(4463);const a=()=>(0,r.useContext)(i.default)},6403:function(e,t,n){"use strict";n.d(t,{g:function(){return o},m:function(){return a}});var r=n(8004);function i(e,t,n){let r;switch(n){case TypeError:case RangeError:case SyntaxError:case ReferenceError:r=new n(t[0]);break;default:r=new Error(t[0])}return e(r.message,...t.slice(1)),r}function a(e,t){return i(r.z,e,t)}function o(e,t){return i(r.R,e,t)}},6495:function(e,t){"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var r=n({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(t.call(void 0,i,r,e))return i}},t.freeze=n,t.MIME_TYPE=r,t.NAMESPACE=i},6550:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6552:function(e,t,n){"use strict";n.r(t),n.d(t,{useMediaFilter:function(){return a}});var r=n(9471),i=n(1610);function a(e){const t=(0,r.useRef)(null),[n,a]=(0,r.useState)(e),[o,s,l]=(0,i.usePopup)();return[t,n,a,o,s,l]}},6568:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(9471),i=n(8713),a=n.n(i);function o(e){let t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return r.createElement("div",{className:t},r.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},r.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}o.propTypes={size:a().oneOf(["tiny","x-small","small","medium","large","x-large"])},o.defaultProps={size:"medium"}},6619:function(e,t,n){"use strict";n.d(t,{P:function(){return ye},G:function(){return ge}});var r=n(9191),i=n(5385),a=n(2531);function o(e){return(0,r.A)(e)||(0,i.A)(e)||(0,a.A)()}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=n(5325),c=n(5714),d=n(8824);function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(9471),m=n(160),g=n.n(m),v=n(1829),y=n(5518),b=n(2078);function _(e,t){return(0,v.A)(e)||(0,y.A)(e,t)||(0,b.A)()}var E=n(519),S=n(5439).A,w=n(6035),T=n.n(w);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=n(8713),P=n.n(A),x=n(9834),I=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},M="__id__",R="__display__",O=function(e,t){g()("id"===t||"display"===t,'Second arg must be either "id" or "display", got: "'.concat(t,'"'));var n=e.indexOf(R),r=e.indexOf(M);return n<0&&(n=null),r<0&&(r=null),g()(null!==n||null!==r,"The markup '".concat(e,"' does not contain either of the placeholders '__id__' or '__display__'")),null!==n&&null!==r?"id"===t&&r<=n||"display"===t&&n<=r?0:1:0},L=function(e){var t=0;return e.indexOf("__id__")>=0&&t++,e.indexOf("__display__")>=0&&t++,t},D=function(){},N=function(e,t,n){for(var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D,s=(r=t.map((function(e){return e.regex})),i=/^\/(.+)\/(\w+)?$/,new RegExp(r.map((function(e){var t=_(i.exec(e.toString()),3),n=t[1],r=t[2];return g()(!r,"RegExp flags are not supported. Change /".concat(n,"/").concat(r," into /").concat(n,"/")),"(".concat(n,")")})).join("|"),"g")),l=2,u=t.map((function(e){var t=e.markup,n=l;return l+=L(t)+1,n})),c=0,d=0;null!==(a=s.exec(e));){var h=u.find((function(e){return!!a[e]})),p=u.indexOf(h),f=t[p],m=f.markup,v=f.displayTransform,y=h+O(m,"id"),b=h+O(m,"display"),E=a[y],S=v(E,a[b]),w=e.substring(c,a.index);o(w,c,d),d+=w.length,n(a[0],a.index,d,E,S,p,c),d+=S.length,c=s.lastIndex}c<e.length&&o(e.substring(c),c,d)},F=function(e,t){var n="";return N(e,t,(function(e,t,r,i,a){n+=a}),(function(e){n+=e})),n},j=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"START";return"number"!=typeof n?n:(N(e,t,(function(e,t,a,o,s,l,u){void 0===r&&a+s.length>n&&(r="NULL"===i?null:t+("END"===i?e.length:0))}),(function(e,t,i){void 0===r&&i+e.length>=n&&(r=t+n-i)})),void 0===r?e.length:r)},B=function(e,t,n,r){return e.substring(0,t)+r+e.substring(n)},U=function(e,t,n){var r=n,i=!1;if(N(e,t,(function(e,t,a,o,s,l,u){a<=n&&a+s.length>n&&(r=a,i=!0)})),i)return r},q=function(e,t){var n=[];return N(e,t,(function(e,t,r,i,a,o,s){n.push({id:i,display:a,childIndex:o,index:t,plainTextIndex:r})})),n},V=function(e,t){return"".concat(e,"-").concat(t)},H=function(e){return Object.values(e).reduce((function(e,t){return e+t.results.length}),0)},z=function(e){var t=I(e),n=e[e.indexOf(R)+11],r=e[e.indexOf(M)+6];return new RegExp(t.replace(R,"([^".concat(I(n||""),"]+?)")).replace(M,"([^".concat(I(r||""),"]+?)")))},W=function(e){return f.Children.toArray(e).map((function(e){var t=e.props,n=t.markup,r=t.regex,i=t.displayTransform;return{markup:n,regex:r?G(r,n):z(n),displayTransform:i||function(e,t){return t||e}}}))},G=function(e,t){var n=new RegExp(e.toString()+"|").exec("").length-1,r=L(t);return g()(n===r,"Number of capturing groups in RegExp ".concat(e.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(t,"' (").concat(r,")")),e},X=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],K=function(e){return function(e){var t=e;return X.forEach((function(e){t=t.replace(e.letters,e.base)})),t}(e).toLowerCase()},$=function(e,t,n){return n?K(e).indexOf(K(t)):e.toLowerCase().indexOf(t.toLowerCase())},Y=function(e){return"number"==typeof e},Q=["style","className","classNames"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t){return function(n){var r=function(r){var i=r.style,a=r.className,o=r.classNames,l=function(e,t){if(null==e)return{};var n,r,i=(0,E.A)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,Q),u=t?t(l):void 0,c=S(e,{style:i,className:a,classNames:o},u);return f.createElement(n,s({},l,{style:c}))},i=n.displayName||n.name||"Component";return r.displayName="defaultStyle(".concat(i,")"),f.forwardRef((function(e,t){return r(Z(Z({},e),{},{ref:t}))}))}}function te(e){var t=e.selectionStart,n=e.selectionEnd,r=e.value,i=void 0===r?"":r,a=e.onCaretPositionChange,o=e.containerRef,l=e.children,u=(e.singleLine,e.style),c=_((0,f.useState)({left:void 0,top:void 0}),2),d=c[0],h=c[1],p=_((0,f.useState)(),2),m=p[0],g=p[1];(0,f.useEffect)((function(){y()}));var v,y=function(){if(m){var e=m.offsetLeft,t=m.offsetTop;if(d.left!==e||d.top!==t){var n={left:e,top:t};h(n),a(n)}}},b=W(l);n===t&&(v=j(i,b,t,"START"));var E=[],S={},w=E,T=0,C=function(e,t){return f.createElement("span",s({},u("substring"),{key:t}),e)};return N(i,b,(function(e,t,n,r,i,a,o){var s=function(e,t){return e.hasOwnProperty(t)?e[t]++:e[t]=0,t+"_"+e[t]}(S,r);w.push(function(e,t,n,r){var i={id:e,display:t,key:r},a=f.Children.toArray(l)[n];return f.cloneElement(a,i)}(r,i,a,s))}),(function(e,t,n){if(Y(v)&&v>=t&&v<=t+e.length){var r=v-t;w.push(C(e.substring(0,r),T)),w=[C(e.substring(r),T)]}else w.push(C(e,T));T++})),w.push(" "),w!==E&&E.push(function(e){return f.createElement("span",s({},u("caret"),{ref:g,key:"caret"}),e)}(w)),f.createElement("div",s({},u,{ref:o}),E)}te.propTypes={selectionStart:P().number,selectionEnd:P().number,value:P().string.isRequired,onCaretPositionChange:P().func.isRequired,containerRef:P().oneOfType([P().func,P().shape({current:"undefined"==typeof Element?P().any:P().instanceOf(Element)})]),children:P().oneOfType([P().element,P().arrayOf(P().element)]).isRequired};var ne=ee({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},(function(e){return{"&singleLine":e.singleLine}}))(te);function re(e){var t,n,r=e.id,i=e.focused,a=e.ignoreAccents,o=e.index,l=e.onClick,u=e.onMouseEnter,c=e.query,d=e.renderSuggestion,h=e.suggestion,p=e.style,m=(e.className,e.classNames,{onClick:l,onMouseEnter:u});return f.createElement("li",s({id:r,role:"option","aria-selected":i},m,p),(t=function(){if("string"==typeof h)return h;var e=h.id,t=h.display;return void 0!==e&&t?t:e}(),n=function(e){var t=$(e,c,a);return-1===t?f.createElement("span",p("display"),e):f.createElement("span",p("display"),e.substring(0,t),f.createElement("b",p("highlight"),e.substring(t,t+c.length)),e.substring(t+c.length))}(t),d?d(h,c,n,o,i):n))}re.propTypes={id:P().string.isRequired,query:P().string.isRequired,index:P().number.isRequired,ignoreAccents:P().bool,suggestion:P().oneOfType([P().string,P().shape({id:P().oneOfType([P().string,P().number]).isRequired,display:P().string})]).isRequired,renderSuggestion:P().func,focused:P().bool};var ie=ee({cursor:"pointer"},(function(e){return{"&focused":e.focused}}))(re);function ae(e){var t=e.style,n=e.className,r=e.classNames,i=S(oe,{style:t,className:n,classNames:r}),a=i("spinner");return f.createElement("div",i,f.createElement("div",a,f.createElement("div",a(["element","element1"])),f.createElement("div",a(["element","element2"])),f.createElement("div",a(["element","element3"])),f.createElement("div",a(["element","element4"])),f.createElement("div",a(["element","element5"]))))}var oe={};function se(e){var t=e.id,n=e.suggestions,r=void 0===n?{}:n,i=e.a11ySuggestionsListLabel,a=e.focusIndex,l=e.position,u=e.left,c=e.right,d=e.top,h=e.scrollFocusedIntoView,p=e.isLoading,m=e.isOpened,g=e.onSelect,v=void 0===g?function(){return null}:g,y=e.ignoreAccents,b=e.containerRef,E=e.children,S=e.style,w=e.customSuggestionsContainer,T=e.onMouseDown,C=e.onMouseEnter,A=_((0,f.useState)(void 0),2),P=A[0],x=A[1];(0,f.useEffect)((function(){if(P&&!(P.offsetHeight>=P.scrollHeight)&&h){var e=P.scrollTop,t=P.children[a].getBoundingClientRect(),n=t.top,r=t.bottom,i=P.getBoundingClientRect().top;r=r-i+e,(n=n-i+e)<e?P.scrollTop=n:r>P.offsetHeight&&(P.scrollTop=r-P.offsetHeight)}}),[a,h,P]);var I,M=function(e,t){C&&C(e)},R=function(e,t){v(e,t)},O=function(e){return"string"==typeof e?e:e.id};return m?f.createElement("div",s({},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return k(k(k({},e),"function"==typeof t?t:{}),{},{style:k(k({},e.style),"function"==typeof t?t.style:t)})}),{})}({position:l||"absolute",left:u,right:c,top:d},S),{onMouseDown:T,ref:b}),(I=f.createElement("ul",s({ref:x,id:t,role:"listbox","aria-label":i},S("list")),Object.values(r).reduce((function(e,n){var r=n.results,i=n.queryInfo;return[].concat(o(e),o(r.map((function(n,r){return function(e,n,r){var i=r===a,o=n.childIndex,s=n.query,l=f.Children.toArray(E)[o].props.renderSuggestion;return f.createElement(ie,{style:S("item"),key:"".concat(o,"-").concat(O(e)),id:V(t,r),query:s,index:r,ignoreAccents:y,renderSuggestion:l,suggestion:e,focused:i,onClick:function(){return R(e,n)},onMouseEnter:function(){return M(r)}})}(n,i,e.length+r)}))))}),[])),w?w(I):I),function(){if(p)return f.createElement(ae,{style:S("loadingIndicator")})}()):null}se.propTypes={id:P().string.isRequired,suggestions:P().object.isRequired,a11ySuggestionsListLabel:P().string,focusIndex:P().number,position:P().string,left:P().number,right:P().number,top:P().number,scrollFocusedIntoView:P().bool,isLoading:P().bool,isOpened:P().bool.isRequired,onSelect:P().func,ignoreAccents:P().bool,customSuggestionsContainer:P().func,containerRef:P().oneOfType([P().func,P().shape({current:"undefined"==typeof Element?P().any:P().instanceOf(Element)})])};var le=ee({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}})(se);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},he=!1,pe={singleLine:P().bool,allowSpaceInQuery:P().bool,allowSuggestionsAboveCursor:P().bool,forceSuggestionsAboveCursor:P().bool,ignoreAccents:P().bool,a11ySuggestionsListLabel:P().string,value:P().string,onKeyDown:P().func,customSuggestionsContainer:P().func,onSelect:P().func,onBlur:P().func,onChange:P().func,suggestionsPortalHost:"undefined"==typeof Element?P().any:P().PropTypes.instanceOf(Element),inputRef:P().oneOfType([P().func,P().shape({current:"undefined"==typeof Element?P().any:P().instanceOf(Element)})]),children:P().oneOfType([P().element,P().arrayOf(P().element)]).isRequired},fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,c.A)(e,t)}(m,e);var t,n,r,i,a=(r=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(i){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==(0,d.A)(t)&&"function"!=typeof t?(0,u.A)(e):t}(this,e)});function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),t=a.call(this,e),p((0,u.A)(t),"setContainerElement",(function(e){t.containerElement=e})),p((0,u.A)(t),"getInputProps",(function(){var e,n=t.props,r=n.readOnly,i=n.disabled,a=n.style,o=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=(t=[]).concat.apply(t,r);return Object.keys(e).reduce((function(t,n){return e.hasOwnProperty(n)&&!a.includes(n)&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}(t.props,["style","classNames","className"],(e=pe)===Object(e)?Object.keys(e):[]);return ce(ce(ce(ce({},o),a("input")),{},{value:t.getPlainText(),onScroll:t.updateHighlighterScroll},!r&&!i&&{onChange:t.handleChange,onSelect:t.handleSelect,onKeyDown:t.handleKeyDown,onBlur:t.handleBlur,onCompositionStart:t.handleCompositionStart,onCompositionEnd:t.handleCompositionEnd}),t.isOpened()&&{role:"combobox","aria-controls":t.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":V(t.uuidSuggestionsOverlay,t.state.focusIndex)})})),p((0,u.A)(t),"renderControl",(function(){var e=t.props,n=e.singleLine,r=e.style,i=t.getInputProps();return f.createElement("div",r("control"),t.renderHighlighter(),n?t.renderInput(i):t.renderTextarea(i))})),p((0,u.A)(t),"renderInput",(function(e){return f.createElement("input",s({type:"text",ref:t.setInputRef},e))})),p((0,u.A)(t),"renderTextarea",(function(e){return f.createElement("textarea",s({ref:t.setInputRef},e))})),p((0,u.A)(t),"setInputRef",(function(e){t.inputElement=e;var n=t.props.inputRef;"function"==typeof n?n(e):n&&(n.current=e)})),p((0,u.A)(t),"setSuggestionsElement",(function(e){t.suggestionsElement=e})),p((0,u.A)(t),"renderSuggestionsOverlay",(function(){if(!Y(t.state.selectionStart))return null;var e=t.state.suggestionsPosition,n=e.position,r=e.left,i=e.top,a=e.right,o=f.createElement(le,{id:t.uuidSuggestionsOverlay,style:t.props.style("suggestions"),position:n,left:r,top:i,right:a,focusIndex:t.state.focusIndex,scrollFocusedIntoView:t.state.scrollFocusedIntoView,containerRef:t.setSuggestionsElement,suggestions:t.state.suggestions,customSuggestionsContainer:t.props.customSuggestionsContainer,onSelect:t.addMention,onMouseDown:t.handleSuggestionsMouseDown,onMouseEnter:t.handleSuggestionsMouseEnter,isLoading:t.isLoading(),isOpened:t.isOpened(),ignoreAccents:t.props.ignoreAccents,a11ySuggestionsListLabel:t.props.a11ySuggestionsListLabel},t.props.children);return t.props.suggestionsPortalHost?x.createPortal(o,t.props.suggestionsPortalHost):o})),p((0,u.A)(t),"renderHighlighter",(function(){var e=t.state,n=e.selectionStart,r=e.selectionEnd,i=t.props,a=i.singleLine,o=i.children,s=i.value,l=i.style;return f.createElement(ne,{containerRef:t.setHighlighterElement,style:l("highlighter"),value:s,singleLine:a,selectionStart:n,selectionEnd:r,onCaretPositionChange:t.handleCaretPositionChange},o)})),p((0,u.A)(t),"setHighlighterElement",(function(e){t.highlighterElement=e})),p((0,u.A)(t),"handleCaretPositionChange",(function(e){t.setState({caretPosition:e})})),p((0,u.A)(t),"getPlainText",(function(){return F(t.props.value||"",W(t.props.children))})),p((0,u.A)(t),"executeOnChange",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o;return t.props.onChange?(a=t.props).onChange.apply(a,[e].concat(r)):t.props.valueLink?(o=t.props.valueLink).requestChange.apply(o,[e.target.value].concat(r)):void 0})),p((0,u.A)(t),"handleChange",(function(e){if(he=!1,!document.documentMode||(document.activeElement&&document.activeElement.contentDocument||document).activeElement===e.target){var n=t.props.value||"",r=W(t.props.children),i=e.target.value,a=t.state.selectionStart;null==a&&(a=e.target.selectionStart);var o=t.state.selectionEnd;null==o&&(o=e.target.selectionEnd);var s=function(e,t,n,r){var i=n.selectionStartBefore,a=n.selectionEndBefore,o=n.selectionEndAfter,s=F(e,r),l=s.length-t.length;"undefined"===i&&(i=o+l),"undefined"===a&&(a=i),i===a&&a===o&&s.length===t.length&&(i-=1);var u=t.slice(i,o),c=Math.min(i,o),d=a;i===o&&(d=Math.max(a,i+l));var h=j(e,r,c,"START"),p=j(e,r,d,"END"),f=j(e,r,c,"NULL"),m=j(e,r,d,"NULL"),g=null===f||null===m,v=B(e,h,p,u);if(!g){var y=F(v,r);if(y!==t){for(c=0;t[c]===y[c];)c++;u=t.slice(c,o),d=s.lastIndexOf(t.substring(o)),h=j(e,r,c,"START"),p=j(e,r,d,"END"),v=B(e,h,p,u)}}return v}(n,i,{selectionStartBefore:a,selectionEndBefore:o,selectionEndAfter:e.target.selectionEnd},r);i=F(s,r);var l=e.target.selectionStart,u=e.target.selectionEnd,c=!1,d=U(n,r,l);void 0!==d&&t.state.selectionEnd>d&&(u=l=d+(e.nativeEvent.data?e.nativeEvent.data.length:0),c=!0),t.setState({selectionStart:l,selectionEnd:u,setSelectionAfterMentionChange:c});var h=q(s,r);e.nativeEvent.isComposing&&l===u&&t.updateMentionsQueries(t.inputElement.value,l);var p={target:{value:s}};t.executeOnChange(p,s,i,h)}})),p((0,u.A)(t),"handleSelect",(function(e){if(t.setState({selectionStart:e.target.selectionStart,selectionEnd:e.target.selectionEnd}),!he){var n=t.inputElement;e.target.selectionStart===e.target.selectionEnd?t.updateMentionsQueries(n.value,e.target.selectionStart):t.clearSuggestions(),t.updateHighlighterScroll(),t.props.onSelect(e)}})),p((0,u.A)(t),"handleKeyDown",(function(e){if(0!==H(t.state.suggestions)&&t.suggestionsElement)switch(Object.values(de).indexOf(e.keyCode)>=0&&(e.preventDefault(),e.stopPropagation()),e.keyCode){case de.ESC:return void t.clearSuggestions();case de.DOWN:return void t.shiftFocus(1);case de.UP:return void t.shiftFocus(-1);case de.RETURN:case de.TAB:return void t.selectFocused();default:return}else t.props.onKeyDown(e)})),p((0,u.A)(t),"shiftFocus",(function(e){var n=H(t.state.suggestions);t.setState({focusIndex:(n+t.state.focusIndex+e)%n,scrollFocusedIntoView:!0})})),p((0,u.A)(t),"selectFocused",(function(){var e=t.state,n=e.suggestions,r=e.focusIndex,i=Object.values(n).reduce((function(e,t){var n=t.results,r=t.queryInfo;return[].concat(o(e),o(n.map((function(e){return{result:e,queryInfo:r}}))))}),[])[r],a=i.result,s=i.queryInfo;t.addMention(a,s),t.setState({focusIndex:0})})),p((0,u.A)(t),"handleBlur",(function(e){var n=t._suggestionsMouseDown;t._suggestionsMouseDown=!1,n||t.setState({selectionStart:null,selectionEnd:null}),window.setTimeout((function(){t.updateHighlighterScroll()}),1),t.props.onBlur(e,n)})),p((0,u.A)(t),"handleSuggestionsMouseDown",(function(e){t._suggestionsMouseDown=!0})),p((0,u.A)(t),"handleSuggestionsMouseEnter",(function(e){t.setState({focusIndex:e,scrollFocusedIntoView:!1})})),p((0,u.A)(t),"updateSuggestionsPosition",(function(){var e=t.state.caretPosition,n=t.props,r=n.suggestionsPortalHost,i=n.allowSuggestionsAboveCursor,a=n.forceSuggestionsAboveCursor;if(e&&t.suggestionsElement){var o=t.suggestionsElement,s=t.highlighterElement,l=s.getBoundingClientRect(),u=me(s,"font-size"),c={left:l.left+e.left,top:l.top+e.top+u},d=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(o){var h={};if(r){h.position="fixed";var p=c.left,f=c.top;p-=me(o,"margin-left"),f-=me(o,"margin-top"),p-=s.scrollLeft,f-=s.scrollTop;var m=Math.max(document.documentElement.clientWidth,window.innerWidth||0);p+o.offsetWidth>m?h.left=Math.max(0,m-o.offsetWidth):h.left=p,i&&f+o.offsetHeight>d&&o.offsetHeight<f-u||a?h.top=Math.max(0,f-o.offsetHeight-u):h.top=f}else{var g=e.left-s.scrollLeft,v=e.top-s.scrollTop;g+o.offsetWidth>t.containerElement.offsetWidth?h.right=0:h.left=g,i&&c.top-s.scrollTop+o.offsetHeight>d&&o.offsetHeight<l.top-u-s.scrollTop||a?h.top=v-o.offsetHeight-u:h.top=v}h.left===t.state.suggestionsPosition.left&&h.top===t.state.suggestionsPosition.top&&h.position===t.state.suggestionsPosition.position||t.setState({suggestionsPosition:h})}}})),p((0,u.A)(t),"updateHighlighterScroll",(function(){var e=t.inputElement,n=t.highlighterElement;e&&n&&(n.scrollLeft=e.scrollLeft,n.scrollTop=e.scrollTop,n.height=e.height)})),p((0,u.A)(t),"handleCompositionStart",(function(){he=!0})),p((0,u.A)(t),"handleCompositionEnd",(function(){he=!1})),p((0,u.A)(t),"setSelection",(function(e,n){if(null!==e&&null!==n){var r=t.inputElement;if(r.setSelectionRange)r.setSelectionRange(e,n);else if(r.createTextRange){var i=r.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i.select()}}})),p((0,u.A)(t),"updateMentionsQueries",(function(e,n){t._queryId++,t.suggestions={},t.setState({suggestions:{}});var r=t.props.value||"",i=t.props.children,a=W(i),o=j(r,a,n,"NULL");if(null!==o){var s=function(e,t){var n=q(e,t),r=n[n.length-1];return r?r.plainTextIndex+r.display.length:0}(r.substring(0,o),a),l=e.substring(s,n);f.Children.forEach(i,(function(n,r){if(n){var i=function(e){if(e instanceof RegExp)return e;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowSpaceInQuery,n=I(e);return new RegExp("(?:^|\\s)(".concat(n,"([^").concat(t?"":"\\s").concat(n,"]*))$"))}(n.props.trigger,t.props),a=l.match(i);if(a){var o=s+l.indexOf(a[1],a.index);t.queryData(a[2],r,o,o+a[1].length,e)}}}))}})),p((0,u.A)(t),"clearSuggestions",(function(){t._queryId++,t.suggestions={},t.setState({suggestions:{},focusIndex:0})})),p((0,u.A)(t),"queryData",(function(e,n,r,i,a){var o=t.props,s=o.children,l=o.ignoreAccents,u=function(e,t){return e instanceof Array?function(n,r){for(var i=[],a=0,o=e.length;a<o;++a){var s=e[a].display||e[a].id;$(s,n,t)>=0&&i.push(e[a])}return i}:e}(f.Children.toArray(s)[n].props.data,l),c=u(e,t.updateSuggestions.bind(null,t._queryId,n,e,r,i,a));c instanceof Array&&t.updateSuggestions(t._queryId,n,e,r,i,a,c)})),p((0,u.A)(t),"updateSuggestions",(function(e,n,r,i,a,o,s){if(e===t._queryId){t.suggestions=ce(ce({},t.suggestions),{},p({},n,{queryInfo:{childIndex:n,query:r,querySequenceStart:i,querySequenceEnd:a,plainTextValue:o},results:s}));var l=t.state.focusIndex,u=H(t.suggestions);t.setState({suggestions:t.suggestions,focusIndex:l>=u?Math.max(u-1,0):l})}})),p((0,u.A)(t),"addMention",(function(e,n){var r=e.id,i=e.display,a=n.childIndex,o=n.querySequenceStart,s=n.querySequenceEnd,l=n.plainTextValue,u=t.props.value||"",c=W(t.props.children),d=f.Children.toArray(t.props.children)[a].props,h=d.markup,p=d.displayTransform,m=d.appendSpaceOnAdd,g=d.onAdd,v=j(u,c,o,"START"),y=v+s-o,b=function(e,t,n){return e.replace(M,t).replace(R,n)}(h,r,i);m&&(b+=" ");var _=B(u,v,y,b);t.inputElement.focus();var E=p(r,i);m&&(E+=" ");var S=o+E.length;t.setState({selectionStart:S,selectionEnd:S,setSelectionAfterMentionChange:!0});var w={target:{value:_}},T=q(_,c),C=B(l,o,s,E);t.executeOnChange(w,_,C,T),g&&g(r,i,v,y),t.clearSuggestions()})),p((0,u.A)(t),"isLoading",(function(){var e=!1;return f.Children.forEach(t.props.children,(function(t){e=e||t&&t.props.isLoading})),e})),p((0,u.A)(t),"isOpened",(function(){return Y(t.state.selectionStart)&&(0!==H(t.state.suggestions)||t.isLoading())})),p((0,u.A)(t),"_queryId",0),t.suggestions={},t.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),t.handleCopy=t.handleCopy.bind((0,u.A)(t)),t.handleCut=t.handleCut.bind((0,u.A)(t)),t.handlePaste=t.handlePaste.bind((0,u.A)(t)),t.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},t}return t=m,(n=[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(e,t){t.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return f.createElement("div",s({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(e){if(e.target===this.inputElement&&this.supportsClipboardActions(e)){e.preventDefault();var t=this.state,n=t.selectionStart,r=t.selectionEnd,i=this.props,a=i.value,o=i.children,s=W(o),l=j(a,s,n,"START"),u=j(a,s,r,"END"),c=e.clipboardData.getData("text/react-mentions"),d=e.clipboardData.getData("text/plain"),h=B(a,l,u,c||d).replace(/\r/g,""),p=F(h,s),f={target:ce(ce({},e.target),{},{value:h})};this.executeOnChange(f,h,p,q(h,s));var m=(U(a,s,n)||n)+F(c||d,s).length;this.setState({selectionStart:m,selectionEnd:m,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(e){var t=this.inputElement.selectionStart,n=this.inputElement.selectionEnd,r=this.props,i=r.children,a=r.value,o=W(i),s=j(a,o,t,"START"),l=j(a,o,n,"END");e.clipboardData.setData("text/plain",e.target.value.slice(t,n)),e.clipboardData.setData("text/react-mentions",a.slice(s,l))}},{key:"supportsClipboardActions",value:function(e){return!!e.clipboardData}},{key:"handleCopy",value:function(e){e.target===this.inputElement&&this.supportsClipboardActions(e)&&(e.preventDefault(),this.saveSelectionToClipboard(e))}},{key:"handleCut",value:function(e){if(e.target===this.inputElement&&this.supportsClipboardActions(e)){e.preventDefault(),this.saveSelectionToClipboard(e);var t=this.state,n=t.selectionStart,r=t.selectionEnd,i=this.props,a=i.children,o=i.value,s=W(a),l=j(o,s,n,"START"),u=j(o,s,r,"END"),c=[o.slice(0,l),o.slice(u)].join(""),d=F(c,s),h={target:ce(ce({},e.target),{},{value:d})};this.executeOnChange(h,c,d,q(o,s))}}}])&&l(t.prototype,n),m}(f.Component);p(fe,"propTypes",pe),p(fe,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var me=function(e,t){var n=parseFloat(window.getComputedStyle(e,null).getPropertyValue(t));return isFinite(n)?n:0},ge=ee({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:ce({height:"100%",bottom:0,overflow:"hidden",resize:"none"},"undefined"!=typeof navigator&&/iPhone|iPad|iPod/i.test(navigator.userAgent)?{marginTop:1,marginLeft:-3}:null)}},(function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}}))(fe),ve={fontWeight:"inherit"},ye=function(e){var t=e.display,n=e.style,r=e.className,i=e.classNames,a=S(ve,{style:n,className:r,classNames:i});return f.createElement("strong",a,t)};ye.propTypes={onAdd:P().func,onRemove:P().func,renderSuggestion:P().func,trigger:P().oneOfType([P().string,P().instanceOf(RegExp)]),markup:P().string,displayTransform:P().func,allowSpaceInQuery:P().bool,isLoading:P().bool},ye.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(e,t){return t||e},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1}},6653:function(e,t,n){"use strict";var r=n(7118),i=n(6308),a=n(9471),o=n(8474),s=n(8183),l=n(3320),u=n(3114),c=n(9281),d=n(7911),h=n(4581),p=n(1661),f=n(6830),m=n(8915),g=n(4301),v=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(a),y=function(){return v.createElement(r.Icon,{size:16},v.createElement("path",{d:"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\n            M12,9.5\n            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\n            M12,18.5c1.381,0,2.5,1.119,2.5,2.5\n            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z"}))},b={left:0,top:8},_=function(e){var t=e.toolbarSlot,n=v.useContext(r.LocalizationContext).l10n,a=v.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft?r.Position.BottomLeft:r.Position.BottomRight,o=t.DownloadMenuItem,s=t.EnterFullScreenMenuItem,l=t.GoToFirstPageMenuItem,u=t.GoToLastPageMenuItem,c=t.GoToNextPageMenuItem,d=t.GoToPreviousPageMenuItem,h=t.OpenMenuItem,p=t.PrintMenuItem,f=t.RotateBackwardMenuItem,m=t.RotateForwardMenuItem,g=t.ShowPropertiesMenuItem,_=t.SwitchScrollModeMenuItem,E=t.SwitchSelectionModeMenuItem,S=t.SwitchViewModeMenuItem,w=t.SwitchThemeMenuItem;return v.createElement(r.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:a,target:function(e,t){var i=n&&n.toolbar?n.toolbar.moreActions:"More actions";return v.createElement(r.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:a,target:v.createElement(r.MinimalButton,{ariaLabel:i,isSelected:t,testId:"toolbar__more-actions-popover-target",onClick:e},v.createElement(y,null)),content:function(){return i},offset:b})},content:function(e){return v.createElement(r.Menu,null,v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(w,{onClick:e})),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(s,{onClick:e})),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(h,null)),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(p,{onClick:e})),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(o,{onClick:e})),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(r.MenuDivider,null)),v.createElement(l,{onClick:e}),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(d,{onClick:e})),v.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},v.createElement(c,{onClick:e})),v.createElement(u,{onClick:e}),v.createElement(r.MenuDivider,null),v.createElement(m,{onClick:e}),v.createElement(f,{onClick:e}),v.createElement(r.MenuDivider,null),v.createElement(E,{mode:i.SelectionMode.Text,onClick:e}),v.createElement(E,{mode:i.SelectionMode.Hand,onClick:e}),v.createElement(r.MenuDivider,null),v.createElement(_,{mode:r.ScrollMode.Page,onClick:e}),v.createElement(_,{mode:r.ScrollMode.Vertical,onClick:e}),v.createElement(_,{mode:r.ScrollMode.Horizontal,onClick:e}),v.createElement(_,{mode:r.ScrollMode.Wrapped,onClick:e}),v.createElement(r.MenuDivider,null),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement(S,{mode:r.ViewMode.SinglePage,onClick:e})),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement(S,{mode:r.ViewMode.DualPage,onClick:e})),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement(S,{mode:r.ViewMode.DualPageWithCover,onClick:e})),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement(r.MenuDivider,null)),v.createElement(g,{onClick:e}))},offset:b,closeOnClickOutside:!0,closeOnEscape:!0})},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},E.apply(this,arguments)},S=function(e){return function(t){var n=v.useMemo((function(){return e(t)}),[]),i=v.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,a=n.CurrentPageInput,o=n.Download,s=n.EnterFullScreen,l=n.GoToNextPage,u=n.GoToPreviousPage,c=n.NumberOfPages,d=n.Open,h=n.Print,p=n.ShowSearchPopover,f=n.SwitchTheme,m=n.Zoom,g=n.ZoomIn,y=n.ZoomOut;return v.createElement("div",{"data-testid":"toolbar",className:r.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":i}),role:"toolbar","aria-orientation":"horizontal"},v.createElement("div",{className:"rpv-toolbar__left"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(p,null)),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(u,null))),v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(a,null),v.createElement("span",{className:"rpv-toolbar__label"},v.createElement(c,null))),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(l,null)))),v.createElement("div",{className:"rpv-toolbar__center"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(y,null)),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(m,null))),v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(g,null))),v.createElement("div",{className:"rpv-toolbar__right"},v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(f,null))),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(s,null))),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(d,null))),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(o,null))),v.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(h,null))),v.createElement("div",{className:"rpv-toolbar__item"},v.createElement(_,{toolbarSlot:n}))))}},w=function(e){var t=e.NumberOfPages;return Object.assign({},e,{NumberOfPages:function(){return v.createElement(v.Fragment,null,"/ ",v.createElement(t,null))}})},T=function(e){return S(w)(e)},C=function(e){var t=e.children,n=e.slot;return(t||T)(n)};t.MoreActionsPopover=_,t.MoreIcon=y,t.toolbarPlugin=function(e){var t=o.fullScreenPlugin(e?e.fullScreenPlugin:{}),n=s.getFilePlugin(e?e.getFilePlugin:{}),r=l.openPlugin(e?e.openPlugin:{}),a=u.pageNavigationPlugin(e?e.pageNavigationPlugin:{}),y=c.printPlugin(e?e.printPlugin:{}),b=d.propertiesPlugin(),_=h.rotatePlugin(),w=p.scrollModePlugin(),T=f.searchPlugin(e?e.searchPlugin:{}),k=i.selectionModePlugin(e?e.selectionModePlugin:{}),A=m.themePlugin(),P=g.zoomPlugin(e?e.zoomPlugin:{}),x=[t,n,r,a,y,b,_,w,T,k,A,P],I=v.useCallback((function(e){var i=t.EnterFullScreen,o=t.EnterFullScreenMenuItem,s=n.Download,l=n.DownloadMenuItem,u=r.Open,c=r.OpenMenuItem,d=a.CurrentPageInput,h=a.CurrentPageLabel,p=a.GoToFirstPage,f=a.GoToFirstPageMenuItem,m=a.GoToLastPage,g=a.GoToLastPageMenuItem,S=a.GoToNextPage,x=a.GoToNextPageMenuItem,I=a.GoToPreviousPage,M=a.GoToPreviousPageMenuItem,R=a.NumberOfPages,O=y.Print,L=y.PrintMenuItem,D=b.ShowProperties,N=b.ShowPropertiesMenuItem,F=_.Rotate,j=_.RotateBackwardMenuItem,B=_.RotateForwardMenuItem,U=w.SwitchScrollMode,q=w.SwitchScrollModeMenuItem,V=w.SwitchViewMode,H=w.SwitchViewModeMenuItem,z=T.Search,W=T.ShowSearchPopover,G=k.SwitchSelectionMode,X=k.SwitchSelectionModeMenuItem,K=A.SwitchTheme,$=A.SwitchThemeMenuItem,Y=P.CurrentScale,Q=P.Zoom,J=P.ZoomIn,Z=P.ZoomInMenuItem,ee=P.ZoomOut,te=P.ZoomOutMenuItem;return v.createElement(C,E({},e,{slot:{CurrentPageInput:d,CurrentPageLabel:h,CurrentScale:Y,Download:s,DownloadMenuItem:l,EnterFullScreen:i,EnterFullScreenMenuItem:o,GoToFirstPage:p,GoToFirstPageMenuItem:f,GoToLastPage:m,GoToLastPageMenuItem:g,GoToNextPage:S,GoToNextPageMenuItem:x,GoToPreviousPage:I,GoToPreviousPageMenuItem:M,NumberOfPages:R,Open:u,OpenMenuItem:c,Print:O,PrintMenuItem:L,Rotate:F,RotateBackwardMenuItem:j,RotateForwardMenuItem:B,Search:z,ShowProperties:D,ShowPropertiesMenuItem:N,ShowSearchPopover:W,SwitchScrollMode:U,SwitchScrollModeMenuItem:q,SwitchSelectionMode:G,SwitchSelectionModeMenuItem:X,SwitchViewMode:V,SwitchViewModeMenuItem:H,SwitchTheme:K,SwitchThemeMenuItem:$,Zoom:Q,ZoomIn:J,ZoomInMenuItem:Z,ZoomOut:ee,ZoomOutMenuItem:te}}))}),[]);return{fullScreenPluginInstance:t,getFilePluginInstance:n,openPluginInstance:r,pageNavigationPluginInstance:a,printPluginInstance:y,propertiesPluginInstance:b,rotatePluginInstance:_,scrollModePluginInstance:w,searchPluginInstance:T,selectionModePluginInstance:k,themePluginInstance:A,zoomPluginInstance:P,install:function(e){x.forEach((function(t){t.install&&t.install(e)}))},renderPageLayer:function(e){return v.createElement(v.Fragment,null,x.map((function(t,n){return t.renderPageLayer?v.createElement(v.Fragment,{key:n},t.renderPageLayer(e)):v.createElement(v.Fragment,{key:n})})))},renderViewer:function(e){var t=e.slot;return x.forEach((function(n){n.renderViewer&&(t=n.renderViewer(E(E({},e),{slot:t})))})),t},uninstall:function(e){x.forEach((function(t){t.uninstall&&t.uninstall(e)}))},onDocumentLoad:function(e){x.forEach((function(t){t.onDocumentLoad&&t.onDocumentLoad(e)}))},onAnnotationLayerRender:function(e){x.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender(e)}))},onTextLayerRender:function(e){x.forEach((function(t){t.onTextLayerRender&&t.onTextLayerRender(e)}))},onViewerStateChange:function(e){var t=e;return x.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),t},renderDefaultToolbar:S,Toolbar:I}}},6788:function(e){"use strict";e.exports=Error},6801:function(e,t,n){"use strict";var r=n(919),i=n(5996),a=n(8847);l.httpHandler=n(3680);var o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t};function s(e,t,n){var r=e;return a(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function l(e,t,n){return u(t=s(e,t,n))}function u(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!u){var t;clearTimeout(d),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=y,a=null;return 0!==t?(i={body:r(),statusCode:t,method:p,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(i.headers=o(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,i,i.body)}}var s,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var d,h=c.url=e.uri||e.url,p=c.method=e.method||"GET",f=e.body||e.data,m=c.headers=e.headers||{},g=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(a,0)},c.onload=a,c.onerror=i,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=i,c.open(p,h,!g,e.username,e.password),g||(c.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(d=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),c.setRequestHeader)for(s in m)m.hasOwnProperty(s)&&c.setRequestHeader(s,m[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}e.exports=l,e.exports.default=l,l.XMLHttpRequest=r.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),u(n)}}))},6802:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(9471),i=n(3640),a=(0,r.createContext)(i.A);a.Provider},6818:function(e,t,n){var r=n(1385),i=n(8974),a=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])y(s)||!w(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?i.trace(n):i.error(n),a=!0}return e.apply(this,arguments)}};var s={},l=/^$/;if({MEDIACMS_ID:"mediacms-frontend",MEDIACMS_TITLE:"MediaCMS Frontend",MEDIACMS_URL:"http://localhost",MEDIACMS_API:"http://localhost/api/v1",MEDIACMS_USER_IS_ADMIN:"true",MEDIACMS_USER_IS_ANONYMOUS:"false",MEDIACMS_USER_USERNAME:"admin",MEDIACMS_USER_NAME:"Admin",MEDIACMS_USER_THUMB:"http://localhost/media/userlogos/user.jpg"}.NODE_DEBUG){var u={MEDIACMS_ID:"mediacms-frontend",MEDIACMS_TITLE:"MediaCMS Frontend",MEDIACMS_URL:"http://localhost",MEDIACMS_API:"http://localhost/api/v1",MEDIACMS_USER_IS_ADMIN:"true",MEDIACMS_USER_IS_ANONYMOUS:"false",MEDIACMS_USER_USERNAME:"admin",MEDIACMS_USER_NAME:"Admin",MEDIACMS_USER_THUMB:"http://localhost/media/userlogos/user.jpg"}.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),l=new RegExp("^"+u+"$","i")}function c(e,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=d),p(r,e,r.depth)}function d(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function h(e,t){return e}function p(e,n,r){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=p(e,i,r)),i}var a=function(e,t){if(E(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),C(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(k(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(S(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return f(n)}var u,c="",d=!1,h=["{","}"];return g(n)&&(d=!0,h=["[","]"]),k(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),S(n)&&(c=" "+RegExp.prototype.toString.call(n)),T(n)&&(c=" "+Date.prototype.toUTCString.call(n)),C(n)&&(c=" "+f(n)),0!==o.length||d&&0!=n.length?r<0?S(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=d?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)I(t,String(o))?a.push(m(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(m(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return m(e,n,r,s,t,d)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,h)):h[0]+c+h[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,r,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=y(n)?p(e,l.value,null):p(e,l.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),E(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function g(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return"number"==typeof e}function _(e){return"string"==typeof e}function E(e){return void 0===e}function S(e){return w(e)&&"[object RegExp]"===A(e)}function w(e){return"object"==typeof e&&null!==e}function T(e){return w(e)&&"[object Date]"===A(e)}function C(e){return w(e)&&("[object Error]"===A(e)||e instanceof Error)}function k(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(l.test(e)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);i.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(7213),t.isArray=g,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=E,t.isRegExp=S,t.types.isRegExp=S,t.isObject=w,t.isDate=T,t.types.isDate=T,t.isError=C,t.types.isNativeError=C,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(6098);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;i.log("%s - %s",(n=[P((e=new Date).getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":"),[e.getDate(),x[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(8365),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!=typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a(e))},t.promisify.custom=M,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};e.apply(this,t).then((function(e){r.nextTick(o.bind(null,null,e))}),(function(e){r.nextTick(R.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a(e)),t}},6830:function(e,t,n){"use strict";e.exports=n(3369)},6838:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},6841:function(e,t,n){"use strict";n.r(t);var r=n(9471),i=n(9032),a=n.n(i),o=n(1838),s=n(3997),l=n(8974);const u={};class c extends(a()){constructor(){super(),this.mediacms_config=(0,s.$)(window.MediaCMS),u[Object.defineProperty(this,"id",{value:"PlaylistPageStoreData_"+Object.keys(u).length}).id]={playlistId:null,data:{}},this.data={savedPlaylist:!1,publishDate:new Date(2018,3,14,1,13,22,0),publishDateLabel:null},this.onPlaylistUpdateCompleted=this.onPlaylistUpdateCompleted.bind(this),this.onPlaylistUpdateFailed=this.onPlaylistUpdateFailed.bind(this),this.onPlaylistRemovalCompleted=this.onPlaylistRemovalCompleted.bind(this),this.onPlaylistRemovalFailed=this.onPlaylistRemovalFailed.bind(this)}loadData(){if(!u[this.id].playlistId)return l.warn("Invalid playlist id:",u[this.id].playlistId),!1;this.playlistAPIUrl=this.mediacms_config.api.playlists+"/"+u[this.id].playlistId,this.dataResponse=this.dataResponse.bind(this),this.dataErrorResponse=this.dataErrorResponse.bind(this),(0,o.getRequest)(this.playlistAPIUrl,!1,this.dataResponse,this.dataErrorResponse)}dataResponse(e){e&&e.data&&(u[this.id].data=e.data,this.emit("loaded_playlist_data"))}dataErrorResponse(e){this.emit("loaded_playlist_error"),e.type}get(e){switch(e){case"playlistId":return u[this.id].playlistId||null;case"logged-in-user-playlist":return!this.mediacms_config.member.is.anonymous&&u[this.id].data.user===this.mediacms_config.member.username;case"playlist-media":return u[this.id].data.playlist_media||[];case"visibility":return"public";case"visibility-icon":switch(this.get("visibility")){case"unlisted":return r.createElement("i",{className:"material-icons"},"insert_link");case"private":return r.createElement("i",{className:"material-icons"},"lock")}return null;case"total-items":return u[this.id].data.playlist_media.length||0;case"views-count":return"N/A";case"title":return u[this.id].data.title||null;case"edit-link":return"#";case"thumb":return u[this.id].data.playlist_media&&u[this.id].data.playlist_media.length?u[this.id].data.playlist_media[0].thumbnail_url:null;case"description":return u[this.id].data.description||null;case"author-username":case"author-name":return u[this.id].data.user||null;case"author-link":return u[this.id].data.user?this.mediacms_config.site.url+"/user/"+u[this.id].data.user:null;case"author-thumb":return u[this.id].data.user_thumbnail_url?this.mediacms_config.site.url+"/"+u[this.id].data.user_thumbnail_url.replace(/^\//g,""):null;case"saved-playlist":return this.data.savedPlaylist;case"date-label":return u[this.id].data&&u[this.id].data.add_date?(this.data.publishDateLabel=this.data.publishDateLabel||"Created on "+(0,o.publishedOnDate)(new Date(u[this.id].data.add_date),3),this.data.publishDateLabel):null}return null}onPlaylistUpdateCompleted(e){e&&e.data&&(u[this.id].data.title=e.data.title,u[this.id].data.description=e.data.description,this.emit("playlist_update_completed",e.data))}onPlaylistUpdateFailed(){this.emit("playlist_update_failed")}onPlaylistRemovalCompleted(e){e&&void 0!==e.status&&403!==e.status?this.emit("playlist_removal_completed",e):this.onPlaylistRemovalFailed()}onPlaylistRemovalFailed(){this.emit("playlist_removal_failed")}actions_handler(e){switch(e.type){case"LOAD_PLAYLIST_DATA":u[this.id].playlistId=window.MediaCMS.playlistId||((t=window.location.href.split("/")).length?t[t.length-1]:null),this.loadData();break;case"TOGGLE_SAVE":this.data.savedPlaylist=!this.data.savedPlaylist,this.emit("saved-updated");break;case"UPDATE_PLAYLIST":(0,o.postRequest)(this.playlistAPIUrl,{title:e.playlist_data.title,description:e.playlist_data.description},{headers:{"X-CSRFToken":(0,o.csrfToken)()}},!1,this.onPlaylistUpdateCompleted,this.onPlaylistUpdateFailed);break;case"REMOVE_PLAYLIST":(0,o.deleteRequest)(this.playlistAPIUrl,{headers:{"X-CSRFToken":(0,o.csrfToken)()}},!1,this.onPlaylistRemovalCompleted,this.onPlaylistRemovalFailed);break;case"PLAYLIST_MEDIA_REORDERED":u[this.id].data.playlist_media=e.playlist_media,this.emit("reordered_media_in_playlist");break;case"MEDIA_REMOVED_FROM_PLAYLIST":const n=[];let r=0;for(;r<u[this.id].data.playlist_media.length;)e.media_id!==u[this.id].data.playlist_media[r].url.split("=")[1]&&n.push(u[this.id].data.playlist_media[r]),r+=1;u[this.id].data.playlist_media=n,this.emit("removed_media_from_playlist")}var t}}t.default=(0,o.exportStore)(new c,"actions_handler")},6870:function(e,t,n){var r,i=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},a=n(542);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r},6881:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\n            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\n            C1.96,3.016,2.138,2.966,2.32,2.966z"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\n            L23.541,5.627"}))},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e){var t=i.useState(e.get("currentPage")||0),n=t[0],a=t[1],o=function(e){a(e)};return r.useIsomorphicLayoutEffect((function(){return e.subscribe("currentPage",o),function(){e.unsubscribe("currentPage",o)}}),[]),{currentPage:n}},u=function(e){var t=i.useState(e.get("numberOfPages")||0),n=t[0],r=t[1],a=function(e){r(e)};return i.useEffect((function(){return e.subscribe("numberOfPages",a),function(){e.unsubscribe("numberOfPages",a)}}),[]),{numberOfPages:n}},c=function(e){var t=e.store,n=i.useContext(r.LocalizationContext).l10n,a=i.useState("1"),o=a[0],s=a[1],c=l(t).currentPage,d=u(t).numberOfPages;i.useEffect((function(){return s("".concat(c+1))}),[c]);var h=function(e){var n=t.get("jumpToPage");n&&n(e)},p=n&&n.pageNavigation?n.pageNavigation.enterPageNumber:"Enter a page number";return i.createElement("span",{className:"rpv-page-navigation__current-page-input"},i.createElement(r.TextBox,{ariaLabel:p,testId:"page-navigation__current-page-input",type:"text",value:o,onChange:s,onKeyDown:function(e){switch(e.key){case"ArrowUp":(r=c-1)>=0&&(s("".concat(r+1)),h(r));break;case"ArrowDown":(n=c+1)<d&&(s("".concat(n+1)),h(n));break;case"Enter":t=parseInt(o,10),""===o||t<1||t>d?s("".concat(c+1)):h(t-1)}var t,n,r}}))},d=function(e){var t=e.children,n=e.doc,a=r.useIsMounted(),o=i.useState({loading:!0,labels:[]}),s=o[0],l=o[1];return i.useEffect((function(){n.getPageLabels().then((function(e){a.current&&l({loading:!1,labels:e||[]})}))}),[n.loadingTask.docId]),s.loading?i.createElement(i.Fragment,null):t(s.labels)},h=function(e){var t=e.children,n=e.store,r=function(e){var t=i.useState(e.get("doc")),n=t[0],r=t[1],a=function(e){r(e)};return i.useEffect((function(){return e.subscribe("doc",a),function(){e.unsubscribe("doc",a)}}),[]),n}(n),a=l(n).currentPage,o=u(n).numberOfPages,s=t||function(e){return i.createElement(i.Fragment,null,e.currentPage+1)};return r?i.createElement(d,{doc:r},(function(e){var t=e.length===o&&o>0?e[a]:"";return s({currentPage:a,numberOfPages:o,pageLabel:t})})):i.createElement(i.Fragment,null)},p=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\n            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\n            C22.143,20.984,21.965,21.034,21.783,21.034z"}))},f={left:0,top:8},m=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,o=a&&a.pageNavigation?a.pageNavigation.goToFirstPage:"First page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:o,isDisabled:t,testId:"page-navigation__first-button",onClick:n},i.createElement(p,null)),content:function(){return o},offset:f})},g=function(e){var t=e.children,n=e.store;return(t||function(e){return i.createElement(m,{isDisabled:e.isDisabled,onClick:e.onClick})})({isDisabled:0===l(n).currentPage,onClick:function(){var e=n.get("jumpToPage");e&&e(0)}})},v=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,o=a&&a.pageNavigation?a.pageNavigation.goToFirstPage:"First page";return i.createElement(r.MenuItem,{icon:i.createElement(p,null),isDisabled:t,testId:"page-navigation__first-menu",onClick:n},o)},y={left:0,top:8},b=function(e){var t=e.isDisabled,n=e.onClick,o=i.useContext(r.LocalizationContext).l10n,s=o&&o.pageNavigation?o.pageNavigation.goToLastPage:"Last page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:s,isDisabled:t,testId:"page-navigation__last-button",onClick:n},i.createElement(a,null)),content:function(){return s},offset:y})},_=function(e){var t=e.children,n=e.store,r=l(n).currentPage,a=u(n).numberOfPages;return(t||function(e){return i.createElement(b,{isDisabled:e.isDisabled,onClick:e.onClick})})({isDisabled:r+1>=a,onClick:function(){var e=n.get("jumpToPage");e&&e(a-1)}})},E=function(e){var t=e.isDisabled,n=e.onClick,o=i.useContext(r.LocalizationContext).l10n,s=o&&o.pageNavigation?o.pageNavigation.goToLastPage:"Last page";return i.createElement(r.MenuItem,{icon:i.createElement(a,null),isDisabled:t,testId:"page-navigation__last-menu",onClick:n},s)},S={left:0,top:8},w=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,s=a&&a.pageNavigation?a.pageNavigation.goToNextPage:"Next page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:s,isDisabled:t,testId:"page-navigation__next-button",onClick:n},i.createElement(o,null)),content:function(){return s},offset:S})},T=function(e){var t=e.children,n=e.store;return(t||function(e){return i.createElement(w,{onClick:e.onClick,isDisabled:e.isDisabled})})({isDisabled:l(n).currentPage+1>=u(n).numberOfPages,onClick:function(){var e=n.get("jumpToNextPage");e&&e()}})},C=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,s=a&&a.pageNavigation?a.pageNavigation.goToNextPage:"Next page";return i.createElement(r.MenuItem,{icon:i.createElement(o,null),isDisabled:t,testId:"page-navigation__next-menu",onClick:n},s)},k=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\n            L0.535,18.373"}))},A={left:0,top:8},P=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,o=a&&a.pageNavigation?a.pageNavigation.goToPreviousPage:"Previous page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:o,isDisabled:t,testId:"page-navigation__previous-button",onClick:n},i.createElement(k,null)),content:function(){return o},offset:A})},x=function(e){var t=e.store;return(e.children||function(e){return i.createElement(P,{isDisabled:e.isDisabled,onClick:e.onClick})})({isDisabled:l(t).currentPage<=0,onClick:function(){var e=t.get("jumpToPreviousPage");e&&e()}})},I=function(e){var t=e.isDisabled,n=e.onClick,a=i.useContext(r.LocalizationContext).l10n,o=a&&a.pageNavigation?a.pageNavigation.goToPreviousPage:"Previous page";return i.createElement(r.MenuItem,{icon:i.createElement(k,null),isDisabled:t,testId:"page-navigation__previous-menu",onClick:n},o)},M=function(e){var t=e.children,n=e.store,r=u(n).numberOfPages;return t?t({numberOfPages:r}):i.createElement(i.Fragment,null,r)},R=function(e){var t=e.containerRef,n=e.numPages,a=e.store,o=l(a).currentPage,s=i.useRef(o);s.current=o;var u=i.useRef(!1),c=function(){u.current=!0},d=function(){u.current=!1},h=function(e){var i=t.current,o=u.current||document.activeElement&&i.contains(document.activeElement);if(i&&o){var l,c,d=e.altKey&&"ArrowDown"===e.key||!e.shiftKey&&!e.altKey&&"PageDown"===e.key,h=e.altKey&&"ArrowUp"===e.key||!e.shiftKey&&!e.altKey&&"PageUp"===e.key;if(d)return e.preventDefault(),l=a.get("jumpToPage"),c=s.current+1,void(l&&c<n&&l(c));if(h)return e.preventDefault(),void function(){var e=a.get("jumpToPage"),t=s.current-1;e&&t>=0&&e(t)}();if(r.isMac()?e.metaKey&&!e.ctrlKey:e.altKey)switch(e.key){case"ArrowLeft":e.preventDefault(),function(){var e=a.get("jumpToPreviousDestination");e&&e()}();break;case"ArrowRight":e.preventDefault(),function(){var e=a.get("jumpToNextDestination");e&&e()}()}}};return i.useEffect((function(){var e=t.current;if(e)return document.addEventListener("keydown",h),e.addEventListener("mouseenter",c),e.addEventListener("mouseleave",d),function(){document.removeEventListener("keydown",h),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseleave",d)}}),[t.current]),i.createElement(i.Fragment,null)};t.DownArrowIcon=a,t.NextIcon=o,t.PreviousIcon=k,t.UpArrowIcon=p,t.pageNavigationPlugin=function(e){var t=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},e)}),[]),n=i.useMemo((function(){return r.createStore()}),[]),a=function(e){return i.createElement(g,s({},e,{store:n}))},o=function(e){return i.createElement(_,s({},e,{store:n}))},l=function(e){return i.createElement(T,s({},e,{store:n}))},u=function(e){return i.createElement(x,s({},e,{store:n}))};return{install:function(e){n.update("jumpToDestination",e.jumpToDestination),n.update("jumpToNextDestination",e.jumpToNextDestination),n.update("jumpToNextPage",e.jumpToNextPage),n.update("jumpToPage",e.jumpToPage),n.update("jumpToPreviousDestination",e.jumpToPreviousDestination),n.update("jumpToPreviousPage",e.jumpToPreviousPage)},renderViewer:function(e){var r=e.slot;if(!t.enableShortcuts)return r;var a={children:i.createElement(i.Fragment,null,i.createElement(R,{containerRef:e.containerRef,numPages:e.doc.numPages,store:n}),r.children)};return s(s({},r),a)},onDocumentLoad:function(e){n.update("doc",e.doc),n.update("numberOfPages",e.doc.numPages)},onViewerStateChange:function(e){return n.update("currentPage",e.pageIndex),e},jumpToNextPage:function(){var e=n.get("jumpToNextPage");e&&e()},jumpToPage:function(e){var t=n.get("jumpToPage");t&&t(e)},jumpToPreviousPage:function(){var e=n.get("jumpToPreviousPage");e&&e()},CurrentPageInput:function(){return i.createElement(c,{store:n})},CurrentPageLabel:function(e){return i.createElement(h,s({},e,{store:n}))},GoToFirstPage:a,GoToFirstPageButton:function(){return i.createElement(a,null,(function(e){return i.createElement(m,s({},e))}))},GoToFirstPageMenuItem:function(e){return i.createElement(a,null,(function(t){return i.createElement(v,{isDisabled:t.isDisabled,onClick:function(){t.onClick(),e.onClick()}})}))},GoToLastPage:o,GoToLastPageButton:function(){return i.createElement(o,null,(function(e){return i.createElement(b,s({},e))}))},GoToLastPageMenuItem:function(e){return i.createElement(o,null,(function(t){return i.createElement(E,{isDisabled:t.isDisabled,onClick:function(){t.onClick(),e.onClick()}})}))},GoToNextPage:l,GoToNextPageButton:function(){return i.createElement(l,null,(function(e){return i.createElement(w,s({},e))}))},GoToNextPageMenuItem:function(e){return i.createElement(l,null,(function(t){return i.createElement(C,{isDisabled:t.isDisabled,onClick:function(){t.onClick(),e.onClick()}})}))},GoToPreviousPage:u,GoToPreviousPageButton:function(){return i.createElement(u,null,(function(e){return i.createElement(P,s({},e))}))},GoToPreviousPageMenuItem:function(e){return i.createElement(u,null,(function(t){return i.createElement(I,{isDisabled:t.isDisabled,onClick:function(){t.onClick(),e.onClick()}})}))},NumberOfPages:function(e){return i.createElement(M,s({},e,{store:n}))}}}},6898:function(e,t,n){"use strict";var r=n(9932),i=n(9289),a=n(7679);e.exports=function(){return a(r,i,arguments)}},6927:function(e,t,n){var r=n(8974),i=n(6495),a=i.find,o=i.NAMESPACE;function s(e){return""!==e}function l(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function u(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(s):[]}(e);return Object.keys(t.reduce(l,{}))}function c(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function d(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,c(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&r.error("unknown Class:"+e),n.constructor=e)}var h={},p=h.ELEMENT_NODE=1,f=h.ATTRIBUTE_NODE=2,m=h.TEXT_NODE=3,g=h.CDATA_SECTION_NODE=4,v=h.ENTITY_REFERENCE_NODE=5,y=h.ENTITY_NODE=6,b=h.PROCESSING_INSTRUCTION_NODE=7,_=h.COMMENT_NODE=8,E=h.DOCUMENT_NODE=9,S=h.DOCUMENT_TYPE_NODE=10,w=h.DOCUMENT_FRAGMENT_NODE=11,T=h.NOTATION_NODE=12,C={},k={},A=(C.INDEX_SIZE_ERR=(k[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),C.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),P=(C.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),C.NOT_FOUND_ERR=(k[8]="Not found",8)),x=(C.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),C.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10));function I(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,k[e]),this.message=k[e],Error.captureStackTrace&&Error.captureStackTrace(this,I);return n.code=e,t&&(this.message=this.message+": "+t),n}function M(){}function R(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(be(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var r=n.length;r in e;r++)Object.prototype.hasOwnProperty.call(e,r)&&delete e[r];c(n,e),e._inc=t}}function L(){}function D(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function N(e,t,n,r){if(r?t[D(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&H(i,e,r),function(e,t,n){e&&e._inc++,n.namespaceURI===o.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function F(e,t,n){var r=D(t,n);if(!(r>=0))throw new I(P,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var a=e.ownerDocument;a&&(H(a,e,n),n.ownerElement=null)}}function j(){}function B(){}function U(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function q(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(q(e,t))return!0}while(e=e.nextSibling)}function V(){this.ownerDocument=this}function H(e,t,n,r){e&&e._inc++,n.namespaceURI===o.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,a=0;i;)r[a++]=i,i=i.nextSibling;r.length=a,delete r[r.length]}}}function W(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function G(e){return e&&e.nodeType===B.DOCUMENT_TYPE_NODE}function X(e){return e&&e.nodeType===B.ELEMENT_NODE}function K(e){return e&&e.nodeType===B.TEXT_NODE}function $(e,t){var n=e.childNodes||[];if(a(n,X)||G(t))return!1;var r=a(n,G);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function Y(e,t){var n=e.childNodes||[];if(a(n,(function(e){return X(e)&&e!==t})))return!1;var r=a(n,G);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function Q(e,t,n){var r=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=i.filter(X);if(o.length>1||a(i,K))throw new I(A,"More than one element or text in fragment");if(1===o.length&&!$(e,n))throw new I(A,"Element in fragment can not be inserted before doctype")}if(X(t)&&!$(e,n))throw new I(A,"Only one element can be added and only after doctype");if(G(t)){if(a(r,G))throw new I(A,"Only one doctype is allowed");var s=a(r,X);if(n&&r.indexOf(s)<r.indexOf(n))throw new I(A,"Doctype can only be inserted before an element");if(!n&&s)throw new I(A,"Doctype can not be appended since element is present")}}function J(e,t,n){var r=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=i.filter(X);if(o.length>1||a(i,K))throw new I(A,"More than one element or text in fragment");if(1===o.length&&!Y(e,n))throw new I(A,"Element in fragment can not be inserted before doctype")}if(X(t)&&!Y(e,n))throw new I(A,"Only one element can be added and only after doctype");if(G(t)){if(a(r,(function(e){return G(e)&&e!==n})))throw new I(A,"Only one doctype is allowed");var s=a(r,X);if(n&&r.indexOf(s)<r.indexOf(n))throw new I(A,"Doctype can only be inserted before an element")}}function Z(e,t,n,r){(function(e,t,n){if(!function(e){return e&&(e.nodeType===B.DOCUMENT_NODE||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.ELEMENT_NODE)}(e))throw new I(A,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new I(P,"child not in parent");if(!function(e){return e&&(X(e)||K(e)||G(e)||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.COMMENT_NODE||e.nodeType===B.PROCESSING_INSTRUCTION_NODE)}(t)||G(t)&&e.nodeType!==B.DOCUMENT_NODE)throw new I(A,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,n),e.nodeType===B.DOCUMENT_NODE&&(r||Q)(e,t,n);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===w){var a=t.firstChild;if(null==a)return t;var o=t.lastChild}else a=o=t;var s=n?n.previousSibling:e.lastChild;a.previousSibling=s,o.nextSibling=n,s?s.nextSibling=a:e.firstChild=a,null==n?e.lastChild=o:n.previousSibling=o;do{a.parentNode=e}while(a!==o&&(a=a.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==w&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function te(){}function ne(){}function re(){}function ie(){}function ae(){}function oe(){}function se(){}function le(){}function ue(){}function ce(){}function de(){}function he(){}function pe(e,t){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,a=r.namespaceURI;if(a&&null==i&&null==(i=r.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return ge(this,n,e,t,o),n.join("")}function fe(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!i)return!1;if("xml"===r&&i===o.XML||i===o.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===r)return s.namespace!==i}return!0}function me(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,U),'"')}function ge(e,t,n,r,i){if(i||(i=[]),r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var a=e.attributes,s=a.length,l=e.firstChild,u=e.tagName,c=u;if(!(n=o.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var d,h=0;h<a.length;h++)if("xmlns"===a.item(h).name){d=a.item(h).value;break}if(!d)for(var y=i.length-1;y>=0;y--)if(""===(T=i[y]).prefix&&T.namespace===e.namespaceURI){d=T.namespace;break}if(d!==e.namespaceURI)for(y=i.length-1;y>=0;y--){var T;if((T=i[y]).namespace===e.namespaceURI){T.prefix&&(c=T.prefix+":"+u);break}}}t.push("<",c);for(var C=0;C<s;C++)"xmlns"==(k=a.item(C)).prefix?i.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&i.push({prefix:"",namespace:k.value});for(C=0;C<s;C++){var k,A,P;fe(k=a.item(C),0,i)&&(me(t,(A=k.prefix||"")?"xmlns:"+A:"xmlns",P=k.namespaceURI),i.push({prefix:A,namespace:P})),ge(k,t,n,r,i)}if(u===c&&fe(e,0,i)&&(me(t,(A=e.prefix||"")?"xmlns:"+A:"xmlns",P=e.namespaceURI),i.push({prefix:A,namespace:P})),l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;l;)l.data?t.push(l.data):ge(l,t,n,r,i.slice()),l=l.nextSibling;else for(;l;)ge(l,t,n,r,i.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case E:case w:for(l=e.firstChild;l;)ge(l,t,n,r,i.slice()),l=l.nextSibling;return;case f:return me(t,e.name,e.value);case m:return t.push(e.data.replace(/[<&>]/g,U));case g:return t.push("<![CDATA[",e.data,"]]>");case _:return t.push("\x3c!--",e.data,"--\x3e");case S:var x=e.publicId,I=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(" PUBLIC ",x),I&&"."!=I&&t.push(" ",I),t.push(">");else if(I&&"."!=I)t.push(" SYSTEM ",I,">");else{var M=e.internalSubset;M&&t.push(" [",M,"]"),t.push(">")}return;case b:return t.push("<?",e.target," ",e.data,"?>");case v:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ve(e,t,n){var r;switch(t.nodeType){case p:(r=t.cloneNode(!1)).ownerDocument=e;case w:break;case f:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(ve(e,i,n)),i=i.nextSibling;return r}function ye(e,t,n){var r=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];"object"!=typeof a&&a!=r[i]&&(r[i]=a)}switch(t.childNodes&&(r.childNodes=new M),r.ownerDocument=e,r.nodeType){case p:var o=t.attributes,s=r.attributes=new L,l=o.length;s._ownerElement=r;for(var u=0;u<l;u++)r.setAttributeNode(ye(e,o.item(u),!0));break;case f:n=!0}if(n)for(var c=t.firstChild;c;)r.appendChild(ye(e,c,n)),c=c.nextSibling;return r}function be(e,t,n){e[t]=n}C.INVALID_STATE_ERR=(k[11]="Invalid state",11),C.SYNTAX_ERR=(k[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),C.NAMESPACE_ERR=(k[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),I.prototype=Error.prototype,c(C,I),M.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ge(this[r],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},R.prototype.item=function(e){return O(this),this[e]||null},d(R,M),L.prototype={length:0,item:M.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new I(x);var n=this.getNamedItem(e.nodeName);return N(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new I(x);return t=this.getNamedItemNS(e.namespaceURI,e.localName),N(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return F(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return F(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},j.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var r=new V;if(r.implementation=this,r.childNodes=new M,r.doctype=n||null,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new oe;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=n||"",r}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Z(this,e,t)},replaceChild:function(e,t){Z(this,e,t,J),t&&this.removeChild(t)},removeChild:function(e){return W(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==m&&e.nodeType==m?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===e)return r;t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},c(h,B),c(h,B.prototype),V.prototype={nodeName:"#document",nodeType:E,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==w){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return Z(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),W(this,e)},replaceChild:function(e,t){Z(this,e,t,J),e.ownerDocument=this,t&&this.removeChild(t),X(e)&&(this.documentElement=e)},importNode:function(e,t){return ve(this,e,t)},getElementById:function(e){var t=null;return q(this.documentElement,(function(n){if(n.nodeType==p&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=u(e);return new R(this,(function(n){var r=[];return t.length>0&&q(n.documentElement,(function(i){if(i!==n&&i.nodeType===p){var a=i.getAttribute("class");if(a){var o=e===a;if(!o){var s=u(a);o=t.every((l=s,function(e){return l&&-1!==l.indexOf(e)}))}o&&r.push(i)}}var l})),r}))},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new M,(t.attributes=new L)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new M,e},createTextNode:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ae;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new de;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new te;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ue;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new ee,r=t.split(":"),i=n.attributes=new L;return n.childNodes=new M,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new te,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},d(V,B),ee.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===w?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new R(this,(function(t){var n=[];return q(t,(function(r){r===t||r.nodeType!=p||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new R(this,(function(n){var r=[];return q(n,(function(i){i===n||i.nodeType!==p||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},V.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,V.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,d(ee,B),te.prototype.nodeType=f,d(te,B),ne.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(k[A])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},d(ne,B),re.prototype={nodeName:"#text",nodeType:m,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},d(re,ne),ie.prototype={nodeName:"#comment",nodeType:_},d(ie,ne),ae.prototype={nodeName:"#cdata-section",nodeType:g},d(ae,ne),oe.prototype.nodeType=S,d(oe,B),se.prototype.nodeType=T,d(se,B),le.prototype.nodeType=y,d(le,B),ue.prototype.nodeType=v,d(ue,B),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=w,d(ce,B),de.prototype.nodeType=b,d(de,B),he.prototype.serializeToString=function(e,t,n){return pe.call(e,t,n)},B.prototype.toString=pe;try{if(Object.defineProperty){function _e(e){switch(e.nodeType){case p:case w:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(_e(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(R.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return _e(this)},set:function(e){switch(this.nodeType){case p:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),be=function(e,t,n){e["$$"+t]=n}}}catch(Ee){}t.DocumentType=oe,t.DOMException=I,t.DOMImplementation=j,t.Element=ee,t.Node=B,t.NodeList=M,t.XMLSerializer=he},6930:function(e,t,n){"use strict";var r=n(9718),i=n(1828),a=n(6177)(),o=n(7570),s=n(4114),l=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in e&&o){var c=o(e,"length");c&&!c.configurable&&(r=!1),c&&!c.writable&&(u=!1)}return(r||u||!n)&&(a?i(e,"length",t,!0,!0):i(e,"length",t)),e}},7118:function(e,t,n){"use strict";e.exports=n(8851)},7143:function(e,t,n){const r=n(2063).Dispatcher;e.exports=new r},7154:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6077),t),i(n(4247),t),i(n(7687),t),i(n(3337),t)},7171:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\n            M14.5,17.005H13\n            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\n            M11.745,6.504L11.745,6.504\n            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\n            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5"}))},o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e){var t=e.doc,n=e.render,a=i.useState(),o=a[0],s=a[1];return i.useEffect((function(){t.getMetadata().then((function(e){return Promise.resolve(e)})).then((function(e){return t.getDownloadInfo().then((function(t){return Promise.resolve({fileName:e.contentDispositionFilename||"",info:e.info,length:t.length})}))})).then((function(e){s(e)}))}),[]),o?n(o):i.createElement("div",{className:"rpv-properties__loader"},i.createElement(r.Spinner,null))},l=function(e){var t=e.label,n=e.value,a=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft;return i.createElement("dl",{className:r.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":a})},i.createElement("dt",{className:"rpv-properties__item-label"},t,":"),i.createElement("dd",{className:"rpv-properties__item-value"},n||"-"))},u=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),c=function(e,t,n,r){var i=parseInt(e,10);return i>=t&&i<=n?i:r},d=function(e){var t=e.doc,n=e.fileName,a=e.onToggle,o=i.useContext(r.LocalizationContext).l10n,d=function(e){var t=function(e){var t=u.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=c(t[2],1,12,1)-1,i=c(t[3],1,31,1),a=c(t[4],0,23,0),o=c(t[5],0,59,0),s=c(t[6],0,59,0),l=t[7]||"Z",d=c(t[8],0,23,0),h=c(t[9],0,59,0);switch(l){case"-":a+=d,o+=h;break;case"+":a-=d,o-=h}return new Date(Date.UTC(n,r,i,a,o,s))}(e);return t?"".concat(t.toLocaleDateString(),", ").concat(t.toLocaleTimeString()):""};return i.createElement("div",{className:"rpv-properties__modal"},i.createElement(s,{doc:t,render:function(e){return i.createElement(i.Fragment,null,i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(l,{label:o&&o.properties?o.properties.fileName:"File name",value:e.fileName||(u=n,c=u.split("/").pop(),c?c.split("#")[0].split("?")[0]:u)}),i.createElement(l,{label:o&&o.properties?o.properties.fileSize:"File size",value:(a=e.length,s=Math.floor(Math.log(a)/Math.log(1024)),"".concat((a/Math.pow(1024,s)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][s]))})),i.createElement(r.Separator,null),i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(l,{label:o&&o.properties?o.properties.title:"Title",value:e.info.Title}),i.createElement(l,{label:o&&o.properties?o.properties.author:"Author",value:e.info.Author}),i.createElement(l,{label:o&&o.properties?o.properties.subject:"Subject",value:e.info.Subject}),i.createElement(l,{label:o&&o.properties?o.properties.keywords:"Keywords",value:e.info.Keywords}),i.createElement(l,{label:o&&o.properties?o.properties.creator:"Creator",value:e.info.Creator}),i.createElement(l,{label:o&&o.properties?o.properties.creationDate:"Creation date",value:d(e.info.CreationDate)}),i.createElement(l,{label:o&&o.properties?o.properties.modificationDate:"Modification date",value:d(e.info.ModDate)})),i.createElement(r.Separator,null),i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(l,{label:o&&o.properties?o.properties.pdfProducer:"PDF producer",value:e.info.Producer}),i.createElement(l,{label:o&&o.properties?o.properties.pdfVersion:"PDF version",value:e.info.PDFFormatVersion}),i.createElement(l,{label:o&&o.properties?o.properties.pageCount:"Page count",value:"".concat(t.numPages)})));var a,s,u,c}}),i.createElement("div",{className:"rpv-properties__modal-footer"},i.createElement(r.Button,{onClick:a},o&&o.properties?o.properties.close:"Close")))},h={left:0,top:8},p=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.properties?n.properties.showProperties:"Show properties";return i.createElement(r.Tooltip,{ariaControlsSuffix:"properties",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:o,testId:"properties__button",onClick:t},i.createElement(a,null)),content:function(){return o},offset:h})},f=function(e){var t=e.children,n=e.store,a=function(e){var t=i.useState(e.get("doc")),n=t[0],r=t[1],a=function(e){r(e)};return i.useEffect((function(){return e.subscribe("doc",a),function(){e.unsubscribe("doc",a)}}),[]),{currentDoc:n}}(n).currentDoc,s=n.get("fileName")||"",l=t||function(e){return i.createElement(p,o({},e))};return a?i.createElement(r.Modal,{ariaControlsSuffix:"properties",target:function(e){return l({onClick:e})},content:function(e){return i.createElement(d,{doc:a,fileName:s,onToggle:e})},closeOnClickOutside:!0,closeOnEscape:!0}):i.createElement(i.Fragment,null)},m=function(e){var t=e.onClick,n=i.useContext(r.LocalizationContext).l10n,o=n&&n.properties?n.properties.showProperties:"Show properties";return i.createElement(r.MenuItem,{icon:i.createElement(a,null),testId:"properties__menu",onClick:t},o)};t.InfoIcon=a,t.propertiesPlugin=function(){var e=i.useMemo((function(){return r.createStore({fileName:""})}),[]),t=function(t){return i.createElement(f,o({},t,{store:e}))};return{onDocumentLoad:function(t){e.update("doc",t.doc)},onViewerStateChange:function(t){return e.update("fileName",t.file.name),t},ShowProperties:t,ShowPropertiesButton:function(){return i.createElement(f,{store:e})},ShowPropertiesMenuItem:function(e){return i.createElement(t,null,(function(e){return i.createElement(m,o({},e))}))}}}},7190:function(e,t,n){"use strict";e.exports=n(4389)},7201:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(9471),i=n(8713),a=n.n(i),o=n(2828);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}function l(e){let t=[];const n=e.itemAttr||{};void 0===n.className?n.className="":n.className&&(n.className+=" ");let i=e.text?e.icon&&"right"!==e.iconPos?1:0:-1,a=e.icon?e.text&&"right"===e.iconPos?1:0:-1;switch(-1<i&&(t[i]=r.createElement("span",{key:"Text"},e.text)),-1<a&&(t[a]=r.createElement("span",{key:"Icon",className:"right"===e.iconPos?"menu-item-icon-right":"menu-item-icon"},r.createElement(o.Z,{type:e.icon}))),e.itemType){case"link":t=r.createElement("a",s({},e.linkAttr||{},{href:e.link,title:e.text||null}),t),n.className+="link-item"+(e.active?" active":"");break;case"button":case"open-subpage":t=r.createElement("button",s({},e.buttonAttr||{},{key:"button"}),t);break;case"label":t=r.createElement("button",s({},e.buttonAttr||{},{key:"button"}),r.createElement("span",null,e.text||null)),n.className="label-item";break;case"div":t=r.createElement("div",s({},e.divAttr||{},{key:"div"}),e.text||null)}return""!==n.className&&(n.className=" "+n.className),n.className=n.className.trim(),r.createElement("li",n,t)}function u(e){const t=e.items.map(((e,t)=>r.createElement(l,s({key:t},e))));return t.length?r.createElement("div",{className:"nav-menu"+(e.removeVerticalPadding?" pv0":"")},r.createElement("nav",null,r.createElement("ul",null,t))):null}l.propTypes={itemType:a().oneOf(["link","open-subpage","button","label","div"]),link:a().string,icon:a().string,iconPos:a().oneOf(["left","right"]),text:a().string,active:a().bool,divAttr:a().object,buttonAttr:a().object,itemAttr:a().object,linkAttr:a().object},l.defaultProps={itemType:"link",iconPos:"left",active:!1},u.propTypes={removeVerticalPadding:a().bool,items:a().arrayOf(a().shape(l.propTypes)).isRequired},u.defaultProps={removeVerticalPadding:!1}},7213:function(e,t,n){"use strict";var r=n(3929),i=n(2379),a=n(4912),o=n(1701);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var f=s(BigInt.prototype.valueOf);if(u)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function _(e){return"[object WeakSet]"===c(e)}function E(e){return"[object ArrayBuffer]"===c(e)}function S(e){return"undefined"!=typeof ArrayBuffer&&(E.working?E(e):e instanceof ArrayBuffer)}function w(e){return"[object DataView]"===c(e)}function T(e){return"undefined"!=typeof DataView&&(w.working?w(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||T(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},v.working="undefined"!=typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),t.isWeakSet=function(e){return _(e)},E.working="undefined"!=typeof ArrayBuffer&&E(new ArrayBuffer),t.isArrayBuffer=S,w.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&w(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=T;var C="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function k(e){return"[object SharedArrayBuffer]"===c(e)}function A(e){return void 0!==C&&(void 0===k.working&&(k.working=k(new C)),k.working?k(e):e instanceof C)}function P(e){return g(e,d)}function x(e){return g(e,h)}function I(e){return g(e,p)}function M(e){return l&&g(e,f)}function R(e){return u&&g(e,m)}t.isSharedArrayBuffer=A,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=P,t.isStringObject=x,t.isBooleanObject=I,t.isBigIntObject=M,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return P(e)||x(e)||I(e)||M(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(S(e)||A(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},7230:function(e,t,n){"use strict";var r=n(8974),i=n(9471),a=n(9383),o=n(9817);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var l=new Set,u={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(u[e]=t,e=0;e<t.length;e++)l.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,m={},g={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function E(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(g,e)||!f.call(m,e)&&(p.test(e)?g[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,_);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,_);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,_);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,T=60106,C=60107,k=60108,A=60114,P=60109,x=60110,I=60112,M=60113,R=60120,O=60115,L=60116,D=60121,N=60128,F=60129,j=60130,B=60131;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;w=U("react.element"),T=U("react.portal"),C=U("react.fragment"),k=U("react.strict_mode"),A=U("react.profiler"),P=U("react.provider"),x=U("react.context"),I=U("react.forward_ref"),M=U("react.suspense"),R=U("react.suspense_list"),O=U("react.memo"),L=U("react.lazy"),D=U("react.block"),U("react.scope"),N=U("react.opaque.id"),F=U("react.debug_trace_mode"),j=U("react.offscreen"),B=U("react.legacy_hidden")}var q,V="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=V&&e[V]||e["@@iterator"])?e:null}function z(e){if(void 0===q)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var W=!1;function G(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function X(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return G(e.type,!1);case 11:return G(e.type.render,!1);case 22:return G(e.type._render,!1);case 1:return G(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case T:return"Portal";case A:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return K(e.type);case D:return K(e._render);case L:t=e._payload,e=e._init;try{return K(e(t))}catch(e){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ee(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ne(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function re(e,t){ne(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function le(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ce(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function Se(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Ee(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var we=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Te(e,t){if(t){if(we[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Pe=null,xe=null;function Ie(e){if(e=ri(e)){if("function"!=typeof Ae)throw Error(s(280));var t=e.stateNode;t&&(t=ai(t),Ae(e.stateNode,e.type,t))}}function Me(e){Pe?xe?xe.push(e):xe=[e]:Pe=e}function Re(){if(Pe){var e=Pe,t=xe;if(xe=Pe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Oe(e,t){return e(t)}function Le(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Ne=Oe,Fe=!1,je=!1;function Be(){null===Pe&&null===xe||(De(),Re())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var qe=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ge){qe=!1}function He(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var ze=!1,We=null,Ge=!1,Xe=null,Ke={onError:function(e){ze=!0,We=e}};function $e(e,t,n,r,i,a,o,s,l){ze=!1,We=null,He.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(s(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,lt=null,ut=null,ct=new Map,dt=new Map,ht=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=ft(t,n,r,i,a),null!==t&&null!==(t=ri(t))&&nt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==lt&&yt(lt)&&(lt=null),null!==ut&&yt(ut)&&(ut=null),ct.forEach(bt),dt.forEach(bt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_t)))}function St(e){function t(t){return Et(t,e)}if(0<ot.length){Et(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&Et(st,e),null!==lt&&Et(lt,e),null!==ut&&Et(ut,e),ct.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)vt(n),null===n.blockedOn&&ht.shift()}function wt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tt={animationend:wt("Animation","AnimationEnd"),animationiteration:wt("Animation","AnimationIteration"),animationstart:wt("Animation","AnimationStart"),transitionend:wt("Transition","TransitionEnd")},Ct={},kt={};function At(e){if(Ct[e])return Ct[e];if(!Tt[e])return e;var t,n=Tt[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return Ct[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete Tt.animationend.animation,delete Tt.animationiteration.animation,delete Tt.animationstart.animation),"TransitionEvent"in window||delete Tt.transitionend.transition);var Pt=At("animationend"),xt=At("animationiteration"),It=At("animationstart"),Mt=At("transitionend"),Rt=new Map,Ot=new Map,Lt=["abort","abort",Pt,"animationEnd",xt,"animationIteration",It,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Rt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Nt=8;function Ft(e){if(1&e)return Nt=15,1;if(2&e)return Nt=14,2;if(4&e)return Nt=13,4;var t=24&e;return 0!==t?(Nt=12,t):32&e?(Nt=11,32):0!=(t=192&e)?(Nt=10,t):256&e?(Nt=9,256):0!=(t=3584&e)?(Nt=8,t):4096&e?(Nt=7,4096):0!=(t=4186112&e)?(Nt=6,t):0!=(t=62914560&e)?(Nt=5,t):67108864&e?(Nt=4,67108864):134217728&e?(Nt=3,134217728):0!=(t=805306368&e)?(Nt=2,t):1073741824&e?(Nt=1,1073741824):(Nt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Nt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Nt=15;else if(0!=(a=134217727&n)){var l=a&~o;0!==l?(r=Ft(l),i=Nt):0!=(s&=a)&&(r=Ft(s),i=Nt)}else 0!=(a=n&~o)?(r=Ft(a),i=Nt):0!==s&&(r=Ft(s),i=Nt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&!(t&o)){if(Ft(t),i<=Nt)return t;Nt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Bt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Ut(10,t):e;case 10:return 0===(e=qt(192&~t))?Ut(8,t):e;case 8:return 0===(e=qt(3584&~t))&&0===(e=qt(4186112&~t))&&(e=512),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function qt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Gt|0)|0},Wt=Math.log,Gt=Math.LN2,Xt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Fe||De();var i=Jt,a=Fe;Fe=!0;try{Le(i,e,t,n,r)}finally{(Fe=a)||Be()}}function Qt(e,t,n,r){Kt(Xt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if($t)if((i=!(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=ft(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&mt(e,r);else{if(i){if(-1<pt.indexOf(e))return e=ft(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ut=gt(ut,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,gt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,dt.set(a,gt(dt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;mt(e,r)}Dr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=ke(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Qe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function ln(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,cn,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(hn),fn=a({},hn,{view:0,detail:0}),mn=ln(fn),gn=a({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,cn=e.screenY-dn.screenY):cn=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),vn=ln(gn),yn=ln(a({},gn,{dataTransfer:0})),bn=ln(a({},fn,{relatedTarget:0})),_n=ln(a({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),En=a({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=ln(En),wn=ln(a({},hn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Pn(){return An}var xn=a({},fn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=ln(xn),Mn=ln(a({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=ln(a({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),On=ln(a({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=a({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=ln(Ln),Nn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,jn=null;h&&"documentMode"in document&&(jn=document.documentMode);var Bn=h&&"TextEvent"in window&&!jn,Un=h&&(!Fn||jn&&8<jn&&11>=jn),qn=String.fromCharCode(32),Vn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1,Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Me(r),0<(t=Fr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Qn(e){xr(e,0)}function Jn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"==typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Kn(t,Yn,e,ke(e)),e=Qn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,Be()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function lr(e,t){if("click"===e)return Jn(t)}function ur(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},dr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,br=null,_r=null,Er=null,Sr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Sr||null==br||br!==Z(r)||(r="selectionStart"in(r=br)&&vr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Er&&hr(Er,r)||(Er=r,0<(r=Fr(_r,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Lt,2);for(var Tr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Cr=0;Cr<Tr.length;Cr++)Ot.set(Tr[Cr],0);d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if($e.apply(this,arguments),ze){if(!ze)throw Error(s(198));var c=We;ze=!1,We=null,Ge||(Ge=!0,Xe=c)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Pr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Pr(i,s,u),a=l}}}if(Ge)throw e=Xe,Ge=!1,Xe=null,e}function Ir(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Mr]||(e[Mr]=!0,l.forEach((function(t){Ar.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Ar.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Lr(a,e,i,t),o.add(s))}function Lr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Qt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e();je=!0;try{return Ne(e,t,n)}finally{je=!1,Be()}}((function(){var r=a,i=ke(n),o=[];e:{var s=Rt.get(e);if(void 0!==s){var l=pn,u=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=bn;break;case"focusout":u="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Pt:case xt:case It:l=_n;break;case Mt:l=On;break;case"scroll":l=mn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=!!(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&null!=(m=Ue(f,h))&&c.push(Nr(f,m,p))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||16&t||!(u=n.relatedTarget||n.fromElement)||!ni(u)&&!u[ei])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ni(u):null)&&(u!==(d=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=vn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:ii(l),p=null==u?s:ii(u),(s=new c(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,ni(i)===r&&((c=new c(h,f+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=jr(p))f++;for(p=0,m=h;m;m=jr(m))p++;for(;0<f-p;)c=jr(c),f--;for(;0<p-f;)h=jr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=jr(c),h=jr(h)}c=null}else c=null;null!==l&&Br(o,s,l,c,!1),null!==u&&null!==d&&Br(o,d,u,c,!0)}if("select"===(l=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zn;else if(Xn(s))if(er)g=ur;else{g=sr;var v=or}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=lr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ae(s,"number",s.value)),v=r?ii(r):window,e){case"focusin":(Xn(v)||"true"===v.contentEditable)&&(br=v,_r=r,Er=null);break;case"focusout":Er=_r=br=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,wr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Hn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(v=Fr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:v}),(y||null!==(y=zn(n)))&&(b.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,qn);case"textInput":return(e=t.data)===qn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Fn&&Hn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Fr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y)}xr(o,t)}))}function Nr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ue(e,n))&&r.unshift(Nr(e,a,i)),null!=(a=Ue(e,t))&&r.push(Nr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ue(n,a))&&o.unshift(Nr(n,l,s)):i||null!=(l=Ue(n,a))&&o.push(Nr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var qr=null,Vr=null;function Hr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"==typeof setTimeout?setTimeout:void 0,Gr="function"==typeof clearTimeout?clearTimeout:void 0;function Xr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0,Qr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Qr,Zr="__reactProps$"+Qr,ei="__reactContainer$"+Qr,ti="__reactEvents$"+Qr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Jr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],li=-1;function ui(e){return{current:e}}function ci(e){0>li||(e.current=si[li],si[li]=null,li--)}function di(e,t){li++,si[li]=e.current,e.current=t}var hi={},pi=ui(hi),fi=ui(!1),mi=hi;function gi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vi(e){return null!=e.childContextTypes}function yi(){ci(fi),ci(pi)}function bi(e,t,n){if(pi.current!==hi)throw Error(s(168));di(pi,t),di(fi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,K(t)||"Unknown",i));return a({},n,r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,mi=pi.current,di(pi,e),di(fi,fi.current),!0}function Si(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ci(fi),ci(pi),di(pi,e)):ci(fi),di(fi,n)}var wi=null,Ti=null,Ci=o.unstable_runWithPriority,ki=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Pi=o.unstable_shouldYield,xi=o.unstable_requestPaint,Ii=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,Fi={},ji=void 0!==xi?xi:function(){},Bi=null,Ui=null,qi=!1,Vi=Ii(),Hi=1e4>Vi?Ii:function(){return Ii()-Vi};function zi(){switch(Mi()){case Ri:return 99;case Oi:return 98;case Li:return 97;case Di:return 96;case Ni:return 95;default:throw Error(s(332))}}function Wi(e){switch(e){case 99:return Ri;case 98:return Oi;case 97:return Li;case 96:return Di;case 95:return Ni;default:throw Error(s(332))}}function Gi(e,t){return e=Wi(e),Ci(e,t)}function Xi(e,t,n){return e=Wi(e),ki(e,t,n)}function Ki(){if(null!==Ui){var e=Ui;Ui=null,Ai(e)}$i()}function $i(){if(!qi&&null!==Bi){qi=!0;var e=0;try{var t=Bi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(t){throw null!==Bi&&(Bi=Bi.slice(e+1)),ki(Ri,Ki),t}finally{qi=!1}}}var Yi=S.ReactCurrentBatchConfig;function Qi(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ui(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(s(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function la(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function da(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pa(e,t,n,r){var i=e.updateQueue;sa=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==s&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==o){for(h=i.baseState,s=0,d=c=u=null;;){l=o.lane;var p=o.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(l=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(p,h,l);break e}h=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,h,l):f))break e;h=a({},h,l);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[o]:l.push(o))}else p={eventTime:p,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,u=h):d=d.next=p,s|=l;if(null===(o=o.next)){if(null===(l=i.shared.pending))break;o=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,Us|=s,e.lanes=s,e.memoizedState=h}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var ma=(new i.Component).refs;function ga(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var va={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dl(),i=hl(e),a=ca(r,i);a.payload=t,null!=n&&(a.callback=n),da(e,a),pl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dl(),i=hl(e),a=ca(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),da(e,a),pl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),r=hl(e),i=ca(n,r);i.tag=2,null!=t&&(i.callback=t),da(e,i),pl(e,r,n)}};function ya(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&hr(n,r)&&hr(i,a))}function ba(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"==typeof a&&null!==a?a=oa(a):(i=vi(t)?mi:pi.current,a=(r=null!=(r=t.contextTypes))?gi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&va.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ma,la(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=oa(a):(a=vi(t)?mi:pi.current,i.context=gi(e,a)),pa(e,n,i,r),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&va.enqueueReplaceState(i,i.state,null),pa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Sa=Array.isArray;function wa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ma&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ta(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ca(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$l(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wa(e,t,n),r.return=e,r):((r=Gl(n.type,n.key,n.props,null,e.mode,r)).ref=wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Xl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=$l(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Gl(t.type,t.key,t.props,null,e.mode,n)).ref=wa(e,null,t),n.return=e,n;case T:return(t=Yl(t,e.mode,n)).return=e,t}if(Sa(t)||H(t))return(t=Xl(t,e.mode,n,null)).return=e,t;Ta(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===C?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case T:return n.key===i?c(e,t,n,r):null}if(Sa(n)||H(n))return null!==i?null:d(e,t,n,r,null);Ta(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===C?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case T:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Sa(r)||H(r))return d(t,e=e.get(n)||null,r,i,null);Ta(t,r)}return null}function m(i,o,s,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(o=a(d,o,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),u}function g(i,o,l,u){var c=H(l);if("function"!=typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,u))&&(o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,a,l){var u="object"==typeof a&&null!==a&&a.type===C&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case w:e:{for(c=a.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(a.type===C){n(e,u.sibling),(r=i(u,a.props.children)).return=e,e=r;break e}}else if(u.elementType===a.type){n(e,u.sibling),(r=i(u,a.props)).ref=wa(e,u,a),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===C?((r=Xl(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=Gl(a.type,a.key,a.props,null,e.mode,l)).ref=wa(e,r,a),l.return=e,e=l)}return o(e);case T:e:{for(u=a.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Yl(a,e.mode,l)).return=e,e=r}return o(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$l(a,e.mode,l)).return=e,e=r),o(e);if(Sa(a))return m(e,r,a,l);if(H(a))return g(e,r,a,l);if(c&&Ta(e,a),void 0===a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,K(e.type)||"Component"))}return n(e,r)}}var ka=Ca(!0),Aa=Ca(!1),Pa={},xa=ui(Pa),Ia=ui(Pa),Ma=ui(Pa);function Ra(e){if(e===Pa)throw Error(s(174));return e}function Oa(e,t){switch(di(Ma,t),di(Ia,e),di(xa,Pa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(xa),di(xa,t)}function La(){ci(xa),ci(Ia),ci(Ma)}function Da(e){Ra(Ma.current);var t=Ra(xa.current),n=fe(t,e.type);t!==n&&(di(Ia,e),di(xa,n))}function Na(e){Ia.current===e&&(ci(xa),ci(Ia))}var Fa=ui(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(64&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=null,Ua=null,qa=!1;function Va(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ha(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function za(e){if(qa){var t=Ua;if(t){var n=t;if(!Ha(e,t)){if(!(t=Kr(n.nextSibling))||!Ha(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Ba=e);Va(Ba,n)}Ba=e,Ua=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Ba=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ba=e}function Ga(e){if(e!==Ba)return!1;if(!qa)return Wa(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=Ua;t;)Va(e,t),t=Kr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=Ba?Kr(e.stateNode.nextSibling):null;return!0}function Xa(){Ua=Ba=null,qa=!1}var Ka=[];function $a(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var Ya=S.ReactCurrentDispatcher,Qa=S.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(s(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Oo:Lo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(s(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Do,e=n(r,i)}while(ro)}if(Ya.current=Ro,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(s(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function lo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function uo(e,t){return"function"==typeof t?t(e):t}function co(e){var t=lo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=o=a=null,u=i;do{var c=u.lane;if((Ja&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,Za.lanes|=c,Us|=c}u=u.next}while(null!==u&&u!==i);null===l?a=r:l.next=o,cr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=lo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);cr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function po(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Ka.push(t))),e)return n(t._source);throw Ka.push(t),Error(s(350))}function fo(e,t,n,r){var i=Rs;if(null===i)throw Error(s(349));var a=t._getVersion,o=a(t._source),l=Ya.current,u=l.useState((function(){return po(i,t,n)})),c=u[1],d=u[0];u=to;var h=e.memoizedState,p=h.refs,f=p.getSnapshot,m=h.source;h=h.subscribe;var g=Za;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=a(t._source);if(!cr(o,e)){e=n(t._source),cr(d,e)||(c(e),e=hl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var l=31-zt(s),u=1<<l;r[l]|=e,s&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=hl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),cr(f,n)&&cr(m,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:d}).dispatch=c=Mo.bind(null,Za,e),u.queue=e,u.baseQueue=null,d=po(i,t,n),u.memoizedState=u.baseState=d),d}function mo(e,t,n){return fo(lo(),e,t,n)}function go(e){var t=so();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e}).dispatch=Mo.bind(null,Za,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function bo(){return lo().memoizedState}function _o(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=vo(1|t,n,void 0,void 0===r?null:r)}function Eo(e,t,n,r){var i=lo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void vo(t,n,a,r)}Za.flags|=e,i.memoizedState=vo(1|t,n,a,r)}function So(e,t){return _o(516,4,e,t)}function wo(e,t){return Eo(516,4,e,t)}function To(e,t){return Eo(4,2,e,t)}function Co(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!=n?n.concat([e]):null,Eo(4,2,Co.bind(null,t,e),n)}function Ao(){}function Po(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Io(e,t){var n=zi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Qa.transition;Qa.transition=1;try{e(!1),t()}finally{Qa.transition=n}}))}function Mo(e,t,n){var r=dl(),i=hl(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=o(s,n);if(a.eagerReducer=o,a.eagerState=l,cr(l,s))return}catch(e){}pl(e,i,r)}}var Ro={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:So,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,_o(4,2,Co.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Mo.bind(null,Za,e),[r.memoizedState,e]},useRef:yo,useState:go,useDebugValue:Ao,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return So((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return yo(e=Io.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(s(355))})),n=go(t)[1];return!(2&Za.mode)&&(Za.flags|=516,vo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Po,useContext:oa,useEffect:wo,useImperativeHandle:ko,useLayoutEffect:To,useMemo:xo,useReducer:co,useRef:bo,useState:function(){return co(uo)},useDebugValue:Ao,useDeferredValue:function(e){var t=co(uo),n=t[0],r=t[1];return wo((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=co(uo)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return co(uo)[0]},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Po,useContext:oa,useEffect:wo,useImperativeHandle:ko,useLayoutEffect:To,useMemo:xo,useReducer:ho,useRef:bo,useState:function(){return ho(uo)},useDebugValue:Ao,useDeferredValue:function(e){var t=ho(uo),n=t[0],r=t[1];return wo((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=ho(uo)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(uo)[0]},unstable_isNewReconciler:!1},No=S.ReactCurrentOwner,Fo=!1;function jo(e,t,n,r){t.child=null===e?Aa(t,null,n,r):ka(t,e.child,n,r)}function Bo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,is(e,t,i))}function Uo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||zl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gl(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,i&a||(i=o.memoizedProps,!(n=null!==(n=n.compare)?n:hr)(i,r)||e.ref!==t.ref)?(t.flags|=1,(e=Wl(o,r)).ref=t.ref,e.return=t,t.child=e):is(e,t,a)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,!(a&i))return t.lanes=e.lanes,is(e,t,a);16384&e.flags&&(Fo=!0)}return zo(e,t,n,r,a)}function Vo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(4&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},El(0,e),null;t.memoizedState={baseLanes:0},El(0,null!==a?a.baseLanes:n)}else t.memoizedState={baseLanes:0},El(0,n);else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,El(0,r);return jo(e,t,i,n),t.child}function Ho(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function zo(e,t,n,r,i){var a=vi(n)?mi:pi.current;return a=gi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,is(e,t,i))}function Wo(e,t,n,r,i){if(vi(n)){var a=!0;Ei(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ba(t,n,r),Ea(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?oa(u):gi(t,u=vi(n)?mi:pi.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&_a(t,o,r,u),sa=!1;var h=t.memoizedState;o.state=h,pa(t,r,o,i),l=t.memoizedState,s!==r||h!==l||fi.current||sa?("function"==typeof c&&(ga(t,n,c,r),l=t.memoizedState),(s=sa||ya(t,n,s,r,h,l,u))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ua(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Qi(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l="object"==typeof(l=n.contextType)&&null!==l?oa(l):gi(t,l=vi(n)?mi:pi.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==l)&&_a(t,o,r,l),sa=!1,h=t.memoizedState,o.state=h,pa(t,r,o,i);var f=t.memoizedState;s!==d||h!==f||fi.current||sa?("function"==typeof p&&(ga(t,n,p,r),f=t.memoizedState),(u=sa||ya(t,n,u,r,h,f,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){Ho(e,t);var o=!!(64&t.flags);if(!r&&!o)return i&&Si(t,n,!1),is(e,t,a);r=t.stateNode,No.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,s,a)):jo(e,t,s,a),t.memoizedState=r.state,i&&Si(t,n,!0),t.child}function Xo(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Oa(e,t.containerInfo)}var Ko,$o,Yo,Qo,Jo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=!!(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),di(Fa,1&a),null===e?(void 0!==i.fallback&&za(t),e=i.children,a=i.fallback,o?(e=es(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"==typeof i.unstable_expectedLoadTime?(e=es(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Kl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 2&a||t.child===o?n=Wl(o,s):((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null),null!==e?r=Wl(e,r):(r=Xl(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=Wl(i,{mode:"visible",children:n}),!(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function es(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},2&i||null===a?a=Kl(t,i,0,null):(a.childLanes=0,a.pendingProps=t),n=Xl(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function ts(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ns(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function rs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),2&(r=Fa.current))r=1&r|2,t.flags|=64;else{if(null!==e&&64&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ts(e,n);else if(19===e.tag)ts(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Fa,r),2&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ns(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ns(t,!0,n,null,a,t.lastEffect);break;case"together":ns(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,n&t.childLanes){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Wl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function os(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(t.type)&&yi(),null;case 3:return La(),ci(fi),ci(pi),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),$o(t),null;case 5:Na(t);var i=Ra(Ma.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ra(xa.current),Ga(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Jr]=t,r[Zr]=o,n){case"dialog":Ir("cancel",r),Ir("close",r);break;case"iframe":case"object":case"embed":Ir("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Ir(kr[e],r);break;case"source":Ir("error",r);break;case"img":case"image":case"link":Ir("error",r),Ir("load",r);break;case"details":Ir("toggle",r);break;case"input":te(r,o),Ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ir("invalid",r);break;case"textarea":ue(r,o),Ir("invalid",r)}for(var l in Te(n,o),e=null,o)o.hasOwnProperty(l)&&(i=o[l],"children"===l?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(l)&&null!=i&&"onScroll"===l&&Ir("scroll",r));switch(n){case"input":Q(r),ie(r,o,!0);break;case"textarea":Q(r),de(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Ko(e,t,!1,!1),t.stateNode=e,l=Ce(n,r),n){case"dialog":Ir("cancel",e),Ir("close",e),i=r;break;case"iframe":case"object":case"embed":Ir("load",e),i=r;break;case"video":case"audio":for(i=0;i<kr.length;i++)Ir(kr[i],e);i=r;break;case"source":Ir("error",e),i=r;break;case"img":case"image":case"link":Ir("error",e),Ir("load",e),i=r;break;case"details":Ir("toggle",e),i=r;break;case"input":te(e,r),i=ee(e,r),Ir("invalid",e);break;case"option":i=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Ir("invalid",e);break;case"textarea":ue(e,r),i=le(e,r),Ir("invalid",e);break;default:i=r}Te(n,i);var c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?Se(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ve(e,d):"children"===o?"string"==typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"==typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Ir("scroll",e):null!=d&&E(e,o,d,l))}switch(n){case"input":Q(e),ie(e,r,!1);break;case"textarea":Q(e),de(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ur)}Hr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qo(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));n=Ra(Ma.current),Ra(xa.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(Fa),r=t.memoizedState,64&t.flags?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&2&t.mode&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||1&Fa.current?0===Fs&&(Fs=3):(0!==Fs&&3!==Fs||(Fs=4),null===Rs||!(134217727&Us)&&!(134217727&qs)||vl(Rs,Ls))),(r||n)&&(t.flags|=4),null);case 4:return La(),$o(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(ci(Fa),null===(r=t.memoizedState))return null;if(o=!!(64&t.flags),null===(l=r.rendering))if(o)as(r,!1);else{if(0!==Fs||null!==e&&64&e.flags)for(e=t.child;null!==e;){if(null!==(l=ja(e))){for(t.flags|=64,as(r,!1),null!==(o=l.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&Hi()>Ws&&(t.flags|=64,o=!0,as(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=ja(l))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,o=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hi(),n.sibling=null,t=Fa.current,di(Fa,o?1&t|2:1&t),n):null;case 23:case 24:return Sl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function ss(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(La(),ci(fi),ci(pi),$a(),64&(t=e.flags))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Na(e),null;case 13:return ci(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Fa),null;case 4:return La(),null;case 10:return ra(e),null;case 23:case 24:return Sl(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=X(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function us(e,t){try{r.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(){},Yo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ra(xa.current);var o,s=null;switch(n){case"input":i=ee(e,i),r=ee(e,r),s=[];break;case"option":i=oe(e,i),r=oe(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=le(e,i),r=le(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ur)}for(d in Te(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ir("scroll",e),s||l===c||(s=[])):"object"==typeof c&&null!==c&&c.$$typeof===N?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var cs="function"==typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Ys=r),us(0,t)},n}function hs(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return us(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),us(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"==typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bl(e,t)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Xr(t.stateNode.containerInfo))}throw Error(s(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(!(3&~e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,4&(i=i.tag)&&1&i&&(Nl(n,e),Dl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&St(n)))))}throw Error(s(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Ee("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ys(e,t){if(Ti&&"function"==typeof Ti.onCommitFiberUnmount)try{Ti.onCommitFiberUnmount(wi,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(4&r)Nl(t,n);else{r=t;try{i()}catch(e){Bl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Bl(t,e)}break;case 5:fs(t);break;case 4:Ts(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function Es(e){e:{for(var t=e.return;null!==t;){if(_s(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):ws(e,n,t)}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function ws(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var o=e,l=i,u=l;;)if(ys(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(o=n,l=i.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ys(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{!(3&~r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ne(n,r),Ce(e,i),t=Ce(e,r),i=0;i<a.length;i+=2){var o=a[i],l=a[i+1];"style"===o?Se(n,l):"dangerouslySetInnerHTML"===o?ve(n,l):"children"===o?ye(n,l):E(n,o,l,t)}switch(e){case"input":re(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?se(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,St(n.containerInfo)));case 13:return null!==t.memoizedState&&(zs=Hi(),vs(t.child,!0)),void ks(t);case 19:return void ks(t);case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(s(163))}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=ql.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function As(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ps=Math.ceil,xs=S.ReactCurrentDispatcher,Is=S.ReactCurrentOwner,Ms=0,Rs=null,Os=null,Ls=0,Ds=0,Ns=ui(0),Fs=0,js=null,Bs=0,Us=0,qs=0,Vs=0,Hs=null,zs=0,Ws=1/0;function Gs(){Ws=Hi()+500}var Xs,Ks=null,$s=!1,Ys=null,Qs=null,Js=!1,Zs=null,el=90,tl=[],nl=[],rl=null,il=0,al=null,ol=-1,sl=0,ll=0,ul=null,cl=!1;function dl(){return 48&Ms?Hi():-1!==ol?ol:ol=Hi()}function hl(e){if(!(2&(e=e.mode)))return 1;if(!(4&e))return 99===zi()?1:2;if(0===sl&&(sl=Bs),0!==Yi.transition){0!==ll&&(ll=null!==Hs?Hs.pendingLanes:0),e=sl;var t=4186112&~ll;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=zi(),e=Ut(4&Ms&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),sl)}function pl(e,t,n){if(50<il)throw il=0,al=null,Error(s(185));if(null===(e=fl(e,t)))return null;Ht(e,t,n),e===Rs&&(qs|=t,4===Fs&&vl(e,Ls));var r=zi();1===t?8&Ms&&!(48&Ms)?yl(e):(ml(e,n),0===Ms&&(Gs(),Ki())):(!(4&Ms)||98!==r&&99!==r||(null===rl?rl=new Set([e]):rl.add(e)),ml(e,n)),Hs=e}function fl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ml(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-zt(o),u=1<<l,c=a[l];if(-1===c){if(!(u&r)||u&i){c=t,Ft(u);var d=Nt;a[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);o&=~u}if(r=jt(e,e===Rs?Ls:0),t=Nt,0===r)null!==n&&(n!==Fi&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ai(n)}15===t?(n=yl.bind(null,e),null===Bi?(Bi=[n],Ui=ki(Ri,$i)):Bi.push(n),n=Fi):14===t?n=Xi(99,yl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),n=Xi(n,gl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gl(e){if(ol=-1,ll=sl=0,48&Ms)throw Error(s(327));var t=e.callbackNode;if(Ll()&&e.callbackNode!==t)return null;var n=jt(e,e===Rs?Ls:0);if(0===n)return null;var r=n,i=Ms;Ms|=16;var a=Cl();for(Rs===e&&Ls===r||(Gs(),wl(e,r));;)try{Pl();break}catch(t){Tl(e,t)}if(na(),xs.current=a,Ms=i,null!==Os?r=0:(Rs=null,Ls=0,r=Fs),Bs&qs)wl(e,0);else if(0!==r){if(2===r&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Xr(e.containerInfo)),0!==(n=Bt(e))&&(r=kl(e,n))),1===r)throw t=js,wl(e,0),vl(e,n),ml(e,Hi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:case 5:Ml(e);break;case 3:if(vl(e,n),(62914560&n)===n&&10<(r=zs+500-Hi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ml.bind(null,e),r);break}Ml(e);break;case 4:if(vl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var o=31-zt(n);a=1<<o,(o=r[o])>i&&(i=o),n&=~a}if(n=i,10<(n=(120>(n=Hi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){e.timeoutHandle=Wr(Ml.bind(null,e),n);break}Ml(e);break;default:throw Error(s(329))}}return ml(e,Hi()),e.callbackNode===t?gl.bind(null,e):null}function vl(e,t){for(t&=~Vs,t&=~qs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function yl(e){if(48&Ms)throw Error(s(327));if(Ll(),e===Rs&&e.expiredLanes&Ls){var t=Ls,n=kl(e,t);Bs&qs&&(n=kl(e,t=jt(e,t)))}else n=kl(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Xr(e.containerInfo)),0!==(t=Bt(e))&&(n=kl(e,t))),1===n)throw n=js,wl(e,0),vl(e,t),ml(e,Hi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ml(e),ml(e,Hi()),null}function bl(e,t){var n=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=n)&&(Gs(),Ki())}}function _l(e,t){var n=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=n)&&(Gs(),Ki())}}function El(e,t){di(Ns,Ds),Ds|=t,Bs|=t}function Sl(){Ds=Ns.current,ci(Ns)}function wl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:La(),ci(fi),ci(pi),$a();break;case 5:Na(r);break;case 4:La();break;case 13:case 19:ci(Fa);break;case 10:ra(r);break;case 23:case 24:Sl()}n=n.return}Rs=e,Os=Wl(e.current,null),Ls=Ds=Bs=t,Fs=0,js=null,Vs=qs=Us=0}function Tl(e,t){for(;;){var n=Os;try{if(na(),Ya.current=Ro,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Is.current=null,null===n||null===n.return){Fs=1,js=t,Os=null;break}e:{var a=e,o=n.return,s=n,l=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(!(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=!!(1&Fa.current),h=o;do{var p;if(p=13===h.tag){var f=h.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=h.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(p){var g=h.updateQueue;if(null===g){var v=new Set;v.add(u),h.updateQueue=v}else g.add(u);if(!(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ca(-1,1);y.tag=2,da(s,y)}s.lanes|=1;break e}l=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new cs,l=new Set,b.set(u,l)):void 0===(l=b.get(u))&&(l=new Set,b.set(u,l)),!l.has(s)){l.add(s);var _=Ul.bind(null,a,u,s);u.then(_,_)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fs&&(Fs=2),l=ls(l,s),h=o;do{switch(h.tag){case 3:a=l,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(0,a,t));break e;case 1:a=l;var E=h.type,S=h.stateNode;if(!(64&h.flags||"function"!=typeof E.getDerivedStateFromError&&(null===S||"function"!=typeof S.componentDidCatch||null!==Qs&&Qs.has(S)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(h,a,t));break e}}h=h.return}while(null!==h)}Il(n)}catch(e){t=e,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Cl(){var e=xs.current;return xs.current=Ro,null===e?Ro:e}function kl(e,t){var n=Ms;Ms|=16;var r=Cl();for(Rs===e&&Ls===t||wl(e,t);;)try{Al();break}catch(t){Tl(e,t)}if(na(),Ms=n,xs.current=r,null!==Os)throw Error(s(261));return Rs=null,Ls=0,Fs}function Al(){for(;null!==Os;)xl(Os)}function Pl(){for(;null!==Os&&!Pi();)xl(Os)}function xl(e){var t=Xs(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?Il(e):Os=t,Is.current=null}function Il(e){var t=e;do{var n=t.alternate;if(e=t.return,2048&t.flags){if(null!==(n=ss(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(null!==(n=os(n,t,Ds)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||1073741824&Ds||!(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&!(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Fs&&(Fs=5)}function Ml(e){var t=zi();return Gi(99,Rl.bind(null,e,t)),null}function Rl(e,t){do{Ll()}while(null!==Zs);if(48&Ms)throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-zt(a),c=1<<u;i[u]=0,o[u]=-1,l[u]=-1,a&=~c}if(null!==rl&&!(24&r)&&rl.has(e)&&rl.delete(e),e===Rs&&(Os=Rs=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ms,Ms|=32,Is.current=null,qr=$t,vr(o=gr())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var d=0,h=-1,p=-1,f=0,m=0,g=o,v=null;t:for(;;){for(var y;g!==l||0!==a&&3!==g.nodeType||(h=d+a),g!==u||0!==c&&3!==g.nodeType||(p=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===o)break t;if(v===l&&++f===a&&(h=d),v===u&&++m===c&&(p=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===h||-1===p?null:{start:h,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Vr={focusedElem:o,selectionRange:l},$t=!1,ul=null,cl=!1,Ks=r;do{try{Ol()}catch(e){if(null===Ks)throw Error(s(330));Bl(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);ul=null,Ks=r;do{try{for(o=e;null!==Ks;){var b=Ks.flags;if(16&b&&ye(Ks.stateNode,""),128&b){var _=Ks.alternate;if(null!==_){var E=_.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:Es(Ks),Ks.flags&=-3;break;case 6:Es(Ks),Ks.flags&=-3,Cs(Ks.alternate,Ks);break;case 1024:Ks.flags&=-1025;break;case 1028:Ks.flags&=-1025,Cs(Ks.alternate,Ks);break;case 4:Cs(Ks.alternate,Ks);break;case 8:Ts(o,l=Ks);var S=l.alternate;bs(l),null!==S&&bs(S)}Ks=Ks.nextEffect}}catch(e){if(null===Ks)throw Error(s(330));Bl(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);if(E=Vr,_=gr(),b=E.focusedElem,o=E.selectionRange,_!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==o&&vr(b)&&(_=o.start,void 0===(E=o.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),l=b.textContent.length,S=Math.min(o.start,l),o=void 0===o.end?S:Math.min(o.end,l),!E.extend&&S>o&&(l=o,o=S,S=l),l=fr(b,S),a=fr(b,o),l&&a&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==a.node||E.focusOffset!==a.offset)&&((_=_.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),S>o?(E.addRange(_),E.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}$t=!!qr,Vr=qr=null,e.current=n,Ks=r;do{try{for(b=e;null!==Ks;){var w=Ks.flags;if(36&w&&gs(b,Ks.alternate,Ks),128&w){_=void 0;var T=Ks.ref;if(null!==T){var C=Ks.stateNode;Ks.tag,_=C,"function"==typeof T?T(_):T.current=_}}Ks=Ks.nextEffect}}catch(e){if(null===Ks)throw Error(s(330));Bl(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);Ks=null,ji(),Ms=i}else e.current=n;if(Js)Js=!1,Zs=e,el=t;else for(Ks=r;null!==Ks;)t=Ks.nextEffect,Ks.nextEffect=null,8&Ks.flags&&((w=Ks).sibling=null,w.stateNode=null),Ks=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===al?il++:(il=0,al=e):il=0,n=n.stateNode,Ti&&"function"==typeof Ti.onCommitFiberRoot)try{Ti.onCommitFiberRoot(wi,n,void 0,!(64&~n.current.flags))}catch(e){}if(ml(e,Hi()),$s)throw $s=!1,e=Ys,Ys=null,e;return 8&Ms||Ki(),null}function Ol(){for(;null!==Ks;){var e=Ks.alternate;cl||null===ul||(8&Ks.flags?et(Ks,ul)&&(cl=!0):13===Ks.tag&&As(e,Ks)&&et(Ks,ul)&&(cl=!0));var t=Ks.flags;256&t&&ms(e,Ks),!(512&t)||Js||(Js=!0,Xi(97,(function(){return Ll(),null}))),Ks=Ks.nextEffect}}function Ll(){if(90!==el){var e=97<el?97:el;return el=90,Gi(e,Fl)}return!1}function Dl(e,t){tl.push(t,e),Js||(Js=!0,Xi(97,(function(){return Ll(),null})))}function Nl(e,t){nl.push(t,e),Js||(Js=!0,Xi(97,(function(){return Ll(),null})))}function Fl(){if(null===Zs)return!1;var e=Zs;if(Zs=null,48&Ms)throw Error(s(331));var t=Ms;Ms|=32;var n=nl;nl=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],o=i.destroy;if(i.destroy=void 0,"function"==typeof o)try{o()}catch(e){if(null===a)throw Error(s(330));Bl(a,e)}}for(n=tl,tl=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===a)throw Error(s(330));Bl(a,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ms=t,Ki(),!0}function jl(e,t,n){da(e,t=ds(0,t=ls(n,t),1)),t=dl(),null!==(e=fl(e,1))&&(Ht(e,1,t),ml(e,t))}function Bl(e,t){if(3===e.tag)jl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){jl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var i=hs(n,e=ls(t,e),1);if(da(n,i),i=dl(),null!==(n=fl(n,1)))Ht(n,1,i),ml(n,i);else if("function"==typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ls&n)===n&&(4===Fs||3===Fs&&(62914560&Ls)===Ls&&500>Hi()-zs?wl(e,0):Vs|=n),ml(e,t)}function ql(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(2&(t=e.mode)?4&t?(0===sl&&(sl=Bs),0===(t=qt(62914560&~sl))&&(t=4194304)):t=99===zi()?1:2:t=1),n=dl(),null!==(e=fl(e,t))&&(Ht(e,t,n),ml(e,n))}function Vl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new Vl(e,t,n,r)}function zl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wl(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gl(e,t,n,r,i,a){var o=2;if(r=e,"function"==typeof e)zl(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case C:return Xl(n.children,i,a,t);case F:o=8,i|=16;break;case k:o=8,i|=1;break;case A:return(e=Hl(12,n,t,8|i)).elementType=A,e.type=A,e.lanes=a,e;case M:return(e=Hl(13,n,t,i)).type=M,e.elementType=M,e.lanes=a,e;case R:return(e=Hl(19,n,t,i)).elementType=R,e.lanes=a,e;case j:return Kl(n,i,a,t);case B:return(e=Hl(24,n,t,i)).elementType=B,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:o=10;break e;case x:o=9;break e;case I:o=11;break e;case O:o=14;break e;case L:o=16,r=null;break e;case D:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Hl(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Xl(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Kl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=j,e.lanes=n,e}function $l(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Yl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,n,r){var i=t.current,a=dl(),o=hl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(vi(u)){n=_i(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),da(i,t),pl(i,o,a),o}function Zl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function eu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tu(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}function nu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,la(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Zl(o);s.call(e)}}Jl(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new nu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Zl(o);l.call(e)}}_l((function(){Jl(t,o,e,i)}))}return Zl(o)}function au(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Fo=!0;else{if(!(n&r)){switch(Fo=!1,t.tag){case 3:Xo(t),Xa();break;case 5:Da(t);break;case 1:vi(t.type)&&Ei(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;di(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return n&t.child.childLanes?Zo(e,t,n):(di(Fa,1&Fa.current),null!==(t=is(e,t,n))?t.sibling:null);di(Fa,1&Fa.current);break;case 19:if(r=!!(n&t.childLanes),64&e.flags){if(r)return rs(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),di(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Vo(e,t,n)}return is(e,t,n)}Fo=!!(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,pi.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var a=!0;Ei(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,la(t);var o=r.getDerivedStateFromProps;"function"==typeof o&&ga(t,r,o,e),i.updater=va,t.stateNode=i,i._reactInternals=t,Ea(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"==typeof e)return zl(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===O)return 14}return 2}(i),e=Qi(i,e),a){case 0:t=zo(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Bo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Qi(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 3:if(Xo(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ua(e,t),pa(t,r,null,n),(r=t.memoizedState.element)===i)Xa(),t=is(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ua=Kr(t.stateNode.containerInfo.firstChild),Ba=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ka.push(a);for(n=Aa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Xa();t=t.child}return t;case 5:return Da(t),null===e&&za(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,zr(r,i)?o=null:null!==a&&zr(r,a)&&(t.flags|=16),Ho(e,t),jo(e,t,o,n),t.child;case 6:return null===e&&za(t),null;case 13:return Zo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ka(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;var l=t.type._context;if(di(Ji,l._currentValue),l._currentValue=a,null!==o)if(l=o.value,0==(a=cr(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(o.children===i.children&&!fi.current){t=is(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&c.observedBits&a){1===l.tag&&((c=ca(-1,n&-n)).tag=2,da(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ia(l.return,n),u.lanes|=n;break}c=c.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Qi(i=t.type,t.pendingProps),Uo(e,t,i,a=Qi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vi(r)?(e=!0,Ei(t)):e=!1,aa(t,n),ba(t,r,i),Ea(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return rs(e,t,n);case 23:case 24:return Vo(e,t,n)}throw Error(s(156,t.tag))},nu.prototype.render=function(e){Jl(e,this._internalRoot,null,null)},nu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Jl(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pl(e,4,dl()),tu(e,4))},nt=function(e){13===e.tag&&(pl(e,67108864,dl()),tu(e,67108864))},rt=function(e){if(13===e.tag){var t=dl(),n=hl(e);pl(e,n,t),tu(e,n)}},it=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(re(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(s(90));J(r),re(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Oe=bl,Le=function(e,t,n,r,i){var a=Ms;Ms|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ms=a)&&(Gs(),Ki())}},De=function(){!(49&Ms)&&(function(){if(null!==rl){var e=rl;rl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ml(e,Hi())}))}Ki()}(),Ll())},Ne=function(e,t){var n=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=n)&&(Gs(),Ki())}};var ou={Events:[ri,ii,ai,Me,Re,Ll,{current:!1}]},su={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lu={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{wi=uu.inject(lu),Ti=uu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=au,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ms;if(48&n)return e(t);Ms|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ms=n,Ki()}},t.hydrate=function(e,t,n){if(!ru(t))throw Error(s(200));return iu(null,e,t,!0,n)},t.render=function(e,t,n){if(!ru(t))throw Error(s(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(s(40));return!!e._reactRootContainer&&(_l((function(){iu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return au(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return iu(e,t,n,!1,r)},t.version="17.0.2"},7256:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(9471),i=n(8713),a=n.n(i),o=n(2828);function s(e){return e.options.map((t=>r.createElement("div",{key:t.id,className:t.id===e.selected?"active":""},r.createElement("button",{onClick:e.onSelect,filter:e.id,value:t.id},r.createElement("span",null,t.title),t.id===e.selected?r.createElement(o.Z,{type:"close"}):null))))}s.propTypes={id:a().string.isRequired,selected:a().string.isRequired,onSelect:a().func.isRequired}},7331:function(e){"use strict";e.exports=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;(a=new Error(t.replace(/%s/g,(function(){return String(r[o++])})))).name="Invariant Violation"}throw a.framesToPop=1,a}}},7369:function(e){"use strict";e.exports=ReferenceError},7372:function(e,t,n){"use strict";var r=n(6495).freeze;t.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=r({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES},7460:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoViewerStore=t.SearchFieldStore=t.ProfilePageStore=t.PlaylistViewStore=t.PlaylistPageStore=t.PageStore=t.MediaPageStore=void 0;var i=r(n(2127));t.MediaPageStore=i.default;var a=r(n(6371));t.PageStore=a.default;var o=r(n(6841));t.PlaylistPageStore=o.default;var s=r(n(5503));t.PlaylistViewStore=s.default;var l=r(n(8580));t.ProfilePageStore=l.default;var u=r(n(4402));t.SearchFieldStore=u.default;var c=r(n(1309));t.VideoViewerStore=c.default},7500:function(e,t,n){"use strict";n.r(t),n.d(t,{loadPlaylistData:function(){return a},removePlaylist:function(){return l},removedMediaFromPlaylist:function(){return u},reorderedMediaInPlaylist:function(){return c},toggleSave:function(){return o},updatePlaylist:function(){return s}});var r=n(7143),i=n.n(r);function a(){i().dispatch({type:"LOAD_PLAYLIST_DATA"})}function o(){i().dispatch({type:"TOGGLE_SAVE"})}function s(e){i().dispatch({type:"UPDATE_PLAYLIST",playlist_data:e})}function l(){i().dispatch({type:"REMOVE_PLAYLIST"})}function u(e,t){i().dispatch({type:"MEDIA_REMOVED_FROM_PLAYLIST",media_id:e,playlist_id:t})}function c(e){i().dispatch({type:"PLAYLIST_MEDIA_REORDERED",playlist_media:e})}},7545:function(e,t,n){"use strict";n.d(t,{R:function(){return g}});var r=n(9471),i=n(8713),a=n.n(i),o=n(8790),s=n(7460),l=n(285),u=n(2855),c=n(1177),d=n(239),h=n(7731),p=n(9479),f=n(8974);function m(e){return r.createElement(o.LinksConsumer,null,(t=>r.createElement("div",{className:"empty-media empty-channel-media"},r.createElement("div",{className:"welcome-title"},"Welcome ",e.name),r.createElement("div",{className:"start-uploading"},"Start uploading media and sharing your work. Media that you upload will show up here."),r.createElement("a",{href:t.user.addMedia,title:"Upload media",className:"button-link"},r.createElement("i",{className:"material-icons","data-icon":"video_call"}),"UPLOAD MEDIA"))))}class g extends p.Y{constructor(e,t){super(e,"string"==typeof t?t:"author-home"),this.profilePageSlug="string"==typeof t?t:"author-home",this.state={channelMediaCount:-1,author:s.ProfilePageStore.get("author-data"),uploadsPreviewItemsCount:0,title:this.props.title,query:s.ProfilePageStore.get("author-query"),requestUrl:null},this.authorDataLoad=this.authorDataLoad.bind(this),this.onAuthorPreviewItemsCountCallback=this.onAuthorPreviewItemsCountCallback.bind(this),this.getCountFunc=this.getCountFunc.bind(this),this.changeRequestQuery=this.changeRequestQuery.bind(this),s.ProfilePageStore.on("load-author-data",this.authorDataLoad)}componentDidMount(){l.ProfilePageActions.load_author_data()}authorDataLoad(){const e=s.ProfilePageStore.get("author-data");let t=this.state.requestUrl;e&&(t=this.state.query?o.ApiUrlContext._currentValue.search.query+this.state.query+"&author="+e.id:o.ApiUrlContext._currentValue.media+"?author="+e.id),f.log("requestUrl",t),this.setState({author:e,requestUrl:t})}onAuthorPreviewItemsCountCallback(e){this.setState({uploadsPreviewItemsCount:e})}getCountFunc(e){this.setState({channelMediaCount:e},(()=>{if(this.state.query){let t="";t=e?1===e?'1 result for "'+this.state.query+'"':e+' results for "'+this.state.query+'"':'No results for "'+this.state.query+'"',this.setState({title:t})}}))}changeRequestQuery(e){if(!this.state.author)return;let t;t=e?o.ApiUrlContext._currentValue.search.query+e+"&author="+this.state.author.id:o.ApiUrlContext._currentValue.media+"?author="+this.state.author.id,f.log("requestUrl",t);let n=this.state.title;""===e&&(n=this.props.title),this.setState({requestUrl:t,query:e,title:n})}pageContent(){const e=s.ProfilePageStore.get("author-data"),t=e&&e.username===o.MemberContext._currentValue.username;return[this.state.author?r.createElement(c.A,{key:"ProfilePagesHeader",author:this.state.author,onQueryChange:this.changeRequestQuery}):null,this.state.author?r.createElement(d.A,{key:"ProfilePagesContent"},r.createElement(u.MediaListWrapper,{title:!t||0<this.state.channelMediaCount?this.state.title:null,className:"items-list-ver"},r.createElement(h.LazyLoadItemListAsync,{key:this.state.requestUrl,requestUrl:this.state.requestUrl,hideAuthor:!0,itemsCountCallback:this.state.requestUrl?this.getCountFunc:null,hideViews:!s.PageStore.get("config-media-item").displayViews,hideDate:!s.PageStore.get("config-media-item").displayPublishDate,canEdit:t}),t&&0===this.state.channelMediaCount&&!this.state.query?r.createElement(m,{name:this.state.author.name}):null)):null]}}g.propTypes={title:a().string.isRequired},g.defaultProps={title:"Uploads"}},7570:function(e,t,n){"use strict";var r=n(278);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},7619:function(e,t,n){"use strict";var r=n(6035),i=n.n(r),a=n(338),o=n.n(a),s=n(160),l=n.n(s);if(201==n.j)var u=n(4539);if(201==n.j)var c=n(3640);if(201==n.j)var d=n(5474);if(201==n.j)var h=n(8018);if(201==n.j)var p=n(419);if(201==n.j)var f=n(8255);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.A=201==n.j?function e(t){var n=t.style,r=t.className,i=t.classNames,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.A,s=r||function(e){var t=e&&(0,f.HP)(e)[0];return t&&t.split("__")[0].split("--")[0]}(i)||(null==n?void 0:n.className),m="function"==typeof n?n:(0,h.A)((function(t,r){var c=(0,u.A)(t);l()(Array.isArray(c),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),l()(!r||(0,f.Qd)(r),"Optional second parameter must be a plain object.");var h=c.filter(d.Y),m=c.filter(d.v),v=m.length>0?function(e){return(0,f.zu)((0,p.r1)(e,m))}:function(e){return[e]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v((0,p.jV)(e,h))},b=function(e,t,n){if(e){var r=e.split(" ")[0],i=[].concat(o()(0===t.length?n.map((function(e){return"".concat(r,"--").concat(e.substring(1))})):[]),o()(t.map((function(e){return"".concat(r,"__").concat(e)}))));return 0===t.length?[e].concat(o()(i)):i}}(s,m,h);return e(g(g(g({},(n||r)&&{style:f.h1.apply(void 0,[{}].concat(o()(y(r)),o()(y(n))))}),b&&{className:b.join(" ")}),i&&{classNames:i}),a)})),v=g({},"function"==typeof n?n:{style:n}),y=o()(new Set([].concat(o()(v.className?v.className.split(" "):[]),o()(s?s.split(" "):[])))),b=i?(0,f.oE)(y.map((function(e){return i[e]}))):y,_=a(g(g({},v),b.length>0?{className:b.join(" ")}:{}));return Object.assign(m,_),m}:null},7673:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(1463);function i(e,t){if(e instanceof Date)switch(t=0<(t=0+t)?t:1){case 1:return r.A[e.getMonth()].substring(0,3)+" "+e.getDate()+", "+e.getFullYear();case 2:return e.getDate()+" "+r.A[e.getMonth()].substring(0,3)+" "+e.getFullYear();case 3:return e.getDate()+" "+r.A[e.getMonth()]+" "+e.getFullYear()}return null}},7679:function(e,t,n){"use strict";var r=n(9932),i=n(9289),a=n(7901),o=n(1906);e.exports=o||r.call(a,i)},7687:function(e,t,n){"use strict";n.r(t),n.d(t,{PlayerRecommendedMedia:function(){return s}});var r=n(1838),i=n(5289);const a=new(n(4247).MediaDurationInfo);function o(e,t,n,r){return'<span class="more-media-item-content">'+function(e){return'<span class="more-media-title">'+e+"</span>"}(e)+function(e,t,n){return'<span class="more-media-meta">'+function(e){return'<span class="more-media-author">'+e+"</span>"}(e)+function(e,t){return t?"":'<span class="more-media-views">'+e+"</span>"}(t,n)+"</span>"}(t,n,r)+"</span>"}function s(e,t,n){t=t||!1;let s,l=null;function u(t){if(!s){if(!v.contentInner.offsetWidth)return;s=new i.A(v.contentInner,".more-media-item"),c()}s.updateDataState(e.length,!0,!0),d()}function c(){setTimeout((function(){let e=0;for(;e<v.items.length;)v.items[e].setAttribute("class","more-media-item"),v.items[e].setAttribute("style",null),e+=1}),75*v.items.length+200)}function d(){v.prevSlide.style.display=s.hasPreviousSlide()?"":"none",v.nextSlide.style.display=s.hasNextSlide()?"":"none"}function h(e){e.preventDefault(),e.stopPropagation(),y.openInlineMoreMedia=!y.openInlineMoreMedia,(y.openInlineMoreMedia?r.removeClassname:r.addClassname)(v.wrapper,"hidden-inline-more-media"),u()}function p(e){e.preventDefault(),e.stopPropagation(),s.previousSlide(),d(),s.scrollToCurrentSlide()}function f(e){e.preventDefault(),e.stopPropagation(),s.nextSlide(),d(),s.scrollToCurrentSlide()}function m(){switch(y.displayType){case"full":v.wrapper.parentNode.style.top="";break;case"inline-small":case"inline":v.wrapper.parentNode.style.top="auto"}}function g(){v.wrapper.setAttribute("class",function(){if(null===l)return;let t="more-media";switch(y.displayType){case"full":t+=" full-wrapper";break;case"inline-small":t+=" inline-slider-small";break;case"inline":t+=" inline-slider"}return t+=y.openInlineMoreMedia?"":" hidden-inline-more-media",t+function(e,t){if(!e||!t||!t.firstChild)return"";const n=window.outerWidth,i=window.outerHeight,a=t.firstChild,o=a.offsetWidth,s=a.offsetHeight,l=o/s;let u=function(e,t,n,i,a,o,s){let l,u,c,d=[],h={},p=[];if(750<=i?p=1.6<o?[4,3]:[3,4]:375>=i?p=160>=a?[1,1]:320>=a?[1,2]:480>=a?[1,3]:640>=a?[1,4]:[1,6]:625>=i&&(p=[2,1],p=160>=a?[2,1]:320>=a?[2,2]:480>=a?[2,3]:640>=a?[2,4]:800>=a?[2,5]:[2,6]),!p.length){for(u in e)e.hasOwnProperty(u)&&(l=Math.abs(o-e[u].val),d.push(l),h[l]=u);if(c=e[h[(0,r.quickSort)(d,0,d.length-1)[0]]].grid,1<c.length){for(d=[],h={},u=0;u<c.length;)l=Math.abs(i-c[u][0]*s),d.push(l),h[l]=u,u+=1;p=c[h[(0,r.quickSort)(d,0,d.length-1)[0]]]}else p=c[0];500>=i?p[0]=Math.min(2,p[0]):750>=i&&(p[0]=Math.min(3,p[0])),390>=a?p[1]=Math.min(2,p[1]):590>=a&&(p[1]=Math.min(3,p[1]))}return p}(function(e,t,n){let i,a,o,s,l=0,u={};for(;l<e.length;){for(i=0;i<t.length;)a=16*e[l],o=9*t[i],s=(0,r.greaterCommonDivision)(a,o),1<s&&(a/=s,o/=s),e[l]*(t[i]-1)<n&&(u[a+"/"+o]=u[a+"/"+o]||{val:a/o,grid:[]},u[a+"/"+o].grid.push([e[l],t[i]])),i+=1;l+=1}return u}([1,2,3,4,5,6],[1,2,3,4,5,6],e,parseInt(n,10),parseInt(i,10)),0,0,o,s,l,250);return u.length?" grid-col-"+u[0]+" grid-row-"+u[1]:""}(e.length,l)}())}const v={wrapper:document.createElement("div"),title:document.createElement("h2"),openBtn:document.createElement("button"),closeBtn:document.createElement("button"),prevSlide:document.createElement("div"),nextSlide:document.createElement("div"),prevSlideBtn:null,nextSlideBtn:null,content:document.createElement("div"),contentInner:document.createElement("div"),items:[]},y={isInited:!1,displayType:"inline",openInlineMoreMedia:!0};v.title.innerHTML="More videos",v.openBtn.innerHTML="More videos",v.prevSlide.innerHTML='<button class="circle-icon-button"><span><span><i class="vjs-icon-navigate-before"></i></span></span></button>',v.nextSlide.innerHTML='<button class="circle-icon-button"><span><span><i class="vjs-icon-navigate-next"></i></span></span></button>',v.title.setAttribute("class","more-media-wrap-title"),v.openBtn.setAttribute("class","open-more-videos"),v.closeBtn.setAttribute("class","close-more-videos vjs-icon-close"),v.prevSlide.setAttribute("class","prev-slide"),v.nextSlide.setAttribute("class","next-slide"),v.content.appendChild(v.contentInner),v.wrapper.appendChild(v.title),v.wrapper.appendChild(v.openBtn),v.wrapper.appendChild(v.closeBtn),v.wrapper.appendChild(v.content),v.content.appendChild(v.prevSlide),v.content.appendChild(v.nextSlide),v.prevSlideBtn=v.prevSlide.querySelector("button"),v.nextSlideBtn=v.nextSlide.querySelector("button"),this.html=function(){return v.wrapper},this.onResize=function(){g(),"inline"===y.displayType&&u()},this.initWrappers=function(e){l=e,m(),g()},this.init=function(){y.itemsAreBuilt||(y.itemsAreBuilt=!0,function(e,t,n,i,s){let l=0;for(;l<e.length;)a.update(e[l].duration),t[l]=document.createElement("div"),t[l].setAttribute("class","more-media-item before-more-media-item-load"),t[l].setAttribute("style","--n: "+l),t[l].innerHTML='<a href="'+e[l].url+'" title="'+e[l].title+'"'+(i?'target="_blank"':"")+">"+(u=e[l].thumbnail_url,c=a.toString(),u?'<span class="more-media-item-thumb" style="background-image:url(\''+u+"');\">"+function(e){return'<span class="more-media-duration"><span>'+e+"</span></span>"}(c)+"</span>":"")+o(e[l].title,e[l].author_name,(0,r.formatViewsNumber)(e[l].views)+" "+(1>=e[l].views?"view":"views"),s)+"</a>",n.appendChild(t[l]),l+=1;var u,c}(e,v.items,v.contentInner,t,n)),"inline"===y.displayType&&(s?(u(),c()):u())},this.destroy=function(){v.prevSlideBtn&&v.prevSlideBtn.removeEventListener("click",p),v.nextSlideBtn&&v.nextSlideBtn.removeEventListener("click",f),v.openBtn.removeEventListener("click",h),v.closeBtn.removeEventListener("click",h)},this.updateDisplayType=function(e){let t,n;switch(e){case"full":case"inline":case"inline-small":t=e}if(t&&t!==y.displayType){for(y.displayType=t,m(),g(),n=0;n<v.items.length;)v.items[n].setAttribute("class","more-media-item before-more-media-item-load"),v.items[n].setAttribute("style","--n: "+n),n+=1;"full"===t&&c()}},v.prevSlideBtn&&v.prevSlideBtn.addEventListener("click",p),v.nextSlideBtn&&v.nextSlideBtn.addEventListener("click",f),v.openBtn.addEventListener("click",h),v.closeBtn.addEventListener("click",h)}},7703:function(e){var t,n,r,i,a,o,s,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},r=function(e){return e/l},i=function(e,t){return e/t},a=function(e,n){return t(i(e,n))},o=function(e,t){return n(r(e),t)},s=function(e,t,n){return r(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:a,videoTsToAudioTs:o,metadataTsToSeconds:s}},7771:function(e,t,n){var r=n(6495).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+i.source+a.source+"*(?::"+i.source+a.source+"*)?$");function s(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function l(){}function u(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,n,i,a,o){function s(e,t,r){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,a),r)}for(var l,u=++t,c=0;;){var d=e.charAt(u);switch(d){case"=":if(1===c)l=e.slice(t,u),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(o.warning('attribute value must after "="'),l=e.slice(t,u)),t=u+1,!((u=e.indexOf(d,t))>0))throw new Error("attribute value no end '"+d+"' match");s(l,h=e.slice(t,u),t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');s(l,h=e.slice(t,u),t),o.warning('attribute "'+l+'" missed start quot('+d+")!!"),t=u+1,c=5}break;case"/":switch(c){case 0:n.setTagName(e.slice(t,u));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:break;case 2:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==c&&n.setTagName(e.slice(t,u)),u;case">":switch(c){case 0:n.setTagName(e.slice(t,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=e.slice(t,u)).slice(-1)&&(n.closed=!0,h=h.slice(0,-1));case 2:2===c&&(h=l),4==c?(o.warning('attribute "'+h+'" missed quot(")!'),s(l,h,t)):(r.isHTML(i[""])&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),s(h,h,t));break;case 3:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case 0:n.setTagName(e.slice(t,u)),c=6;break;case 1:l=e.slice(t,u),c=2;break;case 4:var h=e.slice(t,u);o.warning('attribute "'+h+'" missed quot(")!!'),s(l,h,t);case 5:c=6}else switch(c){case 2:n.tagName,r.isHTML(i[""])&&l.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),s(l,l,t),t=u,c=1;break;case 5:o.warning('attribute space is required"'+l+'"!!');case 6:c=1,t=u;break;case 3:c=4,t=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function d(e,t,n){for(var i=e.tagName,a=null,o=e.length;o--;){var s=e[o],l=s.qName,u=s.value;if((p=l.indexOf(":"))>0)var c=s.prefix=l.slice(0,p),d=l.slice(p+1),h="xmlns"===c&&d;else d=l,c=null,h="xmlns"===l&&"";s.localName=d,!1!==h&&(null==a&&(a={},f(n,n={})),n[h]=a[h]=u,s.uri=r.XMLNS,t.startPrefixMapping(h,u))}for(o=e.length;o--;)(c=(s=e[o]).prefix)&&("xml"===c&&(s.uri=r.XML),"xmlns"!==c&&(s.uri=n[c||""]));var p;(p=i.indexOf(":"))>0?(c=e.prefix=i.slice(0,p),d=e.localName=i.slice(p+1)):(c=null,d=e.localName=i);var m=e.uri=n[c||""];if(t.startElement(m,d,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=a,!0;if(t.endElement(m,d,i),a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&t.endPrefixMapping(c)}function h(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,r),i.characters(o,0,o.length),a)}return t+1}function p(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function f(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function m(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var a=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],l=!1,u=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],u=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var c=a[o-1];return n.startDTD(s,l,u),n.endDTD(),c.index+c[0].length}return-1}function g(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function v(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,l.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),f(t,t={}),function(e,t,n,i,a){function o(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function l(t){if(t>T){var n=e.substring(T,t).replace(/&#?\w+;/g,o);E&&f(T),i.characters(n,0,t-T),T=t}}function f(t,n){for(;t>=b&&(n=_.exec(e));)y=n.index,b=y+n[0].length,E.lineNumber++;E.columnNumber=t-y+1}for(var y=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,E=i.locator,S=[{currentNSMap:t}],w={},T=0;;){try{var C=e.indexOf("<",T);if(C<0){if(!e.substr(T).match(/^\s*$/)){var k=i.doc,A=k.createTextNode(e.substr(T));k.appendChild(A),i.currentElement=A}return}switch(C>T&&l(C),e.charAt(C+1)){case"/":var P=e.indexOf(">",C+3),x=e.substring(C+2,P).replace(/[ \t\n\r]+$/g,""),I=S.pop();P<0?(x=e.substring(C+2).replace(/[\s<].*/,""),a.error("end tag name: "+x+" is not complete:"+I.tagName),P=C+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),a.error("end tag name: "+x+" maybe not complete"),P=C+1+x.length);var M=I.localNSMap,R=I.tagName==x;if(R||I.tagName&&I.tagName.toLowerCase()==x.toLowerCase()){if(i.endElement(I.uri,I.localName,x),M)for(var O in M)Object.prototype.hasOwnProperty.call(M,O)&&i.endPrefixMapping(O);R||a.fatalError("end tag name: "+x+" is not match the current start tagName:"+I.tagName)}else S.push(I);P++;break;case"?":E&&f(C),P=g(e,C,i);break;case"!":E&&f(C),P=m(e,C,i,a);break;default:E&&f(C);var L=new v,D=S[S.length-1].currentNSMap,N=(P=c(e,C,L,D,o,a),L.length);if(!L.closed&&p(e,P,L.tagName,w)&&(L.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),E&&N){for(var F=u(E,{}),j=0;j<N;j++){var B=L[j];f(B.offset),B.locator=u(E,{})}i.locator=F,d(L,i,D)&&S.push(L),i.locator=E}else d(L,i,D)&&S.push(L);r.isHTML(L.uri)&&!L.closed?P=h(e,P,L.tagName,o,i):P++}}catch(e){if(e instanceof s)throw e;a.error("element parse error: "+e),P=-1}P>T?T=P:l(Math.max(C,T)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},v.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=l,t.ParseError=s},7901:function(e){"use strict";e.exports=Function.prototype.call},7911:function(e,t,n){"use strict";e.exports=n(7171)},7961:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],l=a[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),c=0,d=l>0?o-4:o;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,u=r-i;s<u;s+=o)a.push(l(e,s,s+o>u?u:s+o));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},7981:function(e){var t,n,r,i,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(d)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a},8004:function(e,t,n){"use strict";n.d(t,{R:function(){return a},z:function(){return o}});var r=n(8974);const i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r[t[0]](...t.slice(1))},a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",...t)},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",...t)}},8018:function(e,t,n){"use strict";if(201==n.j)var r=n(4539);var i={};t.A=201==n.j?function(e){return function(t,n){var a,o=n||i;e.memoize=e.memoize||new WeakMap,e.memoize.has(o)?a=e.memoize.get(o):(a={},e.memoize.set(o,a));var s=(0,r.A)(t).join(" ");return s in a?a[s]:a[s]=e(t||[],n)}}:null},8183:function(e,t,n){"use strict";e.exports=n(1871)},8208:function(e){"use strict";e.exports=EvalError},8228:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},8255:function(e,t,n){"use strict";n.d(t,{HP:function(){return a},Qd:function(){return c},cJ:function(){return u},h1:function(){return l},oE:function(){return d},zu:function(){return o}});var r=n(6035),i=n.n(r),a=function(e){return e===Object(e)?Object.keys(e):[]},o=function(e){return e===Object(e)?Object.values(e):[]};function s(e,t){var n=Object.assign({},e);return c(e)&&c(t)&&a(t).forEach((function(r){c(t[r])&&r in e?n[r]=s(e[r],t[r]):Object.assign(n,i()({},r,t[r]))})),n}var l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return s(e,t)}),e)},u=function(e,t){var n=Object.assign({},e);if(t)for(var r=0;r<t.length;r++)delete n[t[r]];return n},c=function(e){return!(e!==Object(e)||e instanceof Date||Array.isArray(e))},d=function(e){return(e||[]).filter(Boolean)}},8267:function(e,t,n){"use strict";var r=n(2418);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),a="";for(var o in i)a+=o;return e!==a}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?r:Object.assign:r}},8322:function(e,t,n){"use strict";n.r(t),n.d(t,{toggleLoop:function(){return a},toggleSave:function(){return s},toggleShuffle:function(){return o}});var r=n(7143),i=n.n(r);function a(){i().dispatch({type:"TOGGLE_LOOP"})}function o(){i().dispatch({type:"TOGGLE_SHUFFLE"})}function s(){i().dispatch({type:"TOGGLE_SAVE"})}},8354:function(e,t,n){"use strict";n.d(t,{Et:function(){return a},F5:function(){return l},Fq:function(){return o},be:function(){return i},en:function(){return r},ep:function(){return s},p7:function(){return d},q6:function(){return u},tR:function(){return c}});const r=(e,t)=>e>t,i=e=>0===e,a=e=>!isNaN(e)&&e===0+e,o=e=>e===Math.trunc(e),s=e=>r(e,0),l=e=>a(e)&&s(e),u=e=>o(e)&&s(e),c=e=>o(e)&&(s(e)||i(e)),d=(e,t)=>t?d(t,e%t):e},8365:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8396:function(e,t,n){"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,a=n(9932);e.exports=a.call(r,i)},8474:function(e,t,n){"use strict";e.exports=n(3789)},8482:function(e,t,n){"use strict";if(n.d(t,{n:function(){return i}}),!/^(152|201|33|543|594|722)$/.test(n.j))var r=n(1463);function i(e){const t=e.getDate(),n=r.A[e.getMonth()].substring(0,3),i=e.getFullYear(),a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();let l=n+" "+t+", "+i;return l+=" "+(a<10?"0":"")+a,l+=":"+(o<10?"0":"")+o,l+=":"+(s<10?"0":"")+s,l}},8558:function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var n,a=String(e);return(n=r[a.toLowerCase()])?n:(n=i[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var a;if(a=r[t.toLowerCase()])return a===n;if(a=i[t.toLowerCase()])return a===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var o=t.names=t.title={};for(a in r)o[r[a]]=a;for(var s in i)r[s]=i[s]},8580:function(e,t,n){"use strict";n.r(t);var r=n(9032),i=n.n(r),a=n(1838),o=n(3997);class s extends(i()){constructor(){super(),this.mediacms_config=(0,o.$)(window.MediaCMS),this.authorData=null,this.authorQuery=void 0,this.onDataLoad=this.onDataLoad.bind(this),this.onDataLoadFail=this.onDataLoadFail.bind(this),this.removeProfileResponse=this.removeProfileResponse.bind(this),this.removeProfileFail=this.removeProfileFail.bind(this),this.removingProfile=!1}removeProfileResponse(e){e&&204===e.status&&this.emit("profile_delete",this.authorData.username)}removeProfileFail(){this.emit("profile_delete_fail",this.authorData.username),setTimeout((function(e){this.removingProfile=!1}),100,this)}get(e){switch(e){case"author-data":return this.authorData;case"author-query":if(void 0===this.authorQuery){this.authorQuery=null;let e=window.location.search;if(e&&""!==e){e=e.split("?")[1].split("=");let t=0;for(;t<e.length;){if("aq"===e[t]){this.authorQuery=e[t+1]||null;break}t+=1}}}return this.authorQuery}}onDataLoad(e){e&&e.data&&(this.authorData=e.data,this.authorData.id=this.authorData.username,this.authorData.name=""!==this.authorData.name?this.authorData.name:this.authorData.username,this.emit("load-author-data"))}onDataLoadFail(e){}actions_handler(e){switch(e.type){case"REMOVE_PROFILE":if(this.removingProfile)return;this.removingProfile=!0;let e=this.mediacms_config.api.users+"/"+this.authorData.username;(0,a.deleteRequest)(e,{headers:{"X-CSRFToken":(0,a.csrfToken)()}},!1,this.removeProfileResponse,this.removeProfileFail);break;case"LOAD_AUTHOR_DATA":(0,a.getRequest)(this.mediacms_config.api.users+"/"+window.MediaCMS.profileId,!1,this.onDataLoad,this.onDataLoadFail)}}}t.default=(0,a.exportStore)(new s,"actions_handler")},8582:function(e,t,n){"use strict";var r,i,a,o,s=n(8974);if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var d=null,h=null,p=function(){if(null!==d)try{var e=t.unstable_now();d(!0,e),d=null}catch(e){throw setTimeout(p,0),e}};r=function(e){null!==d?setTimeout(r,0,e):(d=e,setTimeout(p,0))},i=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,m=window.clearTimeout;if(void 0!==s){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&s.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof g&&s.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,b=-1,_=5,E=0;t.unstable_shouldYield=function(){return t.unstable_now()>=E},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?s.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,w=S.port2;S.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();E=e+_;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(e){throw w.postMessage(null),e}}else v=!1},r=function(e){y=e,v||(v=!0,w.postMessage(null))},i=function(e,n){b=f((function(){e(t.unstable_now())}),n)},a=function(){m(b),b=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>A(o,n))void 0!==l&&0>A(l,o)?(e[r]=l,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==l&&0>A(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],x=[],I=1,M=null,R=3,O=!1,L=!1,D=!1;function N(e){for(var t=C(x);null!==t;){if(null===t.callback)k(x);else{if(!(t.startTime<=e))break;k(x),t.sortIndex=t.expirationTime,T(P,t)}t=C(x)}}function F(e){if(D=!1,N(e),!L)if(null!==C(P))L=!0,r(j);else{var t=C(x);null!==t&&i(F,t.startTime-e)}}function j(e,n){L=!1,D&&(D=!1,a()),O=!0;var r=R;try{for(N(n),M=C(P);null!==M&&(!(M.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=M.callback;if("function"==typeof o){M.callback=null,R=M.priorityLevel;var s=o(M.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?M.callback=s:M===C(P)&&k(P),N(n)}else k(P);M=C(P)}if(null!==M)var l=!0;else{var u=C(x);null!==u&&i(F,u.startTime-n),l=!1}return l}finally{M=null,R=r,O=!1}}var B=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return C(P)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:I++,callback:n,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(e.sortIndex=o,T(x,e),null===C(P)&&e===C(x)&&(D?a():D=!0,i(F,o-s))):(e.sortIndex=l,T(P,e),L||O||(L=!0,r(j))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},8627:function(e,t,n){"use strict";var r=n(5935),i=n(9157);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},8629:function(e,t,n){"use strict";n.r(t),n.d(t,{useItemListLazyLoad:function(){return o}});var r=n(9471),i=n(7460),a=n(4876);function o(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[o,s,l,u,c,d,h]=(0,a.useItemList)(e,t),[p,f]=(0,r.useState)(window.scrollY+2*window.outerHeight);let m={list:"items-list",listOuter:"items-list-outer"+("string"==typeof e.className?" "+e.className.trim():"")};function g(){f(window.scrollY+2*window.outerHeight)}return(0,r.useEffect)((()=>{h(),null!==t.current&&(g(),l.loadedAllItems()&&i.PageStore.removeListener("window_scroll",g))}),[o]),(0,r.useEffect)((()=>{null!==t.current&&null!==l&&p>=t.current.offsetTop+t.current.offsetHeight&&l.loadItems()}),[o,p]),[o,s,l,u,m,d,c,g,function(){document.hidden||setTimeout(g,10)},n,t,function(){return null},function(){return null}]}},8681:function(e,t,n){"use strict";n.d(t,{D:function(){return Z}});var r=n(9471),i=n(8713),a=n.n(i),o=n(4571),s=n.n(o),l=n(1838),u=n(5338),c=n(7664),d=n(2495),h=n(1610),p=n(7460),f=n(2828);function m(e){return void 0!==e.title&&void 0!==e.url?r.createElement("a",{href:e.url,title:e.title},e.title):void 0!==e.title?e.title:void 0!==e.url?e.url:r.createElement("i",{className:"non-available"},"N/A")}function g(e){return void 0!==e.date?(0,l.formatManagementTableDate)(new Date(Date.parse(e.date))):r.createElement("i",{className:"non-available"},"N/A")}function v(e){return void 0!==e.name&&void 0!==e.url?r.createElement("a",{href:e.url,title:e.name},e.name):void 0!==e.name?e.name:void 0!==e.url?e.url:r.createElement("i",{className:"non-available"},"N/A")}function y(e){const[t,n,i]=(0,h.usePopup)(),[a,o]=(0,r.useState)(!1),s={updating:!1,pending:0},l=(0,r.useCallback)((function(){if(s.updating)s.pending=s.pending+1;else{s.updating=!0;const t=e.containerRef.current.querySelector(".popup");if(t){const n=e.containerRef.current.getBoundingClientRect();t.style.position="fixed",t.style.left=n.x+"px",document.body.offsetHeight<32+t.offsetHeight+window.scrollY+n.top?t.style.top=n.y-t.offsetHeight+"px":t.style.top=n.y+n.height+"px"}setTimeout((()=>{s.updating=!1,s.pending&&(s.pending=0,l())}),8)}}),[]);return(0,r.useEffect)((()=>{a?(p.PageStore.on("window_scroll",l),p.PageStore.on("window_resize",l),l()):(p.PageStore.removeListener("window_scroll",l),p.PageStore.removeListener("window_resize",l))}),[a]),r.createElement("div",{ref:e.containerRef,className:"actions"},r.createElement(i,{contentRef:t},r.createElement("button",{title:"Delete"+(void 0!==e.title?' "'+e.title+'"':"")},"Delete")),r.createElement(n,{contentRef:t,showCallback:function(){o(!0)},hideCallback:function(){o(!1)}},r.createElement(c.PopupMain,null,r.createElement("div",{className:"popup-message"},r.createElement("span",{className:"popup-message-title"},"Media removal"),r.createElement("span",{className:"popup-message-main"},"You're willing to remove media"+(void 0!==e.title?' "'+e.title+'"':""),"?")),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onCancel&&e.onCancel()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onProceed&&e.onProceed()}},"PROCEED")))))}function b(e){const t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"function"==typeof e.onCheckRow&&e.onCheckRow(e.token,n)}),[n]),(0,r.useEffect)((()=>{i(e.selectedRow)}),[e.selectedRow]),r.createElement("div",{className:"item manage-item manage-media-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}})),r.createElement("div",{className:"mi-title"},r.createElement(m,{title:e.title,url:e.url}),e.hideDeleteAction?null:r.createElement(y,{containerRef:t,title:e.title,onProceed:function(){"function"==typeof e.onProceedRemoval&&e.onProceedRemoval(e.token)}})),r.createElement("div",{className:"mi-added"},r.createElement(g,{date:e.add_date})),r.createElement("div",{className:"mi-author"},r.createElement(v,{name:e.author_name,url:e.author_url})),r.createElement("div",{className:"mi-type"},void 0===e.media_type?r.createElement("i",{className:"non-available"},"N/A"):e.media_type),r.createElement("div",{className:"mi-encoding"},void 0===e.encoding_status?r.createElement("i",{className:"non-available"},"N/A"):e.encoding_status),r.createElement("div",{className:"mi-state"},void 0===e.state?r.createElement("i",{className:"non-available"},"N/A"):e.state),r.createElement("div",{className:"mi-reviewed"},void 0===e.is_reviewed?r.createElement("i",{className:"non-available"},"N/A"):e.is_reviewed?r.createElement(f.Z,{type:"check_circle"}):r.createElement(f.Z,{type:"cancel"})),r.createElement("div",{className:"mi-featured"},void 0===e.featured?r.createElement("i",{className:"non-available"},"N/A"):e.featured?r.createElement(f.Z,{type:"check_circle"}):"-"),r.createElement("div",{className:"mi-reported"},void 0===e.reported_times?r.createElement("i",{className:"non-available"},"N/A"):0===e.reported_times?r.createElement("span",null,"-"):r.createElement("span",{className:"reported-number"},e.reported_times," ","time"+(1<e.reported_times?"s":""))))}function _(e){if(void 0!==e.url){if(null!==e.name&&""!==e.name)return r.createElement("a",{href:e.url,title:e.name},e.name)}else if(null!==e.name&&""!==e.name)return e.name;return r.createElement("i",{className:"non-available"},"N/A")}function E(e){if(void 0!==e.url){if(null!==e.username&&""!==e.username)return r.createElement("a",{href:e.url,title:e.username},e.username)}else if(null!==e.username&&""!==e.username)return e.username;return r.createElement("i",{className:"non-available"},"N/A")}function S(e){const[t,n,i]=(0,u.usePopup)(),[a,o]=(0,r.useState)(!1),s={updating:!1,pending:0},l=(0,r.useCallback)((function(){if(s.updating)s.pending=s.pending+1;else{s.updating=!0;const t=e.containerRef.current.querySelector(".popup");if(t){const n=e.containerRef.current.getBoundingClientRect();t.style.position="fixed",t.style.left=n.x+"px",document.body.offsetHeight<32+t.offsetHeight+window.scrollY+n.top?t.style.top=n.y-t.offsetHeight+"px":t.style.top=n.y+n.height+"px"}setTimeout((()=>{s.updating=!1,s.pending&&(s.pending=0,l())}),8)}}),[]);return(0,r.useEffect)((()=>{a?(p.PageStore.on("window_scroll",l),p.PageStore.on("window_resize",l),l()):(p.PageStore.removeListener("window_scroll",l),p.PageStore.removeListener("window_resize",l))}),[a]),r.createElement("div",{ref:e.containerRef,className:"actions"},r.createElement(i,{contentRef:t},r.createElement("button",{title:'Delete "'+e.name+'"'},"Delete")),r.createElement(n,{contentRef:t,showCallback:function(){o(!0)},hideCallback:function(){o(!1)}},r.createElement(c.PopupMain,null,r.createElement("div",{className:"popup-message"},r.createElement("span",{className:"popup-message-title"},"Member removal"),r.createElement("span",{className:"popup-message-main"},"You're willing to remove member \""+e.name+'"',"?")),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onCancel&&e.onCancel()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onProceed&&e.onProceed()}},"PROCEED")))))}function w(e){const t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"function"==typeof e.onCheckRow&&e.onCheckRow(e.username,n)}),[n]),(0,r.useEffect)((()=>{i(e.selectedRow)}),[e.selectedRow]),r.createElement("div",{className:"item manage-item manage-users-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}})),r.createElement("div",{className:"mi-name"},r.createElement(_,{name:e.name,url:e.url}),r.createElement(S,{containerRef:t,name:e.name||e.username,onProceed:function(){"function"==typeof e.onProceedRemoval&&e.onProceedRemoval(e.username)}})),r.createElement("div",{className:"mi-username"},r.createElement(E,{username:e.username,url:e.url})),r.createElement("div",{className:"mi-added"},r.createElement(g,{date:e.add_date})),e.has_roles?r.createElement("div",{className:"mi-role"},void 0===e.roles?r.createElement("i",{className:"non-available"},"N/A"):e.roles.length?e.roles.join("\n"):"-"):null,e.has_verified?r.createElement("div",{className:"mi-verified"},void 0===e.is_verified?r.createElement("i",{className:"non-available"},"N/A"):e.is_verified?r.createElement(f.Z,{type:"check_circle"}):"-"):null,e.has_trusted?r.createElement("div",{className:"mi-trusted"},void 0===e.is_trusted?r.createElement("i",{className:"non-available"},"N/A"):e.is_trusted?r.createElement(f.Z,{type:"check_circle"}):"-"):null,r.createElement("div",{className:"mi-featured"},void 0===e.is_featured?r.createElement("i",{className:"non-available"},"N/A"):e.is_featured?r.createElement(f.Z,{type:"check_circle"}):"-"))}function T(e){return void 0!==e.name&&void 0!==e.url?r.createElement("a",{href:e.url,title:e.name},e.name):void 0!==e.name?e.name:void 0!==e.url?e.url:r.createElement("i",{className:"non-available"},"N/A")}function C(e){const[t,n,i]=(0,u.usePopup)(),[a,o]=(0,r.useState)(!1),s={updating:!1,pending:0},l=(0,r.useCallback)((function(){if(s.updating)s.pending=s.pending+1;else{s.updating=!0;const t=e.containerRef.current.querySelector(".popup");if(t){const n=e.containerRef.current.getBoundingClientRect();t.style.position="fixed",t.style.left=n.x+"px",document.body.offsetHeight<32+t.offsetHeight+window.scrollY+n.top?t.style.top=n.y-t.offsetHeight+"px":t.style.top=n.y+n.height+"px"}setTimeout((()=>{s.updating=!1,s.pending&&(s.pending=0,l())}),8)}}),[]);return(0,r.useEffect)((()=>{a?(p.PageStore.on("window_scroll",l),p.PageStore.on("window_resize",l),l()):(p.PageStore.removeListener("window_scroll",l),p.PageStore.removeListener("window_resize",l))}),[a]),r.createElement("div",{ref:e.containerRef,className:"actions"},void 0===e.media_url?null:r.createElement("span",null,r.createElement("a",{href:e.media_url},"View media")),void 0===e.media_url||e.hideDeleteAction?null:r.createElement("span",{className:"seperator"},"|"),r.createElement(i,{contentRef:t},r.createElement("button",{title:"Delete comment"},"Delete")),r.createElement(n,{contentRef:t,showCallback:function(){o(!0)},hideCallback:function(){o(!1)}},r.createElement(c.PopupMain,null,r.createElement("div",{className:"popup-message"},r.createElement("span",{className:"popup-message-title"},"Comment removal"),r.createElement("span",{className:"popup-message-main"},"You're willing to remove comment?")),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onCancel&&e.onCancel()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-profile-removal",onClick:function(){t.current.tryToHide(),"function"==typeof e.onProceed&&e.onProceed()}},"PROCEED")))))}function k(e){const t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"function"==typeof e.onCheckRow&&e.onCheckRow(e.uid,n)}),[n]),(0,r.useEffect)((()=>{i(e.selectedRow)}),[e.selectedRow]),r.createElement("div",{className:"item manage-item manage-comments-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}})),r.createElement("div",{className:"mi-author"},r.createElement(T,{name:e.author_name,url:e.author_url})),r.createElement("div",{className:"mi-comment"},void 0===e.text?r.createElement("i",{className:"non-available"},"N/A"):e.text,void 0===e.text||void 0===e.media_url&&e.hideDeleteAction?null:r.createElement(C,{containerRef:t,title:e.title,onProceed:function(){"function"==typeof e.onProceedRemoval&&e.onProceedRemoval(e.uid)},media_url:e.media_url,hideDeleteAction:e.hideDeleteAction})),r.createElement("div",{className:"mi-added"},r.createElement(g,{date:e.add_date})))}function A(e){const[t,n,i,a,o]=(0,u.useManagementTableHeader)({...e,type:"media"});return r.createElement("div",{className:"item manage-item manage-item-header manage-media-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:i,onChange:o})),r.createElement("div",{id:"title",onClick:a,className:"mi-title mi-col-sort"+("title"===t?"asc"===n?" asc":" desc":"")},"Title",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),r.createElement("div",{id:"add_date",onClick:a,className:"mi-added mi-col-sort"+("add_date"===t?"asc"===n?" asc":" desc":"")},"Date added",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),r.createElement("div",{className:"mi-author"},"Author"),r.createElement("div",{className:"mi-type"},"Media type"),r.createElement("div",{className:"mi-encoding"},"Encoding status"),r.createElement("div",{className:"mi-state"},"State"),r.createElement("div",{className:"mi-reviewed"},"Reviewed"),r.createElement("div",{className:"mi-featured"},"Featured"),r.createElement("div",{className:"mi-reported"},"Reported"))}function P(e){const[t,n,i,a,o]=(0,u.useManagementTableHeader)({...e,type:"users"});return r.createElement("div",{className:"item manage-item manage-item-header manage-users-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:i,onChange:o})),r.createElement("div",{id:"name",onClick:a,className:"mi-name mi-col-sort"+("name"===t?"asc"===n?" asc":" desc":"")},"Name",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),r.createElement("div",{className:"mi-username"},"Username"),r.createElement("div",{id:"add_date",onClick:a,className:"mi-added mi-col-sort"+("add_date"===t?"asc"===n?" asc":" desc":"")},"Date added",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),e.has_roles?r.createElement("div",{className:"mi-role"},"Role"):null,e.has_verified?r.createElement("div",{className:"mi-verified"},"Verified"):null,e.has_trusted?r.createElement("div",{className:"mi-trusted"},"Trusted"):null,r.createElement("div",{className:"mi-featured"},"Featured"))}function x(e){const[t,n,i,a,o]=(0,u.useManagementTableHeader)({...e,type:"comments"});return r.createElement("div",{className:"item manage-item manage-item-header manage-comments-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:i,onChange:o})),r.createElement("div",{className:"mi-author"},"Author"),r.createElement("div",{id:"text",onClick:a,className:"mi-comment mi-col-sort"+("text"===t?"asc"===n?" asc":" desc":"")},"Comment",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),r.createElement("div",{id:"add_date",onClick:a,className:"mi-added mi-col-sort"+("add_date"===t?"asc"===n?" asc":" desc":"")},"Date added",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))))}function I(e){const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"function"==typeof e.onCheckRow&&e.onCheckRow(e.id,t)}),[t]),r.createElement("div",{className:"item manage-item manage-ads-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:t,onChange:function(){n(!t),"function"==typeof e.onCheckRow&&e.onCheckRow(e.token,!t)}})),r.createElement("div",{className:"mi-title"},r.createElement("strong",null,e.name)),r.createElement("div",{className:"mi-link"},r.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},"Ver anuncio")),r.createElement("div",{className:"mi-actions"},r.createElement("button",{onClick:()=>e.onProceedRemoval(e.id),className:"mi-delete-button"},"Eliminar")))}function M(e){const[t,n,i,a,o]=(0,u.useManagementTableHeader)({...e,type:"ads"});return r.createElement("div",{className:"item manage-item manage-item-header manage-ads-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:i,onChange:o})),r.createElement("div",{id:"name",onClick:a,className:"mi-title mi-col-sort"+("name"===t?"asc"===n?" asc":" desc":"")},"Nombre",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))),r.createElement("div",{id:"url",onClick:a,className:"mi-link mi-col-sort"+("url"===t?"asc"===n?" asc":" desc":"")},"URL",r.createElement("div",{className:"mi-col-sort-icons"},r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_up"})),r.createElement("span",null,r.createElement(f.Z,{type:"arrow_drop_down"})))))}function R(e){const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"function"==typeof e.onCheckRow&&e.onCheckRow(e.id,t)}),[t]),r.createElement("div",{className:"item manage-item manage-ads-item"},r.createElement("div",{className:"mi-checkbox"},r.createElement("input",{type:"checkbox",checked:t,onChange:function(){n(!t),"function"==typeof e.onCheckRow&&e.onCheckRow(e.token,!t)}})),r.createElement("div",{className:"mi-title"},r.createElement("strong",null,e.title)),r.createElement("div",{className:"mi-link"},r.createElement("strong",null,e.uid)))}b.propTypes={thumbnail_url:a().string,token:a().string,title:a().string,url:a().string,author_name:a().string,author_url:a().string,add_date:a().string,media_type:a().string,encoding_status:a().string,state:a().string,is_reviewed:a().bool,featured:a().bool,reported_times:a().number,onCheckRow:a().func,selectedRow:a().bool.isRequired,hideDeleteAction:a().bool.isRequired},w.propTypes={thumbnail_url:a().string,name:a().string,url:a().string,username:a().string,add_date:a().string,is_featured:a().bool,onCheckRow:a().func,selectedRow:a().bool.isRequired,hideDeleteAction:a().bool.isRequired,has_roles:a().bool,has_verified:a().bool,has_trusted:a().bool,roles:a().array,is_verified:a().bool,is_trusted:a().bool},w.defaultProps={has_roles:!1,has_verified:!1,has_trusted:!1},k.propTypes={author_name:a().string,author_url:a().string,author_thumbnail_url:a().string,add_date:a().string,text:a().string,selectedRow:a().bool.isRequired,hideDeleteAction:a().bool.isRequired,uid:a().string.isRequired},A.propTypes={sort:a().string.isRequired,order:a().string.isRequired,selected:a().bool.isRequired,onClickColumnSort:a().func,onCheckAllRows:a().func},P.propTypes={sort:a().string.isRequired,order:a().string.isRequired,selected:a().bool.isRequired,onClickColumnSort:a().func,onCheckAllRows:a().func,has_roles:a().bool,has_verified:a().bool,has_trusted:a().bool},P.defaultProps={has_roles:!1,has_verified:!1,has_trusted:!1},x.propTypes={sort:a().string.isRequired,order:a().string.isRequired,selected:a().bool.isRequired,onClickColumnSort:a().func,onCheckAllRows:a().func},I.propTypes={id:a().number.isRequired,name:a().string.isRequired,url:a().string.isRequired,selectedRow:a().bool.isRequired,onCheckRow:a().func.isRequired,onProceedRemoval:a().func.isRequired,onProceedAssignAd:a().func.isRequired},M.propTypes={sort:a().string.isRequired,order:a().string.isRequired,selected:a().bool.isRequired,onClickColumnSort:a().func,onCheckAllRows:a().func},R.propTypes={id:a().number.isRequired,title:a().string.isRequired,uid:a().string.isRequired,selectedRow:a().bool.isRequired,onCheckRow:a().func.isRequired,onProceedRemoval:a().func.isRequired,onProceedAssignAd:a().func.isRequired};var O=n(8974);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}function D(e){return[e.item,{order:e.order,onCheckRow:e.onCheckRow,selectedRow:e.selectedRow,onProceedRemoval:e.onProceedRemoval,hideDeleteAction:e.hideDeleteAction}]}function N(e){const[t,n]=D(e),i={...n,thumbnail_url:t.thumbnail_url,title:t.title,url:t.url.replace(" ","%20"),author_name:t.author_name,author_url:t.author_profile,add_date:t.add_date,media_type:t.media_type,encoding_status:t.encoding_status,state:t.state,is_reviewed:t.is_reviewed,featured:t.featured,reported_times:t.reported_times,token:t.friendly_token};return r.createElement(b,i)}function F(e){const[t,n]=D(e),i=[];void 0!==t.is_editor&&t.is_editor&&i.push("Editor"),void 0!==t.is_manager&&t.is_manager&&i.push("Manager");const a={...n,thumbnail_url:t.thumbnail_url,name:t.name,url:t.url.replace(" ","%20"),username:t.username,add_date:t.date_added,is_featured:t.is_featured,roles:i,is_verified:!0===t.email_is_verified,is_trusted:!0===t.advancedUser,has_roles:void 0!==t.is_editor||void 0!==t.is_manager,has_verified:void 0!==t.email_is_verified,has_trusted:void 0!==t.advancedUser};return r.createElement(w,a)}function j(e){const[t,n]=D(e),i={...n,media_url:void 0!==t.media_url?t.media_url.replace(" ","%20"):void 0,author_name:t.author_name,author_url:t.author_profile,author_thumbnail_url:t.author_thumbnail_url,add_date:t.add_date,text:t.text,uid:t.uid};return r.createElement(k,i)}function B(e){const[t,n]=D(e),i={...n,id:t.id,name:t.name,url:t.url,onCheckRow:e.onCheckRow};return r.createElement(I,L({},i,{selectedRow:t.id}))}function U(e){const[t,n]=D(e);O.log("itemData",e);const i={...n,id:t.id,title:t.title,uid:t.uid,onCheckRow:e.onCheckRow};return r.createElement(R,L({},i,{selectedRow:t.id}))}function q(e){const t={item:e.item,order:e.order,hideDeleteAction:!1,onCheckRow:e.onCheckRow,onProceedRemoval:e.onProceedRemoval};return"media"===e.type?r.createElement(N,L({},t,{selectedRow:-1<e.selectedItems.indexOf(e.item.friendly_token)})):"users"===e.type?r.createElement(F,L({},t,{selectedRow:-1<e.selectedItems.indexOf(e.item.username)})):"comments"===e.type?r.createElement(j,L({},t,{selectedRow:-1<e.selectedItems.indexOf(e.item.uid)})):"ads"===e.type?r.createElement(B,L({},t,{selectedRow:-1<e.selectedItems.indexOf(e.item.id)})):"category-ads"===e.type?r.createElement(U,L({},t,{selectedRow:-1<e.selectedItems.indexOf(e.item.id)})):null}function V(e){const t={sort:e.sort,order:e.order,selected:e.selected,onCheckAllRows:e.onCheckAllRows,onClickColumnSort:e.onClickColumnSort};return"media"===e.type?r.createElement(A,t):"users"===e.type?(t.has_roles=e.items.length&&(void 0!==e.items[0].is_editor||void 0!==e.items[0].is_manager),t.has_verified=e.items.length&&void 0!==e.items[0].email_is_verified,t.has_trusted=e.items.length&&void 0!==e.items[0].advancedUser,r.createElement(P,t)):"comments"===e.type?r.createElement(x,t):"ads"===e.type?r.createElement(M,t):null}var H=n(5288);const z={};class W{constructor(e,t){if(!Node.prototype.isPrototypeOf(e))return null;z[Object.defineProperty(this,"id",{value:"ManageMediaItemsList_"+Object.keys(z).length}).id]={},this.items=[],this.container=e,this.appendItems(t)}dataObject(){return z}appendItems(e){var t;if(NodeList.prototype.isPrototypeOf(e))for(t=0;t<e.length;)this.items.push(new H.A(e[t])),t+=1;else Node.prototype.isPrototypeOf(e)&&this.items.push(new H.A(e))}}var G={mediaItems:".item"},X=[];function K(e,t,n,r,i){const a={maxItems:t||255,pageItems:e?Math.min(t,e):1},o={totalItems:0,totalPages:0,nextRequestUrl:(0,l.formatInnerLink)(n,p.PageStore.get("config-site").url)},s={pageItems:0,requestResponse:!1},u=[],c=[];function d(e){let t,n;if(e=isNaN(e)?a.pageItems:e,s.pageItems&&s.pageItems<=c.length?(t=s.pageItems,n=!1,s.pageItems=0):(t=Math.min(e,c.length),n=e>c.length&&!!o.nextRequestUrl,s.pageItems=n?e-c.length:0),t){let e=0;for(;e<t;)u.push(c.shift()),e+=1;"function"==typeof i&&i(u)}n&&h()}function h(e){s.requestResponse=!0,(0,l.getRequest)(o.nextRequestUrl,!1,(function(t){if(s.requestResponse=!1,!t||!t.data)return;let n=t.data,i=void 0!==n.results?n.results:n,l=0;for(;l<i.length&&a.maxItems>c.length;)c.push(i[l]),l+=1;o.nextRequestUrl=n.next&&a.maxItems>c.length?n.next:null,e&&(o.totalItems=n.count?n.count:c.length,o.totalItems=Math.min(a.maxItems,o.totalItems),o.totalPages=Math.ceil(o.totalItems/a.pageItems),"function"==typeof r&&r(o.totalItems)),d()})),o.nextRequestUrl=null}return h(!0),{loadItems:function(e){!s.requestResponse&&u.length<o.totalItems&&d(e)},totalPages:function(){return o.totalPages},loadedAllItems:function(){return u.length===o.totalItems}}}var $=n(8974);function Y(e){const[t,n,i]=(0,u.usePopup)(),[a,o]=(0,r.useState)("");return r.createElement("div",{className:"manage-items-bulk-action"},r.createElement("select",{value:a,onChange:function(e){o(e.currentTarget.value)}},r.createElement("option",{value:""},"Bulk actions"),r.createElement("option",{value:"delete"},"Delete selected"),r.createElement("option",{value:"assign-ad"},"Assign ad to all media")),a?r.createElement(i,{contentRef:t},r.createElement("button",null,"Apply")):null,r.createElement(n,{contentRef:t},r.createElement(c.PopupMain,null,r.createElement("span",{className:"popup-message-title"},"assign-ad"===a?"Assign Ad":"Bulk removal"),r.createElement("span",{className:"popup-message-main"},"assign-ad"===a?"You're about to assign an ad to all media. Proceed?":"You're willing to remove selected items permanently?"),r.createElement("hr",null),r.createElement("span",{className:"popup-message-bottom"},r.createElement("button",{className:"button-link cancel-profile-removal",onClick:function(){t.current.tryToHide()}},"CANCEL"),r.createElement("button",{className:"button-link proceed-profile-removal",onClick:function(){const n=e.selectedItems||[],r=n[0];$.log("selectedItems",n),$.log("✅ Ad ID seleccionado:",r),"assign-ad"===a?r?e.onProceedAssignAd(r):alert("Select an ad first."):"delete"===a&&e.onProceedRemoval(),t.current.tryToHide()}},"PROCEED")))))}function Q(e){return r.createElement("div",{className:e.className},r.createElement(Y,{onProceedRemoval:e.onProceedRemoval,onProceedAssignAd:t=>e.onProceedAssignAd(t),onCheckRow:e.onCheckRow,selectedItems:e.items}),1===e.pagesSize?null:r.createElement("div",{className:"manage-items-pagination"},r.createElement(J,{totalItems:e.totalItems,pageItems:e.pageItems,onPageButtonClick:e.onPageButtonClick,query:e.query})))}function J(e){const t=[];let n;const i={last:Math.ceil(e.totalItems/e.pageItems),current:1};if(""!==e.query){const t=e.query.split("?")[1].split("&");let n,r=0;for(;r<t.length;){if(n=t[r].split("="),"page"===n[0]){i.current=parseInt(n[1],10);break}r+=1}}const a=function(e,t){3>e&&(e=3);let n,r,i=1;e>=t.last?(e=t.last,r=t.last,i=0):(5<e&&(i=7>=e?2:Math.floor(e/4)),r=e-2*i);const a=[],o=[],s=[];if(t.current<=r+i-t.current){for(n=1;n<=r+i;)a.push(n),n+=1;for(n=t.last-e+a.length+1;n<=t.last;)s.push(n),n+=1}else if(t.current>t.last-(r+i-1)){for(n=t.last-(r+i-1);n<=t.last;)a.push(n),n+=1;for(n=1;n<=e-a.length;)o.push(n),n+=1}else{for(a.push(t.current),n=1;r>a.length&&(a.push(t.current+n),r!==a.length);)a.unshift(t.current-n),n+=1;for(n=1;n<=i;)o.push(n),n+=1;for(n=t.last-(e-(o.length+a.length)-1);n<=t.last;)s.push(n),n+=1}const l=[];for(n=0;n<o.length;)l.push({type:"button",number:o[n]}),n+=1;for(o.length&&a.length&&o[o.length-1]+1<a[0]&&l.push({type:"dots"}),n=0;n<a.length;)l.push({type:"button",number:a[n]}),n+=1;for(a.length&&s.length&&a[a.length-1]+1<s[0]&&l.push({type:"dots"}),n=0;n<s.length;)l.push({type:"button",number:s[n]}),n+=1;return l}(11,i);for(n=0;n<a.length;)"button"===a[n].type?t.push(r.createElement("button",{key:n+"[button]",onClick:e.onPageButtonClick,page:a[n].number,className:i.current===a[n].number?"active":""},a[n].number)):"dots"===a[n].type&&t.push(r.createElement("span",{key:n+"[dots]",className:"pagination-dots"},"...")),n+=1;return t}function Z(e){const[t,n,i,a,o,u,c,h,p,f]=function(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[i,a,o,s,u,c,d]=function(e,t){let n=0,i=null;const[a,o]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{void 0!==e.itemsLoadCallback&&e.itemsLoadCallback()}),[a]),[a,s,u,c,function(e){$.log("Items cargados desde API:",e),o([...e])},function(t){l(!0),void 0!==e.itemsCountCallback&&e.itemsCountCallback(t)},function(){if(n<a.length){null===i&&(i=function(e){if(!e.length)return null;let t,n=0;for(;n<e.length;)t=e[n].querySelectorAll(G.mediaItems),t.length&&(X=X||[]).push(new W(e[n],t)),n+=1;return X}([t.current])[0]);const e=t.current.querySelectorAll(".item");if(!e||!e.length)return;let r=n;for(;r<a.length;)i.appendItems(e[r]),r+=1;n=a.length}}]}({...e,itemsCountCallback:function(e){p(e)}},t),[h,p]=(0,r.useState)(null);let f={list:"manage-items-list",listOuter:"items-list-outer"+("string"==typeof e.className?" "+e.className.trim():"")};function m(){o.loadItems()}return(0,r.useEffect)((()=>{d()}),[i]),[a,h,i,o,s,f,n,t,c,u,function(){return null},function(){return o?1>o.totalPages()||o.loadedAllItems()?null:r.createElement("button",{className:"load-more",onClick:m},(0,l.translateString)("SHOW MORE")):null}]}(e),[m,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[b,_]=(0,r.useState)(null),[E,S]=(0,r.useState)(null);function w(t){const n=(r=b,i=function(e,t){let n=[],r=0;if(""!==e){let t;n=e.split("?")[1].split("&");let i=0;for(;i<n.length;){if(t=n[i].split("="),"page"===t[0]){r=i;break}i+=1}}return n[r]="page="+t,"?"+n.join("&")}(E,t.currentTarget.getAttribute("page")),r.set("query",i).href);var r,i;"function"==typeof e.onPageChange&&e.onPageChange(n,t.currentTarget.getAttribute("page"))}function T(){(0,l.deleteRequest)(e.requestUrl.split("?")[0]+("comments"===e.manageType?"?comment_ids=":"?tokens=")+m.join(","),{headers:{"X-CSRFToken":(0,l.csrfToken)()}},!1,A,P)}function C(e){!function(e){fetch("/api/assign-ad-to-all-media/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,l.csrfToken)()},body:JSON.stringify({ad_id:e})}).then((e=>{e.ok?alert("Ad assigned successfully to all media."):alert("Failed to assign ad.")})).catch((e=>{$.error("Error:",e)}))}(e)}function k(t,n){if($.log("token",t),$.log("isSelected",n),void 0!==t)if("ads"===e.manageType||"category-ads"===e.manageType)$.log("token dentro de onRowCheck",t),n?(g([t]),e.onSelectionChange([t])):g([]),y(!1);else{let e;m.includes(t)?n||(e=m.filter((e=>e!==t)),g(e),y(e.length===i.length)):n&&(e=[...m,t],g(e),y(e.length===i.length))}}function A(t){t&&204===t.status&&(g([]),y(!1),"function"==typeof e.onRowsDelete&&e.onRowsDelete(!0))}function P(){"function"==typeof e.onRowsDeleteFail&&e.onRowsDeleteFail(!0)}function x(t){t&&204===t.status&&e.onRowsDelete(!1)}function I(){e.onRowsDeleteFail(!1)}return(0,r.useEffect)((()=>{b&&S(b.query)}),[b]),(0,r.useEffect)((()=>{_(s()(e.requestUrl))}),[e.requestUrl]),(0,r.useEffect)((()=>(o(new K(e.pageItems,e.maxItems,e.requestUrl,p,f)),()=>{a&&(a.cancelAll(),o(null))})),[]),t?i.length?r.createElement("div",{className:u.listOuter},r.createElement(Q,{totalItems:n,pageItems:e.pageItems,onPageButtonClick:w,query:E||"",className:"manage-items-options",items:m,pagesSize:a.totalPages(),onProceedRemoval:T,onProceedAssignAd:C,onCheckRow:k}),r.createElement("div",{ref:c,className:"items-list-wrap"},r.createElement("div",{ref:h,className:u.list},function(e,t){return[r.createElement(V,{key:0,type:t.manageType,items:e,sort:t.sortBy,order:t.ordering,selected:t.selectedAllItems,onCheckAllRows:t.onAllRowsCheck,onClickColumnSort:t.onClickColumnSort}),...e.map(((e,n)=>r.createElement(q,{key:n+1,order:n+1,item:e,type:t.manageType,onCheckRow:t.onRowCheck,onProceedRemoval:t.onDelete,selectedItems:t.selectedItems})))]}(i,{...e,onAllRowsCheck:function(e,t){const n=[];if(e&&i.length!==m.length){let e;if("media"===t)for(e of i)n.push(e.friendly_token);else if("users"===t)for(e of i)n.push(e.username);else if("comments"===t)for(e of i)n.push(e.uid);else if("ads"===t)for(e of i)n.push(e.ad_id)}g(n),y(n.length===i.length)},selectedItems:m,selectedAllItems:v,onDelete:function(t,n){(0,l.deleteRequest)(e.requestUrl.split("?")[0]+("comments"===e.manageType?"?comment_ids=":"?tokens=")+t,{headers:{"X-CSRFToken":(0,l.csrfToken)()},tokens:t},!1,x,I)},onRowCheck:k}))),r.createElement(Q,{totalItems:n,pageItems:e.pageItems,onPageButtonClick:w,query:E||"",className:"manage-items-options popup-on-top",items:m,pagesSize:a.totalPages(),onProceedRemoval:T,onProceedAssignAd:C,onRowCheck:k})):null:r.createElement(d.e,{className:u.listOuter})}Z.defaultProps={itemsCountCallback:a().func,maxItems:a().number.isRequired,pageItems:a().number.isRequired,requestUrl:a().string.isRequired,onPageChange:a().func,onRowsDelete:a().func,onRowsDeleteFail:a().func,pageItems:24},Z.defaultProps={maxItems:99999,pageItems:24,requestUrl:null}},8713:function(e,t,n){e.exports=n(9829)()},8759:function(e,t,n){"use strict";n.r(t),n.d(t,{load_author_data:function(){return a},remove_profile:function(){return o}});var r=n(7143),i=n.n(r);function a(){i().dispatch({type:"LOAD_AUTHOR_DATA"})}function o(){i().dispatch({type:"REMOVE_PROFILE"})}},8790:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9781),t),i(n(3537),t),i(n(5320),t),i(n(2401),t),i(n(3496),t),i(n(9423),t),i(n(2579),t),i(n(9854),t),i(n(8899),t),i(n(5886),t),i(n(5465),t),i(n(4463),t)},8824:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},i(e)}n.d(t,{A:function(){return i}})},8847:function(e){e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},8851:function(e,t,n){"use strict";var r=n(9471),i=n(1329);function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o,s=a(r),l=a(i);t.AnnotationType=void 0,(o=t.AnnotationType||(t.AnnotationType={}))[o.Text=1]="Text",o[o.Link=2]="Link",o[o.FreeText=3]="FreeText",o[o.Line=4]="Line",o[o.Square=5]="Square",o[o.Circle=6]="Circle",o[o.Polygon=7]="Polygon",o[o.Polyline=8]="Polyline",o[o.Highlight=9]="Highlight",o[o.Underline=10]="Underline",o[o.Squiggly=11]="Squiggly",o[o.StrikeOut=12]="StrikeOut",o[o.Stamp=13]="Stamp",o[o.Caret=14]="Caret",o[o.Ink=15]="Ink",o[o.Popup=16]="Popup",o[o.FileAttachment=17]="FileAttachment";var u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},u(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var d,h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};t.TextDirection=void 0,(d=t.TextDirection||(t.TextDirection={})).RightToLeft="RTL",d.LeftToRight="LTR";var p,f=s.createContext({currentTheme:"light",direction:t.TextDirection.LeftToRight,setCurrentTheme:function(){}}),m=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},g="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,v=function(e){var t=s.useRef(null),n=e.once,r=e.threshold,i=e.onVisibilityChanged;return g((function(){var e=t.current;if(e){var a=new IntersectionObserver((function(t){t.forEach((function(t){var r=t.isIntersecting,o=t.intersectionRatio;i({isVisible:r,ratio:o}),r&&n&&(a.unobserve(e),a.disconnect())}))}),{threshold:r||0});return a.observe(e),function(){a.unobserve(e),a.disconnect()}}}),[]),t},y=function(e){var n=e.children,r=e.ignoreDirection,i=void 0!==r&&r,a=e.size,o=void 0===a?24:a,l=s.useContext(f).direction,u=!i&&l===t.TextDirection.RightToLeft,c="".concat(o||24,"px");return s.createElement("svg",{"aria-hidden":"true",className:m({"rpv-core__icon":!0,"rpv-core__icon--rtl":u}),focusable:"false",height:c,viewBox:"0 0 24 24",width:c},n)},b=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},_=function(e){var n=e.children,r=e.testId,i=e.onClick,a=s.useContext(f).direction===t.TextDirection.RightToLeft,o=r?{"data-testid":r}:{};return s.createElement("button",h({className:m({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":a}),type:"button",onClick:i},o),n)},E=function(e){var t=e.size,n=void 0===t?"4rem":t,r=e.testId,i=s.useState(!1),a=i[0],o=i[1],l=r?{"data-testid":r}:{},u=v({onVisibilityChanged:function(e){o(e.isVisible)}});return s.createElement("div",h({},l,{className:m({"rpv-core__spinner":!0,"rpv-core__spinner--animating":a}),ref:u,style:{height:n,width:n}}))},S=function(e){var n=e.ariaLabel,r=void 0===n?"":n,i=e.autoFocus,a=void 0!==i&&i,o=e.placeholder,l=void 0===o?"":o,u=e.testId,c=e.type,d=void 0===c?"text":c,p=e.value,v=void 0===p?"":p,y=e.onChange,b=e.onKeyDown,_=void 0===b?function(){}:b,E=s.useContext(f).direction,S=s.useRef(),w=E===t.TextDirection.RightToLeft,T={ref:S,"data-testid":"","aria-label":r,className:m({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":w}),placeholder:l,value:v,onChange:function(e){return y(e.target.value)},onKeyDown:_};return u&&(T["data-testid"]=u),g((function(){if(a){var e=S.current;if(e){var t=window.scrollX,n=window.scrollY;e.focus(),window.scrollTo(t,n)}}}),[]),"text"===d?s.createElement("input",h({type:"text"},T)):s.createElement("input",h({type:"password"},T))};!function(e){e[e.ExitFullScreen=0]="ExitFullScreen",e[e.FullScreenChange=1]="FullScreenChange",e[e.FullScreenElement=2]="FullScreenElement",e[e.FullScreenEnabled=3]="FullScreenEnabled",e[e.RequestFullScreen=4]="RequestFullScreen"}(p||(p={}));var w,T={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},C={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},k={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},A="undefined"!=typeof window,P=A&&(p.FullScreenEnabled in document&&T||C.FullScreenEnabled in document&&C||k.FullScreenEnabled in document&&k)||T,x=function(){return A&&P.FullScreenEnabled in document&&!0===document[P.FullScreenEnabled]},I=function(e){return A?e[P.ExitFullScreen]():Promise.resolve({})},M=function(){return A?document[P.FullScreenElement]:null},R=function(e,t){var n=s.useRef(),r=function(){n.current&&clearTimeout(n.current)};return s.useEffect((function(){return function(){return r()}}),[]),s.useCallback((function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];r(),n.current=setTimeout((function(){e.apply(void 0,i)}),t)}),[e,t])},O=function(){var e=s.useRef(!1);return s.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e},L=function(e){var t=s.useRef(e);return s.useEffect((function(){t.current=e}),[e]),t.current};!function(e){e.NotRenderedYet="NotRenderedYet",e.Rendering="Rendering",e.Rendered="Rendered"}(w||(w={}));var D,N=-9999,F=function(e){var t=e.doc,n=t.numPages,r=t.loadingTask.docId,i=s.useMemo((function(){return Array(n).fill(null).map((function(e,t){return{pageIndex:t,renderStatus:w.NotRenderedYet,visibility:N}}))}),[r]),a=s.useRef({currentRenderingPage:-1,startRange:0,endRange:n-1,visibilities:i}),o=function(e,t){a.current.visibilities[e].visibility=t};return{getHighestPriorityPage:function(){var e=a.current.visibilities.slice(a.current.startRange,a.current.endRange+1).filter((function(e){return e.visibility>N}));if(!e.length)return-1;for(var t=e[0].pageIndex,r=e[e.length-1].pageIndex,i=e.length,o=0;o<i;o++){if(e[o].renderStatus===w.Rendering)return-1;if(e[o].renderStatus===w.NotRenderedYet)return e[o].pageIndex}return r+1<n&&a.current.visibilities[r+1].renderStatus!==w.Rendered?r+1:t-1>=0&&a.current.visibilities[t-1].renderStatus!==w.Rendered?t-1:-1},isInRange:function(e){return e>=a.current.startRange&&e<=a.current.endRange},markNotRendered:function(){for(var e=0;e<n;e++)a.current.visibilities[e].renderStatus=w.NotRenderedYet},markRendered:function(e){a.current.visibilities[e].renderStatus=w.Rendered},markRendering:function(e){-1!==a.current.currentRenderingPage&&a.current.currentRenderingPage!==e&&a.current.visibilities[a.current.currentRenderingPage].renderStatus===w.Rendering&&(a.current.visibilities[a.current.currentRenderingPage].renderStatus=w.NotRenderedYet),a.current.visibilities[e].renderStatus=w.Rendering,a.current.currentRenderingPage=e},setOutOfRange:function(e){o(e,N)},setRange:function(e,t){a.current.startRange=e,a.current.endRange=t;for(var r=0;r<n;r++)(r<e||r>t)&&(a.current.visibilities[r].visibility=N,a.current.visibilities[r].renderStatus=w.NotRenderedYet)},setVisibility:o}},j={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},B=s.createContext({l10n:j,setL10n:function(){}}),U=0,q=function(){return U++},V=function(e,t,n){var r=function(e){var r=t.current;if(r){var i=e.target;if(i instanceof Element&&i.shadowRoot){var a=e.composedPath();a.length>0&&!r.contains(a[0])&&n()}else r.contains(i)||n()}};s.useEffect((function(){if(e){var t={capture:!0};return document.addEventListener("click",r,t),function(){document.removeEventListener("click",r,t)}}}),[])},H=function(e){var t=function(t){"Escape"===t.key&&e()};s.useEffect((function(){return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}}),[])},z=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.closeOnClickOutside,a=e.closeOnEscape,o=e.onToggle,l=s.useRef(),u=s.useContext(f).direction===t.TextDirection.RightToLeft;return s.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),H((function(){l.current&&a&&o()})),V(i,l,o),g((function(){var e=l.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]),s.createElement("div",{"aria-modal":"true",className:m({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":u}),id:"rpv-core__modal-body-".concat(n),ref:l,role:"dialog",tabIndex:-1},r)},W=function(e){var t=e.children;return s.createElement("div",{className:"rpv-core__modal-overlay"},t)};t.ToggleStatus=void 0,(D=t.ToggleStatus||(t.ToggleStatus={})).Close="Close",D.Open="Open",D.Toggle="Toggle";var G,X=function(e){var n=s.useState(e),r=n[0],i=n[1];return{opened:r,toggle:function(e){switch(e){case t.ToggleStatus.Close:i(!1);break;case t.ToggleStatus.Open:i(!0);break;case t.ToggleStatus.Toggle:default:i((function(e){return!e}))}}}},K=function(e){var t=e.content,n=e.isOpened,r=void 0!==n&&n,i=e.target,a=X(r),o=a.opened,l=a.toggle;return s.createElement(s.Fragment,null,i&&i(l,o),o&&t(l))};t.Position=void 0,(G=t.Position||(t.Position={})).TopLeft="TOP_LEFT",G.TopCenter="TOP_CENTER",G.TopRight="TOP_RIGHT",G.RightTop="RIGHT_TOP",G.RightCenter="RIGHT_CENTER",G.RightBottom="RIGHT_BOTTOM",G.BottomLeft="BOTTOM_LEFT",G.BottomCenter="BOTTOM_CENTER",G.BottomRight="BOTTOM_RIGHT",G.LeftTop="LEFT_TOP",G.LeftCenter="LEFT_CENTER",G.LeftBottom="LEFT_BOTTOM";var $,Y,Q,J,Z,ee,te,ne,re=function(e,n,r,i,a){g((function(){var o=n.current,s=e.current,l=r.current;if(s&&o&&l){var u=l.getBoundingClientRect(),c=function(e,n,r,i){var a=n.getBoundingClientRect(),o=e.getBoundingClientRect(),s=o.height,l=o.width,u=0,c=0;switch(r){case t.Position.TopLeft:u=a.top-s,c=a.left;break;case t.Position.TopCenter:u=a.top-s,c=a.left+a.width/2-l/2;break;case t.Position.TopRight:u=a.top-s,c=a.left+a.width-l;break;case t.Position.RightTop:u=a.top,c=a.left+a.width;break;case t.Position.RightCenter:u=a.top+a.height/2-s/2,c=a.left+a.width;break;case t.Position.RightBottom:u=a.top+a.height-s,c=a.left+a.width;break;case t.Position.BottomLeft:u=a.top+a.height,c=a.left;break;case t.Position.BottomCenter:u=a.top+a.height,c=a.left+a.width/2-l/2;break;case t.Position.BottomRight:u=a.top+a.height,c=a.left+a.width-l;break;case t.Position.LeftTop:u=a.top,c=a.left-l;break;case t.Position.LeftCenter:u=a.top+a.height/2-s/2,c=a.left-l;break;case t.Position.LeftBottom:u=a.top+a.height-s,c=a.left-l}return{left:c+(i.left||0),top:u+(i.top||0)}}(s,o,i,a),d=c.top,h=c.left;s.style.top="".concat(d-u.top,"px"),s.style.left="".concat(h-u.left,"px")}}),[])},ie=function(e){var n,r=e.customClassName,i=e.position;return s.createElement("div",{className:m((n={"rpv-core__arrow":!0,"rpv-core__arrow--tl":i===t.Position.TopLeft,"rpv-core__arrow--tc":i===t.Position.TopCenter,"rpv-core__arrow--tr":i===t.Position.TopRight,"rpv-core__arrow--rt":i===t.Position.RightTop,"rpv-core__arrow--rc":i===t.Position.RightCenter,"rpv-core__arrow--rb":i===t.Position.RightBottom,"rpv-core__arrow--bl":i===t.Position.BottomLeft,"rpv-core__arrow--bc":i===t.Position.BottomCenter,"rpv-core__arrow--br":i===t.Position.BottomRight,"rpv-core__arrow--lt":i===t.Position.LeftTop,"rpv-core__arrow--lc":i===t.Position.LeftCenter,"rpv-core__arrow--lb":i===t.Position.LeftBottom},n["".concat(r)]=""!==r,n))})},ae=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.closeOnClickOutside,a=e.offset,o=e.position,l=e.targetRef,u=e.onClose,c=s.useRef(),d=s.useRef(),h=s.useRef(),p=s.useContext(f).direction===t.TextDirection.RightToLeft;V(i,c,u),re(c,l,h,o,a),g((function(){var e=d.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]);var v="rpv-core__popover-body-inner-".concat(n);return s.createElement(s.Fragment,null,s.createElement("div",{ref:h,style:{left:0,position:"absolute",top:0}}),s.createElement("div",{"aria-describedby":v,className:m({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":p}),id:"rpv-core__popover-body-".concat(n),ref:c,role:"dialog",tabIndex:-1},s.createElement(ie,{customClassName:"rpv-core__popover-body-arrow",position:o}),s.createElement("div",{id:v,ref:d},r)))},oe=function(e){var t=e.closeOnEscape,n=e.onClose,r=s.useRef();return H((function(){r.current&&t&&n()})),s.createElement("div",{className:"rpv-core__popover-overlay",ref:r})},se=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.contentRef,a=e.offset,o=e.position,l=e.targetRef,u=s.useRef(),c=s.useContext(f).direction===t.TextDirection.RightToLeft;return re(i,l,u,o,a),s.createElement(s.Fragment,null,s.createElement("div",{ref:u,style:{left:0,position:"absolute",top:0}}),s.createElement("div",{className:m({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":c}),id:"rpv-core__tooltip-body-".concat(n),ref:i,role:"tooltip"},s.createElement(ie,{customClassName:"rpv-core__tooltip-body-arrow",position:o}),s.createElement("div",{className:"rpv-core__tooltip-body-content"},r)))};t.FullScreenMode=void 0,($=t.FullScreenMode||(t.FullScreenMode={})).Normal="Normal",$.Entering="Entering",$.Entered="Entered",$.EnteredCompletely="EnteredCompletely",$.Exitting="Exitting",$.Exited="Exited",t.LayerRenderStatus=void 0,(Y=t.LayerRenderStatus||(t.LayerRenderStatus={}))[Y.PreRender=0]="PreRender",Y[Y.DidRender=1]="DidRender",t.PageMode=void 0,(Q=t.PageMode||(t.PageMode={})).Attachments="UseAttachments",Q.Bookmarks="UseOutlines",Q.ContentGroup="UseOC",Q.Default="UserNone",Q.FullScreen="FullScreen",Q.Thumbnails="UseThumbs",t.PasswordStatus=void 0,(J=t.PasswordStatus||(t.PasswordStatus={})).RequiredPassword="RequiredPassword",J.WrongPassword="WrongPassword",t.RotateDirection=void 0,(Z=t.RotateDirection||(t.RotateDirection={})).Backward="Backward",Z.Forward="Forward",t.ScrollMode=void 0,(ee=t.ScrollMode||(t.ScrollMode={})).Page="Page",ee.Horizontal="Horizontal",ee.Vertical="Vertical",ee.Wrapped="Wrapped",t.SpecialZoomLevel=void 0,(te=t.SpecialZoomLevel||(t.SpecialZoomLevel={})).ActualSize="ActualSize",te.PageFit="PageFit",te.PageWidth="PageWidth",t.ViewMode=void 0,(ne=t.ViewMode||(t.ViewMode={})).DualPage="DualPage",ne.DualPageWithCover="DualPageWithCover",ne.SinglePage="SinglePage";var le,ue=function(e,t){return e.reduce((function(e,n,r){return r%t?e[e.length-1].push(n):e.push([n]),e}),[])},ce=function(e,n){switch(n[1].name){case"XYZ":return{bottomOffset:function(e,t){return null===n[3]?t:n[3]},leftOffset:function(e,t){return null===n[2]?0:n[2]},pageIndex:e,scaleTo:n[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:t.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:n[2],leftOffset:0,pageIndex:e,scaleTo:t.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:1}}},de=new Map,he=new Map,pe=function(e,t){return"".concat(e.loadingTask.docId,"___").concat(t.num,"R").concat(0===t.gen?"":t.gen)},fe=function(e,t,n){de.set(pe(e,t),n)},me=function(e,t){if(!e)return Promise.reject("The document is not loaded yet");var n="".concat(e.loadingTask.docId,"___").concat(t),r=he.get(n);return r?Promise.resolve(r):new Promise((function(r,i){e.getPage(t+1).then((function(i){he.set(n,i),i.ref&&fe(e,i.ref,t),r(i)}))}))},ge=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(r){if("object"==typeof r[0]&&null!==r[0]){var i=r[0],a=function(e,t){var n=pe(e,t);return de.has(n)?de.get(n):null}(e,i);null===a?e.getPageIndex(i).then((function(r){fe(e,i,r),ge(e,t).then((function(e){return n(e)}))})):n(ce(a,r))}else{var o=ce(r[0],r);n(o)}}))}))};!function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(le||(le={}));var ve,ye=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),be=function(e,t,n,r){var i=parseInt(e,10);return i>=t&&i<=n?i:r},_e=function(e){return e.contentsObj?e.contentsObj.str:e.contents||""},Ee=function(e){return e.titleObj?e.titleObj.str:e.title||""},Se=function(e){var n=e.annotation,r=s.useContext(f).direction,i=Ee(n),a=_e(n),o=r===t.TextDirection.RightToLeft,l=s.useRef(),u="";if(n.modificationDate){var c=function(e){var t=ye.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=be(t[2],1,12,1)-1,i=be(t[3],1,31,1),a=be(t[4],0,23,0),o=be(t[5],0,59,0),s=be(t[6],0,59,0),l=t[7]||"Z",u=be(t[8],0,23,0),c=be(t[9],0,59,0);switch(l){case"-":a+=u,o+=c;break;case"+":a-=u,o-=c}return new Date(Date.UTC(n,r,i,a,o,s))}(n.modificationDate);u=c?"".concat(c.toLocaleDateString(),", ").concat(c.toLocaleTimeString()):""}return s.useLayoutEffect((function(){if(l.current){var e=document.querySelector('[data-annotation-id="'.concat(n.id,'"]'));if(e){var t=e;return t.style.zIndex+=1,function(){t.style.zIndex="".concat(parseInt(t.style.zIndex,10)-1)}}}}),[]),s.createElement("div",{ref:l,className:m({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":o}),style:{top:n.annotationType===t.AnnotationType.Popup?"":"100%"}},i&&s.createElement(s.Fragment,null,s.createElement("div",{className:m({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!o,"rpv-core__annotation-popup-title--rtl":o})},i),s.createElement("div",{className:"rpv-core__annotation-popup-date"},u)),a&&s.createElement("div",{className:"rpv-core__annotation-popup-content"},a.split("\n").map((function(e,t){return s.createElement(s.Fragment,{key:t},e,s.createElement("br",null))}))))};!function(e){e.Click="Click",e.Hover="Hover"}(ve||(ve={}));var we,Te=function(e){var n,r=e.annotation,i=e.children,a=e.ignoreBorder,o=e.hasPopup,l=e.isRenderable,u=e.page,c=e.viewport,d=r.rect,h=function(){var e=X(!1),n=e.opened,r=e.toggle,i=s.useState(ve.Hover),a=i[0],o=i[1];return{opened:n,closeOnHover:function(){a===ve.Hover&&r(t.ToggleStatus.Close)},openOnHover:function(){a===ve.Hover&&r(t.ToggleStatus.Open)},toggleOnClick:function(){switch(a){case ve.Click:n&&o(ve.Hover),r(t.ToggleStatus.Toggle);break;case ve.Hover:o(ve.Click),r(t.ToggleStatus.Open)}}}}(),p=h.closeOnHover,f=h.opened,m=h.openOnHover,g=h.toggleOnClick,v=(n=[d[0],u.view[3]+u.view[1]-d[1],d[2],u.view[3]+u.view[1]-d[3]],[Math.min(n[0],n[2]),Math.min(n[1],n[3]),Math.max(n[0],n[2]),Math.max(n[1],n[3])]),y=d[2]-d[0],b=d[3]-d[1],_={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&r.borderStyle.width>0){switch(r.borderStyle.style){case le.Dashed:_.borderStyle="dashed";break;case le.Solid:_.borderStyle="solid";break;case le.Underline:_=Object.assign({borderBottomStyle:"solid"},_);case le.Beveled:case le.Inset:}var E=r.borderStyle.width;_.borderWidth="".concat(E,"px"),r.borderStyle.style!==le.Underline&&(y-=2*E,b-=2*E);var S=r.borderStyle,w=S.horizontalCornerRadius,T=S.verticalCornerRadius;(w>0||T>0)&&(_.borderRadius="".concat(w,"px / ").concat(T,"px")),r.color?_.borderColor="rgb(".concat(0|r.color[0],", ").concat(0|r.color[1],", ").concat(0|r.color[2],")"):_.borderWidth="0"}return s.createElement(s.Fragment,null,l&&i({popup:{opened:f,closeOnHover:p,openOnHover:m,toggleOnClick:g},slot:{attrs:{style:Object.assign({height:"".concat(b,"px"),left:"".concat(v[0],"px"),top:"".concat(v[1],"px"),transform:"matrix(".concat(c.transform.join(","),")"),transformOrigin:"-".concat(v[0],"px -").concat(v[1],"px"),width:"".concat(y,"px")},_)},children:s.createElement(s.Fragment,null,o&&f&&s.createElement(Se,{annotation:r}))}}))},Ce=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ke=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},s.createElement("circle",{cy:d/2,fill:"none",rx:c/2-p/2,ry:d/2-p/2,stroke:"transparent",strokeWidth:p||1})),e.slot.children)}))},Ae=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=Ee(t),a=_e(t),o=!(!1!==t.hasPopup||!i&&!a),l=function(){var e,n,r,i,a=t.file;a&&(e=a.filename,r="string"==typeof(n=a.content)?"":URL.createObjectURL(new Blob([n],{type:""})),(i=document.createElement("a")).style.display="none",i.href=r||e,i.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(e)),document.body.appendChild(i),i.click(),document.body.removeChild(i),r&&URL.revokeObjectURL(r))};return s.createElement(Te,{annotation:t,hasPopup:o,ignoreBorder:!0,isRenderable:!0,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onDoubleClick:l,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Pe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},xe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=Ee(t),a=_e(t),o=!(!i&&!a),l=!t.parentType||-1!==["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(t.parentType);return g((function(){if(t.parentId){var e=document.querySelector('[data-annotation-id="'.concat(t.parentId,'"]')),n=document.querySelector('[data-annotation-id="'.concat(t.id,'"]'));if(e&&n){var r=parseFloat(e.style.left),i=parseFloat(e.style.top)+parseFloat(e.style.height);n.style.left="".concat(r,"px"),n.style.top="".concat(i,"px"),n.style.transformOrigin="-".concat(r,"px -").concat(i,"px")}}}),[]),s.createElement(Te,{annotation:t,hasPopup:l,ignoreBorder:!1,isRenderable:o,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":t.id}),s.createElement(Se,{annotation:t}))}))},Ie=function(e){var n=e.annotation,r=e.childAnnotation,i=e.page,a=e.viewport,o=!1===n.hasPopup,l=Ee(n),u=_e(n),c=!!(n.hasPopup||l||u);if(n.quadPoints&&n.quadPoints.length>0){var d=n.quadPoints.map((function(e){return Object.assign({},n,{rect:[e[2].x,e[2].y,e[1].x,e[1].y],quadPoints:[]})}));return s.createElement(s.Fragment,null,d.map((function(e,t){return s.createElement(Ie,{key:t,annotation:e,childAnnotation:r,page:i,viewport:a})})))}return s.createElement(Te,{annotation:n,hasPopup:o,ignoreBorder:!0,isRenderable:c,page:i,viewport:a},(function(e){return s.createElement(s.Fragment,null,s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":n.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children),r&&r.annotationType===t.AnnotationType.Popup&&e.popup.opened&&s.createElement(xe,{annotation:r,page:i,viewport:a}))}))},Me=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.inkLists&&t.inkLists.length&&s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},t.inkLists.map((function(e,t){return s.createElement("polyline",{key:t,fill:"none",stroke:"transparent",strokeWidth:p||1,points:e.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})}))),e.slot.children)}))},Re=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},s.createElement("line",{stroke:"transparent",strokeWidth:p||1,x1:u[2]-t.lineCoordinates[0],x2:u[2]-t.lineCoordinates[2],y1:u[3]-t.lineCoordinates[1],y2:u[3]-t.lineCoordinates[3]})),e.slot.children)}))},Oe=/^([^\w]*)(javascript|data|vbscript)/im,Le=/&#(\w+)(^\w|;)?/g,De=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Ne=/^([^:]+):/gm,Fe=function(e){var t,n=e.annotation,r=e.annotationContainerRef,i=e.doc,a=e.outlines,o=e.page,l=e.pageIndex,u=e.scale,c=e.viewport,d=e.onExecuteNamedAction,p=e.onJumpFromLinkAnnotation,f=e.onJumpToDest,m=s.useRef(),g=a&&a.length&&n.dest&&"string"==typeof n.dest?null===(t=a.find((function(e){return e.dest===n.dest})))||void 0===t?void 0:t.title:"",v=!!(n.url||n.dest||n.action||n.unsafeUrl),y={};if(n.url||n.unsafeUrl){var b=function(e,t){void 0===t&&(t="about:blank");var n,r=(n=e||"",n.replace(Le,(function(e,t){return String.fromCharCode(t)}))).replace(De,"").trim();if(!r)return t;var i=r[0];if("."===i||"/"===i)return r;var a=r.match(Ne);if(!a)return r;var o=a[0];return Oe.test(o)?t:r}(n.url||n.unsafeUrl,"");b?y={"data-target":"external",href:b,rel:"noopener noreferrer nofollow",target:n.newWindow?"_blank":"",title:b}:v=!1}else y={href:"","data-annotation-link":n.id,onClick:function(e){e.preventDefault(),n.action?d(n.action):ge(i,n.dest).then((function(e){var t=m.current,n=r.current;if(t&&n){var i=t.getBoundingClientRect();n.style.setProperty("height","100%"),n.style.setProperty("width","100%");var a=n.getBoundingClientRect();n.style.removeProperty("height"),n.style.removeProperty("width");var o=(i.left-a.left)/u,s=(a.bottom-i.bottom+i.height)/u;p({bottomOffset:s,label:g,leftOffset:o,pageIndex:l})}f(e)}))}};return g&&(y=Object.assign({},y,{title:g,"aria-label":g})),s.createElement(Te,{annotation:n,hasPopup:!1,ignoreBorder:!1,isRenderable:v,page:o,viewport:c},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":n.id,"data-testid":"core__annotation--link-".concat(n.id)}),s.createElement("a",h({ref:m},y)))}))},je=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},s.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})),e.slot.children)}))},Be=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},s.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})),e.slot.children)}))},Ue=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o),u=t.rect,c=u[2]-u[0],d=u[3]-u[1],p=t.borderStyle.width;return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),s.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(c," ").concat(d),width:"".concat(c,"px")},s.createElement("rect",{height:d-p,fill:"none",stroke:"transparent",strokeWidth:p||1,x:p/2,y:p/2,width:c-p})),e.slot.children)}))},qe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Ve=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},He=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ze=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),s.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),s.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),s.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},We=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),s.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),s.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),s.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),s.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),s.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),s.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),s.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),s.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),s.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ge=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),s.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Xe=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),s.createElement("path",{d:"M6 4.5L6 0.5"}),s.createElement("path",{d:"M18 4.5L18 0.5"}),s.createElement("path",{d:"M10 4.5L10 0.5"}),s.createElement("path",{d:"M14 4.5L14 0.5"}))},Ke=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),s.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),s.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},$e=function(){return s.createElement(y,{size:16},s.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Ye=function(e){var n=e.annotation,r=e.childAnnotation,i=e.page,a=e.viewport,o=!1===n.hasPopup,l=Ee(n),u=_e(n),c=!!(n.hasPopup||l||u),d=n.name?n.name.toLowerCase():"";return s.createElement(Te,{annotation:n,hasPopup:o,ignoreBorder:!1,isRenderable:c,page:i,viewport:a},(function(e){return s.createElement(s.Fragment,null,s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":n.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),d&&s.createElement("div",{className:"rpv-core__annotation-text-icon"},"check"===d&&s.createElement(b,null),"comment"===d&&s.createElement(ze,null),"help"===d&&s.createElement(We,null),"insert"===d&&s.createElement($e,null),"key"===d&&s.createElement(Ge,null),"note"===d&&s.createElement(Xe,null),("newparagraph"===d||"paragraph"===d)&&s.createElement(Ke,null)),e.slot.children),r&&r.annotationType===t.AnnotationType.Popup&&e.popup.opened&&s.createElement(xe,{annotation:r,page:i,viewport:a}))}))},Qe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=Ee(t),o=_e(t),l=!!(t.hasPopup||a||o);return s.createElement(Te,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return s.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Je=function(e){var n=e.annotations,r=e.doc,i=e.outlines,a=e.page,o=e.pageIndex,l=e.plugins,u=e.rotation,c=e.scale,d=e.onExecuteNamedAction,h=e.onJumpFromLinkAnnotation,p=e.onJumpToDest,f=s.useRef(),m=a.getViewport({rotation:u,scale:c}).clone({dontFlip:!0}),v=n.filter((function(e){return!e.parentId}));return g((function(){var e=f.current;e&&l.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender({annotations:v,container:e,pageIndex:o,rotation:u,scale:c})}))}),[]),s.createElement("div",{ref:f,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(o)},v.map((function(e){var l=n.find((function(t){return t.parentId===e.id}));switch(e.annotationType){case t.AnnotationType.Caret:return s.createElement(Ce,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Circle:return s.createElement(ke,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.FileAttachment:return s.createElement(Ae,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.FreeText:return s.createElement(Pe,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Highlight:return s.createElement(Ie,{key:e.id,annotation:e,childAnnotation:l,page:a,viewport:m});case t.AnnotationType.Ink:return s.createElement(Me,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Line:return s.createElement(Re,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Link:return s.createElement(Fe,{key:e.id,annotation:e,annotationContainerRef:f,doc:r,outlines:i,page:a,pageIndex:o,scale:c,viewport:m,onExecuteNamedAction:d,onJumpFromLinkAnnotation:h,onJumpToDest:p});case t.AnnotationType.Polygon:return s.createElement(je,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Polyline:return s.createElement(Be,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Popup:return s.createElement(xe,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Square:return s.createElement(Ue,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Squiggly:return s.createElement(qe,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Stamp:return s.createElement(Ve,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.StrikeOut:return s.createElement(He,{key:e.id,annotation:e,page:a,viewport:m});case t.AnnotationType.Text:return s.createElement(Ye,{key:e.id,annotation:e,childAnnotation:l,page:a,viewport:m});case t.AnnotationType.Underline:return s.createElement(Qe,{key:e.id,annotation:e,page:a,viewport:m});default:return s.createElement(s.Fragment,{key:e.id})}})))},Ze=function(e){var t=e.page,n=e.renderAnnotations,r=O(),i=s.useState({loading:!0,annotations:[]}),a=i[0],o=i[1];return s.useEffect((function(){t.getAnnotations({intent:"display"}).then((function(e){r.current&&o({loading:!1,annotations:e})}))}),[]),a.loading?s.createElement(s.Fragment,null):n(a.annotations)},et=function(e){var t=e.doc,n=e.outlines,r=e.page,i=e.pageIndex,a=e.plugins,o=e.rotation,l=e.scale,u=e.onExecuteNamedAction,c=e.onJumpFromLinkAnnotation,d=e.onJumpToDest;return s.createElement(Ze,{page:r,renderAnnotations:function(e){return s.createElement(Je,{annotations:e,doc:t,outlines:n,page:r,pageIndex:i,plugins:a,rotation:o,scale:l,onExecuteNamedAction:u,onJumpFromLinkAnnotation:c,onJumpToDest:d})}})},tt=function(e,t){var n=e%t;return 0===n?e:Math.floor(e-n)},nt=function(e){var n=e.canvasLayerRef,r=e.height,i=e.page,a=e.pageIndex,o=e.plugins,l=e.rotation,u=e.scale,c=e.width,d=e.onRenderCanvasCompleted,h=s.useRef();return g((function(){var e=h.current;e&&e.cancel();var r=n.current;r.removeAttribute("data-testid"),o.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:r,pageIndex:a,rotation:l,scale:u,status:t.LayerRenderStatus.PreRender})}));var s=i.getViewport({rotation:l,scale:u}),c=window.devicePixelRatio||1,p=Math.sqrt(16777216/(s.width*s.height)),f=c>p;f?r.style.transform="scale(1, 1)":r.style.removeProperty("transform");var m=Math.min(p,c),g=function(e){var t,n;if(Math.floor(e)===e)return[e,1];var r=1/e;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];for(var i=e>1?r:e,a=0,o=1,s=1,l=1;;){var u=a+s,c=o+l;if(c>8)break;i<=u/c?(s=(t=[u,c])[0],l=t[1]):(a=(n=[u,c])[0],o=n[1])}return i<(a/o+s/l)/2?i===e?[a,o]:[o,a]:i===e?[s,l]:[l,s]}(m),v=g[0],y=g[1];r.width=tt(s.width*m,v),r.height=tt(s.height*m,v),r.style.width="".concat(tt(s.width,y),"px"),r.style.height="".concat(tt(s.height,y),"px"),r.hidden=!0;var b=r.getContext("2d",{alpha:!1}),_=f||1!==c?[m,0,0,m,0,0]:null;return h.current=i.render({canvasContext:b,transform:_,viewport:s}),h.current.promise.then((function(){r.hidden=!1,r.setAttribute("data-testid","core__canvas-layer-".concat(a)),o.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:r,pageIndex:a,rotation:l,scale:u,status:t.LayerRenderStatus.DidRender})})),d()}),(function(){d()})),function(){r&&(r.width=0,r.height=0)}}),[]),s.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(r,"px"),width:"".concat(c,"px")}},s.createElement("canvas",{ref:n}))},rt=function(e){var t=e.height,n=e.page,r=e.rotation,i=e.scale,a=e.width,o=s.useRef();return g((function(){var e=o.current,s=n.getViewport({rotation:r,scale:i});n.getOperatorList().then((function(r){!function(){var e=o.current;e&&(e.innerHTML="")}(),new l.SVGGraphics(n.commonObjs,n.objs).getSVG(r,s).then((function(n){n.style.height="".concat(t,"px"),n.style.width="".concat(a,"px"),e.appendChild(n)}))}))}),[]),s.createElement("div",{className:"rpv-core__svg-layer",ref:o})},it=function(e){var n=e.containerRef,r=e.page,i=e.pageIndex,a=e.plugins,o=e.rotation,u=e.scale,c=e.onRenderTextCompleted,d=s.useRef(),h=function(){var e=n.current;e&&([].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(t){return e.removeChild(t)})),[].slice.call(e.querySelectorAll('br[role="presentation"]')).forEach((function(t){return e.removeChild(t)})))};return g((function(){var e=d.current;e&&e.cancel();var s=n.current;if(s){s.removeAttribute("data-testid");var p=r.getViewport({rotation:o,scale:u});return a.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:s,pageIndex:i,scale:u,status:t.LayerRenderStatus.PreRender})})),r.getTextContent().then((function(e){h(),d.current=l.renderTextLayer({container:s,textContent:e,textContentSource:e,viewport:p}),d.current.promise.then((function(){s.setAttribute("data-testid","core__text-layer-".concat(i)),[].slice.call(s.children).forEach((function(e){e.classList.contains("rpv-core__text-layer-text--not")||e.classList.add("rpv-core__text-layer-text")})),a.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:s,pageIndex:i,scale:u,status:t.LayerRenderStatus.DidRender})})),c()}),(function(){s.removeAttribute("data-testid"),c()}))})),function(){var e;h(),null===(e=d.current)||void 0===e||e.cancel()}}}),[]),s.createElement("div",{className:"rpv-core__text-layer",ref:n})},at=function(e){var n=e.doc,r=e.measureRef,i=e.outlines,a=e.pageIndex,o=e.pageRotation,l=e.pageSize,u=e.plugins,c=e.renderPage,d=e.renderQueueKey,h=e.rotation,p=e.scale,f=e.shouldRender,g=e.viewMode,v=e.onExecuteNamedAction,y=e.onJumpFromLinkAnnotation,b=e.onJumpToDest,_=e.onRenderCompleted,S=e.onRotatePage,w=O(),T=s.useState(null),C=T[0],k=T[1],A=s.useState(!1),P=A[0],x=A[1],I=s.useState(!1),M=I[0],R=I[1],L=s.useRef(),D=s.useRef(),N=Math.abs(h+o)%180==0,F=l.pageWidth*p,j=l.pageHeight*p,B=N?F:j,U=N?j:F,q=(l.rotation+h+o)%360,V=s.useRef(0),H=c||function(e){return s.createElement(s.Fragment,null,e.canvasLayer.children,e.textLayer.children,e.annotationLayer.children)};return s.useEffect((function(){k(null),x(!1),R(!1)}),[o,h,p]),s.useEffect((function(){f&&w.current&&!C&&me(n,a).then((function(e){w.current&&(V.current=d,k(e))}))}),[f,C]),s.useEffect((function(){P&&M&&(d!==V.current?(k(null),x(!1),R(!1)):_(a))}),[P,M]),s.createElement("div",{className:m({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":g===t.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":g===t.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":g===t.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(a),ref:r,style:{height:"".concat(U,"px"),width:"".concat(B,"px")}},C?s.createElement(s.Fragment,null,H({annotationLayer:{attrs:{},children:s.createElement(et,{doc:n,outlines:i,page:C,pageIndex:a,plugins:u,rotation:q,scale:p,onExecuteNamedAction:v,onJumpFromLinkAnnotation:y,onJumpToDest:b})},canvasLayer:{attrs:{},children:s.createElement(nt,{canvasLayerRef:L,height:U,page:C,pageIndex:a,plugins:u,rotation:q,scale:p,width:B,onRenderCanvasCompleted:function(){w.current&&x(!0)}})},canvasLayerRendered:P,doc:n,height:U,pageIndex:a,rotation:q,scale:p,svgLayer:{attrs:{},children:s.createElement(rt,{height:U,page:C,rotation:q,scale:p,width:B})},textLayer:{attrs:{},children:s.createElement(it,{containerRef:D,page:C,pageIndex:a,plugins:u,rotation:q,scale:p,onRenderTextCompleted:function(){w.current&&R(!0)}})},textLayerRendered:M,width:B,markRendered:_,onRotatePage:function(e){return S(a,e)}}),u.map((function(e,t){return e.renderPageLayer?s.createElement(s.Fragment,{key:t},e.renderPageLayer({canvasLayerRef:L,canvasLayerRendered:P,doc:n,height:U,pageIndex:a,rotation:q,scale:p,textLayerRef:D,textLayerRendered:M,width:B})):s.createElement(s.Fragment,{key:t})}))):s.createElement(E,{testId:"core__page-layer-loading-".concat(a)}))},ot=function(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e};!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Both="Both"}(we||(we={}));var st=function(e){return 1-Math.pow(1-e,4)},lt=1e-4,ut={left:0,top:0},ct={capture:!1,passive:!0},dt=function(e,t,n){return Math.max(e,Math.min(n,t))},ht=function(e,n){if(n!==t.ViewMode.DualPageWithCover)return 0;if(!function(e){var t=e.length;if(1===t)return!1;for(var n=1;n<t;n++)if(e[n].height!==e[0].height||e[n].width!==e[0].width)return!0;return!1}(e))return 2*e[0].width;var r=ue(e.slice(1),2).map((function(e){return 2===e.length?e[0].width+e[1].width:e[0].width})),i=[e[0].width].concat(r);return Math.max.apply(Math,i)},pt={left:0,top:0},ft={left:0,top:0},mt={left:0,top:0},gt={left:0,top:0},vt={height:0,width:0},yt={left:0,top:0},bt="data-virtual-index",_t=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Et=function(e){var n=e.enableSmoothScroll,r=e.isRtl,i=e.numberOfItems,a=e.parentRef,o=e.setRenderRange,l=e.sizes,u=e.scrollMode,c=e.viewMode,d=s.useState(!1),p=d[0],f=d[1],m=s.useCallback((function(e){return f(e)}),[]),v=s.useRef(u);v.current=u;var y=s.useRef(c);y.current=c;var b=u===t.ScrollMode.Wrapped||c===t.ViewMode.DualPageWithCover||c===t.ViewMode.DualPage?we.Both:u===t.ScrollMode.Horizontal?we.Horizontal:we.Vertical,_=function(e){var t=e.elementRef,n=e.enableSmoothScroll,r=e.isRtl,i=e.scrollDirection,a=e.onSmoothScroll,o=s.useState(ut),l=o[0],u=o[1],c=s.useState(t.current),d=c[0],h=c[1],p=r?-1:1,f=s.useRef(i);f.current=i;var m=s.useRef(ut),v=s.useRef(!0),y=s.useCallback((function(){v.current=!0,n&&u(m.current),a(!1)}),[]),b=s.useCallback((function(){if(d){switch(f.current){case we.Horizontal:m.current={left:p*d.scrollLeft,top:0};break;case we.Both:m.current={left:p*d.scrollLeft,top:d.scrollTop};break;case we.Vertical:default:m.current={left:0,top:d.scrollTop}}n&&!v.current||u(m.current)}}),[d]);g((function(){h(t.current)})),g((function(){if(d)return d.addEventListener("scroll",b,ct),function(){d.removeEventListener("scroll",b,ct)}}),[d]);var _=s.useCallback((function(e,n){var r=t.current;if(!r)return Promise.resolve();var i={left:0,top:0};switch(f.current){case we.Horizontal:i.left=p*e.left;break;case we.Both:i.left=p*e.left,i.top=e.top;break;case we.Vertical:default:i.top=e.top}return n?(v.current=!1,a(!0),new Promise((function(e,t){!function(e,t,n,r,i,a){void 0===i&&(i=function(e){return e}),void 0===a&&(a=function(){});var o=0,s=0,l=!1;switch(t){case we.Horizontal:s=e.scrollLeft,o=0;case we.Both:s=e.scrollLeft,o=e.scrollTop;break;case we.Vertical:default:s=0,o=e.scrollTop}var u=function(){l||(l=!0,e.scrollLeft=n.left,e.scrollTop=n.top,a())};if(Math.abs(o-n.top)<=lt&&t===we.Vertical)u();else if(Math.abs(s-n.left)<=lt&&t===we.Horizontal)u();else{var c,d=-1,h=s-n.left,p=o-n.top,f=function(r){-1===d&&(d=r);var a=r-d,m=Math.min(a/400,1),g=i(m),v={left:s-h*g,top:o-p*g};switch(t){case we.Horizontal:e.scrollLeft=v.left;break;case we.Both:e.scrollLeft=v.left,e.scrollTop=v.top;break;case we.Vertical:default:e.scrollTop=v.top}Math.abs(v.top-n.top)<=lt&&Math.abs(v.left-n.left)<=lt&&!l&&(window.cancelAnimationFrame(c),u()),a<400?c=window.requestAnimationFrame(f):window.cancelAnimationFrame(c)};c=window.requestAnimationFrame(f)}}(r,f.current,i,0,st,(function(){y(),e()}))}))):new Promise((function(e,t){switch(f.current){case we.Horizontal:r.scrollLeft=i.left;break;case we.Both:r.scrollLeft=i.left,r.scrollTop=i.top;break;case we.Vertical:default:r.scrollTop=i.top}e()}))}),[t]);return{scrollOffset:l,scrollTo:_}}({elementRef:a,enableSmoothScroll:n,isRtl:r,scrollDirection:b,onSmoothScroll:m}),E=_.scrollOffset,S=_.scrollTo,w=function(e){var t=e.elementRef,n=s.useState(t.current),r=n[0],i=n[1],a=s.useRef(!1),o=s.useReducer(ot,{height:0,width:0}),l=o[0],u=o[1];return g((function(){t.current!==r&&i(t.current)})),g((function(){if(r&&!a.current){a.current=!0;var e=r.getBoundingClientRect(),t=e.height,n=e.width;u({rect:{height:t,width:n}})}}),[r]),s.useEffect((function(){if(r){var e=new ResizeObserver((function(e,t){e.forEach((function(e){if(e.target===r){var t=e.contentRect,n=t.height,i=t.width;u({rect:{height:n,width:i}})}}))}));return e.observe(r),function(){e.unobserve(r)}}}),[r]),l}({elementRef:a}),T=s.useRef({scrollOffset:yt,measurements:[]});T.current.scrollOffset=E;var C=s.useMemo((function(){return Array(i).fill(-1)}),[]),k=s.useState(C),A=k[0],P=k[1],x=s.useMemo((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting?e.intersectionRatio:-1,n=e.target.getAttribute(bt);if(n){var r=parseInt(n,10);0<=r&&r<i&&P((function(e){return e[r]=t,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}))}}))}),{threshold:_t});return e}),[]),I=s.useMemo((function(){return u===t.ScrollMode.Page&&c===t.ViewMode.SinglePage?function(e,t,n){for(var r=[],i=0;i<e;i++){var a={height:Math.max(t.height,n[i].height),width:Math.max(t.width,n[i].width)},o=0===i?gt:r[i-1].end,s={left:o.left+a.width,top:o.top+a.height};r[i]={index:i,start:o,size:a,end:s,visibility:-1}}return r}(i,w,l):c===t.ViewMode.DualPageWithCover?function(e,n,r,i){for(var a=[],o=0,s=0,l=mt,u=0;u<e;u++){var c=0===u?{height:i===t.ScrollMode.Page?Math.max(n.height,r[u].height):r[u].height,width:i===t.ScrollMode.Page?Math.max(n.width,r[u].width):r[u].width}:{height:i===t.ScrollMode.Page?Math.max(n.height,r[u].height):r[u].height,width:Math.max(n.width/2,r[u].width)};i===t.ScrollMode.Page?l=0===u?mt:{left:u%2==0?c.width:0,top:Math.floor((u-1)/2)*c.height+a[0].end.top}:0===u?(l=mt,o=r[0].height,s=0):u%2==1?(l={left:0,top:o+=s},s=u===e-1?r[u].height:Math.max(r[u].height,r[u+1].height)):l={left:a[u-1].end.left,top:o};var d={left:l.left+c.width,top:l.top+c.height};a[u]={index:u,start:l,size:c,end:d,visibility:-1}}return a}(i,w,l,u):c===t.ViewMode.DualPage?function(e,n,r,i){for(var a=[],o=0,s=0,l=ft,u=0;u<e;u++){var c={height:i===t.ScrollMode.Page?Math.max(n.height,r[u].height):r[u].height,width:Math.max(n.width/2,r[u].width)};i===t.ScrollMode.Page?l={left:u%2==0?0:c.width,top:Math.floor(u/2)*c.height}:u%2==0?(l={left:0,top:o+=s},s=u===e-1?r[u].height:Math.max(r[u].height,r[u+1].height)):l={left:a[u-1].end.left,top:o};var d={left:l.left+c.width,top:l.top+c.height};a[u]={index:u,start:l,size:c,end:d,visibility:-1}}return a}(i,w,l,u):function(e,n,r,i){for(var a=[],o=0,s={left:0,top:0},l=0,u=pt,c=0;c<e;c++){var d=r[c];if(0===c)o=d.width,s={left:0,top:0},l=d.height;else switch(i){case t.ScrollMode.Wrapped:(o+=d.width)<n.width?(u={left:a[c-1].end.left,top:s.top},l=Math.max(l,d.height)):(o=d.width,s={left:(u={left:s.left,top:s.top+l}).left,top:u.top},l=d.height);break;case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:u=a[c-1].end}var h={left:u.left+d.width,top:u.top+d.height};a[c]={index:c,start:u,size:d,end:h,visibility:-1}}return a}(i,w,l,u)}),[u,l,c,w]),M=I[i-1]?{height:I[i-1].end.top,width:I[i-1].end.left}:vt;T.current.measurements=I;var R=s.useMemo((function(){var e=function(e,t,n,r){var i=0;switch(e){case we.Horizontal:i=r.left;break;case we.Vertical:default:i=r.top}var a=t.length-1,o=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,a=r(i);if(a<n)e=i+1;else{if(!(a>n))return i;t=i-1}}return e>0?e-1:0}(0,a,i,(function(n){switch(e){case we.Horizontal:return t[n].start.left;case we.Both:case we.Vertical:default:return t[n].start.top}}));if(e===we.Both)for(var s=t[o].start.top;o-1>=0&&t[o-1].start.top===s&&t[o-1].start.left>=r.left;)o--;for(var l=o;l<=a;){var u={top:t[l].start.top-r.top,left:t[l].start.left-r.left},c={height:n.height-u.top,width:n.width-u.left};if(e===we.Horizontal&&c.width<0)break;if(e===we.Vertical&&c.height<0)break;if(e===we.Both&&(c.width<0||c.height<0))break;l++}return{start:o,end:l}}(b,I,w,E),n=e.start,r=e.end,a=n+A.slice(dt(0,i,n),dt(0,i,r)).reduce((function(e,t,n,r){return t>r[e]?n:e}),0),s=a=dt(0,i-1,a),l=o({endPage:r,numPages:i,startPage:n}),u=l.startPage,d=l.endPage;switch(u=Math.max(u,0),d=Math.min(d,i-1),c){case t.ViewMode.DualPageWithCover:a>0&&(s=a%2==1?a:a-1),u=0===u?0:u%2==1?u:u-1,i-(d=d%2==1?d-1:d)<=2&&(d=i-1);break;case t.ViewMode.DualPage:s=a%2==0?a:a-1,u=u%2==0?u:u-1,d=d%2==1?d:d-1;break;case t.ViewMode.SinglePage:default:s=a}return{startPage:u,endPage:d,maxVisbilityIndex:s}}),[I,w,E,c,A]),O=R.startPage,L=R.endPage,D=R.maxVisbilityIndex,N=s.useMemo((function(){for(var e=[],t=function(t){var n=I[t],r=h(h({},n),{visibility:void 0!==A[t]?A[t]:-1,measureRef:function(e){e&&(e.setAttribute(bt,"".concat(t)),x.observe(e))}});e.push(r)},n=O;n<=L;n++)t(n);return e}),[O,L,A,I]),F=s.useCallback((function(e,r){var a=T.current.measurements[dt(0,i-1,e)],o=v.current===t.ScrollMode.Page?yt:r;return a?S({left:o.left+a.start.left,top:o.top+a.start.top},n):Promise.resolve()}),[S,n]),j=s.useCallback((function(e,n){var r=T.current.measurements,i=r[e].start,a=r.find((function(e){return e.start.top-i.top>1e-12}));if(!a)return Promise.resolve();var o=a.index;switch(y.current){case t.ViewMode.DualPage:o=o%2==0?o:o+1;break;case t.ViewMode.DualPageWithCover:o=o%2==1?o:o+1}return F(o,n)}),[]),B=s.useCallback((function(e,n){for(var r=T.current.measurements,a=r[e].start,o=e,s=!1,l=i-1;l>=0;l--)if(a.top-r[l].start.top>1e-12){s=!0,o=r[l].index;break}if(!s)return Promise.resolve();switch(y.current){case t.ViewMode.DualPage:o=o%2==0?o:o-1;break;case t.ViewMode.DualPageWithCover:o=o%2==0?o-1:o}return o===e&&(o=e-1),F(o,n)}),[]),U=s.useCallback((function(e,n){if(y.current===t.ViewMode.DualPageWithCover||y.current===t.ViewMode.DualPage)return j(e,n);switch(v.current){case t.ScrollMode.Wrapped:return j(e,n);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return F(e+1,n)}}),[]),q=s.useCallback((function(e,n){if(y.current===t.ViewMode.DualPageWithCover||y.current===t.ViewMode.DualPage)return B(e,n);switch(v.current){case t.ScrollMode.Wrapped:return B(e,n);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return F(e-1,n)}}),[]),V=s.useCallback((function(){return function(e,n){switch(n){case t.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(e.width,"px")};case t.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(e.height,"px"),width:"100%"}}}(M,v.current)}),[M]),H=s.useCallback((function(e){return function(e,n,r){return r!==t.ScrollMode.Page?{}:{height:"".concat(n.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(e.start.top,"px)")}}(e,w,v.current)}),[w]),z=s.useCallback((function(e){return function(e,n,r,i,a){var o,s,l,u,c,d,h,p=n?"right":"left",f=n?-1:1,m=r.length,g=e.start.left*f,v=e.size,y=v.height,b=v.width;if(i===t.ViewMode.DualPageWithCover){var _=a===t.ScrollMode.Page?0:e.start.top;return 0===e.index||m%2==0&&e.index===m-1?((o={height:"".concat(y,"px"),minWidth:"".concat(ht(r,i),"px"),width:"100%"})[p]=0,o.position="absolute",o.top=0,o.transform="translate(".concat(g,"px, ").concat(_,"px)"),o):((s={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,s.position="absolute",s.top=0,s.transform="translate(".concat(g,"px, ").concat(_,"px)"),s)}if(i===t.ViewMode.DualPage)return(l={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,l.position="absolute",l.top=0,l.transform="translate(".concat(g,"px, ").concat(a===t.ScrollMode.Page?0:e.start.top,"px)"),l;switch(a){case t.ScrollMode.Horizontal:return(u={height:"100%",width:"".concat(b,"px")})[p]=0,u.position="absolute",u.top=0,u.transform="translateX(".concat(g,"px)"),u;case t.ScrollMode.Page:return(c={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,c.position="absolute",c.top=0,c;case t.ScrollMode.Wrapped:return(d={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,d.position="absolute",d.top=0,d.transform="translate(".concat(g,"px, ").concat(e.start.top,"px)"),d;case t.ScrollMode.Vertical:default:return(h={height:"".concat(y,"px"),width:"100%"})[p]=0,h.position="absolute",h.top=0,h.transform="translateY(".concat(e.start.top,"px)"),h}}(e,r,l,y.current,v.current)}),[r,l]),W=s.useCallback((function(e,n){var r=T.current,a=r.measurements,o=r.scrollOffset,s=a[dt(0,i-1,n)];if(s){var l=v.current===t.ScrollMode.Page?{left:s.start.left,top:s.start.top}:{left:o.left*e,top:o.top*e};return S(l,!1)}return Promise.resolve()}),[]);return s.useEffect((function(){return function(){x.disconnect()}}),[]),{boundingClientRect:w,isSmoothScrolling:p,startPage:O,endPage:L,maxVisbilityIndex:D,virtualItems:N,getContainerStyles:V,getItemContainerStyles:H,getItemStyles:z,scrollToItem:F,scrollToNextItem:U,scrollToPreviousItem:q,zoom:W}},St=function(e,n,r,i,a,o){var s=r;switch(!0){case a===t.ViewMode.DualPageWithCover&&o>=3:case a===t.ViewMode.DualPage&&o>=3:s=2*r;break;default:s=r}switch(i){case t.SpecialZoomLevel.ActualSize:return 1;case t.SpecialZoomLevel.PageFit:return Math.min((e.clientWidth-17)/s,(e.clientHeight-16)/n);case t.SpecialZoomLevel.PageWidth:return(e.clientWidth-17)/s}},wt=function(e){var t=[];return e.map((function(e){t=t.concat(e).concat(function(e){var t=[];return e.items&&e.items.length>0&&(t=t.concat(wt(e.items))),t}(e))})),t},Tt={capture:!1,passive:!0},Ct={height:0,width:0},kt={height:0,width:0},At=function(e){var n=e.getCurrentPage,r=e.getCurrentScrollMode,i=e.jumpToPage,a=e.targetRef,o=s.useState(t.FullScreenMode.Normal),l=o[0],u=o[1],c=function(){var e=s.useState(Ct),t=e[0],n=e[1],r=R((function(){n({height:window.innerHeight,width:window.innerWidth})}),100);return g((function(){return window.addEventListener("resize",r,Tt),function(){window.removeEventListener("resize",r,Tt)}}),[]),t}(),d=s.useState(kt),h=d[0],p=d[1],f=s.useRef(kt),m=s.useRef(n()),v=s.useRef(kt),y=s.useState(a.current),b=y[0],_=y[1],E=s.useRef();g((function(){a.current!==b&&_(a.current)}),[]),g((function(){if(b){var e=new ResizeObserver((function(e){e.forEach((function(e){var t=e.target.getBoundingClientRect(),n=t.height,r=t.width;p({height:n,width:r})}))}));return e.observe(b),function(){e.unobserve(b),e.disconnect()}}}),[b]);var S=s.useCallback((function(e){var n=M();return n&&n!==e?(u(t.FullScreenMode.Normal),I(n)):Promise.resolve()}),[]),w=s.useCallback((function(e){e&&x()&&(_(e),S(e).then((function(){E.current=e,u(t.FullScreenMode.Entering),function(e){A&&e[P.RequestFullScreen]()}(e)})))}),[]),T=s.useCallback((function(){M()&&(u(t.FullScreenMode.Exitting),I(document))}),[]),C=s.useCallback((function(){b&&M()!==b&&u(t.FullScreenMode.Exitting)}),[b]);return s.useEffect((function(){switch(l){case t.FullScreenMode.Entering:E.current&&(E.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),m.current=n(),f.current={height:window.innerHeight,width:window.innerWidth};break;case t.FullScreenMode.Entered:r()===t.ScrollMode.Page?i(m.current).then((function(){u(t.FullScreenMode.EnteredCompletely)})):u(t.FullScreenMode.EnteredCompletely);break;case t.FullScreenMode.Exitting:E.current&&(E.current.style.backgroundColor="",E.current=null),m.current=n();break;case t.FullScreenMode.Exited:u(t.FullScreenMode.Normal),r()===t.ScrollMode.Page&&i(m.current)}}),[l]),s.useEffect((function(){if(l!==t.FullScreenMode.Normal)return l===t.FullScreenMode.Entering&&c.height===h.height&&c.width===h.width&&c.height>0&&c.width>0&&(0===v.current.height||c.height==v.current.height)?(v.current={height:window.innerHeight,width:window.innerWidth},void u(t.FullScreenMode.Entered)):void(l===t.FullScreenMode.Exitting&&f.current.height===c.height&&f.current.width===c.width&&c.height>0&&c.width>0&&u(t.FullScreenMode.Exited))}),[l,c,h]),s.useEffect((function(){var e;return e=C,A&&document.addEventListener(P.FullScreenChange,e),function(){!function(e){A&&document.removeEventListener(P.FullScreenChange,e)}(C)}}),[b]),{enterFullScreenMode:w,exitFullScreenMode:T,fullScreenMode:l}},Pt={buildPageStyles:function(){return{}},transformSize:function(e){return e.size}},xt={left:0,top:0},It=function(e){var n=e.currentFile,r=e.defaultScale,i=e.doc,a=e.enableSmoothScroll,o=e.initialPage,l=e.initialRotation,u=e.initialScale,c=e.pageLayout,d=e.pageSizes,p=e.plugins,v=e.renderPage,y=e.scrollMode,b=e.setRenderRange,_=e.viewMode,E=e.viewerState,S=e.onDocumentLoad,w=e.onOpenFile,T=e.onPageChange,C=e.onRotate,k=e.onRotatePage,A=e.onZoom,P=i.numPages,x=i.loadingTask.docId,I=s.useContext(B).l10n,M=s.useContext(f),D=M.direction===t.TextDirection.RightToLeft,N=s.useRef(),j=s.useRef(),U=s.useState(o),q=U[0],V=U[1],H=s.useRef(null),z=function(e){var t,n=e.getCurrentPage,r=(t=s.useRef([]),s.useEffect((function(){return function(){t.current=[]}}),[]),{push:function(e){var n=t.current;n.length+1>50&&n.shift(),n.push(e),t.current=n},map:function(e){return t.current.map((function(t){return e(t)}))},pop:function(){var e=t.current;if(0===e.length)return null;var n=e.pop();return t.current=e,n}}),i=function(){var e=s.useRef([]);return s.useEffect((function(){return function(){e.current=[]}}),[]),{dequeue:function(){var t=e.current;if(0===t.length)return null;var n=t.shift();return e.current=t,n||null},enqueue:function(t){var n=e.current;n.length+1>50&&n.pop(),e.current=[t].concat(n)},map:function(t){return e.current.map((function(e){return t(e)}))}}}(),a=function(){var e=i.dequeue();return e&&r.push(e),e&&e.pageIndex===n()?a():e},o=function(){var e=r.pop();return e&&i.enqueue(e),e&&e.pageIndex===n()?o():e},l=s.useCallback((function(e){r.push(e)}),[]);return{getNextDestination:a,getPreviousDestination:o,markVisitedDestination:l}}({getCurrentPage:function(){return ye.current.pageIndex}}),W=s.useState(l),G=W[0],X=W[1],K=L(G),$=s.useState(!1),Y=$[0],Q=$[1],J=s.useState(new Map),Z=J[0],ee=J[1],te=s.useState(y),ne=te[0],re=te[1],ie=L(ne),ae=s.useState(_),oe=ae[0],se=ae[1],le=L(oe),ce=function(e){var t=O(),n=s.useState([]),r=n[0],i=n[1];return s.useEffect((function(){e.getOutline().then((function(e){if(t.current&&null!==e){var n=wt(e);i(n)}}))}),[]),r}(i),pe=s.useState(u),fe=pe[0],ge=pe[1],ve=L(fe),ye=s.useRef(E),be=s.useRef("string"==typeof r?r:null),_e=s.useRef(-1),Ee=s.useRef(-1),Se=s.useRef(o),we=At({getCurrentPage:function(){return ye.current.pageIndex},getCurrentScrollMode:function(){return ye.current.scrollMode},jumpToPage:function(e){return ze(e)},targetRef:j}),Te=s.useState(-1),Ce=Te[0],ke=Te[1],Ae=s.useState(0),Pe=Ae[0],xe=Ae[1],Ie=F({doc:i});s.useEffect((function(){return function(){de.clear(),he.clear()}}),[x]);var Me=s.useMemo((function(){return Object.assign({},Pt,c)}),[]),Re=s.useMemo((function(){return Array(P).fill(0).map((function(e,t){var n=[d[t].pageHeight,d[t].pageWidth],r=Math.abs(G)%180==0?{height:n[0],width:n[1]}:{height:n[1],width:n[0]},i={height:r.height*fe,width:r.width*fe};return Me.transformSize({numPages:P,pageIndex:t,size:i})}))}),[G,fe]),Oe=Et({enableSmoothScroll:a,isRtl:D,numberOfItems:P,parentRef:j,scrollMode:ne,setRenderRange:b,sizes:Re,viewMode:oe}),Le=R((function(){!be.current||ye.current.fullScreenMode!==t.FullScreenMode.Normal||o>0&&Se.current===o||Qe(be.current)}),200);!function(e){var t=e.targetRef,n=e.onResize;g((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){n(e.target)}))})),r=t.current;if(r)return e.observe(r),function(){e.unobserve(r)}}),[])}({targetRef:j,onResize:Le});var De=function(e){var t=e;p.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),ye.current=t},Ne=function(){return j.current},Fe=function(){return ye.current},je=s.useCallback((function(e){z.markVisitedDestination(e)}),[]),Be=s.useCallback((function(e){var n=e.pageIndex,r=e.bottomOffset,a=e.leftOffset,o=e.scaleTo,s=j.current,l=ye.current;return s&&l?new Promise((function(e,u){me(i,n).then((function(i){var u=i.getViewport({scale:1}),c=0,h=("function"==typeof r?r(u.width,u.height):r)||0,p=("function"==typeof a?a(u.width,u.height):a)||0,f=l.scale;switch(o){case t.SpecialZoomLevel.PageFit:c=0,p=0,Qe(t.SpecialZoomLevel.PageFit);break;case t.SpecialZoomLevel.PageWidth:f=St(s,d[n].pageHeight,d[n].pageWidth,t.SpecialZoomLevel.PageWidth,_,P),c=(u.height-h)*f,p*=f,Qe(f);break;default:c=(u.height-h)*f,p*=f}switch(l.scrollMode){case t.ScrollMode.Horizontal:Oe.scrollToItem(n,{left:p,top:0}).then((function(){e()}));break;case t.ScrollMode.Vertical:default:Oe.scrollToItem(n,{left:0,top:c}).then((function(){e()}))}}))})):Promise.resolve()}),[]),Ue=s.useCallback((function(e){return z.markVisitedDestination(e),Be(e)}),[]),qe=s.useCallback((function(){var e=z.getNextDestination();return e?Be(e):Promise.resolve()}),[]),Ve=s.useCallback((function(){var e=z.getPreviousDestination();return e?Be(e):Promise.resolve()}),[]),He=s.useCallback((function(){return Oe.scrollToNextItem(ye.current.pageIndex,xt)}),[]),ze=s.useCallback((function(e){return 0<=e&&e<P?Oe.scrollToItem(e,xt):Promise.resolve()}),[]),We=s.useCallback((function(){return Oe.scrollToPreviousItem(ye.current.pageIndex,xt)}),[]),Ge=s.useCallback((function(e){var t,n;"pdf"===(t=e.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase()&&new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=new Uint8Array(n.result);t(e)}})).then((function(t){w(e.name,t)}))}),[w]),Xe=s.useCallback((function(e){var n=e===t.RotateDirection.Backward?-90:90,r=ye.current.rotation,a=360===r||-360===r?n:r+n;Ie.markNotRendered(),X(a),De(h(h({},ye.current),{rotation:a})),C({direction:e,doc:i,rotation:a})}),[]),Ke=s.useCallback((function(e,n){var r=n===t.RotateDirection.Backward?-90:90,a=ye.current.pagesRotation,o=(a.has(e)?a.get(e):l)+r,s=a.set(e,o);ee(s),Q((function(e){return!e})),De(h(h({},ye.current),{pagesRotation:s,rotatedPage:e})),k({direction:n,doc:i,pageIndex:e,rotation:o}),Ie.markRendering(e),ke(e)}),[]),$e=s.useCallback((function(e){De(h(h({},ye.current),{scrollMode:e})),re(e)}),[]),Ye=s.useCallback((function(e){De(h(h({},ye.current),{viewMode:e})),se(e)}),[]),Qe=s.useCallback((function(e){var t=j.current,n=ye.current.pageIndex;if(!(n<0||n>=P)){var r=d[n].pageHeight,a=d[n].pageWidth,o=t?"string"==typeof e?St(t,r,a,e,ye.current.viewMode,P):e:1;be.current="string"==typeof e?e:null,o!==ye.current.scale&&(xe((function(e){return e+1})),Ie.markNotRendered(),ge(o),A({doc:i,scale:o}),De(h(h({},ye.current),{scale:o})))}}),[]),Je=s.useCallback((function(e){we.enterFullScreenMode(e)}),[]),Ze=s.useCallback((function(){we.exitFullScreenMode()}),[]);s.useEffect((function(){De(h(h({},ye.current),{fullScreenMode:we.fullScreenMode}))}),[we.fullScreenMode]),s.useEffect((function(){var e={enterFullScreenMode:Je,exitFullScreenMode:Ze,getPagesContainer:Ne,getViewerState:Fe,jumpToDestination:Ue,jumpToNextDestination:qe,jumpToPreviousDestination:Ve,jumpToNextPage:He,jumpToPreviousPage:We,jumpToPage:ze,openFile:Ge,rotate:Xe,rotatePage:Ke,setViewerState:De,switchScrollMode:$e,switchViewMode:Ye,zoom:Qe};return p.forEach((function(t){t.install&&t.install(e)})),function(){p.forEach((function(t){t.uninstall&&t.uninstall(e)}))}}),[x]),s.useEffect((function(){S({doc:i,file:n}),p.forEach((function(e){e.onDocumentLoad&&e.onDocumentLoad({doc:i,file:n})}))}),[x]);var et,tt,nt,rt=Oe.boundingClientRect;et=function(){o&&ze(o)},tt=rt.height>0&&rt.width>0,nt=s.useRef(!1),g((function(){tt&&!nt.current&&(nt.current=!0,et())}),[et,tt]),g((function(){var e=ye.current.pageIndex;e>-1&&ie!==ne&&Oe.scrollToItem(e,xt).then((function(){we.fullScreenMode===t.FullScreenMode.EnteredCompletely&&(a||Ie.markNotRendered(),_e.current=-1)}))}),[ne]),g((function(){var e=ye.current.pageIndex;e>-1&&K!==G&&Oe.scrollToItem(e,xt)}),[G]),g((function(){0!=ve&&ve!=ye.current.scale&&Oe.zoom(ye.current.scale/ve,ye.current.pageIndex).then((function(){we.fullScreenMode===t.FullScreenMode.EnteredCompletely&&(Ee.current=-1)}))}),[fe]),g((function(){if(le!==ye.current.viewMode){var e=Oe.startPage,t=Oe.endPage,n=Oe.virtualItems;Ie.markNotRendered(),Ie.setRange(e,t);for(var r=function(e){var t=n.find((function(t){return t.index===e}));t&&Ie.setVisibility(e,t.visibility)},i=e;i<=t;i++)r(i);ot()}}),[oe]),g((function(){var e=ye.current.pageIndex;e>-1&&le!==oe&&Oe.scrollToItem(e,xt)}),[oe]),g((function(){var e=ye.current.pageIndex;e>0&&e===o&&Se.current===o&&be.current&&(Se.current=-1,Qe(be.current))}),[q]),s.useEffect((function(){Oe.isSmoothScrolling||null!==H.current&&H.current===q||(H.current=q,T({currentPage:q,doc:i}))}),[q,Oe.isSmoothScrolling]),s.useEffect((function(){we.fullScreenMode===t.FullScreenMode.Entering&&ye.current.scrollMode===t.ScrollMode.Page&&(_e.current=ye.current.pageIndex),we.fullScreenMode===t.FullScreenMode.EnteredCompletely&&ye.current.scrollMode===t.ScrollMode.Page&&a&&(_e.current=-1),we.fullScreenMode===t.FullScreenMode.EnteredCompletely&&be.current&&(Ee.current=ye.current.pageIndex,Qe(be.current))}),[we.fullScreenMode]),s.useEffect((function(){if(we.fullScreenMode!==t.FullScreenMode.Entering&&we.fullScreenMode!==t.FullScreenMode.Exitting&&!Oe.isSmoothScrolling){var e=Oe.startPage,n=Oe.endPage,r=Oe.maxVisbilityIndex,i=Oe.virtualItems,a=r,o=we.fullScreenMode===t.FullScreenMode.Entered||we.fullScreenMode===t.FullScreenMode.EnteredCompletely;if(!(o&&a!==_e.current&&_e.current>-1||o&&a!==Ee.current&&Ee.current>-1)){V(a),De(h(h({},ye.current),{pageIndex:a})),Ie.setRange(e,n);for(var s=function(e){var t=i.find((function(t){return t.index===e}));t&&Ie.setVisibility(e,t.visibility)},l=e;l<=n;l++)s(l);ot()}}}),[Oe.startPage,Oe.endPage,Oe.isSmoothScrolling,Oe.maxVisbilityIndex,we.fullScreenMode,Y,G,fe]);var it=s.useCallback((function(e){Ie.markRendered(e),ot()}),[Pe]),ot=function(){var e=Ie.getHighestPriorityPage();e>-1&&Ie.isInRange(e)&&(Ie.markRendering(e),ke(e))},st=function(e){var t=q-1,n=q+1;switch(e){case"FirstPage":ze(0);break;case"LastPage":ze(P-1);break;case"NextPage":n<P&&ze(n);break;case"PrevPage":t>=0&&ze(t)}},lt=s.useCallback((function(){var e=Oe.virtualItems,n=[];switch(oe){case t.ViewMode.DualPage:n=ue(e,2);break;case t.ViewMode.DualPageWithCover:e.length&&(n=0===e[0].index?[[e[0]]].concat(ue(e.slice(1),2)):ue(e,2));break;case t.ViewMode.SinglePage:default:n=ue(e,1)}var r=I&&I.core?I.core.pageLabel:"Page {{pageIndex}}",a={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:N,style:{height:"100%"}},children:s.createElement(s.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:m({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ne===t.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":D,"rpv-core__inner-pages--single":ne===t.ScrollMode.Page,"rpv-core__inner-pages--vertical":ne===t.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ne===t.ScrollMode.Wrapped}),ref:j,style:{height:"100%",position:"relative"}},children:s.createElement("div",{"data-testid":"core__inner-current-page-".concat(q),style:Object.assign({"--scale-factor":fe},Oe.getContainerStyles())},n.map((function(e){return s.createElement("div",{className:m({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ne===t.ScrollMode.Page}),style:Oe.getItemContainerStyles(e[0]),key:"".concat(e[0].index,"-").concat(oe)},e.map((function(e){var n=oe===t.ViewMode.DualPageWithCover&&(0===e.index||P%2==0&&e.index===P-1);return s.createElement("div",{"aria-label":r.replace("{{pageIndex}}","".concat(e.index+1)),className:m({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":oe===t.ViewMode.DualPage&&e.index%2==0,"rpv-core__inner-page--dual-odd":oe===t.ViewMode.DualPage&&e.index%2==1,"rpv-core__inner-page--dual-cover":n,"rpv-core__inner-page--dual-cover-even":oe===t.ViewMode.DualPageWithCover&&!n&&e.index%2==0,"rpv-core__inner-page--dual-cover-odd":oe===t.ViewMode.DualPageWithCover&&!n&&e.index%2==1,"rpv-core__inner-page--single":oe===t.ViewMode.SinglePage&&ne===t.ScrollMode.Page}),role:"region",key:"".concat(e.index,"-").concat(oe),style:Object.assign({},Oe.getItemStyles(e),Me.buildPageStyles({numPages:P,pageIndex:e.index,scrollMode:ne,viewMode:oe}))},s.createElement(at,{doc:i,measureRef:e.measureRef,outlines:ce,pageIndex:e.index,pageRotation:Z.has(e.index)?Z.get(e.index):0,pageSize:d[e.index],plugins:p,renderPage:v,renderQueueKey:Pe,rotation:G,scale:fe,shouldRender:Ce===e.index,viewMode:oe,onExecuteNamedAction:st,onJumpFromLinkAnnotation:je,onJumpToDest:Ue,onRenderCompleted:it,onRotatePage:Ke}))})))})))}};return p.forEach((function(e){e.renderViewer&&(a=e.renderViewer({containerRef:N,doc:i,pagesContainerRef:j,pagesRotation:Z,pageSizes:d,rotation:G,slot:a,themeContext:M,jumpToPage:ze,openFile:Ge,rotate:Xe,rotatePage:Ke,switchScrollMode:$e,switchViewMode:Ye,zoom:Qe}))})),a}),[p,Oe]),ut=s.useCallback((function(e){return s.createElement("div",h({},e.attrs,{style:e.attrs&&e.attrs.style?e.attrs.style:{}}),e.children,e.subSlot&&ut(e.subSlot))}),[]);return ut(lt())},Mt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Rt=function(e){var n=e.defaultScale,r=e.doc,i=e.render,a=e.scrollMode,o=e.viewMode,l=s.useRef(),u=s.useState({pageSizes:[],scale:0}),c=u[0],d=u[1];return s.useLayoutEffect((function(){var e=Array(r.numPages).fill(0).map((function(e,t){return new Promise((function(e,n){me(r,t).then((function(t){var n=t.getViewport({scale:1});e({pageHeight:n.height,pageWidth:n.width,rotation:n.rotation})}))}))}));Promise.all(e).then((function(e){var i=l.current;if(i&&0!==e.length){var s=e[0].pageWidth,u=e[0].pageHeight,c=i.parentElement,h=(c.clientWidth-45)/s,p=(c.clientHeight-45)/u,f=h;switch(a){case t.ScrollMode.Horizontal:f=Math.min(h,p);break;case t.ScrollMode.Vertical:default:f=h}var m,g,v=n?"string"==typeof n?St(c,u,s,n,o,r.numPages):n:(m=f,-1===(g=Mt.findIndex((function(e){return e>=m})))||0===g?m:Mt[g-1]);d({pageSizes:e,scale:v})}}))}),[r.loadingTask.docId]),0===c.pageSizes.length||0===c.scale?s.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:l},s.createElement(E,null)):i(c.pageSizes,c.scale)},Ot=function(){},Lt=function(e){function t(t,n){var r=e.call(this)||this;return r.verifyPassword=t,r.passwordStatus=n,r}return c(t,e),t}(Ot),Dt=function(e){var n=e.passwordStatus,r=e.renderProtectedView,i=e.verifyPassword,a=e.onDocumentAskPassword,o=s.useContext(B).l10n,l=s.useState(""),u=l[0],c=l[1],d=s.useContext(f).direction===t.TextDirection.RightToLeft,h=function(){return i(u)};return s.useEffect((function(){a&&a({verifyPassword:i})}),[]),r?r({passwordStatus:n,verifyPassword:i}):s.createElement("div",{className:"rpv-core__asking-password-wrapper"},s.createElement("div",{className:m({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":d})},s.createElement("div",{className:"rpv-core__asking-password-message"},n===t.PasswordStatus.RequiredPassword&&o.core.askingPassword.requirePasswordToOpen,n===t.PasswordStatus.WrongPassword&&o.core.wrongPassword.tryAgain),s.createElement("div",{className:"rpv-core__asking-password-body"},s.createElement("div",{className:m({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!d,"rpv-core__asking-password-input--rtl":d})},s.createElement(S,{testId:"core__asking-password-input",type:"password",value:u,onChange:c,onKeyDown:function(e){"Enter"===e.key&&h()}})),s.createElement(_,{onClick:h},o.core.askingPassword.submit))))},Nt=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return c(t,e),t}(Ot),Ft=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return c(t,e),t}(Ot),jt=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return c(t,e),t}(Ot),Bt=function(e){var n=e.characterMap,r=e.file,i=e.httpHeaders,a=e.render,o=e.renderError,u=e.renderLoader,c=e.renderProtectedView,d=e.transformGetDocumentParams,h=e.withCredentials,p=e.onDocumentAskPassword,g=s.useContext(f).direction===t.TextDirection.RightToLeft,v=s.useState(new jt(0)),y=v[0],b=v[1],_=s.useRef(""),S=O();return s.useEffect((function(){_.current="",b(new jt(0));var e=new l.PDFWorker({name:"PDFWorker_".concat(Date.now())}),a=Object.assign({httpHeaders:i,withCredentials:h,worker:e},"string"==typeof r?{url:r}:{data:r},n?{cMapUrl:n.url,cMapPacked:n.isCompressed}:{}),o=d?d(a):a,s=l.getDocument(o);return s.onPassword=function(e,n){switch(n){case l.PasswordResponses.NEED_PASSWORD:S.current&&b(new Lt(e,t.PasswordStatus.RequiredPassword));break;case l.PasswordResponses.INCORRECT_PASSWORD:S.current&&b(new Lt(e,t.PasswordStatus.WrongPassword))}},s.onProgress=function(e){var t=e.total>0?Math.min(100,100*e.loaded/e.total):100;S.current&&""===_.current&&b(new jt(t))},s.promise.then((function(e){_.current=e.loadingTask.docId,S.current&&b(new Nt(e))}),(function(t){return S.current&&!e.destroyed&&b(new Ft({message:t.message||"Cannot load document",name:t.name}))})),function(){s.destroy(),e.destroy()}}),[r]),y instanceof Lt?s.createElement(Dt,{passwordStatus:y.passwordStatus,renderProtectedView:c,verifyPassword:y.verifyPassword,onDocumentAskPassword:p}):y instanceof Nt?a(y.doc):y instanceof Ft?o?o(y.error):s.createElement("div",{className:m({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":g})},s.createElement("div",{className:"rpv-core__doc-error-text"},y.error.message)):s.createElement("div",{"data-testid":"core__doc-loading",className:m({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":g})},u?u(y.percentages):s.createElement(E,null))},Ut=function(e){return{startPage:e.startPage-3,endPage:e.endPage+3}};t.Button=function(e){var n=e.children,r=e.testId,i=e.onClick,a=s.useContext(f).direction===t.TextDirection.RightToLeft,o=r?{"data-testid":r}:{};return s.createElement("button",h({className:m({"rpv-core__button":!0,"rpv-core__button--rtl":a}),type:"button",onClick:i},o),n)},t.Icon=y,t.LazyRender=function(e){var t=e.attrs,n=e.children,r=e.testId,i=s.useState(!1),a=i[0],o=i[1],l=r?h(h({},t),{"data-testid":r}):t,u=v({once:!0,onVisibilityChanged:function(e){e.isVisible&&o(!0)}});return s.createElement("div",h({ref:u},l),a&&n)},t.LocalizationContext=B,t.Menu=function(e){var n=e.children,r=s.useRef(),i=s.useRef([]),a=s.useContext(f).direction===t.TextDirection.RightToLeft,o=function(e){if(r.current)switch(e.key){case"Tab":e.preventDefault();break;case"ArrowDown":e.preventDefault(),l((function(e,t){return t+1}));break;case"ArrowUp":e.preventDefault(),l((function(e,t){return t-1}));break;case"End":e.preventDefault(),l((function(e,t){return e.length-1}));break;case"Home":e.preventDefault(),l((function(e,t){return 0}))}},l=function(e){if(r.current){var t=i.current,n=t.findIndex((function(e){return"0"===e.getAttribute("tabindex")})),a=Math.min(t.length-1,Math.max(0,e(t,n)));n>=0&&n<=t.length-1&&t[n].setAttribute("tabindex","-1"),t[a].setAttribute("tabindex","0"),t[a].focus()}};return g((function(){var e=r.current;if(e){var t=function(e){var t=[];return e.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(n){if(n instanceof HTMLElement){var r=n.parentElement;(r===e||"none"!==window.getComputedStyle(r).display)&&t.push(n)}})),t}(e);i.current=t}}),[]),g((function(){return document.addEventListener("keydown",o),function(){document.removeEventListener("keydown",o)}}),[]),s.createElement("div",{ref:r,"aria-orientation":"vertical",className:m({"rpv-core__menu":!0,"rpv-core__menu--rtl":a}),role:"menu",tabIndex:0},n)},t.MenuDivider=function(){return s.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},t.MenuItem=function(e){var n=e.checked,r=void 0!==n&&n,i=e.children,a=e.icon,o=void 0===a?null:a,l=e.isDisabled,u=void 0!==l&&l,c=e.testId,d=e.onClick,p=s.useContext(f).direction===t.TextDirection.RightToLeft,g=c?{"data-testid":c}:{};return s.createElement("button",h({className:m({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":u,"rpv-core__menu-item--ltr":!p,"rpv-core__menu-item--rtl":p}),role:"menuitem",tabIndex:-1,type:"button",onClick:d},g),s.createElement("div",{className:m({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!p,"rpv-core__menu-item-icon--rtl":p})},o),s.createElement("div",{className:m({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!p,"rpv-core__menu-item-label--rtl":p})},i),s.createElement("div",{className:m({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!p,"rpv-core__menu-item-check--rtl":p})},r&&s.createElement(b,null)))},t.MinimalButton=function(e){var n=e.ariaLabel,r=void 0===n?"":n,i=e.ariaKeyShortcuts,a=void 0===i?"":i,o=e.children,l=e.isDisabled,u=void 0!==l&&l,c=e.isSelected,d=void 0!==c&&c,p=e.testId,g=e.onClick,v=s.useContext(f).direction===t.TextDirection.RightToLeft,y=p?{"data-testid":p}:{};return s.createElement("button",h({"aria-label":r},a&&{"aria-keyshortcuts":a},u&&{"aria-disabled":!0},{className:m({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":u,"rpv-core__minimal-button--rtl":v,"rpv-core__minimal-button--selected":d}),type:"button",onClick:g},y),o)},t.Modal=function(e){var t=e.ariaControlsSuffix,n=e.closeOnClickOutside,r=e.closeOnEscape,i=e.content,a=e.isOpened,o=void 0!==a&&a,l=e.target,u=t||"".concat(q());return s.createElement(K,{target:l?function(e,t){return s.createElement("div",{"aria-expanded":t?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(u)},l(e,t))}:null,content:function(e){return s.createElement(W,null,s.createElement(z,{ariaControlsSuffix:u,closeOnClickOutside:n,closeOnEscape:r,onToggle:e},i(e)))},isOpened:o})},t.Popover=function(e){var t=e.ariaHasPopup,n=void 0===t?"dialog":t,r=e.ariaControlsSuffix,i=e.closeOnClickOutside,a=e.closeOnEscape,o=e.content,l=e.lockScroll,u=void 0===l||l,c=e.offset,d=e.position,h=e.target,p=X(!1),f=p.opened,m=p.toggle,g=s.useRef(),v=s.useMemo((function(){return r||"".concat(q())}),[]);return s.createElement("div",{ref:g,"aria-expanded":f?"true":"false","aria-haspopup":n,"aria-controls":"rpv-core__popver-body-".concat(v)},h(m,f),f&&s.createElement(s.Fragment,null,u&&s.createElement(oe,{closeOnEscape:a,onClose:m}),s.createElement(ae,{ariaControlsSuffix:v,closeOnClickOutside:i,offset:c,position:d,targetRef:g,onClose:m},o(m))))},t.PrimaryButton=_,t.ProgressBar=function(e){var n=e.progress,r=s.useContext(f).direction===t.TextDirection.RightToLeft;return s.createElement("div",{className:m({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":r})},s.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(n,"%")}},n,"%"))},t.Separator=function(){return s.createElement("div",{className:"rpv-core__separator"})},t.Spinner=E,t.Splitter=function(e){var n=e.constrain,r=s.useContext(f).direction===t.TextDirection.RightToLeft,i=s.useRef(),a=s.useRef(),o=s.useRef(),l=s.useRef(0),u=s.useRef(0),c=s.useRef(0),d=s.useRef(0),h={capture:!0},p=function(e){var t=i.current,s=a.current,u=o.current;if(t&&s&&u){var h=d.current,p=e.clientX-l.current,f=c.current+(r?-p:p),m=t.parentElement.getBoundingClientRect().width,g=100*f/m;if(t.classList.add("rpv-core__splitter--resizing"),n){var v=m-f-h;if(!n({firstHalfPercentage:g,firstHalfSize:f,secondHalfPercentage:100*v/m,secondHalfSize:v}))return}s.style.width="".concat(g,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),s.classList.add("rpv-core__splitter-sibling--resizing"),u.classList.add("rpv-core__splitter-sibling--resizing")}},m=function(e){var t=i.current,n=a.current,r=o.current;t&&n&&r&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),t.classList.remove("rpv-core__splitter--resizing"),n.classList.remove("rpv-core__splitter-sibling--resizing"),r.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",p,h),document.removeEventListener("mouseup",m,h))};return s.useEffect((function(){var e=i.current;e&&(d.current=e.getBoundingClientRect().width,a.current=e.previousElementSibling,o.current=e.nextElementSibling)}),[]),s.createElement("div",{ref:i,className:"rpv-core__splitter",onMouseDown:function(e){var t=a.current;t&&(l.current=e.clientX,u.current=e.clientY,c.current=t.getBoundingClientRect().width,document.addEventListener("mousemove",p,h),document.addEventListener("mouseup",m,h))}})},t.TextBox=S,t.ThemeContext=f,t.Tooltip=function(e){var n=e.ariaControlsSuffix,r=e.content,i=e.offset,a=e.position,o=e.target,l=X(!1),u=l.opened,c=l.toggle,d=s.useRef(),h=s.useRef(),p=s.useMemo((function(){return n||"".concat(q())}),[]);H((function(){d.current&&document.activeElement&&d.current.contains(document.activeElement)&&m()}));var f=function(){c(t.ToggleStatus.Open)},m=function(){c(t.ToggleStatus.Close)};return s.createElement(s.Fragment,null,s.createElement("div",{ref:d,"aria-describedby":"rpv-core__tooltip-body-".concat(p),onBlur:function(e){e.relatedTarget instanceof HTMLElement&&e.currentTarget.parentElement&&e.currentTarget.parentElement.contains(e.relatedTarget)?h.current&&(h.current.style.display="none"):m()},onFocus:f,onMouseEnter:f,onMouseLeave:m},o),u&&s.createElement(se,{ariaControlsSuffix:p,contentRef:h,offset:i,position:a,targetRef:d},r()))},t.Viewer=function(e){var n=e.characterMap,r=e.defaultScale,i=e.enableSmoothScroll,a=void 0===i||i,o=e.fileUrl,l=e.httpHeaders,u=void 0===l?{}:l,c=e.initialPage,d=void 0===c?0:c,h=e.pageLayout,p=e.initialRotation,m=void 0===p?0:p,g=e.localization,y=e.plugins,b=void 0===y?[]:y,_=e.renderError,E=e.renderLoader,S=e.renderPage,w=e.renderProtectedView,T=e.scrollMode,C=void 0===T?t.ScrollMode.Vertical:T,k=e.setRenderRange,A=void 0===k?Ut:k,P=e.transformGetDocumentParams,x=e.theme,I=void 0===x?{direction:t.TextDirection.LeftToRight,theme:"light"}:x,M=e.viewMode,R=void 0===M?t.ViewMode.SinglePage:M,O=e.withCredentials,D=void 0!==O&&O,N=e.onDocumentAskPassword,F=e.onDocumentLoad,U=void 0===F?function(){}:F,q=e.onPageChange,V=void 0===q?function(){}:q,H=e.onRotate,z=void 0===H?function(){}:H,W=e.onRotatePage,G=void 0===W?function(){}:W,X=e.onSwitchTheme,K=void 0===X?function(){}:X,$=e.onZoom,Y=void 0===$?function(){}:$,Q=s.useState({data:o,name:"string"==typeof o?o:"",shouldLoad:!1}),J=Q[0],Z=Q[1],ee=function(e,t){Z({data:t,name:e,shouldLoad:!0})},te=s.useState(!1),ne=te[0],re=te[1],ie=L(J);s.useEffect((function(){var e,t,n,r;e=ie.data,r=typeof(t=o),"string"==(n=typeof e)&&"string"===r&&e===t||"object"===n&&"object"===r&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))||Z({data:o,name:"string"==typeof o?o:"",shouldLoad:ne})}),[o,ne]);var ae=v({onVisibilityChanged:function(e){re(e.isVisible),e.isVisible&&Z((function(e){return Object.assign({},e,{shouldLoad:!0})}))}}),oe="string"==typeof I?{direction:t.TextDirection.LeftToRight,theme:I}:I,se=s.useState(g||j),le=se[0],ue=se[1],ce={l10n:le,setL10n:ue},de=Object.assign({},{direction:oe.direction},function(e,t){var n=s.useMemo((function(){return"auto"===e?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}),[]),r=s.useState(n),i=r[0],a=r[1],o=L(i);return s.useEffect((function(){if("auto"===e){var t=window.matchMedia("(prefers-color-scheme: dark)"),n=function(e){a(e.matches?"dark":"light")};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}}),[]),s.useEffect((function(){i!==o&&t&&t(i)}),[i]),s.useEffect((function(){e!==i&&a(e)}),[e]),{currentTheme:i,setCurrentTheme:a}}(oe.theme||"light",K));return s.useEffect((function(){g&&ue(g)}),[g]),s.createElement(B.Provider,{value:ce},s.createElement(f.Provider,{value:de},s.createElement("div",{ref:ae,className:"rpv-core__viewer rpv-core__viewer--".concat(de.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},J.shouldLoad&&s.createElement(Bt,{characterMap:n,file:J.data,httpHeaders:u,render:function(e){return s.createElement(Rt,{defaultScale:r,doc:e,render:function(n,i){return s.createElement(It,{currentFile:{data:J.data,name:J.name},defaultScale:r,doc:e,enableSmoothScroll:a,initialPage:d,initialRotation:m,initialScale:i,pageLayout:h,pageSizes:n,plugins:b,renderPage:S,scrollMode:C,setRenderRange:A,viewMode:R,viewerState:{file:J,fullScreenMode:t.FullScreenMode.Normal,pageIndex:-1,pageHeight:n[0].pageHeight,pageWidth:n[0].pageWidth,pagesRotation:new Map,rotation:m,scale:i,scrollMode:C,viewMode:R},onDocumentLoad:U,onOpenFile:ee,onPageChange:V,onRotate:z,onRotatePage:G,onZoom:Y})},scrollMode:C,viewMode:R})},renderError:_,renderLoader:E,renderProtectedView:w,transformGetDocumentParams:P,withCredentials:D,onDocumentAskPassword:N}))))},t.Worker=function(e){var t=e.children,n=e.workerUrl;return l.GlobalWorkerOptions.workerSrc=n,s.createElement(s.Fragment,null,t)},t.chunk=ue,t.classNames=m,t.createStore=function(e){var t=e||{},n={},r=function(e,r){var i;t=h(h({},t),((i={})[e]=r,i)),(n[e]||[]).forEach((function(n){return n(t[e])}))},i=function(e){return t[e]};return{subscribe:function(e,t){n[e]=(n[e]||[]).concat(t)},unsubscribe:function(e,t){n[e]=(n[e]||[]).filter((function(e){return e!==t}))},update:function(e,t){r(e,t)},updateCurrentValue:function(e,t){var n=i(e);void 0!==n&&r(e,t(n))},get:function(e){return i(e)}}},t.getDestination=ge,t.getPage=me,t.isFullScreenEnabled=x,t.isMac=function(){return"undefined"!=typeof window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},t.useDebounceCallback=R,t.useIntersectionObserver=v,t.useIsMounted=O,t.useIsomorphicLayoutEffect=g,t.usePrevious=L,t.useRenderQueue=F},8899:function(e,t,n){"use strict";n.r(t),n.d(t,{SiteConsumer:function(){return o},SiteContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).site),o=a.Consumer;t.default=a},8915:function(e,t,n){"use strict";e.exports=n(6109)},8974:function(e,t,n){var r=n(6818),i=n(3615);function a(){return(new Date).getTime()}var o,s=Array.prototype.slice,l={};o=void 0!==n.g&&n.g.console?n.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var u=[[function(){},"log"],[function(){o.log.apply(o,arguments)},"info"],[function(){o.log.apply(o,arguments)},"warn"],[function(){o.warn.apply(o,arguments)},"error"],[function(e){l[e]=a()},"time"],[function(e){var t=l[e];if(!t)throw new Error("No such label: "+e);delete l[e];var n=a()-t;o.log(e+": "+n+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=r.format.apply(null,arguments),o.error(e.stack)},"trace"],[function(e){o.log(r.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,r.format.apply(null,t))}},"assert"]],c=0;c<u.length;c++){var d=u[c],h=d[0],p=d[1];o[p]||(o[p]=h)}e.exports=o},9032:function(e,t,n){"use strict";var r,i=n(8974),a="object"==typeof Reflect?Reflect:null,o=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var a,o,s,l;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(a=d(e))>0&&s.length>a&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,i&&i.warn&&i.warn(l)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function m(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=v(l,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return h(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return h(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return m(this,e,!0)},l.prototype.rawListeners=function(e){return m(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},9157:function(e,t,n){"use strict";var r=n(5328);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},9191:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}n.d(t,{A:function(){return r}})},9249:function(e,t,n){"use strict";var r=n(7118),i=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(n(9471)),a=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),i.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),i.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),i.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},s=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\n            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\n            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z"}))},l=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},c=function(e,t){e.get("switchScrollMode")(t);var n=e.get("viewMode");t!==r.ScrollMode.Horizontal&&t!==r.ScrollMode.Wrapped||n===r.ViewMode.SinglePage||e.get("switchViewMode")(r.ViewMode.SinglePage)},d=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\n            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\n            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z"}))},h=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"}))},p=function(e){var t=e.children,n=e.mode,a=e.onClick,o=i.useContext(r.LocalizationContext).l10n,u="",c=i.createElement(d,null);switch(n){case r.ScrollMode.Horizontal:u=o&&o.scrollMode?o.scrollMode.horizontalScrolling:"Horizontal scrolling",c=i.createElement(s,null);break;case r.ScrollMode.Page:u=o&&o.scrollMode?o.scrollMode.pageScrolling:"Page scrolling",c=i.createElement(l,null);break;case r.ScrollMode.Wrapped:u=o&&o.scrollMode?o.scrollMode.wrappedScrolling:"Wrapped scrolling",c=i.createElement(h,null);break;case r.ScrollMode.Vertical:default:u=o&&o.scrollMode?o.scrollMode.verticalScrolling:"Vertical scrolling",c=i.createElement(d,null)}return t({icon:c,label:u,onClick:a})},f={left:0,top:8},m=function(e){var t=e.isDisabled,n=e.isSelected,a=e.mode,o=e.onClick,s="";switch(a){case r.ScrollMode.Horizontal:s="scroll-mode__horizontal-button";break;case r.ScrollMode.Page:s="scroll-mode__page-button";break;case r.ScrollMode.Wrapped:s="scroll-mode__wrapped-button";break;case r.ScrollMode.Vertical:default:s="scroll-mode__vertical-button"}return i.createElement(p,{mode:a,onClick:o},(function(e){return i.createElement(r.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:e.label,isDisabled:t,isSelected:n,testId:s,onClick:e.onClick},e.icon),content:function(){return e.label},offset:f})}))},g=function(e){var t=i.useState(e.get("scrollMode")||r.ScrollMode.Vertical),n=t[0],a=t[1],o=function(e){a(e)};return i.useEffect((function(){return e.subscribe("scrollMode",o),function(){e.unsubscribe("scrollMode",o)}}),[]),{scrollMode:n}},v=function(e){var t=i.useState(e.get("viewMode")||r.ViewMode.SinglePage),n=t[0],a=t[1],o=function(e){a(e)};return i.useEffect((function(){return e.subscribe("viewMode",o),function(){e.unsubscribe("viewMode",o)}}),[]),{viewMode:n}},y=function(e){var t=e.children,n=e.mode,a=e.store,o=v(a).viewMode,s=g(a).scrollMode===n,l=(n===r.ScrollMode.Horizontal||n===r.ScrollMode.Wrapped)&&o!==r.ViewMode.SinglePage;return(t||function(e){return i.createElement(m,{isDisabled:l,isSelected:s,mode:e.mode,onClick:e.onClick})})({isDisabled:l,isSelected:s,mode:n,onClick:function(){c(a,n)}})},b=function(e){var t=e.isDisabled,n=e.isSelected,a=e.mode,o=e.onClick,s="";switch(a){case r.ScrollMode.Horizontal:s="scroll-mode__horizontal-menu";break;case r.ScrollMode.Page:s="scroll-mode__page-menu";break;case r.ScrollMode.Wrapped:s="scroll-mode__wrapped-menu";break;case r.ScrollMode.Vertical:default:s="scroll-mode__vertical-menu"}return i.createElement(p,{mode:a,onClick:o},(function(e){return i.createElement(r.MenuItem,{checked:n,icon:e.icon,isDisabled:t,testId:s,onClick:e.onClick},e.label)}))},_=function(e,t){e.get("switchViewMode")(t);var n=e.get("scrollMode");n!==r.ScrollMode.Horizontal&&n!==r.ScrollMode.Wrapped||t===r.ViewMode.SinglePage||e.get("switchScrollMode")(r.ScrollMode.Vertical)},E=function(e){var t=e.children,n=e.mode,s=e.onClick,u=i.useContext(r.LocalizationContext).l10n,c="",d=i.createElement(l,null);switch(n){case r.ViewMode.DualPage:c=u&&u.scrollMode?u.scrollMode.dualPage:"Dual page",d=i.createElement(o,null);break;case r.ViewMode.DualPageWithCover:c=u&&u.scrollMode?u.scrollMode.dualPageCover:"Dual page with cover",d=i.createElement(a,null);break;case r.ViewMode.SinglePage:default:c=u&&u.scrollMode?u.scrollMode.singlePage:"Single page",d=i.createElement(l,null)}return t({icon:d,label:c,onClick:s})},S={left:0,top:8},w=function(e){var t=e.isDisabled,n=e.isSelected,a=e.mode,o=e.onClick,s="";switch(a){case r.ViewMode.DualPage:s="view-mode__dual-button";break;case r.ViewMode.DualPageWithCover:s="view-mode__dual-cover-button";break;case r.ViewMode.SinglePage:default:s="view-mode__single-button"}return i.createElement(E,{mode:a,onClick:o},(function(e){return i.createElement(r.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:e.label,isDisabled:t,isSelected:n,testId:s,onClick:e.onClick},e.icon),content:function(){return e.label},offset:S})}))},T=function(e){var t=e.children,n=e.mode,a=e.store,o=v(a).viewMode,s=g(a).scrollMode,l=o===n,u=(s===r.ScrollMode.Horizontal||s===r.ScrollMode.Wrapped)&&n!==r.ViewMode.SinglePage;return(t||function(e){return i.createElement(w,{isDisabled:u,isSelected:l,mode:e.mode,onClick:e.onClick})})({isDisabled:u,isSelected:l,mode:n,onClick:function(){_(a,n)}})},C=function(e){var t=e.isDisabled,n=e.isSelected,a=e.mode,o=e.onClick,s="";switch(a){case r.ViewMode.DualPage:s="view-mode__dual-menu";break;case r.ViewMode.DualPageWithCover:s="view-mode__dual-cover-menu";break;case r.ViewMode.SinglePage:default:s="view-mode__single-menu"}return i.createElement(E,{mode:a,onClick:o},(function(e){return i.createElement(r.MenuItem,{checked:n,icon:e.icon,isDisabled:t,testId:s,onClick:e.onClick},e.label)}))};t.DualPageCoverViewModeIcon=a,t.DualPageViewModeIcon=o,t.HorizontalScrollingIcon=s,t.PageScrollingIcon=l,t.VerticalScrollingIcon=d,t.WrappedScrollingIcon=h,t.scrollModePlugin=function(){var e=i.useMemo((function(){return r.createStore({scrollMode:r.ScrollMode.Vertical,viewMode:r.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})}),[]),t=function(t){return i.createElement(y,u({},t,{store:e}))},n=function(t){return i.createElement(T,u({},t,{store:e}))};return{install:function(t){e.update("switchScrollMode",t.switchScrollMode),e.update("switchViewMode",t.switchViewMode)},onViewerStateChange:function(t){return e.update("scrollMode",t.scrollMode),e.update("viewMode",t.viewMode),t},switchScrollMode:function(t){c(e,t)},switchViewMode:function(t){_(e,t)},SwitchScrollMode:t,SwitchScrollModeButton:function(e){return i.createElement(t,{mode:e.mode},(function(e){return i.createElement(m,{isDisabled:e.isDisabled,isSelected:e.isSelected,mode:e.mode,onClick:function(){e.onClick()}})}))},SwitchScrollModeMenuItem:function(e){return i.createElement(t,{mode:e.mode},(function(t){return i.createElement(b,{isDisabled:t.isDisabled,isSelected:t.isSelected,mode:t.mode,onClick:function(){t.onClick(),e.onClick()}})}))},SwitchViewMode:n,SwitchViewModeButton:function(e){return i.createElement(n,{mode:e.mode},(function(e){return i.createElement(w,{isDisabled:e.isDisabled,isSelected:e.isSelected,mode:e.mode,onClick:function(){e.onClick()}})}))},SwitchViewModeMenuItem:function(e){return i.createElement(n,{mode:e.mode},(function(t){return i.createElement(C,{isDisabled:t.isDisabled,isSelected:t.isSelected,mode:t.mode,onClick:function(){t.onClick(),e.onClick()}})}))}}}},9281:function(e,t,n){"use strict";e.exports=n(4473)},9287:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return a(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var s=o(n(9471)),l=n(285),u=n(7664),c=n(1936);t.Page=function(e){var t=e.id,n=e.children,r=void 0===n?null:n;return(0,s.useEffect)((function(){l.PageActions.initPage(t)}),[]),s.default.createElement(s.default.Fragment,null,s.default.createElement(c.PageMain,{key:"page-main"},r),s.default.createElement(u.Notifications,{key:"notifications"}))}},9289:function(e){"use strict";e.exports=Function.prototype.apply},9383:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in a=Object(arguments[l]))n.call(a,u)&&(s[u]=a[u]);if(t){o=t(a);for(var c=0;c<o.length;c++)r.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s}},9394:function(e){"use strict";e.exports=URIError},9411:function(e){"use strict";e.exports=Math.pow},9423:function(e,t,n){"use strict";n.r(t),n.d(t,{PlaylistsContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).playlists)},9471:function(e,t,n){"use strict";e.exports=n(3534)},9479:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(9471),i=n(285),a=n(1936),o=n(7664);class s extends r.PureComponent{constructor(e,t){super(e),void 0!==t&&i.PageActions.initPage(t)}render(){return r.createElement(r.Fragment,null,r.createElement(a.PageMain,null,this.pageContent()),r.createElement(o.Notifications,null))}}},9659:function(e,t,n){"use strict";n.d(t,{Fb:function(){return wt},iq:function(){return _t},MB:function(){return Et},zi:function(){return St}});var r={};function i(e,t){return function(){return e.apply(t,arguments)}}n.r(r),n.d(r,{hasBrowserEnv:function(){return he},hasStandardBrowserEnv:function(){return fe},hasStandardBrowserWebWorkerEnv:function(){return me},navigator:function(){return pe},origin:function(){return ge}});var a=n(1385);const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,l=(u=Object.create(null),e=>{const t=o.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const c=e=>(e=e.toLowerCase(),t=>l(t)===e),d=e=>t=>typeof t===e,{isArray:h}=Array,p=d("undefined"),f=c("ArrayBuffer"),m=d("string"),g=d("function"),v=d("number"),y=e=>null!==e&&"object"==typeof e,b=e=>{if("object"!==l(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},_=c("Date"),E=c("File"),S=c("Blob"),w=c("FileList"),T=c("URLSearchParams"),[C,k,A,P]=["ReadableStream","Request","Response","Headers"].map(c);function x(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),h(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let o;for(r=0;r<a;r++)o=i[r],t.call(null,e[o],o,e)}}function I(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,R=e=>!p(e)&&e!==M,O=(L="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>L&&e instanceof L);var L;const D=c("HTMLFormElement"),N=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),F=c("RegExp"),j=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};x(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},B=c("AsyncFunction"),U=(q="function"==typeof setImmediate,V=g(M.postMessage),q?setImmediate:V?(H=`axios@${Math.random()}`,z=[],M.addEventListener("message",(({source:e,data:t})=>{e===M&&t===H&&z.length&&z.shift()()}),!1),e=>{z.push(e),M.postMessage(H,"*")}):e=>setTimeout(e));var q,V,H,z;const W="undefined"!=typeof queueMicrotask?queueMicrotask.bind(M):void 0!==a&&a.nextTick||U;var G={isArray:h,isArrayBuffer:f,isBuffer:function(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&g(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||g(e.append)&&("formdata"===(t=l(e))||"object"===t&&g(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t},isString:m,isNumber:v,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:b,isReadableStream:C,isRequest:k,isResponse:A,isHeaders:P,isUndefined:p,isDate:_,isFile:E,isBlob:S,isRegExp:F,isFunction:g,isStream:e=>y(e)&&g(e.pipe),isURLSearchParams:T,isTypedArray:O,isFileList:w,forEach:x,merge:function e(){const{caseless:t}=R(this)&&this||{},n={},r=(r,i)=>{const a=t&&I(n,i)||i;b(n[a])&&b(r)?n[a]=e(n[a],r):b(r)?n[a]=e({},r):h(r)?n[a]=r.slice():n[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&x(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(x(t,((t,r)=>{n&&g(t)?e[r]=i(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,o;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],r&&!r(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:l,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!v(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:D,hasOwnProperty:N,hasOwnProp:N,reduceDescriptors:j,freezeMethods:e=>{j(e,((t,n)=>{if(g(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];g(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return h(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:I,global:M,isContextDefined:R,isSpecCompliantForm:function(e){return!!(e&&g(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=h(e)?[]:{};return x(e,((e,t)=>{const a=n(e,r+1);!p(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:B,isThenable:e=>e&&(y(e)||g(e))&&g(e.then)&&g(e.catch),setImmediate:U,asap:W};function X(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}G.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const K=X.prototype,$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{$[e]={value:e}})),Object.defineProperties(X,$),Object.defineProperty(K,"isAxiosError",{value:!0}),X.from=(e,t,n,r,i,a)=>{const o=Object.create(K);return G.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),X.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Y=X,Q=n(9922).hp;function J(e){return G.isPlainObject(e)||G.isArray(e)}function Z(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function ee(e,t,n){return e?e.concat(t).map((function(e,t){return e=Z(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const te=G.toFlatObject(G,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ne=function(e,t,n){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=G.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!G.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(G.isDate(e))return e.toISOString();if(!s&&G.isBlob(e))throw new Y("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(e)||G.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Q.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(G.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(G.isArray(e)&&function(e){return G.isArray(e)&&!e.some(J)}(e)||(G.isFileList(e)||G.endsWith(n,"[]"))&&(s=G.toArray(e)))return n=Z(n),s.forEach((function(e,r){!G.isUndefined(e)&&null!==e&&t.append(!0===o?ee([n],r,a):null===o?n:n+"[]",l(e))})),!1;return!!J(e)||(t.append(ee(i,n,a),l(e)),!1)}const c=[],d=Object.assign(te,{defaultVisitor:u,convertValue:l,isVisitable:J});if(!G.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!G.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),G.forEach(n,(function(n,a){!0===(!(G.isUndefined(n)||null===n)&&i.call(t,n,G.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),c.pop()}}(e),t};function re(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ie(e,t){this._pairs=[],e&&ne(e,this,t)}const ae=ie.prototype;ae.append=function(e,t){this._pairs.push([e,t])},ae.toString=function(e){const t=e?function(t){return e.call(this,t,re)}:re;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var oe=ie;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function le(e,t,n){if(!t)return e;const r=n&&n.encode||se;G.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):G.isURLSearchParams(t)?t.toString():new oe(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}var ue=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ce={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},de={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:oe,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const he="undefined"!=typeof window&&"undefined"!=typeof document,pe="object"==typeof navigator&&navigator||void 0,fe=he&&(!pe||["ReactNative","NativeScript","NS"].indexOf(pe.product)<0),me="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ge=he&&window.location.href||"http://localhost";var ve={...r,...de},ye=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),s=i>=e.length;return a=!a&&G.isArray(r)?r.length:a,s?(G.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&G.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&G.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!o)}if(G.isFormData(e)&&G.isFunction(e.entries)){const n={};return G.forEachEntry(e,((e,r)=>{t(function(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const be={transitional:ce,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=G.isObject(e);if(i&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return r?JSON.stringify(ye(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ne(e,new ve.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ve.isNode&&G.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=G.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ne(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e){if(G.isString(e))try{return(0,JSON.parse)(e),G.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||be.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Y.from(e,Y.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ve.classes.FormData,Blob:ve.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],(e=>{be.headers[e]={}}));var _e=be;const Ee=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Se=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function Te(e){return!1===e||null==e?e:G.isArray(e)?e.map(Te):String(e)}function Ce(e,t,n,r,i){return G.isFunction(r)?r.call(this,t,n):(i&&(t=n),G.isString(t)?G.isString(r)?-1!==t.indexOf(r):G.isRegExp(r)?r.test(t):void 0:void 0)}class ke{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=we(t);if(!i)throw new Error("header name must be a non-empty string");const a=G.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Te(e))}const a=(e,t)=>G.forEach(e,((e,n)=>i(e,n,t)));if(G.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(G.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Ee[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(G.isHeaders(e))for(const[t,r]of e.entries())i(r,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=we(e)){const n=G.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(G.isFunction(t))return t.call(this,e,n);if(G.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e)){const n=G.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ce(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=we(e)){const i=G.findKey(n,e);!i||t&&!Ce(0,n[i],i,t)||(delete n[i],r=!0)}}return G.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ce(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return G.forEach(this,((r,i)=>{const a=G.findKey(n,i);if(a)return t[a]=Te(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Te(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&G.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Se]=this[Se]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=we(e);t[r]||(function(e,t){const n=G.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return G.isArray(e)?e.forEach(r):r(e),this}}ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),G.reduceDescriptors(ke.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),G.freezeMethods(ke);var Ae=ke;function Pe(e,t){const n=this||_e,r=t||n,i=Ae.from(r.headers);let a=r.data;return G.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function xe(e){return!(!e||!e.__CANCEL__)}function Ie(e,t,n){Y.call(this,null==e?"canceled":e,Y.ERR_CANCELED,t,n),this.name="CanceledError"}G.inherits(Ie,Y,{__CANCEL__:!0});var Me=Ie;function Re(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Oe=(e,t,n=3)=>{let r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,o=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),u=r[o];i||(i=l),n[a]=s,r[a]=l;let c=o,d=0;for(;c!==a;)d+=n[c++],c%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),l-i<t)return;const h=u&&l-u;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,i=0,a=1e3/t;const o=(t,a=Date.now())=>{i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-i;s>=a?o(e,t):(n=e,r||(r=setTimeout((()=>{r=null,o(n)}),a-s)))},()=>n&&o(n)]}((n=>{const a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,l=i(s);r=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},Le=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},De=e=>(...t)=>G.asap((()=>e(...t)));var Ne=ve.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ve.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ve.origin),ve.navigator&&/(msie|trident)/i.test(ve.navigator.userAgent)):()=>!0,Fe=ve.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const o=[e+"="+encodeURIComponent(t)];G.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),G.isString(r)&&o.push("path="+r),G.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function je(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Be=e=>e instanceof Ae?{...e}:e;function Ue(e,t){t=t||{};const n={};function r(e,t,n,r){return G.isPlainObject(e)&&G.isPlainObject(t)?G.merge.call({caseless:r},e,t):G.isPlainObject(t)?G.merge({},t):G.isArray(t)?t.slice():t}function i(e,t,n,i){return G.isUndefined(t)?G.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!G.isUndefined(t))return r(void 0,t)}function o(e,t){return G.isUndefined(t)?G.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,n)=>i(Be(e),Be(t),0,!0)};return G.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||i,o=a(e[r],t[r],r);G.isUndefined(o)&&a!==s||(n[r]=o)})),n}var qe=e=>{const t=Ue({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:l}=t;if(t.headers=s=Ae.from(s),t.url=le(je(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),G.isFormData(r))if(ve.hasStandardBrowserEnv||ve.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(ve.hasStandardBrowserEnv&&(i&&G.isFunction(i)&&(i=i(t)),i||!1!==i&&Ne(t.url))){const e=a&&o&&Fe.read(o);e&&s.set(a,e)}return t},Ve="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=qe(e);let i=r.data;const a=Ae.from(r.headers).normalize();let o,s,l,u,c,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){u&&u(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Ae.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Re((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Y("Request aborted",Y.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Y("Network Error",Y.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||ce;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Y(t,i.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&G.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),G.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,c]=Oe(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([s,u]=Oe(h),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new Me(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===ve.protocols.indexOf(v)?n(new Y("Unsupported protocol "+v+":",Y.ERR_BAD_REQUEST,e)):m.send(i||null)}))},He=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Y?t:new Me(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Y(`timeout ${t} of ms exceeded`,Y.ETIMEDOUT))}),t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>G.asap(o),s}};const ze=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},We=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*ze(n,t)}(e,t);let a,o=0,s=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let a=r.byteLength;if(n){let e=o+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel(e){return s(e),i.return()}},{highWaterMark:2})},Ge="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Xe=Ge&&"function"==typeof ReadableStream,Ke=Ge&&("function"==typeof TextEncoder?($e=new TextEncoder,e=>$e.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var $e;const Ye=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Qe=Xe&&Ye((()=>{let e=!1;const t=new Request(ve.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Je=Xe&&Ye((()=>G.isReadableStream(new Response("").body))),Ze={stream:Je&&(e=>e.body)};var et;Ge&&(et=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ze[e]&&(Ze[e]=G.isFunction(et[e])?t=>t[e]():(t,n)=>{throw new Y(`Response type '${e}' is not supported`,Y.ERR_NOT_SUPPORT,n)})})));const tt={http:null,xhr:Ve,fetch:Ge&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=qe(e);u=u?(u+"").toLowerCase():"text";let p,f=He([i,a&&a.toAbortSignal()],o);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Qe&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=G.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(G.isBlob(e))return e.size;if(G.isSpecCompliantForm(e)){const t=new Request(ve.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return G.isArrayBufferView(e)||G.isArrayBuffer(e)?e.byteLength:(G.isURLSearchParams(e)&&(e+=""),G.isString(e)?(await Ke(e)).byteLength:void 0)})(t):n})(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(G.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=Le(g,Oe(De(l)));r=We(n.body,65536,e,t)}}G.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let a=await fetch(p);const o=Je&&("stream"===u||"response"===u);if(Je&&(s||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=G.toFiniteNumber(a.headers.get("content-length")),[n,r]=s&&Le(t,Oe(De(s),!0))||[];a=new Response(We(a.body,65536,n,(()=>{r&&r(),m&&m()})),e)}u=u||"text";let v=await Ze[G.findKey(Ze,u)||"text"](a,e);return!o&&m&&m(),await new Promise(((t,n)=>{Re(t,n,{data:v,headers:Ae.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Y("Network Error",Y.ERR_NETWORK,e,p),{cause:t.cause||t});throw Y.from(t,t&&t.code,e,p)}})};G.forEach(tt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const nt=e=>`- ${e}`,rt=e=>G.isFunction(e)||null===e||!1===e;var it=e=>{e=G.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!rt(n)&&(r=tt[(t=String(n)).toLowerCase()],void 0===r))throw new Y(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(nt).join("\n"):" "+nt(e[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function at(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Me(null,e)}function ot(e){return at(e),e.headers=Ae.from(e.headers),e.data=Pe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),it(e.adapter||_e.adapter)(e).then((function(t){return at(e),t.data=Pe.call(e,e.transformResponse,t),t.headers=Ae.from(t.headers),t}),(function(t){return xe(t)||(at(e),t&&t.response&&(t.response.data=Pe.call(e,e.transformResponse,t.response),t.response.headers=Ae.from(t.response.headers))),Promise.reject(t)}))}var st=n(8974);const lt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{lt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ut={};lt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Y(r(i," has been removed"+(t?" in "+t:"")),Y.ERR_DEPRECATED);return t&&!ut[i]&&(ut[i]=!0,st.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},lt.spelling=function(e){return(t,n)=>(st.warn(`${n} is likely a misspelling of ${e}`),!0)};var ct={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new Y("option "+a+" must be "+n,Y.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Y("Unknown option "+a,Y.ERR_BAD_OPTION)}},validators:lt};const dt=ct.validators;class ht{constructor(e){this.defaults=e,this.interceptors={request:new ue,response:new ue}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ue(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&ct.assertOptions(n,{silentJSONParsing:dt.transitional(dt.boolean),forcedJSONParsing:dt.transitional(dt.boolean),clarifyTimeoutError:dt.transitional(dt.boolean)},!1),null!=r&&(G.isFunction(r)?t.paramsSerializer={serialize:r}:ct.assertOptions(r,{encode:dt.function,serialize:dt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ct.assertOptions(t,{baseUrl:dt.spelling("baseURL"),withXsrfToken:dt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&G.merge(i.common,i[t.method]);i&&G.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ae.concat(a,i);const o=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,d=0;if(!s){const e=[ot.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);d<c;)u=u.then(e[d++],e[d++]);return u}c=o.length;let h=t;for(d=0;d<c;){const e=o[d++],t=o[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{u=ot.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,c=l.length;d<c;)u=u.then(l[d++],l[d++]);return u}getUri(e){return le(je((e=Ue(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}G.forEach(["delete","get","head","options"],(function(e){ht.prototype[e]=function(t,n){return this.request(Ue(n||{},{method:e,url:t,data:(n||{}).data}))}})),G.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ue(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ht.prototype[e]=t(),ht.prototype[e+"Form"]=t(!0)}));var pt=ht;class ft{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Me(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ft((function(t){e=t})),cancel:e}}}var mt=ft;const gt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gt).forEach((([e,t])=>{gt[t]=e}));var vt=gt;const yt=function e(t){const n=new pt(t),r=i(pt.prototype.request,n);return G.extend(r,pt.prototype,n,{allOwnKeys:!0}),G.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ue(t,n))},r}(_e);yt.Axios=pt,yt.CanceledError=Me,yt.CancelToken=mt,yt.isCancel=xe,yt.VERSION="1.8.4",yt.toFormData=ne,yt.AxiosError=Y,yt.Cancel=yt.CanceledError,yt.all=function(e){return Promise.all(e)},yt.spread=function(e){return function(t){return e.apply(null,t)}},yt.isAxiosError=function(e){return G.isObject(e)&&!0===e.isAxiosError},yt.mergeConfig=Ue,yt.AxiosHeaders=Ae,yt.formToJSON=e=>ye(G.isHTMLForm(e)?new FormData(e):e),yt.getAdapter=it,yt.HttpStatusCode=vt,yt.default=yt;var bt=yt;async function _t(e,t,n,r){const i={timeout:null,maxContentLength:null};function a(e){n instanceof Function&&n(e)}function o(e){if(r instanceof Function){let t=e;if(void 0===e.response)t={type:"network",error:e};else if(void 0!==e.response.status)switch(e.response.status){case 401:t={type:"private",error:e,message:"Media is private"};break;case 400:t={type:"unavailable",error:e,message:"Media is unavailable"}}r(t)}}t?await bt.get(e,i).then(a).catch(o||null):bt.get(e,i).then(a).catch(o||null)}async function Et(e,t,n,r,i,a){function o(e){i instanceof Function&&i(e)}function s(e){a instanceof Function&&a(e)}t=t||{},r?await bt.post(e,t,n||null).then(o).catch(s||null):bt.post(e,t,n||null).then(o).catch(s||null)}async function St(e,t,n,r,i,a){function o(e){i instanceof Function&&i(e)}function s(e){a instanceof Function&&a(e)}t=t||{},r?await bt.put(e,t,n||null).then(o).catch(s||null):bt.put(e,t,n||null).then(o).catch(s||null)}async function wt(e,t,n,r,i){function a(e){r instanceof Function&&r(e)}function o(e){i instanceof Function&&i(e)}t=t||{},n?await bt.delete(e,t||null).then(a).catch(o||null):bt.delete(e,t||null).then(a).catch(o||null)}},9677:function(e,t,n){"use strict";var r,i=n(5953),a=n(7570);try{r=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var o=!!r&&a&&a(Object.prototype,"__proto__"),s=Object,l=s.getPrototypeOf;e.exports=o&&"function"==typeof o.get?i([o.get]):"function"==typeof l&&function(e){return l(null==e?e:s(e))}},9718:function(e,t,n){"use strict";var r,i=n(3095),a=n(6788),o=n(8208),s=n(5785),l=n(7369),u=n(4121),c=n(4114),d=n(9394),h=n(5577),p=n(2411),f=n(2715),m=n(3289),g=n(9411),v=n(333),y=n(5020),b=Function,_=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},E=n(7570),S=n(70),w=function(){throw new c},T=E?function(){try{return w}catch(e){try{return E(arguments,"callee").get}catch(e){return w}}}():w,C=n(1064)(),k=n(2175),A=n(6031),P=n(5817),x=n(9289),I=n(7901),M={},R="undefined"!=typeof Uint8Array&&k?k(Uint8Array):r,O={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":C&&k?k([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":a,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?r:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":M,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&k?k(k([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&C&&k?k((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&C&&k?k((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&k?k(""[Symbol.iterator]()):r,"%Symbol%":C?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":T,"%TypedArray%":R,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":d,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":x,"%Object.defineProperty%":S,"%Object.getPrototypeOf%":A,"%Math.abs%":h,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":v,"%Math.sign%":y,"%Reflect.getPrototypeOf%":P};if(k)try{null.error}catch(e){var L=k(k(e));O["%Error.prototype%"]=L}var D=function e(t){var n;if("%AsyncFunction%"===t)n=_("async function () {}");else if("%GeneratorFunction%"===t)n=_("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=_("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&k&&(n=k(i.prototype))}return O[t]=n,n},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F=n(9932),j=n(8396),B=F.call(I,Array.prototype.concat),U=F.call(x,Array.prototype.splice),q=F.call(I,String.prototype.replace),V=F.call(I,String.prototype.slice),H=F.call(I,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,G=function(e,t){var n,r=e;if(j(N,r)&&(r="%"+(n=N[r])[0]+"%"),j(O,r)){var i=O[r];if(i===M&&(i=D(r)),void 0===i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=V(e,0,1),n=V(e,-1);if("%"===t&&"%"!==n)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return q(e,z,(function(e,t,n,i){r[r.length]=n?q(i,W,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=G("%"+r+"%",t),a=i.name,o=i.value,s=!1,l=i.alias;l&&(r=l[0],U(n,B([0,1],l)));for(var d=1,h=!0;d<n.length;d+=1){var p=n[d],f=V(p,0,1),m=V(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===m||"'"===m||"`"===m)&&f!==m)throw new u("property names with quotes must have matching quotes");if("constructor"!==p&&h||(s=!0),j(O,a="%"+(r+="."+p)+"%"))o=O[a];else if(null!=o){if(!(p in o)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(E&&d+1>=n.length){var g=E(o,p);o=(h=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:o[p]}else h=j(o,p),o=o[p];h&&!s&&(O[a]=o)}}return o}},9722:function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(6838),a=Object.keys,o=a?function(e){return a(e)}:n(1730),s=Object.keys;o.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=o;return Object.keys||o},e.exports=o},9761:function(e,t,n){"use strict";var r=n(7118),i=n(9471),a=n(3063),o=n(7190),s=n(1662),l=n(5453),u=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(i),c=function(){return u.createElement(r.Icon,{size:16},u.createElement("path",{d:"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\n            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\n            c0.552,0,1,0.448,1,1L11.5,10.5z\n            M14.5,6.499h6\n            M14.5,10.499h6\n            M3.5,14.499h17\n            M3.5,18.499h16.497"}))},d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},h=function(){return u.createElement(r.Icon,{size:16},u.createElement("path",{d:"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\n            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\n            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9"}))},p=function(){return u.createElement(r.Icon,{size:16},u.createElement("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"}))},f={left:8,top:0},m={left:-8,top:0},g=function(e){var t=e.attachmentTabContent,n=e.bookmarkTabContent,i=e.store,a=e.thumbnailTabContent,o=e.tabs,s=u.useRef(),l=u.useContext(r.LocalizationContext).l10n,d=u.useState(i.get("isCurrentTabOpened")||!1),g=d[0],v=d[1],y=u.useState(Math.max(i.get("currentTab")||0,0)),b=y[0],_=y[1],E=u.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,S=[{content:a,icon:u.createElement(p,null),title:l&&l.defaultLayout?l.defaultLayout.thumbnail:"Thumbnail"},{content:n,icon:u.createElement(c,null),title:l&&l.defaultLayout?l.defaultLayout.bookmark:"Bookmark"},{content:t,icon:u.createElement(h,null),title:l&&l.defaultLayout?l.defaultLayout.attachment:"Attachment"}],w=o?o(S):S,T=function(e){e>=0&&e<=w.length-1&&(i.update("isCurrentTabOpened",!0),_(e))},C=function(e){v(e)};return u.useEffect((function(){return i.subscribe("currentTab",T),i.subscribe("isCurrentTabOpened",C),function(){i.unsubscribe("currentTab",T),i.unsubscribe("isCurrentTabOpened",C)}}),[]),0===w.length?u.createElement(u.Fragment,null):u.createElement(u.Fragment,null,u.createElement("div",{"data-testid":"default-layout__sidebar",className:r.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":g,"rpv-default-layout__sidebar--ltr":!E,"rpv-default-layout__sidebar--rtl":E}),ref:s},u.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},u.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},w.map((function(e,t){return u.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":b===t,key:t,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(t),role:"tab"},u.createElement(r.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(t),position:E?r.Position.LeftCenter:r.Position.RightCenter,target:u.createElement(r.MinimalButton,{ariaLabel:e.title,isSelected:b===t,onClick:function(){return function(e){if(b===e){i.update("isCurrentTabOpened",!i.get("isCurrentTabOpened"));var t=s.current;t&&t.style.width&&t.style.removeProperty("width")}else i.update("currentTab",e)}(t)}},e.icon),content:function(){return e.title},offset:E?m:f}))}))),u.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(b),id:"rpv-default-layout__sidebar-content",className:r.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":g,"rpv-default-layout__sidebar-content--ltr":!E,"rpv-default-layout__sidebar-content--rtl":E}),role:"tabpanel",tabIndex:-1},w[b].content))),g&&u.createElement(r.Splitter,{constrain:function(e){return e.firstHalfPercentage>=20&&e.firstHalfPercentage<=80}}))};t.defaultLayoutPlugin=function(e){var t=u.useMemo((function(){return r.createStore({isCurrentTabOpened:!1,currentTab:0})}),[]),n=a.attachmentPlugin(),i=o.bookmarkPlugin(),c=s.thumbnailPlugin(e?e.thumbnailPlugin:{}),h=l.toolbarPlugin(e?e.toolbarPlugin:{}),p=n.Attachments,f=i.Bookmarks,m=c.Thumbnails,v=h.Toolbar,y=e?e.sidebarTabs:function(e){return e},b=[n,i,c,h];return{attachmentPluginInstance:n,bookmarkPluginInstance:i,thumbnailPluginInstance:c,toolbarPluginInstance:h,activateTab:function(e){t.update("currentTab",e)},toggleTab:function(e){var n=t.get("currentTab");t.update("isCurrentTabOpened",!t.get("isCurrentTabOpened")),n!==e&&t.update("currentTab",e)},install:function(e){b.forEach((function(t){t.install&&t.install(e)}))},renderPageLayer:function(e){return u.createElement(u.Fragment,null,b.map((function(t,n){return t.renderPageLayer?u.createElement(u.Fragment,{key:n},t.renderPageLayer(e)):u.createElement(u.Fragment,{key:n},u.createElement(u.Fragment,null))})))},renderViewer:function(n){var i=n.slot;b.forEach((function(e){e.renderViewer&&(i=e.renderViewer(d(d({},n),{slot:i})))}));var a=i.subSlot&&i.subSlot.attrs?{className:i.subSlot.attrs.className,"data-testid":i.subSlot.attrs["data-testid"],ref:i.subSlot.attrs.ref,style:i.subSlot.attrs.style}:{};return i.children=u.createElement("div",{className:"rpv-default-layout__container"},u.createElement("div",{"data-testid":"default-layout__main",className:r.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":n.themeContext.direction===r.TextDirection.RightToLeft})},u.createElement(g,{attachmentTabContent:u.createElement(p,null),bookmarkTabContent:u.createElement(f,null),store:t,thumbnailTabContent:u.createElement(m,null),tabs:y}),u.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},u.createElement("div",{className:"rpv-default-layout__toolbar"},e&&e.renderToolbar?e.renderToolbar(v):u.createElement(v,null)),u.createElement("div",d({},a),i.subSlot.children))),i.children),i.subSlot.attrs={},i.subSlot.children=u.createElement(u.Fragment,null),i},uninstall:function(e){b.forEach((function(t){t.uninstall&&t.uninstall(e)}))},onDocumentLoad:function(n){b.forEach((function(e){e.onDocumentLoad&&e.onDocumentLoad(n)})),e&&e.setInitialTab&&e.setInitialTab(n.doc).then((function(e){t.update("currentTab",e),t.update("isCurrentTabOpened",!0)}))},onAnnotationLayerRender:function(e){b.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender(e)}))},onTextLayerRender:function(e){b.forEach((function(t){t.onTextLayerRender&&t.onTextLayerRender(e)}))},onViewerStateChange:function(e){var t=e;return b.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),t}}}},9781:function(e,t,n){"use strict";n.r(t),n.d(t,{ApiUrlConsumer:function(){return o},ApiUrlContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).api),o=a.Consumer},9817:function(e,t,n){"use strict";e.exports=n(8582)},9829:function(e,t,n){"use strict";var r=n(6550);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},9834:function(e,t,n){"use strict";var r=n(8974);!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){r.error(e)}}(),e.exports=n(7230)},9836:function(e,t,n){"use strict";var r=n(2756),i=n(5935),a=n(5328),o=n(9157),s=n(8627),l=r(o(),Number);i(l,{getPolyfill:o,implementation:a,shim:s}),e.exports=l},9852:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var o,s,l={};function u(e,t,n){n||(n=Error);var o=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,n);var o,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(s);if(l){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a=u.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i)),a.code=e,a}return o=c,Object.defineProperty(o,"prototype",{writable:!1}),o}(n);l[e]=o}function c(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",(function(e,t,i){var a,s,l,u,d;if(void 0===o&&(o=n(3615)),o("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(0,4)===s)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))l="The ".concat(e," ").concat(a," ").concat(c(t,"type"));else{var h=("number"!=typeof d&&(d=0),d+1>(u=e).length||-1===u.indexOf(".",d)?"argument":"property");l='The "'.concat(e,'" ').concat(h," ").concat(a," ").concat(c(t,"type"))}return l+". Received type ".concat(r(i))}),TypeError),u("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=n(6818));var i=s.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),u("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===o&&(o=n(3615)),o(t.length>0,"At least one arg needs to be specified");var i="The ",a=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),a){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,a-1).join(", "),i+=", and ".concat(t[a-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=l},9854:function(e,t,n){"use strict";n.r(t),n.d(t,{SidebarConsumer:function(){return o},SidebarContext:function(){return a}});var r=n(9471),i=n(3997);const a=(0,r.createContext)((0,i.$)(window.MediaCMS).sidebar),o=a.Consumer},9922:function(e,t,n){"use strict";var r=n(8974);const i=n(7961),a=n(1024),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;const s=2147483647;function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=l(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);const i=function(e){if(u.isBuffer(e)){const t=0|m(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?l(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return d(e),l(e<0?0:0|m(e))}function p(e){const t=e.length<0?0:0|m(e.length),n=l(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function m(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return r?-1:X(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){let a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*o}else-1!==r&&(a-=a-r),r=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let r=0;r<l;r++)if(u(e,a+r)!==u(t,r)){n=!1;break}if(n)return a}return-1}function E(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=t.length;let o;for(r>a/2&&(r=a/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(Q(r))return o;e[n+o]=r}return o}function S(e,t,n,r){return $(X(t,e.length-n),e,n,r)}function w(e,t,n,r){return $(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return $(K(t),e,n,r)}function C(e,t,n,r){return $(function(e,t){let n,r,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=o}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"==typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}(e,t,n)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=u.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))i+t.length>r.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==c[e]){a=l[e],o=c[e];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function x(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function R(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i){H(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function N(e,t,n,r,i){H(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function F(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),a.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Z((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Z((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Z((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Z((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Z((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=u.isBuffer(e)?e:u.from(e,r),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};const U={};function q(e,t,n){U[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function V(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function H(e,t,n,r,i,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(r,i,a)}function z(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=V(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=V(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function X(e,t){let n;t=t||1/0;const r=e.length;let i=null;const a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},9932:function(e,t,n){"use strict";var r=n(5712);e.exports=Function.prototype.bind||r}}]);