/*! For license information please see media.js.LICENSE.txt */
!function(){var e,t={463:function(e,t,i){"use strict";i.d(t,{c:function(){return o}});var a=i(4571),n=i.n(a);function o(e,t){let i=n()(e,{});return""!==i.origin&&"null"!==i.origin&&i.origin||(i=n()(t+"/"+e.replace(/^\//g,""),{})),i.toString()}},878:function(e,t,i){"use strict";i.d(t,{c:function(){return d}});var a=i(9471),n=i(8713),o=i.n(n),s=i(6387),l=i(5321),r=i(2828);function d(e){const{thumbnail:t}=(0,s.useUser)(),i={"aria-label":"Account profile photo that opens list of options and settings pages links",className:"thumbnail"};switch(e.isButton?void 0!==e.onClick&&(i.onClick=e.onClick):i.type="span",e.size){case"small":case"large":i.className+=" "+e.size+"-thumb"}return a.createElement(l.i,i,t?a.createElement("img",{src:t,alt:""}):a.createElement(r.Z,{type:"person"}))}d.propTypes={isButton:o().bool,size:o().oneOf(["small","medium","large"]),onClick:o().func},d.defaultProps={isButton:!1,size:"medium"}},1353:function(e,t,i){"use strict";var a=i(2985),n=i(9471),o=i(8790),s=i(7460);function l(){return n.createElement("div",{className:"player-container viewer-attachment-container"},n.createElement("div",{className:"player-container-inner"},n.createElement("span",null,n.createElement("span",null,n.createElement("i",{className:"material-icons"},"insert_drive_file")))))}var r=i(8713),d=i.n(r),u=i(4480),c=i.n(u),m=i(1838),p=i(285),h=i(7154);function g(e){let t=null,i=e.split(".");if(i.length)switch(i=i[i.length-1],i){case"webm":t="audio/webm";break;case"flac":t="audio/flac";break;case"wave":t="audio/wave";break;case"wav":t="audio/wav";break;case"ogg":case"ogg":t="audio/ogg";break;case"mp3":case"mpeg":t="audio/mpeg"}return t}var f=i(8974);class y extends n.PureComponent{constructor(e){super(e);let t=s.MediaPageStore.get("media-data");this.AudioPlayerData={},this.audioStartedPlaying=!1;let i=(0,m.formatInnerLink)(t.original_media_url,o.SiteContext._currentValue.url);this.videoSources=[{src:i,type:g(i)}],this.videoPoster=t.poster_url,this.videoPoster=this.videoPoster?this.videoPoster:t.thumbnail_url,this.videoPoster=this.videoPoster?(0,m.formatInnerLink)(this.videoPoster,o.SiteContext._currentValue.url):"",this.updatePlayerVolume=this.updatePlayerVolume.bind(this),this.onAudioEnd=this.onAudioEnd.bind(this),this.onAudioRestart=this.onAudioRestart.bind(this),s.PageStore.on("switched_media_auto_play",this.onUpdateMediaAutoPlay.bind(this)),this.wrapperClick=this.wrapperClick.bind(this);const a=new h.MediaDurationInfo;a.update(s.MediaPageStore.get("media-data").duration),this.durationISO8601=a.ISO8601()}componentDidMount(){this.videoSources.length||f.warn("Audio DEBUG:","Audio file doesn't exist"),this.recommendedMedia=s.MediaPageStore.get("media-data").related_media.length?new h.PlayerRecommendedMedia(s.MediaPageStore.get("media-data").related_media,this.refs.AudioElem.parentNode,this.props.inEmbed):null,this.upNextLoaderView=!this.props.inEmbed&&s.MediaPageStore.get("media-data").related_media.length?new h.UpNextLoaderView(s.MediaPageStore.get("media-data").related_media[0]):null,document.hasFocus()||"visible"===document.visibilityState?this.initPlayerInstance():(this.initPlayerInstance=this.initPlayerInstance.bind(this),window.addEventListener("focus",this.initPlayerInstance),document.addEventListener("visibilitychange",this.initPlayerInstance))}componentWillUnmount(){this.recommendedMedia&&(this.AudioPlayerData.instance.player.off("fullscreenchange",this.recommendedMedia.onResize),s.PageStore.removeListener("window_resize",this.recommendedMedia.onResize),s.VideoViewerStore.removeListener("changed_viewer_mode",this.recommendedMedia.onResize),this.recommendedMedia.destroy()),videojs(this.refs.AudioElem).dispose(),this.AudioPlayerData.instance=null,delete this.AudioPlayerData.instance}initPlayerInstance(){window.removeEventListener("focus",this.initPlayerInstance),document.removeEventListener("visibilitychange",this.initPlayerInstance),this.refs.AudioElem.focus(),this.initPlayerInstance=null,setTimeout(function(){if(!this.AudioPlayerData.instance){let e=this.props.inEmbed?document.createElement("a"):null,t=this.props.inEmbed?document.createElement("a"):null;e&&(e.setAttribute("class","title-link"),e.setAttribute("href",s.MediaPageStore.get("media-data").url),e.setAttribute("title",s.MediaPageStore.get("media-data").title),e.setAttribute("target","_blank"),e.innerHTML=s.MediaPageStore.get("media-data").title),t&&(t.setAttribute("class","user-thumb-link"),t.setAttribute("href",s.MediaPageStore.get("media-data").author_profile),t.setAttribute("title",s.MediaPageStore.get("media-data").author_name),t.setAttribute("target","_blank"),t.innerHTML='<img src="'+s.MediaPageStore.get("media-author-thumbnail-url")+'" alt="" />');let i=null,a=null;!this.props.inEmbed&&s.MediaPageStore.get("playlist-id")?(i=s.MediaPageStore.get("playlist-next-media-url"),a=s.MediaPageStore.get("playlist-previous-media-url")):i=s.MediaPageStore.get("media-data").related_media.length&&!this.props.inEmbed?s.MediaPageStore.get("media-data").related_media[0].url:null,this.AudioPlayerData.instance=new(c())(this.refs.AudioElem,{sources:this.videoSources,poster:this.videoPoster,autoplay:!this.props.inEmbed,bigPlayButton:!0,controlBar:{fullscreen:!1,theaterMode:!1,next:!!i,previous:!!a},cornerLayers:{topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:t}},{volume:s.VideoViewerStore.get("player-volume"),soundMuted:s.VideoViewerStore.get("player-sound-muted")},null,null,this.onAudioPlayerStateUpdate.bind(this),this.onClickNextButton.bind(this),this.onClickPreviousButton.bind(this)),this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.AudioPlayerData.instance.player.el_),this.onUpdateMediaAutoPlay()),this.refs.AudioElem.parentNode.focus(),this.AudioPlayerData.instance.player.one("play",function(){this.audioStartedPlaying=!0}.bind(this)),this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.AudioPlayerData.instance.player.el_),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.on("fullscreenchange",this.recommendedMedia.onResize),s.PageStore.on("window_resize",this.recommendedMedia.onResize),s.VideoViewerStore.on("changed_viewer_mode",this.recommendedMedia.onResize)),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd)}}.bind(this),50)}initialDocumentFocus(){this.refs.AudioElem.parentNode&&(this.refs.AudioElem.parentNode.focus(),setTimeout(function(){this.AudioPlayerData.instance.player.play()}.bind(this),50)),window.removeEventListener("focus",this.initialDocumentFocus),this.initialDocumentFocus=null}onClickNextButton(){let e;s.MediaPageStore.get("playlist-id")?(e=s.MediaPageStore.get("playlist-next-media-url"),null===e&&(e=s.MediaPageStore.get("media-data").related_media[0].url)):this.props.inEmbed||(e=s.MediaPageStore.get("media-data").related_media[0].url),window.location.href=e}onClickPreviousButton(){let e;s.MediaPageStore.get("playlist-id")?(e=s.MediaPageStore.get("playlist-previous-media-url"),null===e&&(e=s.MediaPageStore.get("media-data").related_media[0].url)):this.props.inEmbed||(e=s.MediaPageStore.get("media-data").related_media[0].url),window.location.href=e}onUpdateMediaAutoPlay(){this.upNextLoaderView&&(s.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.AudioPlayerData.instance.isEnded()):this.upNextLoaderView.hideTimerView())}onAudioPlayerStateUpdate(e){this.updatePlayerVolume(e.volume,e.soundMuted)}onAudioRestart(){this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd))}onAudioEnd(){if(this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("full"),this.AudioPlayerData.instance.player.one("playing",this.onAudioRestart)),!this.props.inEmbed&&s.MediaPageStore.get("playlist-id")){const e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");this.upNextLoaderView.cancelTimer();const i=s.MediaPageStore.get("playlist-next-media-url");return i&&(e&&(e.style.display="none"),t&&(t.style.display="none"),window.location.href=i),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(s.PageStore.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.AudioPlayerData.instance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}onUpdateMediaAutoPlay(){this.upNextLoaderView&&(s.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.AudioPlayerData.instance.isEnded()):this.upNextLoaderView.hideTimerView())}updatePlayerVolume(e,t){s.VideoViewerStore.get("player-volume")!==e&&p.VideoViewerActions.set_player_volume(e),s.VideoViewerStore.get("player-sound-muted")!==t&&p.VideoViewerActions.set_player_sound_muted(t)}wrapperClick(e){e.target.parentNode===this.refs.videoPlayerWrap&&(this.AudioPlayerData.instance.player.ended()||(!this.AudioPlayerData.instance.player.hasStarted_||this.AudioPlayerData.instance.player.paused()?this.AudioPlayerData.instance.player.play():this.AudioPlayerData.instance.player.pause()))}render(){return n.createElement("div",{className:"player-container audio-player-container"},n.createElement("div",{className:"player-container-inner"},n.createElement("div",{className:"video-player",ref:"videoPlayerWrap",onClick:this.wrapperClick},n.createElement("audio",{tabIndex:"1",ref:"AudioElem",className:"video-js vjs-mediacms native-dimensions"}))))}}y.defaultProps={inEmbed:!1},y.propTypes={inEmbed:d().bool};var v=i(7664),b=function(e){let{children:t,content:i,title:a,position:o="right",classNames:s=""}=e;const[l,r]=(0,n.useState)(!1),[d,u]=(0,n.useState)({height:0,width:0}),c=(0,n.useRef)(null);(0,n.useEffect)((()=>{c.current&&u({height:c.current.clientHeight||0,width:c.current.clientWidth||0})}),[l]);const m={right:{left:"100%",marginLeft:"10px",top:"-50%"},left:{right:"100%",marginRight:"10px",top:"-50%"},top:{left:"50%",top:`-${d.height+10}px`,transform:"translateX(-50%)"},center:{top:"50%",left:"50%",translate:"x-[-50%]"},"bottom-left":{left:`-${d.width-20}px`,top:"100%",marginTop:"10px"}};return n.createElement("div",{onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)}},n.createElement("div",{ref:c,className:`tooltip-box ${l?"show":"hide"} ${s}`,style:m[o]},a&&n.createElement("div",{className:"tooltip-title"},a),n.createElement("div",{className:"tooltip-content"},i)),t)};function S(){const e=(0,n.useContext)(o.SiteContext);let t=y();t=t||s.MediaPageStore.get("media-data").thumbnail_url,t=t||"";const[i,a]=(0,n.useState)(t),[l,r]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1),[c,m]=(0,n.useState)(0),[p,h]=(0,n.useState)(!0),g=n.useRef();function f(){a(y())}function y(){const t=s.MediaPageStore.get("media-data");let i=t.poster_url?.trim()||t.thumbnail_url?.trim()||s.MediaPageStore.get("media-original-url")?.trim()||"#";return e.url+"/"+i.replace(/^\//g,"")}(0,n.useEffect)((()=>{i&&(()=>{const e=s.MediaPageStore.get("media-data").slideshow_items;Array.isArray(e)&&r(e)})()}),[i]),(0,n.useEffect)((()=>(s.MediaPageStore.on("loaded_image_data",f),()=>s.MediaPageStore.removeListener("loaded_image_data",f))),[]),(0,n.useEffect)((()=>{if(d)return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}}),[d,l]);const S=e=>{"ArrowRight"===e.key&&k(),"ArrowLeft"===e.key&&E(),"Escape"===e.key&&P()},P=()=>u(!1),k=()=>{h(!0),m((e=>(e+1)%l.length))},E=()=>{h(!0),m((e=>(e-1+l.length)%l.length))},w=e=>{if(g.current){const t=10;"left"===e?g.current.scrollBy({left:-t,behavior:"smooth"}):"right"===e&&g.current.scrollBy({left:t,behavior:"smooth"})}};return i?n.createElement("div",{className:"viewer-image-container"},n.createElement(b,{content:"load full-image",position:"center"},n.createElement("img",{src:i,alt:s.MediaPageStore.get("media-data").title||null,onClick:()=>u(!0)})),d&&l&&n.createElement("div",{className:"modal-overlay",onClick:()=>u(!1)},n.createElement("div",{className:"slideshow-container",onClick:e=>e.stopPropagation()},!p&&n.createElement("button",{className:"arrow left",onClick:E,"aria-label":"Previous slide"},"‹"),n.createElement("div",{className:"slideshow-image"},p&&n.createElement(v.SpinnerLoader,{size:"large"}),n.createElement("img",{src:e.url+"/"+l[c]?.original_media_url,alt:`Slide ${c+1}`,onClick:()=>(t=>{const i=e.url+l[t]?.url;window.location.href=i})(c),onLoad:()=>h(!1),onError:()=>h(!1),style:{display:p?"none":"block"}}),!p&&n.createElement("div",{className:"slideshow-title"},l[c]?.title)),!p&&n.createElement("button",{className:"arrow right",onClick:k,"aria-label":"Next slide"},"›"),n.createElement("div",{className:"thumbnail-navigation"},l.length>5&&n.createElement("button",{className:"arrow left",onClick:()=>w("left"),"aria-label":"Scroll left"},"‹"),n.createElement("div",{className:"thumbnail-container "+(l.length<=5?"center-thumbnails":""),ref:g},l.map(((t,i)=>n.createElement("img",{key:i,src:e.url+"/"+t.thumbnail_url,alt:`Thumbnail ${i+1}`,className:"thumbnail "+(c===i?"active":""),onClick:()=>(e=>{h(!0),m(e)})(i)})))),l.length>5&&n.createElement("button",{className:"arrow right",onClick:()=>w("right"),"aria-label":"Scroll right"},"›"))))):null}var P=i(7118),k=i(5928);function E(e){let{fileUrl:t}=e;const i=(0,k.defaultLayoutPlugin)();return n.createElement("div",{className:"pdf-container"},n.createElement(P.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.min.js"},n.createElement(P.Viewer,{fileUrl:t,plugins:[i]})))}var w=i(2818),_=i(5615),M=i(4571),C=i.n(M),x=i(237),N=(i(4441),i(2831),i(2999),i(1026),i(8974));function T(e,t){let i=C()(e,{});return""!==i.origin&&"null"!==i.origin&&i.origin||(i=C()(t+"/"+e.replace(/^\//g,""),{})),i.toString()}function O(e){return n.createElement("div",{className:"error-container"},n.createElement("div",{className:"error-container-inner"},n.createElement("span",{className:"icon-wrap"},n.createElement("i",{className:"material-icons"},"error_outline")),n.createElement("span",{className:"msg-wrap"},e.errorMessage)))}function L(e){N.log("props player embed",e);const t=(0,n.useRef)(null),i=(0,n.useRef)(null),a={playerVolume:e.playerVolume??1,playerSoundMuted:e.playerSoundMuted??!1,videoQuality:e.videoQuality??"Auto",videoPlaybackSpeed:e.videoPlaybackSpeed??1,inTheaterMode:e.inTheaterMode??!1},o=()=>{if(i.current||e.errorMessage||!t.current)return;e.inEmbed||(window.removeEventListener("focus",o),document.removeEventListener("visibilitychange",o),t.current.focus());const n={on:!1,languages:[]};let s;e.subtitlesInfo?.length&&(e.subtitlesInfo.forEach((t=>{t.src&&t.srclang&&t.label&&n.languages.push({src:T(t.src,e.siteUrl),srclang:t.srclang,label:t.label})})),n.on=n.languages.length>0),N.log("props",e);const l=e.url.split("m=")[1];if(""!==e.stream){const t=(e=>{try{return new URL(e).pathname.split("/").filter(Boolean)[0]||null}catch{return null}})(e.stream),i=e.playback_url_token?.[t],a=i?`${e.stream}?${i.token}`:e.stream;N.log("🎯 Stream key detectado:",t),N.log("🔐 Token aplicado:",i?.token),N.log("▶️ Final HLS URL:",a),s=[{src:a,type:"application/x-mpegURL"}]}else s=[{src:"https://scl.edge.grupoz.cl/mediavms-development/smil:"+l+".smil/playlist.m3u8",type:"application/x-mpegURL"}];const r=(0,x.A)(t.current,{enabledTouchControls:!0,controls:!0,autoplay:!0,muted:!1,liveui:!0,poster:e.poster,sources:s,bigPlayButton:!0,volume:a.playerVolume,soundMuted:a.playerSoundMuted,theaterMode:a.inTheaterMode,videoPreviewThumb:e.previewSprite,controlBar:{theaterMode:e.hasTheaterMode,pictureInPictureToggle:!1,next:e.hasNextLink,previous:e.hasPreviousLink,enableLowInitialPlaylist:!1}});r.qualityLevels(),r.httpSourceSelector({default:"auto"}),""!==e.hls_file&&(r.volume(0),r.muted(!0)),n.on&&n.languages.forEach((e=>{r.addRemoteTextTrack({kind:"subtitles",src:e.src,srclang:e.srclang,label:e.label,default:!1},!1)})),N.log("props video embed",e.adsTag),null!==e.adsTag&&r.ima({id:"content_video_html5_api",adTagUrl:e.adsTag.url}),r.ready((function(){r.on("loadedmetadata",(()=>{t=r.duration()}));let t=0,i={25:!1,50:!1,75:!1};t=r.duration(),r.on("play",(()=>{window._paq&&(N.log("play"),window._paq.push(["trackEvent","Video","Play",e.title||"Video sin título"]))})),r.on("ended",(()=>{N.log("ended"),window._paq&&window._paq.push(["trackEvent","Video","Ended",e.title||"Video sin título"])})),r.on("timeupdate",(()=>{const a=r.currentTime()/t*100,n=Math.floor(a);n>=25&&!i[25]&&(window._paq.push(["trackEvent","Video","25%",e.title]),i[25]=!0),n>=50&&!i[50]&&(window._paq.push(["trackEvent","Video","50%",e.title]),i[50]=!0),n>=75&&!i[75]&&(window._paq.push(["trackEvent","Video","75%",e.title]),i[75]=!0)}))}))};return(0,n.useEffect)((()=>{if(window.google?.ima)o();else{const e=document.createElement("script");e.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",e.async=!0,e.onload=()=>{N.log("✅ Google IMA SDK cargado"),o()},document.body.appendChild(e)}return()=>{i.current&&(i.current.dispose(),i.current=null)}}),[]),null===e.errorMessage?n.createElement("video",{ref:t,id:"content_video",className:"video-js vjs-mediacms native-dimensions"}):n.createElement(O,{errorMessage:e.errorMessage})}O.propTypes={errorMessage:d().string.isRequired},L.propTypes={playerVolume:d().string,playerSoundMuted:d().bool,videoQuality:d().string,videoPlaybackSpeed:d().number,inTheaterMode:d().bool,siteId:d().string.isRequired,siteUrl:d().string.isRequired,errorMessage:d().string,cornerLayers:d().object,inEmbed:d().bool.isRequired,sources:d().array.isRequired,info:d().object.isRequired,enableAutoplay:d().bool.isRequired,hasTheaterMode:d().bool.isRequired,poster:d().string,adsTag:d().object,hls_file:d().string,previewSprite:d().object,onClickPreviousCallback:d().func,onClickNextCallback:d().func,onPlayerInitCallback:d().func,onStateUpdateCallback:d().func,onUnmountCallback:d().func},L.defaultProps={errorMessage:null,cornerLayers:{}};var j=i(8974);class A extends n.PureComponent{constructor(e){if(super(e),this.state={displayPlayer:!1},this.videoSources=[],j.log("this.props.data",this.props),function(e){switch(e){case"running":s.MediaPageStore.set("media-load-error-type","encodingRunning"),s.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes.");break;case"pending":s.MediaPageStore.set("media-load-error-type","encodingPending"),s.MediaPageStore.set("media-load-error-message","Media encoding is pending");break;case"fail":s.MediaPageStore.set("media-load-error-type","encodingFailed"),s.MediaPageStore.set("media-load-error-message","Media encoding failed")}}(this.props.data.encoding_status),null!==s.MediaPageStore.get("media-load-error-type"))return void(this.state.displayPlayer=!0);if("string"==typeof this.props.data.poster_url?this.videoPoster=(0,m.formatInnerLink)(this.props.data.poster_url,this.props.siteUrl):"string"==typeof this.props.data.thumbnail_url&&(this.videoPoster=(0,m.formatInnerLink)(this.props.data.thumbnail_url,this.props.siteUrl)),this.videoInfo=(0,w.uW)(this.props.data.encodings_info,this.props.data.hls_info),Object.keys(this.videoInfo).length){let e=s.VideoViewerStore.get("video-quality");(null===e||"Auto"===e&&void 0===this.videoInfo.Auto)&&(e=720);let t=(0,w.OQ)(e,this.videoInfo);"Auto"===e&&void 0!==this.videoInfo.Auto&&this.videoSources.push({src:this.videoInfo.Auto.url[0]});const i=(0,w.n1)();let a,n;for(n=0;n<this.videoInfo[t].format.length;){if("hls"===this.videoInfo[t].format[n]){this.videoSources.push({src:this.videoInfo[t].url[n]});break}n+=1}for(n in this.props.data.encodings_info[t])this.props.data.encodings_info[t].hasOwnProperty(n)&&i.support[n]&&(a=this.props.data.encodings_info[t][n].url,a&&(a=(0,m.formatInnerLink)(a,this.props.siteUrl),this.videoSources.push({src:a,encodings_status:this.props.data.encodings_info[t][n].status})));j.log("this.videoSources",this.videoSources)}else this.videoInfo=null;if(this.videoSources.length){if(!this.props.inEmbed&&1===this.videoSources.length&&"running"===this.videoSources[0].encodings_status)return s.MediaPageStore.set("media-load-error-type","encodingRunning"),void s.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes.")}else switch(s.MediaPageStore.get("media-load-error-type")){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:j.warn("VIDEO DEBUG:","Video files don't exist")}s.PageStore.on("switched_media_auto_play",this.onUpdateMediaAutoPlay.bind(this)),this.browserCache=new h.BrowserCache(o.SiteContext._currentValue.id,86400);const t=new h.MediaDurationInfo;t.update(this.props.data.duration),this.durationISO8601=t.ISO8601(),this.playerElem=null,this.playerInstance=null,this.onPlayerInit=this.onPlayerInit.bind(this),this.onClickNext=this.onClickNext.bind(this),this.onClickPrevious=this.onClickPrevious.bind(this),this.onStateUpdate=this.onStateUpdate.bind(this),this.onVideoEnd=this.onVideoEnd.bind(this),this.onVideoRestart=this.onVideoRestart.bind(this)}componentDidMount(){if(this.videoSources.length){this.recommendedMedia=this.props.data.related_media.length?new h.PlayerRecommendedMedia(this.props.data.related_media,this.props.inEmbed,!s.PageStore.get("config-media-item").displayViews):null,this.upNextLoaderView=!this.props.inEmbed&&this.props.data.related_media.length?new h.UpNextLoaderView(this.props.data.related_media[0]):null;let e=null;if(this.props.inEmbed){let t=document.createElement("a"),i=document.createElement("a");e=document.createElement("div"),e.setAttribute("class","media-links-top-left"),t&&(t.setAttribute("class","title-link"),t.setAttribute("href",this.props.data.url),t.setAttribute("title",this.props.data.title),t.setAttribute("target","_blank"),t.innerHTML=this.props.data.title),i&&(i.setAttribute("class","user-thumb-link"),i.setAttribute("href",(0,m.formatInnerLink)(this.props.data.author_profile,this.props.siteUrl)),i.setAttribute("title",this.props.data.author_name),i.setAttribute("target","_blank"),i.setAttribute("style","background-image:url("+(0,m.formatInnerLink)(s.MediaPageStore.get("media-author-thumbnail-url"),this.props.siteUrl)+")")),e.appendChild(i),e.appendChild(t)}const t=s.MediaPageStore.get("media-url");let i='<button class="share-video-btn"><i class="material-icons">share</i><span>Share</span></button>';i+='<div class="share-options-wrapper">\t\t\t\t\t\t\t\t\t<div class="share-options">\t\t\t\t\t\t\t\t\t\t<div class="share-options-inner">\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-email">\t\t\t\t\t\t\t\t\t\t\t\t<a href="mailto:?body='+t+'" title=""><span><i class="material-icons">email</i></span><span>Email</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-fb">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.facebook.com/sharer.php?u='+t+'" title="" target="_blank"><span></span><span>Facebook</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tw">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://twitter.com/intent/tweet?url='+t+'" title="" target="_blank"><span></span><span>Twitter</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-whatsapp">\t\t\t\t\t\t\t\t\t\t\t\t<a href="whatsapp://send?text='+t+'" title="" target="_blank" data-action="share/whatsapp/share"><span></span><span>WhatsApp</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-telegram">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://t.me/share/url?url='+t+"&amp;text="+this.props.data.title+'" title="" target="_blank"><span></span><span>Telegram</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-linkedin">\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url='+t+'" title="" target="_blank"><span></span><span>LinkedIn</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-reddit">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://reddit.com/submit?url='+t+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>reddit</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tumblr">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl='+t+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>Tumblr</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-pinterest">\t\t\t\t\t\t\t\t\t\t\t\t<a href="http://pinterest.com/pin/create/link/?url='+t+'" title="" target="_blank"><span></span><span>Pinterest</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-more">\t\t\t\t\t\t\t\t\t\t\t\t<a href="'+t+'" title="More" target="_blank"><span><i class="material-icons">more_horiz</i></span><span></span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>',this.cornerLayers={topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:this.props.inEmbed?i:null},this.setState({displayPlayer:!0},(function(){setTimeout((function(){const e=document.querySelector(".share-video-btn"),t=document.querySelector(".share-options-wrapper"),i=document.querySelector(".share-options-inner");e&&e.addEventListener("click",(function(e){(0,m.addClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")})),t&&t.addEventListener("click",(function(e){e.target!==i&&e.target!==t||(0,m.removeClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")}))}),1e3)}))}}componentWillUnmount(){this.unsetRecommendedMedia()}initRecommendedMedia(){null!==this.recommendedMedia&&(this.props.inEmbed||this.recommendedMedia.init(),this.playerInstance.player.on("fullscreenchange",this.recommendedMedia.onResize),s.PageStore.on("window_resize",this.recommendedMedia.onResize),s.VideoViewerStore.on("changed_viewer_mode",this.recommendedMedia.onResize))}unsetRecommendedMedia(){if(this.recommendedMedia){this.playerInstance?.player?.off&&this.playerInstance.player.off("fullscreenchange",this.recommendedMedia.onResize),s.PageStore?.removeListener?.("window_resize",this.recommendedMedia.onResize),s.VideoViewerStore?.removeListener?.("changed_viewer_mode",this.recommendedMedia.onResize);try{this.recommendedMedia.destroy?.()}catch{}this.recommendedMedia=null}}onClickNext(){let e;s.MediaPageStore.get("playlist-id")?(e=s.MediaPageStore.get("playlist-next-media-url"),null===e&&(e=this.props.data.related_media[0].url)):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}onClickPrevious(){let e;s.MediaPageStore.get("playlist-id")?(e=s.MediaPageStore.get("playlist-previous-media-url"),null===e&&(e=this.props.data.related_media[0].url)):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}onStateUpdate(e){s.VideoViewerStore.get("in-theater-mode")!==e.theaterMode&&p.VideoViewerActions.set_viewer_mode(e.theaterMode),s.VideoViewerStore.get("player-volume")!==e.volume&&p.VideoViewerActions.set_player_volume(e.volume),s.VideoViewerStore.get("player-sound-muted")!==e.soundMuted&&p.VideoViewerActions.set_player_sound_muted(e.soundMuted),s.VideoViewerStore.get("video-quality")!==e.quality&&p.VideoViewerActions.set_video_quality(e.quality),s.VideoViewerStore.get("video-playback-speed")!==e.playbackSpeed&&p.VideoViewerActions.set_video_playback_speed(e.playbackSpeed)}onPlayerInit(e,t){this.playerElem=t,this.playerInstance=e,this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.playerInstance.player.el_),this.onUpdateMediaAutoPlay()),this.props.inEmbed||this.playerElem.parentNode.focus(),null!==this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.playerElem.parentNode),this.props.inEmbed&&(this.playerInstance.player.one("pause",this.recommendedMedia.init),this.initRecommendedMedia())),this.playerInstance.player.one("ended",this.onVideoEnd)}onVideoRestart(){null!==this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.props.inEmbed&&this.playerInstance.player.one("pause",this.recommendedMedia.init),this.playerInstance.player.one("ended",this.onVideoEnd))}onVideoEnd(){if(null!==this.recommendedMedia&&(this.props.inEmbed||this.initRecommendedMedia(),this.recommendedMedia.updateDisplayType("full"),this.playerInstance.player.one("playing",this.onVideoRestart)),!this.props.inEmbed&&s.MediaPageStore.get("playlist-id")){const e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");this.upNextLoaderView.cancelTimer();const i=s.MediaPageStore.get("playlist-next-media-url");return i&&(e&&(e.style.display="none"),t&&(t.style.display="none"),window.location.href=i),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(s.PageStore.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.playerInstance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}onUpdateMediaAutoPlay(){this.upNextLoaderView&&(s.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.playerInstance.isEnded()):this.upNextLoaderView.hideTimerView())}render(){let e=null,t=null;return!this.props.inEmbed&&s.MediaPageStore.get("playlist-id")?(e=s.MediaPageStore.get("playlist-next-media-url"),s.MediaPageStore.get("playlist-previous-media-url")):e=this.props.data.related_media.length&&!this.props.inEmbed?this.props.data.related_media[0].url:null,this.props.data.sprites_url&&(this.props.siteUrl,this.props.data.sprites_url.replace(/^\//g,"")),n.createElement("div",{key:(this.props.inEmbed?"embed-":"")+"player-container",className:"player-container"+(this.videoSources.length?"":" player-container-error"),style:this.props.containerStyles,ref:"playerContainer"},n.createElement("div",{className:"player-container-inner",ref:"playerContainerInner",style:this.props.containerStyles},this.state.displayPlayer&&null!==s.MediaPageStore.get("media-load-error-type")?n.createElement(_.lg,{errorMessage:s.MediaPageStore.get("media-load-error-message")}):null,this.state.displayPlayer&&null===s.MediaPageStore.get("media-load-error-type")?this.props.inEmbed?n.createElement("div",{className:"video-player",ref:"videoPlayerWrapper",key:"videoPlayerWrapper"},n.createElement(o.SiteConsumer,null,(e=>n.createElement(L,{info:this.videoInfo,sources:this.videoSources,enableAutoplay:!this.props.inEmbed,hasTheaterMode:!this.props.inEmbed,videoPlaybackSpeed:parseInt(this.browserCache.get("video-playback-speed"),10),playback_url_token:this.props.data.playback_urls,inEmbed:this.props.inEmbed,siteId:e.id,siteUrl:e.url,adsTag:this.props.data.ads_tag,hls_file:this.props.data.hls_file,stream:this.props.data.stream,title:this.props.data.title,url:this.props.data.url})))):n.createElement("div",{className:"video-player",ref:"videoPlayerWrapper",key:"videoPlayerWrapper"},n.createElement(o.SiteConsumer,null,(e=>n.createElement(_.L9,{info:this.videoInfo,sources:this.videoSources,enableAutoplay:!this.props.inEmbed,hasTheaterMode:!this.props.inEmbed,videoPlaybackSpeed:parseInt(this.browserCache.get("video-playback-speed"),10),playback_url_token:this.props.data.playback_urls,inEmbed:this.props.inEmbed,siteId:e.id,siteUrl:e.url,adsTag:this.props.data.ads_tag,hls_file:this.props.data.hls_file,stream:this.props.data.stream,title:this.props.data.title,url:this.props.data.url})))):null))}}function V(e){let t=null,i=[];var a=location.search.substr(1).split("&");for(let n=0;n<a.length;n++)i=a[n].split("="),i[0]===e&&(t=decodeURIComponent(i[1]));return t}A.defaultProps={inEmbed:!0,siteUrl:d().string.isRequired},A.propTypes={inEmbed:d().bool},new MutationObserver(((e,t)=>{const i=document.querySelector(".video-js.vjs-mediacms");if(i){const e=i.querySelector("video");e&&(function(e){if(!e||!e.tagName||"video"!==e.tagName.toLowerCase())return void j.error("Invalid video element:",e);const t=videojs(e);t.playsinline(!0),t.on("loadedmetadata",(function(){const e=parseInt(V("muted")),i=parseInt(V("autoplay")),a=parseInt(V("t"));1==e&&t.muted(!0),a>=0&&a<t.duration()?t.currentTime(a):a>=0&&a>=t.duration()&&t.play(),1===i&&t.play()}))}(e),t.disconnect())}})).observe(document,{childList:!0,subtree:!0});var R=i(5338),I=i(6619),D=i(4350);i(6880);const B={single:(0,m.translateString)("comment"),uppercaseSingle:(0,m.translateString)("COMMENT"),ucfirstSingle:(0,m.translateString)("Comment"),ucfirstPlural:(0,m.translateString)("Comments"),submitCommentText:(0,m.translateString)("SUBMIT"),disabledCommentsMsg:(0,m.translateString)("Comments are disabled")};function U(e){const t=(0,n.useRef)(null),[i,a]=(0,n.useState)(""),[l,r]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[c,h]=(0,n.useState)(-1),[g,f]=(0,n.useState)(""),[y]=(0,n.useState)(o.MemberContext._currentValue.is.anonymous?o.LinksContext._currentValue.signin+"?next=/"+window.location.href.replace(o.SiteContext._currentValue.url,"").replace(/^\//g,""):null);function b(){u(!0)}function S(){u(!1)}function P(){const e=[...s.MediaPageStore.get("users")],t=[];e.forEach((e=>{t.push({id:e.username,display:e.name})})),f(t)}function k(){t.current.style.height="";const e=t.current.scrollHeight,i=0<c?c:parseFloat(window.getComputedStyle(t.current).lineHeight);a(""),r(!1),h(i),t.current.style.height=Math.max(20,c*Math.ceil(e/i))+"px"}function E(){r(!1)}return(0,n.useEffect)((()=>(s.MediaPageStore.on("comment_submit",k),s.MediaPageStore.on("comment_submit_fail",E),!0===MediaCMS.features.media.actions.comment_mention&&s.MediaPageStore.on("users_load",P),()=>{s.MediaPageStore.removeListener("comment_submit",k),s.MediaPageStore.removeListener("comment_submit_fail",E),!0===MediaCMS.features.media.actions.comment_mention&&s.MediaPageStore.removeListener("users_load",P)}))),o.MemberContext._currentValue.is.anonymous?n.createElement("div",{className:"comments-form"},n.createElement("div",{className:"comments-form-inner"},n.createElement(v.UserThumbnail,null),n.createElement("div",{className:"form"},n.createElement("a",{href:y,rel:"noffolow",className:"form-textarea-wrap",title:(0,m.translateString)("Add a ")+B.single+"..."},n.createElement("span",{className:"form-textarea"},(0,m.translateString)("Add a ")+B.single+"...")),n.createElement("div",{className:"form-buttons"},n.createElement("a",{href:y,rel:"noffolow",className:"disabled"},B.submitCommentText))))):n.createElement("div",{className:"comments-form"},n.createElement("div",{className:"comments-form-inner"},n.createElement(v.UserThumbnail,null),n.createElement("div",{className:"form"},n.createElement("div",{className:"form-textarea-wrap"+(d?" focused":"")},MediaCMS.features.media.actions.comment_mention?n.createElement(I.G,{inputRef:t,className:"form-textarea",rows:"1",placeholder:"Add a "+B.single+"...",value:i,onChange:function(e,i,n,o){t.current.style.height="",a(i),r(!0);const s=t.current.scrollHeight,l=0<c?c:parseFloat(window.getComputedStyle(t.current).lineHeight);h(l),t.current.style.height=Math.max(20,c*Math.ceil(s/l))+"px"},onFocus:b,onBlur:S},n.createElement(I.P,{data:g,markup:"@(___id___)[___display___]"})):n.createElement("textarea",{ref:t,className:"form-textarea",rows:"1",placeholder:"Add a "+B.single+"...",value:i,onChange:function(e){t.current.style.height="";const i=t.current.scrollHeight,n=0<c?c:parseFloat(window.getComputedStyle(t.current).lineHeight);a(t.current.value),r(!0),h(n),t.current.style.height=Math.max(20,c*Math.ceil(i/n))+"px"},onFocus:b,onBlur:S})),n.createElement("div",{className:"form-buttons"},n.createElement("button",{className:""===i.trim()?"disabled":"",onClick:function(){if(!l)return;const e=i.trim();""!==e&&p.MediaPageActions.submitComment(e)}},B.submitCommentText)))))}U.propTypes={comment_type:d().oneOf(["new","reply"]),media_id:d().oneOfType([d().string,d().number]).isRequired,reply_comment_id:d().oneOfType([d().string,d().number])},U.defaultProps={comment_type:"new"};function F(e){const[t,i,a]=(0,R.usePopup)();return n.createElement("div",{className:"comment-actions"},o.MemberContext._currentValue.can.deleteComment?n.createElement("div",{className:"comment-action remove-comment"},n.createElement(a,{contentRef:t},n.createElement("button",null,(0,m.translateString)("DELETE")," ",B.uppercaseSingle)),n.createElement(i,{contentRef:t},n.createElement(v.PopupMain,null,n.createElement("div",{className:"popup-message"},n.createElement("span",{className:"popup-message-title"},B.ucfirstSingle," removal"),n.createElement("span",{className:"popup-message-main"},"You're willing to remove ",B.single," permanently?")),n.createElement("hr",null),n.createElement("span",{className:"popup-message-bottom"},n.createElement("button",{className:"button-link cancel-comment-removal",onClick:function(){t.current.toggle()}},"CANCEL"),n.createElement("button",{className:"button-link proceed-comment-removal",onClick:function(){t.current.toggle(),p.MediaPageActions.deleteComment(e.comment_id)}},"PROCEED"))))):null)}function Q(e){const t=(0,n.useRef)(null),i=(0,n.useRef)(null),[a,s]=(0,n.useState)(!0),[l,r]=(0,n.useState)(!1);return(0,n.useEffect)((()=>()=>{}),[]),n.createElement("div",{className:"comment"},n.createElement("div",{className:"comment-inner"},n.createElement("a",{className:"comment-author-thumb",href:e.author_link,title:e.author_name},n.createElement("img",{src:e.author_thumb,alt:e.author_name})),n.createElement("div",{className:"comment-content"},n.createElement("div",{className:"comment-meta"},n.createElement("div",{className:"comment-author"},n.createElement("a",{href:e.author_link,title:e.author_name},e.author_name)),n.createElement("div",{className:"comment-date"},(0,m.replaceString)((0,D.GP)(new Date(e.publish_date))))),n.createElement("div",{ref:t,className:"comment-text"+(a?" show-all":"")},n.createElement("div",{ref:i,className:"comment-text-inner",dangerouslySetInnerHTML:(d=e.text,{__html:d.replace(/\n/g,"<br />")})})),l?n.createElement("button",{className:"toggle-more",onClick:function(){s(!a)}},a?"Show less":"Read more"):null,o.MemberContext._currentValue.can.deleteComment?n.createElement(F,{comment_id:e.comment_id}):null)));var d}Q.propTypes={comment_id:d().oneOfType([d().string,d().number]).isRequired,media_id:d().oneOfType([d().string,d().number]).isRequired,text:d().string,author_name:d().string,author_link:d().string,author_thumb:d().string,publish_date:d().oneOfType([d().string,d().number]),likes:d().number,dislikes:d().number},Q.defaultProps={author_name:"",author_link:"#",publish_date:0,likes:0,dislikes:0};const q=e=>{let{commentsLength:t}=e;return n.createElement(n.Fragment,null,!o.MemberContext._currentValue.can.readComment||s.MediaPageStore.get("media-data").enable_comments?null:n.createElement("span",{className:"disabled-comments-msg"},B.disabledCommentsMsg),o.MemberContext._currentValue.can.readComment&&(s.MediaPageStore.get("media-data").enable_comments||o.MemberContext._currentValue.can.editMedia)?n.createElement("h2",null,t?1<t?t+" "+B.ucfirstPlural:t+" "+B.ucfirstSingle:s.MediaPageStore.get("media-data").enable_comments?(0,m.translateString)("No")+" "+B.single+" "+(0,m.translateString)("yet"):""):null)};function H(e){const[t,i]=(0,n.useState)(s.MediaPageStore.get("media-id")),[a,l]=(0,n.useState)(o.MemberContext._currentValue.can.readComment?s.MediaPageStore.get("media-comments"):[]),[r,d]=(0,n.useState)(!1);function u(){const e=[...s.MediaPageStore.get("media-comments")];e.forEach((e=>{e.text=function(e){const t=new RegExp("((\\d)?\\d:)?(\\d)?\\d:\\d\\d","g");return e.replace(t,(function(e,t){let i=e.split(":"),a=0,n=1,o=new URLSearchParams(window.location.search);for(;i.length>0;)a+=n*parseInt(i.pop(),10),n*=60;return o.set("t",a),'<a href="'+s.MediaPageStore.get("media-url").split("?")[0]+"?"+o+'">'+e+"</a>"}))}(e.text)})),function(){var e=document.querySelector(".page-main"),t=e.querySelector(".no-comment");const i=s.PageStore.get("config-contents").uploader.postUploadMessage;if(""===i)t&&0===comm.length&&t.parentNode.removeChild(t);else if(0===comm.length&&"unlisted"===s.MediaPageStore.get("media-data").state){if(-1<o.LinksContext._currentValue.profile.media.indexOf(s.MediaPageStore.get("media-data").author_profile)&&!t){const t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("class","alert info alert-dismissible no-comment"),t.innerHTML='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>'+i,e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.querySelector("button.close").addEventListener("click",(function(e){return t.setAttribute("class","alert info alert-dismissible hiding"),setTimeout((function(){t.parentNode.removeChild(t)}),400),e.preventDefault(),e.stopPropagation(),!1}))}}else t&&0<comm.length&&t.parentNode.removeChild(t)}(),l([...e])}function c(e){u(),setTimeout((()=>p.PageActions.addNotification(B.ucfirstSingle+" added","commentSubmit")),100)}function m(){setTimeout((()=>p.PageActions.addNotification(B.ucfirstSingle+" submission failed","commentSubmitFail")),100)}function h(e){u(),setTimeout((()=>p.PageActions.addNotification(B.ucfirstSingle+" removed","commentDelete")),100)}function g(e){setTimeout((()=>p.PageActions.addNotification(B.ucfirstSingle+" removal failed","commentDeleteFail")),100)}return(0,n.useEffect)((()=>{d(a.length&&o.MemberContext._currentValue.can.readComment&&(s.MediaPageStore.get("media-data").enable_comments||o.MemberContext._currentValue.can.editMedia))}),[a]),(0,n.useEffect)((()=>(s.MediaPageStore.on("comments_load",u),s.MediaPageStore.on("comment_submit",c),s.MediaPageStore.on("comment_submit_fail",m),s.MediaPageStore.on("comment_delete",h),s.MediaPageStore.on("comment_delete_fail",g),()=>{s.MediaPageStore.removeListener("comments_load",u),s.MediaPageStore.removeListener("comment_submit",c),s.MediaPageStore.removeListener("comment_submit_fail",m),s.MediaPageStore.removeListener("comment_delete",h),s.MediaPageStore.removeListener("comment_delete_fail",g)})),[]),n.createElement("div",{className:"comments-list"},n.createElement("div",{className:"comments-list-inner"},n.createElement(q,{commentsLength:a.length}),s.MediaPageStore.get("media-data").enable_comments?n.createElement(U,{media_id:t}):null,r?a.map((e=>n.createElement(Q,{key:e.uid,comment_id:e.uid,media_id:t,text:e.text,author_name:e.author_name,author_link:e.author_profile,author_thumb:o.SiteContext._currentValue.url+"/"+e.author_thumbnail_url.replace(/^\//g,""),publish_date:e.add_date,likes:0,dislikes:0}))):null))}var z=i(8974);function W(e){let t,i,a=[];if(e&&e.length)for(t=0,i=1<e.length?", ":"";t<e.length;)a[t]=n.createElement("div",{key:t},n.createElement("a",{href:e[t].url,title:e[t].title},e[t].title),t<e.length-1?i:""),t+=1;return a}function K(e){return n.createElement("div",{className:"media-author-banner"},n.createElement("div",null,n.createElement("a",{className:"author-banner-thumb",href:e.link||null,title:e.name},n.createElement("span",{style:{backgroundImage:"url("+e.thumb+")"}},n.createElement("img",{src:e.thumb,loading:"lazy",alt:e.name,title:e.name})))),n.createElement("div",null,n.createElement("span",null,n.createElement("a",{href:e.link,className:"author-banner-name",title:e.name},n.createElement("span",null,e.name))),s.PageStore.get("config-media-item").displayPublishDate&&e.published?n.createElement("span",{className:"author-banner-date"},(0,m.translateString)("Published on")," ",(0,m.replaceString)((0,m.publishedOnDate)(new Date(e.published)))):null))}function Y(e){return n.createElement("div",{className:e.id.trim()?"media-content-"+e.id.trim():null},n.createElement("div",{className:"media-content-field"},n.createElement("div",{className:"media-content-field-label"},n.createElement("h4",null,e.title)),n.createElement("div",{className:"media-content-field-content"},e.value)))}function X(e){let t=e.link;return window.MediaCMS.site.devEnv&&(t="/edit-media.html"),n.createElement("a",{href:t,rel:"nofollow",title:(0,m.translateString)("Edit media"),className:"edit-media"},(0,m.translateString)("EDIT MEDIA"))}function $(e){let t=e.link;return window.MediaCMS.site.devEnv&&(t="#"),n.createElement("a",{href:t,rel:"nofollow",title:(0,m.translateString)("Edit subtitle"),className:"edit-subtitle"},(0,m.translateString)("EDIT SUBTITLE"))}function G(e){const{userCan:t}=(0,R.useUser)(),i=e.description.trim(),a=!s.PageStore.get("config-enabled").taxonomies.tags||s.PageStore.get("config-enabled").taxonomies.tags.enabled?W(s.MediaPageStore.get("media-tags")):[],l=s.PageStore.get("config-options").pages.media.categoriesWithTitle?[]:!s.PageStore.get("config-enabled").taxonomies.categories||s.PageStore.get("config-enabled").taxonomies.categories.enabled?W(s.MediaPageStore.get("media-categories")):[];let r=s.MediaPageStore.get("media-summary");r=r?r.trim():"";const[d,u,c]=(0,R.usePopup)(),[h,g]=(0,n.useState)(""!==r),[f,y]=(0,n.useState)(""==r);function b(e){setTimeout((function(){p.PageActions.addNotification("Media removed. Redirecting...","mediaDelete"),setTimeout((function(){window.location.href=o.SiteContext._currentValue.url+"/"+s.MediaPageStore.get("media-data").author_profile.replace(/^\//g,"")}),2e3)}),100),void 0!==e&&z.info("Removed media '"+e+'"')}function S(e){setTimeout((function(){p.PageActions.addNotification("Media removal failed","mediaDeleteFail")}),100),void 0!==e&&z.info('Media "'+e+'" removal failed')}(0,n.useEffect)((()=>(s.MediaPageStore.on("media_delete",b),s.MediaPageStore.on("media_delete_fail",S),()=>{s.MediaPageStore.removeListener("media_delete",b),s.MediaPageStore.removeListener("media_delete_fail",S)})),[]);const P=(0,m.formatInnerLink)(e.author.url,o.SiteContext._currentValue.url),k=(0,m.formatInnerLink)(e.author.thumb,o.SiteContext._currentValue.url);return n.createElement("div",{className:"media-info-content"},void 0===s.PageStore.get("config-media-item").displayAuthor||null===s.PageStore.get("config-media-item").displayAuthor||s.PageStore.get("config-media-item").displayAuthor?n.createElement(K,{link:P,thumb:k,name:e.author.name,published:e.published}):null,n.createElement("div",{className:"media-content-banner"},n.createElement("div",{className:"media-content-banner-inner"},h?n.createElement("div",{className:"media-content-summary"},r):null,h&&!f||!i?null:n.createElement("div",{className:"media-content-description",dangerouslySetInnerHTML:{__html:function(e){const t=new RegExp("((\\d)?\\d:)?(\\d)?\\d:\\d\\d","g");return e.replace(t,(function(e,t){let i=e.split(":"),a=0,n=1,o=new URLSearchParams(window.location.search);for(;i.length>0;)a+=n*parseInt(i.pop(),10),n*=60;return o.set("t",a),'<a href="'+s.MediaPageStore.get("media-url").split("?")[0]+"?"+o+'">'+e+"</a>"}))}(i)}}),h?n.createElement("button",{className:"load-more",onClick:function(){y(!f)}},f?"SHOW LESS":"SHOW MORE"):null,a.length?n.createElement(Y,{value:a,title:1<a.length?(0,m.translateString)("Tags"):(0,m.translateString)("Tag"),id:"tags"}):null,l.length?n.createElement(Y,{value:l,title:1<l.length?(0,m.translateString)("Categories"):(0,m.translateString)("Category"),id:"categories"}):null,t.editMedia||t.editSubtitle||t.deleteMedia?n.createElement("div",{className:"media-author-actions"},t.editMedia?n.createElement(X,{link:s.MediaPageStore.get("media-data").edit_url}):null,t.editSubtitle&&"video"===s.MediaPageStore.get("media-data").media_type?n.createElement($,{link:s.MediaPageStore.get("media-data").edit_url.replace("edit?","add_subtitle?")}):null,n.createElement(c,{contentRef:d},n.createElement("button",{className:"remove-media"},(0,m.translateString)("DELETE MEDIA"))),n.createElement(u,{contentRef:d},n.createElement(v.PopupMain,null,n.createElement("div",{className:"popup-message"},n.createElement("span",{className:"popup-message-title"},"Media removal"),n.createElement("span",{className:"popup-message-main"},"You're willing to remove media permanently?")),n.createElement("hr",null),n.createElement("span",{className:"popup-message-bottom"},n.createElement("button",{className:"button-link cancel-comment-removal",onClick:function(){d.current.toggle()}},"CANCEL"),n.createElement("button",{className:"button-link proceed-comment-removal",onClick:function(){p.MediaPageActions.removeMedia(),d.current.toggle()}},"PROCEED"))))):null)),n.createElement(H,null))}function J(){const[e,t]=(0,n.useState)(s.MediaPageStore.get("user-disliked-media")),[i,a]=(0,n.useState)((0,m.formatViewsNumber)(s.MediaPageStore.get("media-dislikes"),!1));function l(){t(s.MediaPageStore.get("user-disliked-media")),a((0,m.formatViewsNumber)(s.MediaPageStore.get("media-dislikes"),!1))}function r(){l(),p.PageActions.addNotification(o.TextsContext._currentValue.messages.addToDisliked,"mediaDislike")}function d(){l(),p.PageActions.addNotification(o.TextsContext._currentValue.messages.removeFromDisliked,"cancelMediaDislike")}function u(){p.PageActions.addNotification("Action failed","mediaDislikeRequestFail")}return(0,n.useEffect)((()=>(s.MediaPageStore.on("disliked_media",r),s.MediaPageStore.on("undisliked_media",d),s.MediaPageStore.on("disliked_media_failed_request",u),()=>{s.MediaPageStore.removeListener("disliked_media",r),s.MediaPageStore.removeListener("undisliked_media",d),s.MediaPageStore.removeListener("disliked_media_failed_request",u)})),[]),n.createElement("div",{className:"like"},n.createElement("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),p.MediaPageActions[e?"undislikeMedia":"dislikeMedia"]()}},n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"thumb_down"})),n.createElement("span",{className:"dislikes-counter"},i)))}function Z(){const[e,t]=(0,n.useState)(s.MediaPageStore.get("user-liked-media")),[i,a]=(0,n.useState)((0,m.formatViewsNumber)(s.MediaPageStore.get("media-likes"),!1));function l(){t(s.MediaPageStore.get("user-liked-media")),a((0,m.formatViewsNumber)(s.MediaPageStore.get("media-likes"),!1))}function r(){l(),p.PageActions.addNotification(o.TextsContext._currentValue.addToLiked,"likedMedia")}function d(){l(),p.PageActions.addNotification(o.TextsContext._currentValue.removeFromLiked,"unlikedMedia")}function u(){p.PageActions.addNotification("Action failed","likedMediaRequestFail")}return(0,n.useEffect)((()=>(s.MediaPageStore.on("liked_media",r),s.MediaPageStore.on("unliked_media",d),s.MediaPageStore.on("liked_media_failed_request",u),()=>{s.MediaPageStore.removeListener("liked_media",r),s.MediaPageStore.removeListener("unliked_media",d),s.MediaPageStore.removeListener("liked_media_failed_request",u)})),[]),n.createElement("div",{className:"like"},n.createElement("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),p.MediaPageActions[e?"unlikeMedia":"likeMedia"]()}},n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"thumb_up"})),n.createElement("span",{className:"likes-counter"},i)))}function ee(e){const t=(0,n.useRef)(null),i=(0,n.useRef)(null),[a,o]=(0,n.useState)(null);function l(){o(window.innerHeight-(104+t.current.offsetHeight))}return(0,n.useEffect)((()=>(l(),s.PageStore.on("window_resize",l),()=>{s.PageStore.removeListener("window_resize",l)})),[]),n.createElement("form",null,n.createElement("div",{className:"report-form",style:null!==a?{maxHeight:a+"px"}:null},n.createElement("div",{className:"form-title"},"Report media"),n.createElement("div",{className:"form-field"},n.createElement("span",{className:"label"},"URL"),n.createElement("input",{type:"text",readOnly:!0,value:e.mediaUrl})),n.createElement("div",{className:"form-field"},n.createElement("span",{className:"label"},"Description"),n.createElement("textarea",{ref:i,required:!0})),n.createElement("div",{className:"form-field form-help-text"},"Reported media is reviewed")),n.createElement("div",{ref:t,className:"form-actions-bottom"},n.createElement("button",{className:"cancel",onClick:function(t){t.preventDefault(),void 0!==e.cancelReportForm&&e.cancelReportForm()}},"CANCEL"),n.createElement("button",{onClick:function(t){const a=i.current.value.trim();""!==a&&(t.preventDefault(),void 0!==e.submitReportForm&&e.submitReportForm(a))}},"SUBMIT")))}function te(e,t){const i=o.SiteContext._currentValue,a=e.encodings_info,n={};let s,l;for(s in a)if(a.hasOwnProperty(s)&&Object.keys(a[s]).length)for(l in a[s])a[s].hasOwnProperty(l)&&"success"===a[s][l].status&&100===a[s][l].progress&&null!==a[s][l].url&&(n[a[s][l].title]={text:s+" - "+l.toUpperCase()+" ("+a[s][l].size+")",link:(0,m.formatInnerLink)(a[s][l].url,i.url),linkAttr:{target:"_blank",download:e.title+"_"+s+"_"+l.toUpperCase()}});return n.original_media_url={text:"Original file ("+e.size+")",link:(0,m.formatInnerLink)(e.original_media_url,i.url),linkAttr:{target:"_blank",download:e.title}},Object.values(n)}function ie(e,t,i,a,o,s,l){const r=t.url,d=t.media_type,u=t.state||"N/A",c=t.encoding_status||"N/A",m=t.reported_times,p=t.is_reviewed,h="video"===d,g=function(e,t,i,a,n){const o=[],s="video"===t.media_type,l=t.reported_times;return i&&e.downloadMedia&&(s?o.push({itemType:"open-subpage",text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},buttonAttr:{className:"change-page","data-page-id":"videoDownloadOptions"}}):a&&o.push({itemType:"link",link:a,text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},linkAttr:{target:"_blank",download:t.title}})),s&&e.editMedia&&o.push({itemType:"open-subpage",text:"Status info",icon:"info",buttonAttr:{className:"change-page","data-page-id":"mediaStatusInfo"}}),e.reportMedia&&(n?o.push({itemType:"div",text:"Reported",icon:"flag",divAttr:{className:"reported-label loggedin-media-reported"}}):o.push({itemType:"open-subpage",text:"Report",icon:"flag",buttonAttr:{className:"change-page"+(l?" loggedin-media-reported":""),"data-page-id":"loggedInReportMedia"}})),o}(e,t,i,a,o),f={};return g.length&&(f.main=n.createElement("div",{className:"main-options"},n.createElement(v.PopupMain,null,n.createElement(v.NavigationMenuList,{items:g})))),e.reportMedia&&(f.loggedInReportMedia=o?null:n.createElement("div",{className:"popup-fullscreen"},n.createElement(v.PopupMain,null,n.createElement("span",{className:"popup-fullscreen-overlay"}),n.createElement("div",null,n.createElement(ee,{mediaUrl:r,submitReportForm:s,cancelReportForm:l}))))),e.editMedia&&(f.mediaStatusInfo=n.createElement("div",{className:"main-options"},n.createElement(v.PopupMain,null,n.createElement("ul",{className:"media-status-info"},n.createElement("li",null,"Media type: ",n.createElement("span",null,d)),n.createElement("li",null,"State: ",n.createElement("span",null,u)),n.createElement("li",null,"Review state: ",n.createElement("span",null,p?"Is reviewed":"Pending review")),h?n.createElement("li",null,"Encoding Status: ",n.createElement("span",null,c)):null,m?n.createElement("li",{className:"reports"},"Reports: ",n.createElement("span",null,m)):null)))),i&&e.downloadMedia&&h&&(f.videoDownloadOptions=n.createElement("div",{className:"video-download-options"},n.createElement(v.PopupMain,null,n.createElement(v.NavigationMenuList,{items:te(t)})))),f}ee.propTypes={mediaUrl:d().string.isRequired,cancelReportForm:d().func,submitReportForm:d().func};const ae="more-options active-options";function ne(e){const{userCan:t}=(0,R.useUser)(),i=o.SiteContext._currentValue,a=(0,m.formatInnerLink)(s.MediaPageStore.get("media-original-url"),i.url),l=s.MediaPageStore.get("media-data"),r="video"===l.media_type,[d,u,c]=(0,R.usePopup)(),[h,g]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[b,S]=(0,n.useState)({}),[P,k]=(0,n.useState)("main"),[E,w]=(0,n.useState)(ae);function _(e){p.MediaPageActions.reportMedia(e)}function M(){d.current.toggle()}function C(){d.current.tryToHide(),setTimeout((function(){p.PageActions.addNotification("Media Reported","reportedMedia"),y(!0),s.MediaPageStore.removeListener("reported_media",C)}),100)}return(0,n.useEffect)((()=>{f||(h?s.MediaPageStore.on("reported_media",C):s.MediaPageStore.removeListener("reported_media",C))}),[h]),(0,n.useEffect)((()=>{g(Object.keys(b).length&&e.allowDownload&&t.downloadMedia)}),[b]),(0,n.useEffect)((()=>{let i=ae;e.allowDownload&&t.downloadMedia&&"videoDownloadOptions"===P&&(i+=" video-downloads"),1===Object.keys(b).length&&e.allowDownload&&t.downloadMedia&&(r||a)&&(i+=" visible-only-in-small"),w(i)}),[P]),(0,n.useEffect)((()=>{S(ie(t,l,e.allowDownload,a,f,_,M))}),[f]),(0,n.useEffect)((()=>(S(ie(t,l,e.allowDownload,a,f,_,M)),()=>{h&&!f&&s.MediaPageStore.removeListener("reported_media",C)})),[]),h?n.createElement("div",{className:E},n.createElement(c,{contentRef:d},n.createElement("span",null,n.createElement(v.CircleIconButton,{type:"button"},n.createElement(v.MaterialIcon,{type:"more_horiz"})))),n.createElement("div",{className:"nav-page-"+P},n.createElement(u,{contentRef:d,hideCallback:function(){k("main")}},n.createElement(v.NavigationContentApp,{pageChangeCallback:function(e){k(e)},initPage:P,focusFirstItemOnPageChange:!1,pages:b,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})))):null}ne.propTypes={allowDownload:d().bool.isRequired},ne.defaultProps={allowDownload:!1};var oe=i(3706);function se(e){return e.renderDate?n.createElement("label",null,n.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:function(t){t.persist(),e.isChecked?p.MediaPageActions.removeMediaFromPlaylist(e.playlistId,s.MediaPageStore.get("media-id")):p.MediaPageActions.addMediaToPlaylist(e.playlistId,s.MediaPageStore.get("media-id"))}}),n.createElement("span",null,e.title)):null}function le(e){const t=(0,n.useRef)(null),i=(0,n.useRef)(null),[a,o]=(0,n.useState)(new Date),[l,r]=(0,n.useState)(s.MediaPageStore.get("playlists")),[d,u]=(0,n.useState)(!1);function c(){b()}function m(){r(s.MediaPageStore.get("playlists")),o(new Date)}function h(){r(s.MediaPageStore.get("playlists")),o(new Date),setTimeout((function(){p.PageActions.addNotification("Media added to playlist","playlistMediaAdditionComplete")}),100)}function g(){setTimeout((function(){p.PageActions.addNotification("Media's addition to playlist failed","playlistMediaAdditionFail")}),100)}function f(){r(s.MediaPageStore.get("playlists")),o(new Date),setTimeout((function(){p.PageActions.addNotification("Media removed from playlist","playlistMediaRemovalComplete")}),100)}function y(){setTimeout((function(){p.PageActions.addNotification("Media's removal from playlist failed","playlistMediaaRemovalFail")}),100)}function b(){null!==i.current&&(i.current.style.maxHeight=window.innerHeight-74-(t.current.offsetHeight-i.current.offsetHeight)+"px")}function S(){u(!d),b()}return(0,n.useEffect)((()=>{b()})),(0,n.useEffect)((()=>(s.PageStore.on("window_resize",c),s.MediaPageStore.on("playlists_load",m),s.MediaPageStore.on("media_playlist_addition_completed",h),s.MediaPageStore.on("media_playlist_addition_failed",g),s.MediaPageStore.on("media_playlist_removal_completed",f),s.MediaPageStore.on("media_playlist_removal_failed",y),()=>{s.PageStore.removeListener("window_resize",c),s.MediaPageStore.removeListener("playlists_load",m),s.MediaPageStore.removeListener("media_playlist_addition_completed",h),s.MediaPageStore.removeListener("media_playlist_addition_failed",g),s.MediaPageStore.removeListener("media_playlist_removal_completed",f),s.MediaPageStore.removeListener("media_playlist_removal_failed",y)})),[]),n.createElement("div",{ref:t,className:"saveto-popup"},n.createElement("div",{className:"saveto-title"},"Save to...",n.createElement(v.CircleIconButton,{type:"button",onClick:function(){u(!1),void 0!==e.triggerPopupClose&&e.triggerPopupClose()}},n.createElement(v.MaterialIcon,{type:"close"}))),l.length?n.createElement("div",{ref:i,className:"saveto-select"},function(){const e=s.MediaPageStore.get("media-id");let t=[],i=0;for(;i<l.length;)t.push(n.createElement("div",{key:"playlist_"+l[i].playlist_id},n.createElement(se,{renderDate:a,title:l[i].title,privacy:l[i].status,isChecked:-1<l[i].media_list.indexOf(e),playlistId:l[i].playlist_id}))),i+=1;return t}()):null,d?n.createElement("div",{className:"saveto-new-playlist"},n.createElement(oe.w,{onCancel:S,onPlaylistSave:function(e){p.MediaPageActions.addNewPlaylist(e),S()}})):n.createElement(v.CircleIconButton,{className:"saveto-create",type:"button",onClick:S},n.createElement(v.MaterialIcon,{type:"add"}),"Create a new playlist"))}function re(e){const[t,i,a]=(0,R.usePopup)(),[o,s]=(0,n.useState)("selectPlaylist");return n.createElement("div",{className:"save"},n.createElement(a,{contentRef:t},n.createElement("button",null,n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"playlist_add"})),n.createElement("span",null,(0,m.translateString)("SAVE")))),n.createElement(i,{contentRef:t},n.createElement(v.NavigationContentApp,{initPage:o,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:(l=function(){t.current.toggle()},{selectPlaylist:n.createElement("div",{className:"popup-fullscreen"},n.createElement(v.PopupMain,null,n.createElement("span",{className:"popup-fullscreen-overlay"}),n.createElement(le,{triggerPopupClose:l}))),createPlaylist:n.createElement("div",{className:"popup-fullscreen"},n.createElement(v.PopupMain,null,n.createElement("span",{className:"popup-fullscreen-overlay"})))}),focusFirstItemOnPageChange:!1,pageChangeCallback:s})));var l}function de(e){const t=s.PageStore.get("config-options").embedded.video.dimensions,i=(0,n.useContext)(o.LinksContext),a=(0,n.useRef)(null),l=(0,n.useRef)(null),r=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useRef)(null),[c,m]=(0,n.useState)(window.innerHeight-144+56),[h,g]=(0,n.useState)(!1),[f,y]=(0,n.useState)("16:9"),[b,S]=(0,n.useState)(t.width),[P,k]=(0,n.useState)(t.widthUnit),[E,w]=(0,n.useState)(t.height),[_,M]=(0,n.useState)(t.heightUnit),[C,x]=(0,n.useState)(60),[N,T]=(0,n.useState)(60),[O,L]=(0,n.useState)([{key:"px",label:"px"},{key:"percent",label:"%"}]);function j(){m(window.innerHeight-144+56),x(r.current.offsetHeight),T(u.current.offsetHeight)}function V(){setTimeout((function(){p.PageActions.addNotification("Embed media code copied to clipboard","clipboardEmbedMediaCodeCopy")}),100)}return(0,n.useEffect)((()=>{m(window.innerHeight-144+56),x(r.current.offsetHeight),T(u.current.offsetHeight)})),(0,n.useEffect)((()=>(s.PageStore.on("window_resize",j),s.MediaPageStore.on("copied_embed_media_code",V),()=>{s.PageStore.removeListener("window_resize",j),s.MediaPageStore.removeListener("copied_embed_media_code",V)})),[]),n.createElement("div",{className:"share-embed",style:{maxHeight:c+"px"}},n.createElement("div",{className:"share-embed-inner"},n.createElement("div",{className:"on-left"},n.createElement("div",{className:"media-embed-wrap"},n.createElement(A,{data:s.MediaPageStore.get("media-data"),inEmbed:!0}))),n.createElement("div",{ref:l,className:"on-right"},n.createElement("div",{ref:r,className:"on-right-top"},n.createElement("div",{className:"on-right-top-inner"},n.createElement("span",{className:"ttl"},"Embed Video"),n.createElement(v.CircleIconButton,{type:"button",onClick:function(){void 0!==e.triggerPopupClose&&e.triggerPopupClose()}},n.createElement(v.MaterialIcon,{type:"close"})))),n.createElement("div",{ref:d,className:"on-right-middle",style:{top:C+"px",bottom:N+"px"}},n.createElement("textarea",{readOnly:!0,value:'<iframe width="'+("percent"===P?b+"%":b)+'" height="'+("percent"===_?E+"%":E)+'" src="'+i.embed+s.MediaPageStore.get("media-id")+'" frameborder="0" allowfullscreen></iframe>'}),n.createElement("div",{className:"iframe-config"},n.createElement("div",{className:"iframe-config-options-title"},"Embed options"),n.createElement("div",{className:"iframe-config-option"},n.createElement("div",{className:"option-content"},n.createElement("div",{className:"ratio-options"},n.createElement("div",{className:"options-group"},n.createElement("label",{style:{minHeight:"36px"}},n.createElement("input",{type:"checkbox",checked:h,onChange:function(){const e=!h,t=f.split(":"),i=t[0],a=t[1];g(e),k(e?"px":P),M(e?"px":_),w(e?parseInt(b*a/i,10):E),L(e?[{key:"px",label:"px"}]:[{key:"px",label:"px"},{key:"percent",label:"%"}])}}),"Keep aspect ratio")),h?n.createElement("div",{className:"options-group"},n.createElement("select",{ref:a,onChange:function(){const e=a.current.value,t=e.split(":"),i=t[0],n=t[1];y(e),w(h?parseInt(b*n/i,10):E)},value:f},n.createElement("optgroup",{label:"Horizontal orientation"},n.createElement("option",{value:"16:9"},"16:9"),n.createElement("option",{value:"4:3"},"4:3"),n.createElement("option",{value:"3:2"},"3:2")),n.createElement("optgroup",{label:"Vertical orientation"},n.createElement("option",{value:"9:16"},"9:16"),n.createElement("option",{value:"3:4"},"3:4"),n.createElement("option",{value:"2:3"},"2:3")))):null),n.createElement("br",null),n.createElement("div",{className:"options-group"},n.createElement(v.NumericInputWithUnit,{valueCallback:function(e){e=""===e?0:e;const t=f.split(":"),i=t[0],a=t[1];S(e),w(h?parseInt(e*a/i,10):E)},unitCallback:function(e){k(e)},label:"Width",defaultValue:parseInt(b,10),defaultUnit:P,minValue:1,maxValue:99999,units:O})),n.createElement("div",{className:"options-group"},n.createElement(v.NumericInputWithUnit,{valueCallback:function(e){e=""===e?0:e;const t=f.split(":"),i=t[0],a=t[1];w(e),S(h?parseInt(e*i/a,10):b)},unitCallback:function(e){M(e)},label:"Height",defaultValue:parseInt(E,10),defaultUnit:_,minValue:1,maxValue:99999,units:O})))))),n.createElement("div",{ref:u,className:"on-right-bottom"},n.createElement("button",{onClick:function(){p.MediaPageActions.copyEmbedMediaCode(d.current.querySelector("textarea"))}},"COPY")))))}se.propTypes={playlistId:d().string,isChecked:d().bool,title:d().string},se.defaultProps={isChecked:!1,title:""},le.propTypes={triggerPopupClose:d().func},de.propTypes={triggerPopupClose:d().func};var ue=i(5289);function ce(e){let{onClick:t}=e;return n.createElement("span",{className:"next-slide"},n.createElement(v.CircleIconButton,{buttonShadow:!0,onClick:t},n.createElement("i",{className:"material-icons"},"keyboard_arrow_right")))}function me(e){let{onClick:t}=e;return n.createElement("span",{className:"previous-slide"},n.createElement(v.CircleIconButton,{buttonShadow:!0,onClick:t},n.createElement("i",{className:"material-icons"},"keyboard_arrow_left")))}function pe(){return{maxFormContentHeight:window.innerHeight-196,maxPopupWidth:518>window.innerWidth-80?window.innerWidth-80:null}}function he(e){const t=(0,n.useRef)(null),i=(0,n.useRef)(null),a=s.MediaPageStore.get("media-url"),[l,r]=(0,n.useState)(null),[d,u]=(0,n.useState)({prev:!1,next:!1}),[c,m]=(0,n.useState)(pe()),[h]=(0,n.useState)(function(){const e=function(){const e=o.ShareOptionsContext._currentValue,t=s.MediaPageStore.get("media-url"),i=s.MediaPageStore.get("media-data").title,a={};let n=0;for(;n<e.length;){switch(e[n]){case"embed":"video"===s.MediaPageStore.get("media-data").media_type&&(a[e[n]]={});break;case"email":a[e[n]]={title:"Email",shareUrl:"mailto:?body="+t};break;case"fb":a[e[n]]={title:"Facebook",shareUrl:"https://www.facebook.com/sharer.php?u="+t};break;case"tw":a[e[n]]={title:"Twitter",shareUrl:"https://twitter.com/intent/tweet?url="+t};break;case"reddit":a[e[n]]={title:"reddit",shareUrl:"https://reddit.com/submit?url="+t+"&title="+i};break;case"tumblr":a[e[n]]={title:"Tumblr",shareUrl:"https://www.tumblr.com/widgets/share/tool?canonicalUrl="+t+"&title="+i};break;case"pinterest":a[e[n]]={title:"Pinterest",shareUrl:"http://pinterest.com/pin/create/link/?url="+t};break;case"vk":a[e[n]]={title:"ВКонтакте",shareUrl:"http://vk.com/share.php?url="+t+"&title="+i};break;case"linkedin":a[e[n]]={title:"LinkedIn",shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url="+t};break;case"mix":a[e[n]]={title:"Mix",shareUrl:"https://mix.com/add?url="+t};break;case"whatsapp":a[e[n]]={title:"WhatsApp",shareUrl:"whatsapp://send?text="+t};break;case"telegram":a[e[n]]={title:"Telegram",shareUrl:"https://t.me/share/url?url="+t+"&text="+i}}n+=1}return a}(),t=[];for(let i in e)e.hasOwnProperty(i)&&("embed"===i?t.push(n.createElement("div",{key:"share-"+i,className:"sh-option share-"+i+"-opt"},n.createElement("button",{className:"sh-option change-page","data-page-id":"shareEmbed"},n.createElement("span",null,n.createElement("i",{className:"material-icons"},"code")),n.createElement("span",null,"Embed")))):"whatsapp"===i?t.push(n.createElement("div",{key:"share-"+i,className:"sh-option share-"+i},n.createElement("a",{href:e[i].shareUrl,title:"",target:"_blank","data-action":"share/whatsapp/share",rel:"noreferrer"},n.createElement("span",null),n.createElement("span",null,e[i].title)))):"email"===i?t.push(n.createElement("div",{key:"share-email",className:"sh-option share-email"},n.createElement("a",{href:e[i].shareUrl,title:""},n.createElement("span",null,n.createElement("i",{className:"material-icons"},"email")),n.createElement("span",null,e[i].title)))):t.push(n.createElement("div",{key:"share-"+i,className:"sh-option share-"+i},n.createElement("a",{href:e[i].shareUrl,title:"",target:"_blank",rel:"noreferrer"},n.createElement("span",null),n.createElement("span",null,e[i].title)))));return t}()),[g,f]=(0,n.useState)(0),[y,v]=(0,n.useState)(0),[b,S]=(0,n.useState)(!1),[P,k]=(0,n.useState)(a);function E(){m(pe())}function w(){setTimeout((function(){p.PageActions.addNotification("Link copied to clipboard","clipboardLinkCopy")}),100)}function _(){l.scrollToCurrentSlide(),u({prev:l.hasPreviousSlide(),next:l.hasNextSlide()})}return(0,n.useEffect)((()=>{r(new ue.A(i.current,".sh-option"))}),[h]),(0,n.useEffect)((()=>{l&&(l.updateDataStateOnResize(h.length,!0,!0),_())}),[c,l]),(0,n.useEffect)((()=>{s.PageStore.on("window_resize",E),s.MediaPageStore.on("copied_media_link",w);const e=function(){const e=document.getElementsByTagName("video");return e[0]?.currentTime}();return f(e),v(function(e){let t=parseInt(e,10),i=Math.floor(t/3600),a=Math.floor((t-3600*i)/60),n=t-3600*i-60*a;return i<10&&(i="0"+i),a<10&&(a="0"+a),n<10&&(n="0"+n),i>=1?i+":"+a+":"+n:a+":"+n}(e)),()=>{s.PageStore.removeListener("window_resize",E),s.MediaPageStore.removeListener("copied_media_link",w),r(null)}}),[]),n.createElement("div",{ref:t,style:null!==c.maxPopupWidth?{maxWidth:c.maxPopupWidth+"px"}:null},n.createElement("div",{className:"scrollable-content",style:null!==c.maxFormContentHeight?{maxHeight:c.maxFormContentHeight+"px"}:null},n.createElement("div",{className:"share-popup-title"},"Share media"),h.length?n.createElement("div",{className:"share-options"},d.prev?n.createElement(me,{onClick:function(){l.previousSlide(),_()}}):null,n.createElement("div",{ref:i,className:"share-options-inner"},h),d.next?n.createElement(ce,{onClick:function(){l.nextSlide(),_()}}):null):null),n.createElement("div",{className:"copy-field"},n.createElement("div",null,n.createElement("input",{type:"text",readOnly:!0,value:P}),n.createElement("button",{onClick:function(){p.MediaPageActions.copyShareLink(t.current.querySelector(".copy-field input"))}},"COPY"))),n.createElement("div",{className:"start-at"},n.createElement("label",null,n.createElement("input",{type:"checkbox",name:"start-at-checkbox",id:"id-start-at-checkbox",checked:b,onChange:function(){S(!b),function(){const e=b?a:a+"&t="+Math.trunc(g);k(e)}()}}),"Start at ",y)))}function ge(){return{shareOptions:n.createElement("div",{className:"popup-fullscreen"},n.createElement(v.PopupMain,null,n.createElement("span",{className:"popup-fullscreen-overlay"}),n.createElement(he,null)))}}function fe(e){const[t,i,a]=(0,R.usePopup)(),[o,s]=(0,n.useState)("shareOptions");return n.createElement("div",{className:"share"},n.createElement(a,{contentRef:t},n.createElement("button",null,n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"share"})),n.createElement("span",null,(0,m.translateString)("SHARE")))),n.createElement(i,{contentRef:t,hideCallback:function(){s("shareOptions")}},n.createElement(v.NavigationContentApp,{initPage:o,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:e.isVideo?(l=function(){t.current.toggle()},{...ge(),shareEmbed:n.createElement("div",{className:"popup-fullscreen share-embed-popup"},n.createElement(v.PopupMain,null,n.createElement("span",{className:"popup-fullscreen-overlay"}),n.createElement(de,{triggerPopupClose:l})))}):ge(),focusFirstItemOnPageChange:!1,pageChangeCallback:function(e){s(e)}})));var l}function ye(e){return n.createElement("div",{className:"download hidden-only-in-small"},n.createElement("a",{href:e.link,target:"_blank",download:e.title,title:"Download",rel:"noreferrer"},n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"arrow_downward"})),n.createElement("span",null,"DOWNLOAD")))}function ve(){const e=s.MediaPageStore.get("media-data"),t=(e.title,e.encodings_info),i={};let a,n;for(a in t)if(t.hasOwnProperty(a)&&Object.keys(t[a]).length)for(n in t[a])t[a].hasOwnProperty(n)&&"success"===t[a][n].status&&100===t[a][n].progress&&null!==t[a][n].url&&(i[t[a][n].title]={text:a+" - "+n.toUpperCase()+" ("+t[a][n].size+")",link:(0,m.formatInnerLink)(t[a][n].url,o.SiteContext._currentValue.url),linkAttr:{target:"_blank",download:e.title+"_"+a+"_"+n.toUpperCase()}});return i.original_media_url={text:"Original file ("+e.size+")",link:(0,m.formatInnerLink)(e.original_media_url,o.SiteContext._currentValue.url),linkAttr:{target:"_blank",download:e.title}},Object.values(i)}function be(e){const[t,i,a]=(0,R.usePopup)(),[o,s]=(0,n.useState)("main");return n.createElement("div",{className:"video-downloads hidden-only-in-small"},n.createElement(a,{contentRef:t},n.createElement("button",null,n.createElement(v.CircleIconButton,{type:"span"},n.createElement(v.MaterialIcon,{type:"arrow_downward"})),n.createElement("span",null,(0,m.translateString)("DOWNLOAD")))),n.createElement("div",{className:"nav-page-"+o},n.createElement(i,{contentRef:t},n.createElement(v.NavigationContentApp,{pageChangeCallback:null,initPage:"main",focusFirstItemOnPageChange:!1,pages:{main:n.createElement("div",{className:"main-options"},n.createElement(v.PopupMain,null,n.createElement(v.NavigationMenuList,{items:ve()})))},pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"}))))}ye.propTypes={link:d().string.isRequired,title:d().string.isRequired};class Se extends n.PureComponent{constructor(e){super(e),this.state={likedMedia:s.MediaPageStore.get("user-liked-media"),dislikedMedia:s.MediaPageStore.get("user-disliked-media")},this.downloadLink="video"!==s.MediaPageStore.get("media-type")?(0,m.formatInnerLink)(s.MediaPageStore.get("media-original-url"),o.SiteContext._currentValue.url):null,this.updateStateValues=this.updateStateValues.bind(this)}componentDidMount(){s.MediaPageStore.on("liked_media",this.updateStateValues),s.MediaPageStore.on("unliked_media",this.updateStateValues),s.MediaPageStore.on("disliked_media",this.updateStateValues),s.MediaPageStore.on("undisliked_media",this.updateStateValues);const e=document.querySelectorAll("[data-tooltip]");e.length&&e.forEach((e=>function(e){const t=document.body,i=document.createElement("span");function a(){const t=e.getBoundingClientRect();i.style.top=t.top-(0+i.offsetHeight)+"px",i.style.left=t.left+"px"}i.innerText=e.getAttribute("data-tooltip"),i.setAttribute("class","tooltip"),e.removeAttribute("data-tooltip"),e.addEventListener("mouseenter",(function(){const n=e.getBoundingClientRect();t.appendChild(i),i.style.top=n.top-(0+i.offsetHeight)+"px",i.style.left=n.left+"px",document.addEventListener("scroll",a)})),e.addEventListener("mouseleave",(function(){t.removeChild(i),i.style.top="",i.style.left="",document.removeEventListener("scroll",a)}))}(e)))}updateStateValues(){this.setState({likedMedia:s.MediaPageStore.get("user-liked-media"),dislikedMedia:s.MediaPageStore.get("user-disliked-media")})}mediaCategories(e){if(void 0===this.props.categories||null===this.props.categories||!this.props.categories.length)return null;let t=0,i=[];for(;t<this.props.categories.length;)i.push(n.createElement("span",{key:t},n.createElement("a",{href:(0,m.formatInnerLink)(this.props.categories[t].url,o.SiteContext._currentValue.url),title:this.props.categories[t].title},this.props.categories[t].title))),t+=1;return n.createElement("div",{className:"media-under-title-categories"+(e?" over-title":"")},i)}render(){const e=s.PageStore.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=s.MediaPageStore.get("media-data").state;let i="";switch(t){case"private":i="The site admins have to make its access public";break;case"unlisted":i="The site admins have to make it appear on listings"}return n.createElement("div",{className:"media-title-banner"},e&&s.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?n.createElement("h1",null,this.props.title):null,"public"!==t?n.createElement("div",{className:"media-labels-area"},n.createElement("div",{className:"media-labels-area-inner"},n.createElement("span",{className:"media-label-state"},n.createElement("span",null,t)),n.createElement("span",{className:"helper-icon","data-tooltip":i},n.createElement("i",{className:"material-icons"},"help_outline")))):null,n.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&s.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,e?n.createElement("div",{className:"media-views"},(0,m.formatViewsNumber)(this.props.views,!0)," ",1>=this.props.views?"view":"views"):null,n.createElement("div",{className:"media-actions"},n.createElement("div",null,o.MemberContext._currentValue.can.likeMedia?n.createElement(Z,null):null,o.MemberContext._currentValue.can.dislikeMedia?n.createElement(J,null):null,o.MemberContext._currentValue.can.shareMedia?n.createElement(fe,{isVideo:!1}):null,!o.MemberContext._currentValue.is.anonymous&&o.MemberContext._currentValue.can.saveMedia&&-1<o.PlaylistsContext._currentValue.mediaTypes.indexOf(s.MediaPageStore.get("media-type"))?n.createElement(re,null):null,this.props.allowDownload&&o.MemberContext._currentValue.can.downloadMedia?this.downloadLink?n.createElement(ye,{link:this.downloadLink,title:this.props.title}):n.createElement(be,null):null,n.createElement(ne,{allowDownload:this.props.allowDownload})))))}}Se.propTypes={allowDownload:d().bool.isRequired},Se.defaultProps={allowDownload:!1};class Pe extends Se{render(){const e=s.PageStore.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=s.MediaPageStore.get("media-data").state;let i="";switch(t){case"private":i="The site admins have to make its access public";break;case"unlisted":i="The site admins have to make it appear on listings"}return n.createElement("div",{className:"media-title-banner"},e&&s.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?n.createElement("h1",null,this.props.title):null,"public"!==t?n.createElement("div",{className:"media-labels-area"},n.createElement("div",{className:"media-labels-area-inner"},n.createElement("span",{className:"media-label-state"},n.createElement("span",null,t)),n.createElement("span",{className:"helper-icon","data-tooltip":i},n.createElement("i",{className:"material-icons"},"help_outline")))):null,n.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&s.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,e?n.createElement("div",{className:"media-views"},(0,m.formatViewsNumber)(this.props.views,!0)," ",1>=this.props.views?(0,m.translateString)("view"):(0,m.translateString)("views")):null,n.createElement("div",{className:"media-actions"},n.createElement("div",null,o.MemberContext._currentValue.can.likeMedia?n.createElement(Z,null):null,o.MemberContext._currentValue.can.dislikeMedia?n.createElement(J,null):null,o.MemberContext._currentValue.can.shareMedia?n.createElement(fe,{isVideo:!0}):null,!o.MemberContext._currentValue.is.anonymous&&o.MemberContext._currentValue.can.saveMedia&&-1<o.PlaylistsContext._currentValue.mediaTypes.indexOf(s.MediaPageStore.get("media-type"))?n.createElement(re,null):null,this.props.allowDownload&&o.MemberContext._currentValue.can.downloadMedia?this.downloadLink?n.createElement(ye,{link:this.downloadLink,title:this.props.title}):n.createElement(be,null):null,n.createElement(ne,{allowDownload:this.props.allowDownload})))))}}class ke extends n.PureComponent{constructor(e){super(e),this.state={videoLoaded:!1},this.onVideoLoad=this.onVideoLoad.bind(this),s.MediaPageStore.on("loaded_media_data",this.onVideoLoad)}onVideoLoad(){this.setState({videoLoaded:!0})}render(){let e,t,i,a,o,l,r=!1;return this.state.videoLoaded&&(r=s.MediaPageStore.get("media-data").allow_download,r=void 0===r||!!r,e=s.MediaPageStore.get("media-data").views,t=s.MediaPageStore.get("media-data").categories_info,i=s.MediaPageStore.get("media-data").title,a={name:s.MediaPageStore.get("media-data").author_name,url:s.MediaPageStore.get("media-data").author_profile,thumb:s.MediaPageStore.get("media-author-thumbnail-url")},o=s.MediaPageStore.get("media-data").add_date,l=s.MediaPageStore.get("media-data").description),this.state.videoLoaded?n.createElement("div",{className:"viewer-info"},n.createElement("div",{className:"viewer-info-inner"},n.createElement(Se,{title:i,views:e,categories:t,allowDownload:r}),n.createElement(G,{author:a,published:o,description:l}))):null}}class Ee extends ke{render(){let e,t,i,a,o,l,r=!1;return this.state.videoLoaded&&(r=s.MediaPageStore.get("media-data").allow_download,r=void 0===r||!!r,e=s.MediaPageStore.get("media-data").views,t=s.MediaPageStore.get("media-data").categories_info,i=s.MediaPageStore.get("media-data").title,a={name:s.MediaPageStore.get("media-data").author_name,url:s.MediaPageStore.get("media-data").author_profile,thumb:s.MediaPageStore.get("media-author-thumbnail-url")},o=s.MediaPageStore.get("media-data").add_date,l=s.MediaPageStore.get("media-data").description),this.state.videoLoaded?n.createElement("div",{className:"viewer-info"},n.createElement("div",{className:"viewer-info-inner"},n.createElement(Pe,{title:i,views:e,categories:t,allowDownload:r}),n.createElement(G,{author:a,published:o,description:l}))):null}}class we extends n.PureComponent{render(){return n.createElement("div",{className:"viewer-container",key:"viewer-container-error"},n.createElement("div",{className:"player-container player-container-error"},n.createElement("div",{className:"player-container-inner"},n.createElement("div",{className:"error-container"},n.createElement("div",{className:"error-container-inner"},n.createElement("span",{className:"icon-wrap"},n.createElement("i",{className:"material-icons"},"error_outline")),n.createElement("span",{className:"msg-wrap"},s.MediaPageStore.get("media-load-error-message")))))))}}var _e=i(4737);function Me(){const e=s.MediaPageStore.get("media-data");return e&&e.related_media&&e.related_media.length?e.related_media[0]:null}function Ce(e){const[t,i]=(0,n.useState)(Me()),[a,o]=(0,n.useState)(s.PageStore.get("media-auto-play"));function l(){o(s.PageStore.get("media-auto-play"))}function r(){i(Me())}return(0,n.useEffect)((()=>(s.MediaPageStore.on("loaded_media_data",r),s.PageStore.on("switched_media_auto_play",l),()=>{s.MediaPageStore.removeListener("loaded_media_data",r),s.PageStore.removeListener("switched_media_auto_play",l)})),[]),t?n.createElement("div",{className:"auto-play"},n.createElement("div",{className:"auto-play-header"},n.createElement("div",{className:"next-label"},(0,m.translateString)("Up next")),n.createElement("div",{className:"auto-play-option"},n.createElement("label",{className:"checkbox-label right-selectbox",tabIndex:0,onKeyPress:function(e){0===e.keyCode&&p.PageActions.toggleMediaAutoPlay()}},(0,m.translateString)("AUTOPLAY"),n.createElement("span",{className:"checkbox-switcher-wrap"},n.createElement("span",{className:"checkbox-switcher"},n.createElement("input",{type:"checkbox",tabIndex:-1,checked:a,onChange:p.PageActions.toggleMediaAutoPlay})))))),n.createElement(_e.k,{className:"items-list-hor",items:[t],pageItems:1,maxItems:1,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!s.PageStore.get("config-media-item").displayViews,hideAuthor:!s.PageStore.get("config-media-item").displayAuthor})):null}function xe(e){const[t,i]=(0,n.useState)(r()),[a,o]=(0,n.useState)(null);function l(){o(s.MediaPageStore.get("media-type")),i(r())}function r(){const e=s.MediaPageStore.get("media-data");return null!=e&&void 0!==e.related_media&&e.related_media.length?e.related_media:null}return(0,n.useEffect)((()=>(s.MediaPageStore.on("loaded_media_data",l),()=>s.MediaPageStore.removeListener("loaded_media_data",l))),[]),t&&t.length?n.createElement(_e.k,{className:"items-list-hor",items:!e.hideFirst||"video"!==a&&"audio"!==a?t:t.slice(1),pageItems:s.PageStore.get("config-options").pages.media.related.initialSize,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!s.PageStore.get("config-media-item").displayViews,hideAuthor:!s.PageStore.get("config-media-item").displayAuthor}):null}function Ne(e){return n.createElement(_e.k,{className:"items-list-hor",pageItems:9999,maxItems:9999,items:e.items,hideDate:!0,hideViews:!0,hidePlaylistOrderNumber:!1,horizontalItemsOrientation:!0,inPlaylistView:!0,singleLinkContent:!0,playlistActiveItem:e.playlistActiveItem})}xe.propTypes={hideFirst:d().bool},xe.defaultProps={hideFirst:!0},Ne.propTypes={items:d().array.isRequired,playlistActiveItem:m.PositiveIntegerOrZero},Ne.defaultProps={playlistActiveItem:1};class Te extends n.PureComponent{constructor(e){super(e),this.state={expanded:!0,loopRepeat:s.PlaylistViewStore.get("enabled-loop"),shuffle:s.PlaylistViewStore.get("enabled-shuffle"),savedPlaylist:s.PlaylistViewStore.get("saved-playlist-loop"),title:e.playlistData.title,link:e.playlistData.url,authorName:e.playlistData.user,authorLink:o.LinksContext._currentValue.home+"/user/"+e.playlistData.user,activeItem:e.activeItem,totalMedia:e.playlistData.media_count,items:e.playlistData.playlist_media},this.onHeaderClick=this.onHeaderClick.bind(this),this.onLoopClick=this.onLoopClick.bind(this),this.onShuffleClick=this.onShuffleClick.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.onLoopRepeatUpdate=this.onLoopRepeatUpdate.bind(this),this.onShuffleUpdate=this.onShuffleUpdate.bind(this),this.onPlaylistSaveUpdate=this.onPlaylistSaveUpdate.bind(this),s.PlaylistViewStore.on("loop-repeat-updated",this.onLoopRepeatUpdate),s.PlaylistViewStore.on("shuffle-updated",this.onShuffleUpdate),s.PlaylistViewStore.on("saved-updated",this.onPlaylistSaveUpdate)}onHeaderClick(e){this.setState({expanded:!this.state.expanded})}onLoopClick(){p.PlaylistViewActions.toggleLoop()}onShuffleClick(){p.PlaylistViewActions.toggleShuffle()}onSaveClick(){p.PlaylistViewActions.toggleSave()}onShuffleUpdate(){this.setState({shuffle:s.PlaylistViewStore.get("enabled-shuffle")},(()=>{this.state.shuffle?p.PageActions.addNotification("Playlist shuffle is on","shuffle-on"):p.PageActions.addNotification("Playlist shuffle is off","shuffle-off")}))}onLoopRepeatUpdate(){this.setState({loopRepeat:s.PlaylistViewStore.get("enabled-loop")},(()=>{this.state.loopRepeat?p.PageActions.addNotification("Playlist loop is on","loop-on"):p.PageActions.addNotification("Playlist loop is off","loop-off")}))}onPlaylistSaveUpdate(){this.setState({savedPlaylist:s.PlaylistViewStore.get("saved-playlist")},(()=>{this.state.savedPlaylist?p.PageActions.addNotification("Added to playlists library","added-to-playlists-lib"):p.PageActions.addNotification("Removed from playlists library","removed-from-playlists-lib")}))}render(){return n.createElement("div",{className:"playlist-view-wrap"},n.createElement("div",{className:"playlist-view"+(this.state.expanded?" playlist-expanded-view":"")},n.createElement("div",{className:"playlist-header"},n.createElement("div",{className:"playlist-title"},n.createElement("a",{href:this.state.link,title:this.state.title},this.state.title)),n.createElement("div",{className:"playlist-meta"},n.createElement("span",null,n.createElement("a",{href:this.state.authorLink,title:this.state.authorName},this.state.authorName)),"  -  ",n.createElement("span",{className:"counter"},this.state.activeItem," / ",this.state.totalMedia)),n.createElement(v.CircleIconButton,{className:"toggle-playlist-view",onClick:this.onHeaderClick},this.state.expanded?n.createElement("i",{className:"material-icons"},"keyboard_arrow_up"):n.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),this.state.expanded?n.createElement("div",{className:"playlist-actions"},n.createElement(v.CircleIconButton,{className:this.state.loopRepeat?"active":"",onClick:this.onLoopClick,title:"Loop playlist"},n.createElement("i",{className:"material-icons"},"repeat"))):null,this.state.expanded&&this.state.items.length?n.createElement("div",{className:"playlist-media"},n.createElement(Ne,{items:this.state.items,playlistActiveItem:this.state.activeItem})):null))}}Te.propTypes={playlistData:d().object.isRequired,activeItem:m.PositiveIntegerOrZero},Te.defaultProps={};class Oe extends n.PureComponent{constructor(e){if(super(e),this.state={playlistData:e.playlistData,isPlaylistPage:!!e.playlistData,activeItem:0,mediaType:s.MediaPageStore.get("media-type")},e.playlistData){let t=0;for(;t<e.playlistData.playlist_media.length;){if(e.mediaId===e.playlistData.playlist_media[t].friendly_token){this.state.activeItem=t+1;break}t+=1}}this.onMediaLoad=this.onMediaLoad.bind(this)}componentDidMount(){s.MediaPageStore.on("loaded_media_data",this.onMediaLoad)}onMediaLoad(){this.setState({mediaType:s.MediaPageStore.get("media-type")})}render(){return n.createElement("div",{className:"viewer-sidebar"},this.state.isPlaylistPage?n.createElement(Te,{activeItem:this.state.activeItem,playlistData:this.props.playlistData}):"video"===this.state.mediaType||"audio"===this.state.mediaType?n.createElement(Ce,null):null,n.createElement(xe,{hideFirst:!this.state.isPlaylistPage}))}}var Le=i(9479);Le.Y;class je extends Le.Y{constructor(e){super(e,"media"),this.state={wideLayout:1216<=window.innerWidth,mediaLoaded:!1,mediaLoadFailed:!1,isVideoMedia:!1,theaterMode:!1,pagePlaylistLoaded:!1,pagePlaylistData:s.MediaPageStore.get("playlist-data")},this.onWindowResize=this.onWindowResize.bind(this),this.onMediaLoad=this.onMediaLoad.bind(this),this.onMediaLoadError=this.onMediaLoadError.bind(this),this.onPagePlaylistLoad=this.onPagePlaylistLoad.bind(this),s.MediaPageStore.on("loaded_media_data",this.onMediaLoad),s.MediaPageStore.on("loaded_media_error",this.onMediaLoadError),s.MediaPageStore.on("loaded_page_playlist_data",this.onPagePlaylistLoad)}componentDidMount(){p.MediaPageActions.loadMediaData(),s.PageStore.on("window_resize",this.onWindowResize)}onWindowResize(){this.setState({wideLayout:1216<=window.innerWidth})}onPagePlaylistLoad(){this.setState({pagePlaylistLoaded:!0,pagePlaylistData:s.MediaPageStore.get("playlist-data")})}onMediaLoad(){const e="video"===s.MediaPageStore.get("media-type");e?(this.onViewerModeChange=this.onViewerModeChange.bind(this),s.VideoViewerStore.on("changed_viewer_mode",this.onViewerModeChange),this.setState({mediaLoaded:!0,isVideoMedia:e,theaterMode:s.VideoViewerStore.get("in-theater-mode")})):this.setState({mediaLoaded:!0,isVideoMedia:e})}onViewerModeChange(){this.setState({theaterMode:s.VideoViewerStore.get("in-theater-mode")})}onMediaLoadError(e){this.setState({mediaLoadFailed:!0})}pageContent(){const e="cf viewer-section"+(this.state.theaterMode?" theater-mode":" viewer-wide"),t="viewer-section-nested"+(this.state.theaterMode?" viewer-section":"");return this.state.mediaLoadFailed?n.createElement("div",{className:e},n.createElement(we,null)):n.createElement("div",{className:e},[n.createElement("div",{className:"viewer-container",key:"viewer-container"},this.state.mediaLoaded&&this.state.pagePlaylistLoaded?this.viewerContainerContent(s.MediaPageStore.get("media-data")):null),n.createElement("div",{key:"viewer-section-nested",className:t},!this.state.wideLayout||this.state.isVideoMedia&&this.state.theaterMode?[n.createElement(Ee,{key:"viewer-info"}),this.state.pagePlaylistLoaded?n.createElement(Oe,{key:"viewer-sidebar",mediaId:s.MediaPageStore.get("media-id"),playlistData:s.MediaPageStore.get("playlist-data")}):null]:[this.state.pagePlaylistLoaded?n.createElement(Oe,{key:"viewer-sidebar",mediaId:s.MediaPageStore.get("media-id"),playlistData:s.MediaPageStore.get("playlist-data")}):null,n.createElement(Ee,{key:"viewer-info"})])])}}var Ae=i(8974);if(window.MediaCMS.site.devEnv){const e=()=>{let e=null,t=null;const i=window.location.search.split("?")[1];return i&&i.split("&").forEach((i=>{0===i.indexOf("m=")?e=i.split("m=")[1]:0===i.indexOf("pl=")&&(t=i.split("pl=")[1])})),{mediaId:e,playlistId:t}},{mediaId:t,playlistId:i}=e();t&&(window.MediaCMS.mediaId=t),i&&(window.MediaCMS.playlistId=i)}(0,a.C)("page-media",class extends je{viewerContainerContent(e){const t=document.getElementById("page-media");let i={};if(t){const e=t.getAttribute("data-playback-urls");if(Ae.log("raw data view normal",e),e)try{i=JSON.parse(e),Ae.log("🎥 Playback URLs (normal view):",i)}catch(e){Ae.error("❌ Error parsing playback_urls:",e)}}switch(s.MediaPageStore.get("media-type")){case"video":return n.createElement(o.SiteConsumer,null,(t=>n.createElement(A,{data:{...e,playback_urls:i},siteUrl:t.url,inEmbed:!1})));case"audio":return n.createElement(y,null);case"image":return n.createElement(S,null);case"pdf":const t=(0,m.formatInnerLink)(s.MediaPageStore.get("media-original-url"),o.SiteContext._currentValue.url);return n.createElement(E,{fileUrl:t})}return n.createElement(l,null)}})},1815:function(){},2787:function(){},3237:function(){},3818:function(e,t,i){"use strict";i.d(t,{_:function(){return s}});var a=i(9471),n=i(8713),o=i.n(n);function s(e){const t=(0,a.useRef)(null),i=(0,a.useRef)(null),[n,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(null);return(0,a.useEffect)((()=>{o(function(e,t,i){if(void 0!==e){let a=null;return a=void 0!==t&&t>e?t:e,a=void 0!==i&&i<a?i:a,a}return void 0!==t?t:void 0!==i?i:void 0}(0+e.defaultValue,e.minValue,e.maxValue)),l(function(e,t){if(!t||!t.length)return null;let i=0;for(;i<t.length;){if(void 0!==t[i].key&&e===t[i].key)return t[i].key;i+=1}return t[0].key}(e.defaultUnit,e.units))})),a.createElement("div",{className:"num-value-unit"},void 0!==e.label?a.createElement("span",{className:"label"},e.label):null,a.createElement("input",{ref:t,className:"value-input",type:"number",value:null!==n?n:"",min:void 0!==e.minValue?e.minValue:null,max:void 0!==e.maxValue?e.maxValue:null,onChange:function(){o(t.current.value),void 0!==e.valueCallback&&e.valueCallback(t.current.value)}}),a.createElement("select",{ref:i,className:"value-unit",onChange:function(){l(i.current.value),void 0!==e.unitCallback&&e.unitCallback(i.current.value)},value:null!==s?s:""},function(){if(!e.units.length)return null;const t=[];let i=0;for(;i<e.units.length;)void 0!==e.units[i].key&&t.push(a.createElement("option",{key:e.units[i].key,value:e.units[i].key},void 0!==e.units[i].label?e.units[i].label:e.units[i].key)),i+=1;return t}()))}s.propTypes={label:o().string,units:o().array.isRequired,defaultUnit:o().string,defaultValue:o().number,minValue:o().number,maxValue:o().number,valueCallback:o().func,unitCallback:o().func}},4480:function(e,t,i){var a=i(8974);e.exports=function(){"use strict";function e(e){return"string"==typeof e||e instanceof String}function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function n(e,t){return"boolean"==typeof(i=e)||i instanceof Boolean?e:t;var i}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self,function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function m(e){var t=d();return function(){var i,a=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return c(this,i)}}var p="0.9.0",h=null;function g(){var i=videojs.getComponent("Component"),l=videojs.getComponent("ClickableComponent"),r=videojs.getComponent("Button"),d=videojs.extend(i,{constructor:function(){i.apply(this,arguments),this.setAttribute("class",this.buildCSSClass())},buildCSSClass:function(){return""}}),h=videojs.extend(l,{buildCSSClass:function(){return""}}),g=C("vjs-settings-panel"),f=C("vjs-settings-panel-inner"),y=C("vjs-setting-panel-title"),v=C("vjs-settings-menu"),b=_(h,"vjs-settings-menu-item"),S=C("vjs-setting-menu-item-label"),P=C("vjs-setting-menu-item-content");function k(t,i,a,n,o){var s=!!a&&1===a.nodeType;if(!s)switch(e(a)){case"string":a=""===(a=a.trim())?null:a;break;case"number":a=a.toString();break;default:a=null}n="string"===e(n)?""===(n=n.trim())?null:n:null,o&&Object.keys(o).length||(o=null),(a||o)&&(t.constructor=function(){var e;if(i.apply(this,arguments),a&&(s?this.el_.appendChild(a):this.el_.innerHTML=a),o)for(e in o)o.hasOwnProperty(e)&&this.el_.setAttribute(e,o[e])}),n&&(t.buildCSSClass=function(){return n+" "+i.prototype.buildCSSClass.call(this)})}function E(e,t){return videojs.extend(e,t)}function w(e,t){return{extend:e,methods:t}}function _(e,t,i,a){var n={};return k(n,e,i,t,a),E(e,n)}function M(e,t,i,a){var n={};return k(n,e,i,t,a),w(e,n)}function C(e,t,i){return _(d,e,t,i)}function x(e){function t(e,i,a,n,o){var s,l=!1;for(s in a[o]=void 0===a[o]?[]:a[o],i)i.hasOwnProperty(s)&&(i[s]&&i[s].children?t(s,i[s].children,a,n,o+1)&&(l=!0,a[o].push(s),n[s]=e):(l=!0,a[o].push(s),n[s]=e));return l}function i(i,a){var n,o,s,l=[],r={},d={};if(i.children)for(t("controlBar",i.children,l,r,0),n=0;n<l.length;){for(o=0;o<l[n].length;)(s=0===n?e.player.getChild(r[l[n][o]]):d[r[l[n][o]]]).addChild(l[n][o],{}),d[l[n][o]]=s.getChild(l[n][o]),o++;n++}}return i}function N(e,t){if(t.enabledTouchControls){var i,a,n,o,s,l=M(r,"vjs-icon-previous-item"),u=M(r,"vjs-icon-play"),c=M(r,"vjs-icon-next-item");u.methods.handleClick=function(e){this.player_.paused()?(this.player_.play(),setTimeout(function(){this.player_.userActive(!1)}.bind(this),250)):this.player_.pause()},t.controlBar.next&&(c.methods.handleClick=function(e){this.player_.trigger("clicked_next_button")}),t.controlBar.previous&&(l.methods.handleClick=function(e){this.player_.trigger("clicked_previous_button")}),videojs.registerComponent("TouchControls",videojs.extend(d,M(d,"vjs-touch-controls").methods)),videojs.registerComponent("TouchControlsInner",videojs.extend(d,M(d).methods)),videojs.registerComponent("TouchPreviousButton",videojs.extend(l.extend,l.methods)),videojs.registerComponent("TouchPlayButton",videojs.extend(u.extend,u.methods)),videojs.registerComponent("TouchNextButton",videojs.extend(c.extend,c.methods)),videojs.registerComponent("TouchPlay",videojs.extend(d,M(d,"vjs-touch-play-button").methods)),t.controlBar.next||t.controlBar.previous?(videojs.registerComponent("TouchPrevious",videojs.extend(d,M(d,"vjs-touch-previous-button"+(t.controlBar.previous?"":" vjs-touch-disabled-button")).methods)),videojs.registerComponent("TouchNext",videojs.extend(d,M(d,"vjs-touch-next-button"+(t.controlBar.next?"":" vjs-touch-disabled-button")).methods))):(videojs.registerComponent("TouchPrevious",videojs.extend(d,M(d,"vjs-touch-previous-button"+(t.controlBar.previous?"":" vjs-touch-hidden-button")).methods)),videojs.registerComponent("TouchNext",videojs.extend(d,M(d,"vjs-touch-next-button"+(t.controlBar.next?"":" vjs-touch-hidden-button")).methods))),e.player.addChild("TouchControls"),(i=e.player.getChild("TouchControls")).addChild("TouchControlsInner"),(a=i.getChild("TouchControlsInner")).addChild("TouchPrevious"),a.addChild("TouchPlay"),a.addChild("TouchNext"),n=a.getChild("TouchPrevious"),o=a.getChild("TouchPlay"),s=a.getChild("TouchNext"),n.addChild("TouchPreviousButton"),o.addChild("TouchPlayButton"),s.addChild("TouchNextButton")}}function T(e,t){var i,a={},n="CornerLayer_";for(i in t.cornerLayers.topLeft&&(a.topLeft={className:"vjs-corner-layer vjs-corner-top-left",parent:e.player,content:t.cornerLayers.topLeft}),t.cornerLayers.topRight&&(a.topRight={className:"vjs-corner-layer vjs-corner-top-right",parent:e.player,content:t.cornerLayers.topRight}),t.cornerLayers.bottomLeft&&(a.bottomLeft={className:"vjs-corner-layer vjs-corner-bottom-left",parent:e.player,content:t.cornerLayers.bottomLeft}),t.cornerLayers.bottomRight&&(a.bottomRight={className:"vjs-corner-layer vjs-corner-bottom-right",parent:e.player,content:t.cornerLayers.bottomRight}),a)a.hasOwnProperty(i)&&a[i].content&&(videojs.registerComponent(n+i,videojs.extend(d,M(d,a[i].className,a[i].content).methods)),a[i].parent.addChild(n+i))}function O(e){videojs.registerComponent("ActionsAnimations",videojs.extend(d,M(d,"vjs-actions-anim","<span></span>").methods)),e.player.addChild("ActionsAnimations")}function L(e){e.player.removeChild("LoadingSpinner"),videojs.registerComponent("LoadingSpinner",videojs.extend(d,M(d,"vjs-loading-spinner",'<div class="spinner">                        <div class="spinner-container">                            <div class="spinner-rotator">                                <div class="spinner-left"><div class="spinner-circle"></div></div>                                <div class="spinner-right"><div class="spinner-circle"></div></div>                            </div>                        </div>                    </div>').methods)),e.player.addChild("LoadingSpinner")}function j(e,t,a,n){var s,l,u;switch(t){case"bottomBackground":a.bottomBackground=null,videojs.registerComponent("BottomBackground",videojs.extend(d,M(d,"vjs-bottom-bg").methods));break;case"progressControl":a.progressControl=null;break;case"__subtitles":for(a.subtitlesPanel={children:{subtitlesPanelInner:{children:{subtitlesMenuTitle:null,subtitlesMenu:{children:{}}}}}},(u=M(g,"vjs-subtitles-panel")).methods.constructor=function(){i.apply(this,arguments),this.setAttribute("class",this.buildCSSClass());var t=this;function a(e){t.el_.contains(e.relatedTarget)||t.player_.trigger("focusoutSubtitlesPanel")}e.on(this.player_,["updatedSubtitlesPanelsVisibility"],(function(){videojs.dom[this.state.isOpenSubtitlesOptions?"addClass":"removeClass"](t.el_,"vjs-visible-panel")})),e.on(this.player_,["openedSubtitlesPanel"],(function(e,i){t.el_.setAttribute("tabindex","-1"),t.el_.addEventListener("focusout",a),i?t.el_.querySelector(".vjs-settings-menu-item").focus():t.el_.focus()})),e.on(this.player_,["closedSubtitlesPanel"],(function(e,i){t.el_.removeAttribute("tabindex"),t.el_.removeEventListener("focusout",a),i&&t.el_.querySelector(".vjs-settings-menu-item").focus()}))},videojs.registerComponent("SubtitlesPanel",videojs.extend(u.extend,u.methods)),videojs.registerComponent("SubtitlesPanelInner",videojs.extend(f,M(f).methods)),videojs.registerComponent("SubtitlesMenu",videojs.extend(v,M(v).methods)),videojs.registerComponent("SubtitlesMenuTitle",videojs.extend(y,M(y,null,"<span>Subtitles</span>").methods)),l=0;l<n.options.subtitles.languages.length;)s=n.options.subtitles.languages[l],a.subtitlesPanel.children.subtitlesPanelInner.children.subtitlesMenu.children["subtitleOption_"+s.srclang]={children:o({},"subtitleOption_"+s.srclang+"_content",null)},function(t,i){(u=M(b,t===e.state.theSelectedSubtitleOption?"vjs-selected-menu-item":null,null)).methods.constructor=function(){b.apply(this,arguments),this.subtitleKey=t;var i=this;this.setAttribute("data-opt",t),e.on(this.player_,["updatedSelectedSubtitleOption"],(function(){i.subtitleKey===this.state.theSelectedSubtitleOption?videojs.dom.addClass(i.el_,"vjs-selected-menu-item"):videojs.dom.removeClass(i.el_,"vjs-selected-menu-item")}))},u.methods.handleClick=function(){this.player_.trigger("selectedSubtitleOption",this.el_.getAttribute("data-opt"))},videojs.registerComponent("SubtitleOption_"+t,videojs.extend(u.extend,u.methods)),u=M(P,null,i),videojs.registerComponent("SubtitleOption_"+t+"_content",videojs.extend(u.extend,u.methods))}(s.srclang,s.label),l+=1;break;case"__settings":a.settingsPanel={children:{settingsPanelInner:{children:{settingsMenu:{children:{}}}}}},(u=M(g,"vjs-settings-root")).methods.constructor=function(){i.apply(this,arguments),this.setAttribute("class",this.buildCSSClass());var t=this;function a(e){t.el_.contains(e.relatedTarget)||t.player_.trigger("focusoutSettingsPanel")}e.on(this.player_,["updatedSettingsPanelsVisibility"],(function(){videojs.dom[this.state.isOpenSettingsOptions?"addClass":"removeClass"](t.el_,"vjs-visible-panel")})),e.on(this.player_,["openedSettingsPanel"],(function(e,i){t.el_.setAttribute("tabindex","-1"),t.el_.addEventListener("focusout",a),i?t.el_.querySelector(".vjs-settings-menu-item").focus():t.el_.focus()})),e.on(this.player_,["closedSettingsPanel"],(function(e,i){t.el_.removeAttribute("tabindex"),t.el_.removeEventListener("focusout",a),i&&t.el_.querySelector(".vjs-settings-menu-item").focus()}))},videojs.registerComponent("SettingsPanel",videojs.extend(u.extend,u.methods)),videojs.registerComponent("SettingsPanelInner",videojs.extend(f,M(f).methods)),videojs.registerComponent("SettingsMenu",videojs.extend(v,M(v).methods)),n.enabledPlaybackSpeedPanel&&(a.settingsPanel.children.settingsPanelInner.children.settingsMenu.children.selectedPlaybackSpeed={children:{selectedPlaybackSpeedLabel:null,selectedPlaybackSpeedContent:null}},(u=M(b,"vjs-selected-speed")).methods.handleClick=function(e){this.player_.trigger("openPlaybackSpeedOptions",!e.screenX&&!e.screenY)},videojs.registerComponent("SelectedPlaybackSpeed",videojs.extend(u.extend,u.methods)),videojs.registerComponent("SelectedPlaybackSpeedLabel",videojs.extend(S,M(S,null,"Playback speed").methods)),(u=M(P,null,n.selectedPlaybackSpeed)).methods.constructor=function(){i.apply(this,arguments);var t=this;t.el_.innerHTML=e.selectedPlaybackSpeedTitle(),this.setAttribute("class",this.buildCSSClass()),e.on(this.player_,["updatedSelectedPlaybackSpeed"],(function(){t.el_.innerHTML=this.selectedPlaybackSpeedTitle()}))},videojs.registerComponent("SelectedPlaybackSpeedContent",videojs.extend(u.extend,u.methods))),n.enabledResolutionsPanel&&(a.settingsPanel.children.settingsPanelInner.children.settingsMenu.children.selectedResolution={children:{selectedResolutionLabel:null,selectedResolutionContent:null}},(u=M(b,"vjs-selected-quality")).methods.handleClick=function(e){this.player_.trigger("openQualityOptions",!e.screenX&&!e.screenY)},videojs.registerComponent("SelectedResolution",videojs.extend(u.extend,u.methods)),videojs.registerComponent("SelectedResolutionLabel",videojs.extend(S,M(S,null,"Quality").methods)),(u=M(P,null,n.selectedResolution)).methods.constructor=function(){i.apply(this,arguments);var t=this;t.el_.innerHTML=n.selectedResolution,this.setAttribute("class",this.buildCSSClass()),e.on(this.player_,["updatedSelectedQuality"],(function(){t.el_.innerHTML=this.selectedQualityTitle()}))},videojs.registerComponent("SelectedResolutionContent",videojs.extend(u.extend,u.methods)));break;case"__resolution":a.resolutionsPanel={children:{resolutionsPanelInner:{children:{resolutionsMenuTitle:{children:{resolutionsMenuBackButton:null}},resolutionsMenu:{children:{}}}}}},(u=M(g,"vjs-resolutions-panel")).methods.constructor=function(){i.apply(this,arguments),this.setAttribute("class",this.buildCSSClass());var t=this;function a(e){t.el_.contains(e.relatedTarget)||t.player_.trigger("focusoutResolutionsPanel")}e.on(this.player_,["updatedSettingsPanelsVisibility"],(function(){videojs.dom[this.state.isOpenQualityOptions?"addClass":"removeClass"](t.el_,"vjs-visible-panel")})),e.on(this.player_,["openedQualities"],(function(e,i){t.el_.setAttribute("tabindex","-1"),t.el_.addEventListener("focusout",a),i?t.el_.querySelector('.vjs-setting-panel-title > *[role="button"]').focus():t.el_.focus()})),e.on(this.player_,["closedQualities"],(function(e,i){t.el_.removeAttribute("tabindex"),t.el_.removeEventListener("focusout",a),i&&t.el_.querySelector(".vjs-settings-menu-item").focus()}))},videojs.registerComponent("ResolutionsPanel",videojs.extend(u.extend,u.methods)),videojs.registerComponent("ResolutionsPanelInner",videojs.extend(f,M(f).methods)),videojs.registerComponent("ResolutionsMenu",videojs.extend(v,M(v).methods)),videojs.registerComponent("ResolutionsMenuTitle",videojs.extend(y,M(y,"vjs-settings-back").methods)),(u=M(h,null,"Quality")).methods.handleClick=function(e){this.player_.trigger("closeQualityOptions",!e.screenX&&!e.screenY)},videojs.registerComponent("ResolutionsMenuBackButton",videojs.extend(u.extend,u.methods));var c=function(){var e,t=[],i=Object.keys(n.resolutions),a=[],o=[];for(e=0;e<i.length;)isNaN(0+i[e])?a.push(i[e]):o.push([parseFloat(i[e]),i[e]]),e+=1;for(o.sort((function(e,t){return t[0]-e[0]})),e=0;e<o.length;)t.push(o[e][1]),e+=1;for(e=0;e<a.length;)t.push(a[e]),e+=1;return t}();for(l=0;l<c.length;)s=c[l],a.resolutionsPanel.children.resolutionsPanelInner.children.resolutionsMenu.children["resolutionOption_"+s]={children:o({},"resolutionOption_"+s+"_content",null)},function(t,i){(u=M(b,t.toString()===e.state.theSelectedQuality.toString()?"vjs-selected-menu-item":null,null)).methods.constructor=function(){b.apply(this,arguments);var i=this;this.qualityKey=t,this.setAttribute("data-opt",t),e.on(this.player_,["updatedSelectedQuality"],(function(){videojs.dom[i.qualityKey===this.state.theSelectedQuality?"addClass":"removeClass"](i.el_,"vjs-selected-menu-item")}))},u.methods.handleClick=function(){this.player_.trigger("selectedQuality",this.el_.getAttribute("data-opt"))},videojs.registerComponent("ResolutionOption_"+t,videojs.extend(u.extend,u.methods)),u=M(P,null,i),videojs.registerComponent("ResolutionOption_"+t+"_content",videojs.extend(u.extend,u.methods))}(s,n.resolutions[s].title||s),l+=1;break;case"__playbackSpeed":for(s in a.playbackSpeedsPanel={children:{playbackSpeedsPanelInner:{children:{playbackSpeedsMenuTitle:{children:{playbackSpeedsMenuBackButton:null}},playbackSpeedsMenu:{children:{}}}}}},(u=M(g,"vjs-playback-speed-panel")).methods.constructor=function(){i.apply(this,arguments),this.setAttribute("class",this.buildCSSClass());var t=this;function a(e){t.el_.contains(e.relatedTarget)||t.player_.trigger("focusoutPlaybackSpeedsPanel")}e.on(this.player_,["updatedSettingsPanelsVisibility"],(function(){videojs.dom[this.state.isOpenPlaybackSpeedOptions?"addClass":"removeClass"](t.el_,"vjs-visible-panel")})),e.on(this.player_,["openedPlaybackSpeeds"],(function(e,i){t.el_.setAttribute("tabindex","-1"),t.el_.addEventListener("focusout",a),i?t.el_.querySelector('.vjs-setting-panel-title > *[role="button"]').focus():t.el_.focus()})),e.on(this.player_,["closedPlaybackSpeeds"],(function(e,i){t.el_.removeAttribute("tabindex"),t.el_.removeEventListener("focusout",a),i&&t.el_.querySelector(".vjs-settings-menu-item").focus()}))},videojs.registerComponent("PlaybackSpeedsPanel",videojs.extend(u.extend,u.methods)),videojs.registerComponent("PlaybackSpeedsPanelInner",videojs.extend(f,M(f).methods)),videojs.registerComponent("PlaybackSpeedsMenu",videojs.extend(v,M(v).methods)),videojs.registerComponent("PlaybackSpeedsMenuTitle",videojs.extend(y,M(y,"vjs-settings-back").methods)),(u=M(h,null,"Playback speed")).methods.handleClick=function(e){this.player_.trigger("closePlaybackSpeedOptions",!e.screenX&&!e.screenY)},videojs.registerComponent("PlaybackSpeedsMenuBackButton",videojs.extend(u.extend,u.methods)),n.playbackSpeeds)n.playbackSpeeds.hasOwnProperty(s)&&(a.playbackSpeedsPanel.children.playbackSpeedsPanelInner.children.playbackSpeedsMenu.children["playbackSpeedOption_"+n.playbackSpeeds[s].speed]={children:o({},"playbackSpeedOption_"+n.playbackSpeeds[s].speed+"_content",null)},function(t,i){(u=M(b,t.toString()===e.state.theSelectedPlaybackSpeed.toString()?"vjs-selected-menu-item":null,null)).methods.constructor=function(){b.apply(this,arguments);var i=this;this.playbackSpeedKey=t,this.setAttribute("data-opt",t),e.on(this.player_,["updatedSelectedPlaybackSpeed"],(function(){videojs.dom[i.playbackSpeedKey===this.state.theSelectedPlaybackSpeed?"addClass":"removeClass"](i.el_,"vjs-selected-menu-item")}))},u.methods.handleClick=function(){this.player_.trigger("selectedPlaybackSpeed",this.el_.getAttribute("data-opt"))},videojs.registerComponent("PlaybackSpeedOption_"+t,videojs.extend(u.extend,u.methods)),u=M(P,null,i),videojs.registerComponent("PlaybackSpeedOption_"+t+"_content",videojs.extend(u.extend,u.methods))}(n.playbackSpeeds[s].speed,n.playbackSpeeds[s].title||s));break;case"__leftControls":a.leftControls={children:{}},n.options.controlBar.previous&&((u=M(r,"vjs-previous-button")).methods.handleClick=function(e){this.player_.trigger("clicked_previous_button")},videojs.registerComponent("PreviousButton",videojs.extend(u.extend,u.methods)),a.leftControls.children.previousButton=null),n.options.controlBar.play&&(a.leftControls.children.playToggle=null),n.options.controlBar.next&&((u=M(r,"vjs-next-button")).methods.handleClick=function(e){this.player_.trigger("clicked_next_button")},videojs.registerComponent("NextButton",videojs.extend(u.extend,u.methods)),a.leftControls.children.nextButton=null),n.options.controlBar.volume&&(a.leftControls.children.volumePanel=null),n.options.controlBar.time&&(a.leftControls.children.currentTimeDisplay=null,a.leftControls.children.timeDivider=null,a.leftControls.children.durationDisplay=null),videojs.registerComponent("LeftControls",videojs.extend(d,M(d,"vjs-left-controls").methods));break;case"__rightControls":a.rightControls={children:{}},n.options.subtitles&&(a.rightControls.children.subtitlesToggle=null),n.enabledSettingsPanel&&(a.rightControls.children.settingsToggle=null),n.options.controlBar.theaterMode&&(a.rightControls.children.theaterModeToggle=null),n.options.controlBar.pictureInPicture&&(a.rightControls.children.pictureInPictureToggle=null),n.options.controlBar.fullscreen&&(a.rightControls.children.fullscreenToggle=null),videojs.registerComponent("RightControls",videojs.extend(d,M(d,"vjs-right-controls").methods)),n.options.subtitles&&((u=M(r,"vjs-subtitles-control")).methods.handleClick=function(t){this.player_.trigger(e.state.isOpenSubtitlesOptions?"closeSubtitlesPanel":"openSubtitlesPanel",!t.screenX&&!t.screenY)},videojs.registerComponent("SubtitlesToggle",videojs.extend(u.extend,u.methods))),n.enabledSettingsPanel&&((u=M(r,"vjs-settings-control vjs-icon-cog")).methods.handleClick=function(t){this.player_.trigger(e.state.isOpenSettingsOptions?"closeSettingsPanel":"openSettingsPanel",!t.screenX&&!t.screenY)},videojs.registerComponent("SettingsToggle",videojs.extend(u.extend,u.methods))),n.options.controlBar.theaterMode&&((u=M(r,"vjs-theater-mode-control")).methods.handleClick=function(){this.player_.trigger("theatermodechange"),this.updateControlText()},u.methods.updateControlText=function(){this.controlText(this.player_.localize(e.isTheaterMode()?"Default mode":"Theater mode"))},videojs.registerComponent("TheaterModeToggle",videojs.extend(u.extend,u.methods)))}}function A(e,t){var i={},a=void 0!==t.resolutions&&void 0!==t.resolutions.options&&!!Object.keys(t.resolutions.options).length,n=void 0!==t.playbackSpeeds&&void 0!==t.playbackSpeeds.options&&!!Object.keys(t.playbackSpeeds.options).length,o=a||n;return t.controlBar.bottomBackground&&j(e,"bottomBackground",i),t.controlBar.progress&&j(e,"progressControl",i),a&&j(e,"__resolution",i,{resolutions:t.resolutions.options}),n&&j(e,"__playbackSpeed",i,{playbackSpeeds:t.playbackSpeeds.options}),t.subtitles&&j(e,"__subtitles",i,{options:t}),o&&(a&&n?j(e,"__settings",i,{enabledResolutionsPanel:a,selectedResolution:a?t.resolutions.default:null,enabledPlaybackSpeedPanel:n,selectedPlaybackSpeed:n?t.playbackSpeeds.default:null}):a?j(e,"__settings",i,{enabledResolutionsPanel:a,selectedResolution:a?t.resolutions.default:null}):n&&j(e,"__settings",i,{enabledPlaybackSpeedPanel:n,selectedPlaybackSpeed:n?t.playbackSpeeds.default:null})),(t.controlBar.play||t.controlBar.previous||t.controlBar.next||t.controlBar.volume||t.controlBar.time)&&j(e,"__leftControls",i,{options:t}),(o||t.subtitles||t.controlBar.theaterMode||t.controlBar.fullscreen||t.controlBar.pictureInPictureToggle)&&j(e,"__rightControls",i,{options:t,enabledSettingsPanel:o}),{children:i}}function V(e,t,i){Q(t)&&Q(t.controlBar)&&x(e)(A(e,t),i.getChild("controlBar"))}function R(e,t){Q(t)&&T(e,t)}function I(e){O(e)}function D(e){L(e)}function B(e,t){N(e,t)}function U(e,t,i,a,n,o){var s={},l=Q(i)&&!q(i)?i:e/t,r=Q(o)&&!q(o)?o:a/n,d=1>l;return 1>r?d?l>r?e>=a?(s.w=a,s.h=s.w/l):(s.w=e,s.h=t):e>=a||t>=n?(s.h=n,s.w=s.h*l):(s.w=e,s.h=t):e>=a?(s.w=a,s.h=s.w/l):(s.w=e,s.h=t):d?t>=n?(s.h=n,s.w=s.h*l):(s.w=e,s.h=t):l>r?e>=a?(s.w=a,s.h=s.w/l):(s.w=e,s.h=t):(s.h=e>=a||t>=n?n:t,s.w=s.h*l),s.t=(n-s.h)/2,s.l=(a-s.w)/2,s}function F(e){return"boolean"==typeof e||e instanceof Boolean}function Q(e){return null!=e}function q(e){return null===e}function H(e,t){t=t.replace(/ /g,""),e.style.transform=t,e.style.msTransform=t,e.style.MozTransform=t,e.style.WebkitTransform=t,e.style.OTransform=t}function z(){var e,t,i=(document.body||document.documentElement).style,a="transition";if("string"==typeof i[a])return!0;for(t=["Moz","webkit","Webkit","Khtml","O","ms"],a=a.charAt(0).toUpperCase()+a.substr(1),e=0;e<t.length;){if("string"==typeof i[t[e]+a])return!0;e+=1}return!1}function W(e){return"csstransforms"===e?z():null}function K(e,t,i){if(t&&i)for(var a=i[t],n=0;n<a.src.length;){if(e===a.src[n])return{defaultResolution:t,format:a.format[n],order:n};n+=1}var o,s;for(o in i)if(i.hasOwnProperty(o))for(s=0;s<i[o].src.length;){if(e===i[o].src[s]){for(;void 0===i[o].format[s]&&s<i[o].format.length;)s+=1;return t=o,s=void 0===i[o].format[s]?i[o].format.length-1:s,{defaultResolution:o,format:i[o].format[s],order:s}}s+=1}return{defaultResolution:t,format:i[t].format[0],order:0}}function Y(e){var t=e.getChild("controlBar"),i=void 0===t?t:t.getChild("progressControl"),a=void 0===t?t:t.getChild("leftControls"),n=void 0===t?t:t.getChild("rightControls"),o=void 0===a?a:a.getChild("volumePanel");void 0===o||o.getChild("volumeControl");var s={playToggle:void 0===a?a:a.getChild("playToggle"),previousButton:void 0===a?a:a.getChild("previousButton"),nextButton:void 0===a?a:a.getChild("nextButton"),muteToggle:void 0===o?o:o.getChild("muteToggle"),volumeBar:void 0===o?o:o.getChild("volumeControl").getChild("volumeBar"),subtitlesToggle:void 0===n?n:n.getChild("subtitlesToggle"),settingsToggle:void 0===n?n:n.getChild("settingsToggle"),fullscreenToggle:void 0===n?n:n.getChild("fullscreenToggle"),theaterModeToggle:void 0===n?n:n.getChild("theaterModeToggle"),pictureInPictureToggle:void 0===n?n:n.getChild("PictureInPictureToggle"),seekBar:void 0===i?i:i.getChild("seekBar")};void 0!==s.playToggle&&X(e,s.playToggle.el_),void 0!==s.previousButton&&X(e,s.previousButton.el_),void 0!==s.nextButton&&X(e,s.nextButton.el_),void 0!==s.muteToggle&&X(e,s.muteToggle.el_),void 0!==s.volumeBar&&X(e,s.volumeBar.el_),void 0!==s.subtitlesToggle&&X(e,s.subtitlesToggle.el_),void 0!==s.settingsToggle&&X(e,s.settingsToggle.el_),void 0!==s.fullscreenToggle&&X(e,s.fullscreenToggle.el_),void 0!==s.theaterModeToggle&&X(e,s.theaterModeToggle.el_),void 0!==s.pictureInPictureToggle&&X(e,s.pictureInPictureToggle.el_),void 0!==s.seekBar&&X(e,s.seekBar.el_)}function X(e,t){function i(e){n||(o=!0,e.target.setAttribute("key-focus",""))}function a(e){o&&(o=!1,e.target.removeAttribute("key-focus"))}var n=!1,o=!1;t.addEventListener("blur",a),t.addEventListener("focus",i),t.addEventListener("mouseup",(function(){n=!1})),t.addEventListener("mousedown",(function(){n=!0}))}function $(t,i){t.getChild("ControlBar").getChild("ProgressControl").getChild("SeekBar").removeChild("MouseTimeDisplay");var a=-1,n={frame:{width:160,height:120}};function o(){var t,i,a,n=Array.prototype.slice.call(arguments),s=n.shift()||{};for(t in n)for(a in i=n[t])i.hasOwnProperty(a)&&(s[a]="object"===e(i[a])?o(s[a],i[a]):i[a]);return s}function s(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle}function l(e,t){return function(i){return window.getComputedStyle?window.getComputedStyle(e,t)[i]:e.currentStyle[i]}}function r(e){return"HTML"!==e.nodeName&&"static"===l(e)("position")?r(e.offsetParent):e}function d(){g?(a=(m.left+m.right+1.5*f.frame.width)/2,c.inner.style.height=m.top+m.bottom+1.5*f.frame.height+"px",c.inner.style.width=m.left+m.right+1.5*f.frame.width+"px"):(a=(m.left+m.right+f.frame.width)/2,c.inner.style.height=m.top+m.bottom+f.frame.height+"px",c.inner.style.width=m.left+m.right+f.frame.width+"px"),c.inner.style.left=-1*a+"px"}var u,c={wrap:document.createElement("div"),inner:document.createElement("div"),img:document.createElement("img"),timeDisplay:document.createElement("div"),timeDisplayInner:document.createElement("div")},m={top:0,left:0,right:0,bottom:0},p=t.controlBar.childNameIndex_.ProgressControl;p.childNameIndex_.SeekBar;var h=t.duration(),g=t.isFullscreen(),f=o({},n,i);c.wrap.className="vjs-preview-thumb",c.inner.className="vjs-preview-thumb-inner",c.inner.style.backgroundImage="url("+f.url+")",c.timeDisplay.className="vjs-preview-thumb-time-display",c.timeDisplayInner.innerHTML="0:00";var y=0;function v(e){var t=r(u=u||p.el()).getBoundingClientRect(),i=window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,n=((e.changedTouches?e.changedTouches[0].pageX:e.pageX)||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft)-(t.left+i),o=(t.width||t.right)+i,s=y?Math.min(y/f.frame.height*f.frame.seconds-1,Math.floor((n-u.offsetLeft)/p.width()*h)):0;c.timeDisplayInner.innerHTML=videojs.formatTime(h*(n/o)),n<a?n=a:n>o-a&&(n=o-a),c.wrap.style.transform="translate("+Math.min(o-a,n)+"px, 0px)",c.inner.style.backgroundPositionY=(g?-1.5:-1)*f.frame.height*Math.floor(s/f.frame.seconds)+"px"}t.on("durationchange",(function(e){h=t.duration()})),t.on("loadedmetadata",(function(e){h=t.duration()})),t.on("fullscreenchange",(function(e){setTimeout((function(){g=t.isFullscreen(),d()}),100)})),t.one("playing",(function(e){d(),t.addClass("vjs-enabled-preview-thumb"),c.img.onload=function(){var e=s(c.inner);void 0!==e&&(m.top=parseFloat(e.borderTopWidth),m.left=parseFloat(e.borderLeftWidth),m.right=parseFloat(e.borderRightWidth),m.bottom=parseFloat(e.borderBottomWidth)),y=this.naturalHeight,c.img=void 0,d()},c.img.src=f.url})),p.on("mouseover",v),p.on("mousemove",v),c.timeDisplay.appendChild(c.timeDisplayInner),c.inner.appendChild(c.timeDisplay),c.wrap.appendChild(c.inner),p.el_.appendChild(c.wrap)}var G=function(){s(i,videojs.getPlugin("plugin"));var e=m(i);function i(n,o,s,l,r,d,m,p,h){var g;if(t(this,i),g=e.call(this,n,s),!s.sources.length)return a.warn("Missing media source"),c(g);function f(e){var t,i={};if(e&&e instanceof Object&&Object.keys(e).length&&(isNaN(e.volume)||(i.volume=Math.max(Math.min(e.volume,1),0)),F(e.soundMuted)&&(i.soundMuted=e.soundMuted),F(e.theaterMode)&&(i.theaterMode=e.theaterMode)),Object.keys(r).length){var a=Object.keys(r);i.theSelectedQuality=e&&void 0!==e.theSelectedQuality&&void 0!==r[e.theSelectedQuality]?e.theSelectedQuality:a[Math.floor(a.length/2)]}if(Object.keys(d).length){if(e.theSelectedPlaybackSpeed)for(t in e.theSelectedPlaybackSpeed=e.theSelectedPlaybackSpeed.toString(),d)if(d.hasOwnProperty(t)&&e.theSelectedPlaybackSpeed===d[t].speed){i.theSelectedPlaybackSpeed=d[t].speed;break}}else i.theSelectedPlaybackSpeed="1";return i}return s.enabledTouchControls=!!videojs.TOUCH_ENABLED||s.enabledTouchControls,g.videoHtmlElem=o,g.initedVideoPreviewThumb=!1,g.videoPreviewThumb=null,videojs.TOUCH_ENABLED||!s.videoPreviewThumb||void 0===s.videoPreviewThumb.url||void 0===s.videoPreviewThumb.frame||isNaN(s.videoPreviewThumb.frame.width)||isNaN(s.videoPreviewThumb.frame.height)||isNaN(s.videoPreviewThumb.frame.seconds)||(g.videoPreviewThumb=s.videoPreviewThumb),g.enabledFullscreenToggle=s.controlBar.fullscreen,g.enabledTheaterMode=s.controlBar.theaterMode,g.playbackSpeeds=d,g.videoResolutions=null,g.videoPlaybackSpeeds=null,g.timeoutSettingsPanelFocusout=null,g.timeoutSubtitlesPanelFocusout=null,g.timeoutResolutionsPanelFocusout=null,g.timeoutPlaybackSpeedsPanelFocusout=null,g.actionAnimationTimeout=null,g.seekingTimeout=null,g.updateTime=0,g.pausedTime=-1,g.seeking=!1,g.wasPlayingOnResolutionChange=!1,g.hadStartedOnResolutionChange=!1,g.isChangingResolution=!1,g.videoNativeDimensions=s.nativeDimensions,g.setState(videojs.mergeOptions(g.state,f(l))),g.stateUpdateCallback=m instanceof Function?m:null,g.nextButtonClickCallback=p instanceof Function?p:null,g.previousButtonClickCallback=h instanceof Function?h:null,g.state.theSelectedQuality&&(g.videoResolutions=r,g.videoFormat=K(g.player.src(),g.state.theSelectedQuality,g.videoResolutions),g.state.theSelectedQuality=g.videoFormat.defaultResolution,g.videoFormat={format:g.videoFormat.format,order:g.videoFormat.order},s.resolutions={default:g.state.theSelectedQuality,options:g.videoResolutions}),g.state.theSelectedPlaybackSpeed&&(g.videoPlaybackSpeeds=d,s.playbackSpeeds={default:g.state.theSelectedPlaybackSpeed,options:g.videoPlaybackSpeeds}),void 0!==l.theSelectedSubtitleOption&&null!==l.theSelectedSubtitleOption&&(g.state.theSelectedSubtitleOption=l.theSelectedSubtitleOption),s.subtitles&&s.subtitles.languages&&s.subtitles.languages.length&&s.subtitles.languages.length?s.subtitles.languages.unshift({label:"Off",srclang:"off",src:null}):s.subtitles=null,g.subtitles=s.subtitles,I(u(g)),D(u(g)),R(u(g),s),s.enabledTouchControls&&B(u(g),s),V(u(g),s,n),g.csstransforms=W("csstransforms"),n.addClass("vjs-loading-video"),g.videoNativeDimensions&&n.addClass("vjs-native-dimensions"),s.enabledTouchControls&&n.addClass("vjs-enabled-touch-controls"),g.progressBarLine=null,g.onBandwidthUpdate=null,g.onHlsRetryPlaylist=null,s.keyboardControls&&(g.player.el_.onkeyup=g.onKeyUp.bind(u(g)),g.player.el_.onkeydown=g.onKeyDown.bind(u(g))),g.onError=g.onError.bind(u(g)),g.on(n,["error"],g.onError),g.on(n,["dispose"],g.onDispose),g.on(n,["ended"],g.onEnded),g.on(n,["volumechange"],g.onVolumeChange),g.on(n,["playing","pause"],g.onPlayToggle),g.on(n,["timeupdate"],g.onTimeUpdateChange),g.on(n,["fullscreenchange"],g.onFullscreenChange),g.on(n,["theatermodechange"],g.onTheaterModeChange),g.on(n,["openSettingsPanel"],g.openSettingsOptions),g.on(n,["closeSettingsPanel"],g.closeSettingsOptions),g.on(n,["openSubtitlesPanel"],g.openSubtitlesOptions),g.on(n,["closeSubtitlesPanel"],g.closeSubtitlesOptions),g.on(n,["openQualityOptions"],g.openQualityOptions),g.on(n,["closeQualityOptions"],g.closeQualityOptions),g.on(n,["openPlaybackSpeedOptions"],g.openPlaybackSpeedOptions),g.on(n,["closePlaybackSpeedOptions"],g.closePlaybackSpeedOptions),g.on(n,["selectedQuality"],g.onQualitySelection),g.on(n,["selectedSubtitleOption"],g.onSubtitleOptionSelection),g.on(n,["selectedPlaybackSpeed"],g.onPlaybackSpeedSelection),g.on(n,["focusoutSettingsPanel"],g.onFocusOutSettingsPanel),g.on(n,["focusoutSubtitlesPanel"],g.onFocusOutSubtitlesPanel),g.on(n,["focusoutResolutionsPanel"],g.onFocusOutResolutionsPanel),g.on(n,["focusoutPlaybackSpeedsPanel"],g.onFocusOutPlaybackSpeedsPanel),g.on(n,["moveforward"],g.onMoveForward),g.on(n,["movebackward"],g.onMoveBackward),g.on(n,["userinactive"],g.onUserInactive),g.on(n,["seeked"],g.onSeeked),g.on(n,["seeking"],g.onSeeking),g.on("statechanged",g.onStateChange),g.hasPrevious=!!s.controlBar.previous,g.hasNext=!!s.controlBar.next,g.hasPrevious&&g.on(n,["clicked_previous_button"],g.onPreviousButtonClick),g.hasNext&&g.on(n,["clicked_next_button"],g.onNextButtonClick),g.onPlayerReady=g.onPlayerReady.bind(u(g)),n.ready(g.onPlayerReady),Y(n),g}return n(i,[{key:"onPreviousButtonClick",value:function(){this.hasPrevious&&(this.actionAnimation("play_previous"),this.previousButtonClickCallback&&this.previousButtonClickCallback())}},{key:"onNextButtonClick",value:function(){this.hasNext&&(this.actionAnimation("play_next"),this.nextButtonClickCallback&&this.nextButtonClickCallback())}},{key:"actionAnimation",value:function(e){if(this.player.hasStarted_&&(this.actionAnimElem=this.actionAnimElem||this.player.el_.querySelector(".vjs-actions-anim"),this.actionAnimElem)){var t;switch(e){case"play":void 0!==this.previousActionAnim&&"forward"!==this.previousActionAnim&&"backward"!==this.previousActionAnim&&(t="started-playing");break;case"pause":t="just-paused";break;case"backward":t="moving-backward";break;case"forward":t="moving-forward";break;case"volume":t=this.player.muted()||.001>=this.player.volume()?"volume-mute":.33>=this.player.volume()?"volume-low":.69>=this.player.volume()?"volume-mid":"volume-high";break;case"play_previous":t="play_previous";break;case"play_next":t="play_next"}t&&(this.actionAnimationTimeout&&this.actionAnimElem.setAttribute("class","vjs-actions-anim"),setTimeout(function(){this.previousActionAnim=e,t+=" active-anim",clearTimeout(this.actionAnimationTimeout),this.actionAnimElem.setAttribute("class","vjs-actions-anim "+t),this.actionAnimationTimeout=setTimeout((function(e){e.actionAnimElem.setAttribute("class","vjs-actions-anim"),e.actionAnimationTimeout=null,e.previousActionAnim=null}),750,this)}.bind(this),this.actionAnimationTimeout?20:0))}}},{key:"onMoveForward",value:function(){this.actionAnimation("forward")}},{key:"onMoveBackward",value:function(){this.actionAnimation("backward")}},{key:"onKeyDown",value:function(e){if(!this.player.ended()){var t=!1;switch(e.keyCode||e.charCode){case 32:this.player[this.player.paused()?"play":"pause"](),t=!0;break;case 37:this.player.currentTime(this.player.currentTime()-5*this.state.theSelectedPlaybackSpeed),this.player.trigger("movebackward"),t=!0;break;case 38:this.player.muted()?this.player.muted(!1):this.player.volume(Math.min(1,this.player.volume()+.03)),t=!0;break;case 39:this.player.currentTime(this.player.currentTime()+5*this.state.theSelectedPlaybackSpeed),this.player.trigger("moveforward"),t=!0;break;case 40:this.player.volume(Math.max(0,this.player.volume()-.03)),t=!0}t&&(e.preventDefault(),e.stopPropagation())}}},{key:"onKeyUp",value:function(e){if(!this.player.ended()){var t=e.keyCode||e.charCode,i=!1;if(e.shiftKey)switch(t){case 78:this.onNextButtonClick();break;case 80:this.onPreviousButtonClick()}else if(48<=t&&57>=t||96<=t&&105>=t)this.player.currentTime(.1*(57<t?t-96:t-48)*this.player.duration()),this.player.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});else switch(t){case 75:this.player[this.player.paused()?"play":"pause"](),i=!0;break;case 70:this.enabledFullscreenToggle&&(this.player.isFullscreen()?this.player.exitFullscreen():this.player.requestFullscreen(),i=!0);break;case 77:this.player.muted(!this.player.muted()),i=!0;break;case 84:this.enabledTheaterMode&&(this.player.isFullscreen()&&this.player.exitFullscreen(),this.player.trigger("theatermodechange"))}i&&(e.preventDefault(),e.stopPropagation())}}},{key:"onUserInactive",value:function(){(this.state.isOpenQualityOptions||this.state.isOpenPlaybackSpeedOptions||this.state.isOpenSettingsOptions)&&this.player.trigger("closeSettingsPanel")}},{key:"onSeeked",value:function(){this.seekingTimeout=setTimeout((function(e){e.seeking=!1}),300,this)}},{key:"onSeeking",value:function(){clearTimeout(this.seekingTimeout),this.seeking=!0,this.progressBarLine&&(this.progressBarLine.style.width=(100*this.player.currentTime()/this.player.duration()).toFixed(2)+"%")}},{key:"initDomEvents",value:function(){this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize),this.videoHtmlElem.onloadeddata=this.onVideoDataLoad.bind(this),4===this.videoHtmlElem.readyState&&this.onVideoDataLoad()}},{key:"onVideoMetaDataLoad",value:function(){}},{key:"onVideoDataLoad",value:function(){this.videoPreviewThumb&&!this.initedVideoPreviewThumb&&(this.initedVideoPreviewThumb=!0,$(this.player,this.videoPreviewThumb)),this.player.removeClass("vjs-loading-video"),"Auto"===this.state.theSelectedQuality?this.player.tech_.hls&&null===this.onBandwidthUpdate&&(this.onBandwidthUpdate=this.onBandwidthUpdateCallback.bind(this),this.player.tech_.on("bandwidthupdate",this.onBandwidthUpdate),this.onBandwidthUpdateCallback()):(null!==this.onBandwidthUpdate&&(this.player.tech_.off("bandwidthupdate",this.onBandwidthUpdate),this.onBandwidthUpdate=null),this.player.tech_.hls&&null===this.onHlsRetryPlaylist&&(this.onHlsRetryPlaylist=this.onHlsRetryPlaylistCallback.bind(this),this.player.tech_.on("retryplaylist",this.onHlsRetryPlaylist))),this.isChangingResolution&&(this.hadStartedOnResolutionChange&&(this.player.hasStarted(!0),this.player.removeClass("vjs-changing-resolution"),this.hadStartedOnResolutionChange=!1),this.wasPlayingOnResolutionChange?(this.player.play(),this.wasPlayingOnResolutionChange=!1):this.player.pause(),this.isChangingResolution=!1),this.updateVideoElementPosition()}},{key:"onBandwidthUpdateCallback",value:function(e){this.onAutoQualitySelection(this.player.tech_.hls.playlists.media_.attributes.RESOLUTION.height)}},{key:"onHlsRetryPlaylistCallback",value:function(e){"Auto"!==this.state.theSelectedQuality&&void 0!==this.videoResolutions.Auto&&this.setState({theSelectedQuality:"Auto"})}},{key:"onPlayerReady",value:function(){if(null!==this.subtitles){var e,t=[],i=this.player.textTracks();for(e=0;e<i.length;e++)t.push(i[e].language);for(e=1;e<this.subtitles.languages.length;)-1===t.indexOf(this.subtitles.languages[e].srclang)&&this.player.addRemoteTextTrack({kind:"subtitles",label:this.subtitles.languages[e].label,language:this.subtitles.languages[e].srclang,src:this.subtitles.languages[e].src}),e+=1}this.changeVideoSubtitle(),this.progressBarLine=this.player.el_.querySelector(".video-js .vjs-progress-holder .vjs-play-progress"),this.initDomEvents(),this.player.volume(this.state.volume),this.player.muted(this.state.soundMuted),this.player.playbackRate(this.state.theSelectedPlaybackSpeed),this.player.addClass("vjs-mediacms-plugin"),this.updateTheaterModeClassname(),setTimeout((function(e){e.updateVideoPlayerRatios()}),100,this)}},{key:"changeVideoSubtitle",value:function(){"off"!==this.state.theSelectedSubtitleOption?(this.player.removeClass("vjs-subtitles-off"),this.player.addClass("vjs-subtitles-on")):(this.player.removeClass("vjs-subtitles-on"),this.player.addClass("vjs-subtitles-off"));for(var e=this.player.textTracks(),t=0;t<e.length;t++)"subtitles"===e[t].kind&&(e[t].mode=this.state.theSelectedSubtitleOption===e[t].language?"showing":"hidden")}},{key:"changeVideoResolution",value:function(){this.isChangingResolution=!0;var e=[],t=this.player.currentTime(),i=this.player.duration();this.wasPlayingOnResolutionChange=!this.player.paused(),this.hadStartedOnResolutionChange=this.player.hasStarted(),this.hadStartedOnResolutionChange&&this.player.addClass("vjs-changing-resolution");for(var a=0;a<this.videoResolutions[this.state.theSelectedQuality].src.length;)e.push({src:this.videoResolutions[this.state.theSelectedQuality].src[a]}),a+=1;this.player.src(e),this.player.techCall_("reset"),this.player.currentTime(t),this.player.duration(i),this.player.playbackRate(this.state.theSelectedPlaybackSpeed)}},{key:"changePlaybackSpeed",value:function(){this.player.playbackRate(this.state.theSelectedPlaybackSpeed)}},{key:"onStateChange",value:function(e){(e.changes.videoRatio||e.changes.playerRatio)&&this.updateVideoElementPosition(),e.changes.volume&&this.onPublicStateUpdate(),e.changes.soundMuted&&this.onPublicStateUpdate(),e.changes.theaterMode&&this.onPublicStateUpdate(),e.changes.theaterMode&&(this.updateTheaterModeClassname(),setTimeout((function(e){e.updateVideoPlayerRatios()}),20,this)),e.changes.isOpenSettingsOptions,e.changes.isOpenQualityOptions,e.changes.isOpenPlaybackSpeedOptions,e.changes.theSelectedSubtitleOption&&(this.changeVideoSubtitle(),this.player.trigger("updatedSelectedSubtitleOption"),this.onPublicStateUpdate()),e.changes.theSelectedQuality&&(this.changeVideoResolution(),this.player.trigger("updatedSelectedQuality"),this.onPublicStateUpdate()),e.changes.theSelectedPlaybackSpeed&&(this.changePlaybackSpeed(),this.player.trigger("updatedSelectedPlaybackSpeed"),this.onPublicStateUpdate()),(e.changes.isOpenSettingsOptions||e.changes.isOpenQualityOptions||e.changes.theSelectedQuality||e.changes.isOpenPlaybackSpeedOptions||e.changes.theSelectedPlaybackSpeed)&&this.player.trigger("updatedSettingsPanelsVisibility"),e.changes.isOpenSubtitlesOptions&&this.player.trigger("updatedSubtitlesPanelsVisibility"),e.changes.openSettings&&this.state.openSettings&&this.player.trigger("openedSettingsPanel",this.state.openSettingsFromKeyboard),e.changes.closeSettings&&this.state.closeSettings&&this.player.trigger("closedSettingsPanel",this.state.closeSettingsFromKeyboard),e.changes.openSubtitles&&this.state.openSubtitles&&this.player.trigger("openedSubtitlesPanel",this.state.openSubtitlesFromKeyboard),e.changes.closeSubtitles&&this.state.closeSubtitles&&this.player.trigger("closedSubtitlesPanel",this.state.closeSubtitlesFromKeyboard),e.changes.openQualities&&this.state.openQualities&&this.player.trigger("openedQualities",this.state.openQualitiesFromKeyboard),e.changes.closeQualities&&this.state.closeQualities&&this.player.trigger("closedQualities",this.state.closeQualitiesFromKeyboard),e.changes.openPlaybackSpeeds&&this.state.openPlaybackSpeeds&&this.player.trigger("openedPlaybackSpeeds",this.state.openPlaybackSpeedsFromKeyboard),e.changes.closePlaybackSpeeds&&this.state.closePlaybackSpeeds&&this.player.trigger("closedPlaybackSpeeds",this.state.closePlaybackSpeedsFromKeyboard)}},{key:"onDispose",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onError",value:function(e){this.player.paused()||this.player.pause(),this.player.techCall_("reset")}},{key:"onEnded",value:function(){this.setState(this.state,{ended:!0})}},{key:"onVolumeChange",value:function(){this.setState({volume:this.player.volume(),soundMuted:this.player.muted()}),this.actionAnimation("volume")}},{key:"onPlayToggle",value:function(e){var t="playing"===e.type;!this.seeking&&1>Math.abs(this.updateTimeDiff)&&this.actionAnimation(t?"play":"pause"),this.setState({playing:t})}},{key:"onTimeUpdateChange",value:function(e){var t=this.player.currentTime();this.updateTimeDiff=t-this.updateTime,this.updateTime=t}},{key:"onFullscreenChange",value:function(){this.player.addClass("vjs-fullscreen-change"),setTimeout((function(e){e.removeClass("vjs-fullscreen-change")}),100,this.player),this.updateVideoElementPosition()}},{key:"onTheaterModeChange",value:function(){this.setState({theaterMode:!this.state.theaterMode})}},{key:"openSettingsOptions",value:function(e,t){clearTimeout(this.timeoutSettingsPanelFocusout),this.setState({openSettings:new Date,openSettingsFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!0,isOpenQualityOptions:!1,isOpenPlaybackSpeedOptions:!1,isOpenSubtitlesOptions:!1})}},{key:"closeSettingsOptions",value:function(e,t){clearTimeout(this.timeoutSettingsPanelFocusout),this.setState({closeSettings:new Date,closeSettingsFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!1,isOpenQualityOptions:!1,isOpenPlaybackSpeedOptions:!1})}},{key:"openSubtitlesOptions",value:function(e,t){clearTimeout(this.timeoutSubtitlesPanelFocusout),this.setState({openSubtitles:new Date,openSubtitlesFromKeyboard:!!t&&new Date,isOpenSubtitlesOptions:!0,isOpenSettingsOptions:!1,isOpenQualityOptions:!1,isOpenPlaybackSpeedOptions:!1})}},{key:"closeSubtitlesOptions",value:function(e,t){clearTimeout(this.timeoutSubtitlesPanelFocusout),this.setState({closeSubtitles:new Date,closeSubtitlesFromKeyboard:!!t&&new Date,isOpenSubtitlesOptions:!1})}},{key:"openQualityOptions",value:function(e,t){clearTimeout(this.timeoutResolutionsPanelFocusout),this.setState({openQualities:new Date,openQualitiesFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!1,isOpenQualityOptions:!0})}},{key:"openPlaybackSpeedOptions",value:function(e,t){clearTimeout(this.timeoutPlaybackSpeedsPanelFocusout),this.setState({openPlaybackSpeeds:new Date,openPlaybackSpeedsFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!1,isOpenPlaybackSpeedOptions:!0})}},{key:"closeQualityOptions",value:function(e,t){clearTimeout(this.timeoutResolutionsPanelFocusout),this.setState({closeQualities:new Date,closeQualitiesFromKeyboard:!!t&&new Date,openSettings:new Date,openSettingsFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!0,isOpenQualityOptions:!1})}},{key:"closePlaybackSpeedOptions",value:function(e,t){clearTimeout(this.timeoutPlaybackSpeedsPanelFocusout),this.setState({closePlaybackSpeeds:new Date,closePlaybackSpeedsFromKeyboard:!!t&&new Date,openSettings:new Date,openSettingsFromKeyboard:!!t&&new Date,isOpenSettingsOptions:!0,isOpenPlaybackSpeedOptions:!1})}},{key:"onQualitySelection",value:function(e,t){this.setState({isOpenSettingsOptions:!1,isOpenQualityOptions:!1,theSelectedQuality:t})}},{key:"onSubtitleOptionSelection",value:function(e,t){this.setState({isOpenSubtitlesOptions:!1,theSelectedSubtitleOption:t})}},{key:"onAutoQualitySelection",value:function(e){e!==this.state.theSelectedAutoQuality&&(this.setState({theSelectedAutoQuality:e}),this.player.trigger("updatedSelectedQuality"))}},{key:"onPlaybackSpeedSelection",value:function(e,t){this.setState({isOpenSettingsOptions:!1,isOpenPlaybackSpeedOptions:!1,theSelectedPlaybackSpeed:t})}},{key:"onFocusOutSubtitlesPanel",value:function(){this.timeoutSubtitlesPanelFocusout||(this.player.focus(),this.timeoutSubtitlesPanelFocusout=setTimeout((function(e){e.setState({isOpenSubtitlesOptions:!1}),e.timeoutSubtitlesPanelFocusout=null}),100,this))}},{key:"onFocusOutSettingsPanel",value:function(){this.timeoutSettingsPanelFocusout||(this.state.isOpenQualityOptions||this.state.isOpenPlaybackSpeedOptions||this.player.focus(),this.state.isOpenQualityOptions?this.state.isOpenPlaybackSpeedOptions||(this.timeoutSettingsPanelFocusout=setTimeout((function(e){e.state.isOpenSettingsOptions&&!e.state.isOpenPlaybackSpeedOptions&&e.setState({isOpenSettingsOptions:!1}),e.timeoutSettingsPanelFocusout=null}),100,this)):this.timeoutSettingsPanelFocusout=setTimeout((function(e){e.state.isOpenSettingsOptions&&!e.state.isOpenQualityOptions&&e.setState({isOpenSettingsOptions:!1}),e.timeoutSettingsPanelFocusout=null}),100,this))}},{key:"onFocusOutResolutionsPanel",value:function(){this.timeoutResolutionsPanelFocusout||(this.state.isOpenSettingsOptions||this.state.isOpenPlaybackSpeedOptions||this.player.focus(),this.state.isOpenSettingsOptions||(this.timeoutResolutionsPanelFocusout=setTimeout((function(e){e.state.isOpenQualityOptions&&!e.state.isOpenSettingsOptions&&e.setState({isOpenQualityOptions:!1}),e.timeoutResolutionsPanelFocusout=null}),100,this)))}},{key:"onFocusOutPlaybackSpeedsPanel",value:function(){this.timeoutPlaybackSpeedsPanelFocusout||(this.state.isOpenQualityOptions||this.state.isOpenSettingsOptions||this.player.focus(),this.state.isOpenSettingsOptions||(this.timeoutPlaybackSpeedsPanelFocusout=setTimeout((function(e){e.state.isOpenPlaybackSpeedOptions&&!e.state.isOpenSettingsOptions&&e.setState({isOpenPlaybackSpeedOptions:!1}),e.timeoutPlaybackSpeedsPanelFocusout=null}),100,this)))}},{key:"onPublicStateUpdate",value:function(){this.stateUpdateCallback&&this.stateUpdateCallback({volume:this.state.volume,theaterMode:this.state.theaterMode,soundMuted:this.state.soundMuted,quality:this.state.theSelectedQuality,playbackSpeed:this.state.theSelectedPlaybackSpeed,subtitle:this.state.theSelectedSubtitleOption})}},{key:"onWindowResize",value:function(){this.updateVideoPlayerRatios()}},{key:"updateVideoPlayerRatios",value:function(){this.setState({videoRatio:this.videoHtmlElem.offsetWidth/this.videoHtmlElem.offsetHeight,playerRatio:this.player.el_.offsetWidth/this.player.el_.offsetHeight});var e=document.querySelectorAll(".vjs-settings-panel-inner");if(e.length)for(var t=0;t<e.length;)e[t].style.maxHeight=this.videoHtmlElem.offsetHeight-120+"px",t+=1}},{key:"updateTheaterModeClassname",value:function(){this.player[this.state.theaterMode?"addClass":"removeClass"]("vjs-theater-mode")}},{key:"updateVideoElementPosition",value:function(){if(this.videoHtmlElem&&this.videoNativeDimensions){var e=U(this.videoHtmlElem.offsetWidth,this.videoHtmlElem.offsetHeight,this.state.videoRatio,this.player.el_.offsetWidth,this.player.el_.offsetHeight,this.state.playerRatio);this.csstransforms?H(this.videoHtmlElem,"translate("+(e.l>0?e.l:"0")+"px,"+(e.t>0?e.t:"0")+"px)"):(this.videoHtmlElem.style.top=e.t>0?e.t+"px":"",this.videoHtmlElem.style.left=e.l>0?e.l+"px":"")}}},{key:"isTheaterMode",value:function(){return this.state.theaterMode}},{key:"isFullscreen",value:function(){return this.player.isFullscreen()}},{key:"isEnded",value:function(){return this.player.ended()}},{key:"selectedQualityTitle",value:function(){return this.state.theSelectedQuality+("Auto"===this.state.theSelectedQuality&&null!==this.state.theSelectedAutoQuality?"&nbsp;<span class='auto-resolution-title'>"+this.state.theSelectedAutoQuality+"</span>":"")}},{key:"selectedPlaybackSpeedTitle",value:function(){var e;for(e in this.playbackSpeeds)if(this.playbackSpeeds.hasOwnProperty(e)&&this.state.theSelectedPlaybackSpeed===this.playbackSpeeds[e].speed)return this.playbackSpeeds[e].title||this.playbackSpeeds[e].speed;return"n/a"}}]),i}();return G.defaultState={volume:1,theaterMode:!1,soundMuted:!1,ended:!1,playing:!1,videoRatio:0,playerRatio:0,isOpenSettingsOptions:!1,isOpenSubtitlesOptions:!1,isOpenQualityOptions:!1,theSelectedQuality:null,theSelectedSubtitleOption:"off",theSelectedAutoQuality:null,theSelectedPlaybackSpeed:null,openSettings:!1,closeSettings:!1,openSettingsFromKeyboard:!1,closeSettingsFromKeyboard:!1,openSubtitles:!1,openSubtitlesFromKeyboard:!1,closeSubtitles:!1,closeSubtitlesFromKeyboard:!1,openQualities:!1,closeQualities:!1,openQualitiesFromKeyboard:!1,closeQualitiesFromKeyboard:!1},G.VERSION=p,videojs.registerPlugin("mediaCmsVjsPlugin",G),G}function f(){return null===h&&(h=g()),h}f()}();const o={options:{sources:[],keyboardControls:!0,enabledTouchControls:!0,nativeDimensions:!1,suppressNotSupportedError:!0,poster:"",loop:!1,controls:!0,preload:"auto",autoplay:!1,bigPlayButton:!0,liveui:!1,controlBar:{bottomBackground:!0,progress:!0,play:!0,next:!1,previous:!1,volume:!0,pictureInPicture:!0,fullscreen:!0,theaterMode:!0,time:!0},cornerLayers:{topLeft:null,topRight:null,bottomLeft:null,bottomRight:null},videoPreviewThumb:{},subtitles:{on:!1,default:null,languages:[]}}};return function(i,s,l,r,d,u,c,m){if(!Node.prototype.isPrototypeOf(i))return a.error("Invalid player DOM element",i),null;function p(e){const t=[];let i=0;for(;i<e.length;)e[i]&&t.push(e[i]),i+=1;return t}function h(e){const t=[];let i=0;for(;i<e.length;)e[i]&&t.push(e[i]),i+=1;return t}let g,f={},y={};if(r)for(g in r)r.hasOwnProperty(g)&&t(r[g].url)&&r[g].url.length&&t(r[g].format)&&r[g].format.length&&(f[g]={title:g,src:p(r[g].url),format:h(r[g].format)});if(d)for(g=0;g<d.length;)y[g]={title:1===d[g]?"Normal":d[g],speed:d[g].toString()},g+=1;null!==(s=function(i,a){let s,l,r,d;if(a.sources=t(a.sources)&&a.sources.length?a.sources:[],a.loop=n(a.loop,o.options.loop),a.controls=n(a.controls,o.options.controls),a.subtitles&&a.subtitles instanceof Object?(a.subtitles.default=void 0!==a.subtitles.default?a.subtitles.default:o.options.subtitles.default,a.subtitles.languages=t(a.subtitles.languages)?a.subtitles.languages:o.options.subtitles.languages,a.subtitles.on=n(a.subtitles.on,o.options.subtitles.on)):a.subtitles.default=o.options.subtitles,a.autoplay="any"===a.autoplay||"play"===a.autoplay||"muted"===a.autoplay?a.autoplay:n(a.autoplay,o.options.autoplay),a.bigPlayButton=n(a.bigPlayButton,o.options.bigPlayButton),a.poster=e(a.poster)&&""!==a.poster.trim()?a.poster:o.options.poster,a.preload=e(a.preload)&&-1<["auto","metadata","none"].indexOf(a.preload.trim())?a.preload:o.options.preload,a.controlBar&&a.controlBar instanceof Object&&Object.keys(a.controlBar).length)for(s in a.controlBar)a.controlBar.hasOwnProperty(s)&&(a.controlBar[s]=n(a.controlBar[s],o.options.controlBar[s]));if(a.cornerLayers&&a.cornerLayers instanceof Object&&Object.keys(a.cornerLayers).length)for(s in a.cornerLayers)a.cornerLayers.hasOwnProperty(s)?"string"==typeof a.cornerLayers[s]?a.cornerLayers[s]=""!==a.cornerLayers[s]?a.cornerLayers[s]:o.options.cornerLayers[s]:Node.prototype.isPrototypeOf(a.cornerLayers[s])||!isNaN(a.cornerLayers[s])?a.cornerLayers[s]=a.cornerLayers[s]:a.cornerLayers[s]=a.cornerLayers[s]||o.options.cornerLayers[s]:a.cornerLayers[s]=o.options.cornerLayers[s];a.previewSprite="object"==typeof a.previewSprite?a.previewSprite:{};let u=i.querySelectorAll("source");for(r=0;r<u.length;){if(void 0!==u[r].attributes.src){for(d={src:u[r].src},void 0!==u[r].attributes.type&&(d.type=u[r].type),l=0;l<a.sources.length&&d.src!==a.sources[l].src;)l+=1;l>=a.sources.length&&a.sources.push(d)}r+=1}let c=i.querySelectorAll('track[kind="subtitles"]');const m={on:a.subtitles.on,default:null,languages:[]},p={};function h(e){e.src=void 0!==e.src&&null!==e.src?e.src.toString().trim():"",e.srclang=void 0!==e.srclang&&null!==e.srclang?e.srclang.toString().trim():"",e.src.length&&e.srclang.length&&(e.label=void 0!==e.label&&null!==e.label?e.label.toString().trim():e.srclang,void 0!==p[e.srclang]?(p[e.srclang].src=e.src,p[e.srclang].label=e.label):(m.languages.push({label:e.label,src:e.src,srclang:e.srclang}),p[e.srclang]=m.languages[m.languages.length-1]),void 0!==e.default&&null!==e.default&&(e.default=e.default.toString().trim(),e.default.length&&"1"!==e.default&&"true"!==e.default||(m.default=e.srclang)))}for(r=0;r<c.length;)h({src:c[r].getAttribute("src"),srclang:c[r].getAttribute("srclang"),default:c[r].getAttribute("default"),label:c[r].getAttribute("label")}),r+=1;if(a.subtitles.languages.length)for(r=0;r<a.subtitles.languages.length;)h({src:a.subtitles.languages[r].src,srclang:a.subtitles.languages[r].srclang,default:a.subtitles.languages[r].default,label:a.subtitles.languages[r].label}),r+=1;return null!==a.subtitles.default&&void 0!==p[a.subtitles.default]&&(m.default=a.subtitles.default),null===m.default&&a.subtitles.languages.length&&(m.default=a.subtitles.languages[0].srclang),a.subtitles=m,a}(i,videojs.mergeOptions(o.options,s&&s instanceof Object&&Object.keys(s).length?s:{}))).subtitles.default&&s.subtitles.on&&(l.theSelectedSubtitleOption=s.subtitles.default);const v=((S={controlBar:{children:[]}}).sources=(b=s).sources,S.loop=b.loop,S.controls=b.controls,S.autoplay=b.autoplay,S.bigPlayButton=b.bigPlayButton,S.poster=b.poster,S.preload=b.preload,S.suppressNotSupportedError=b.suppressNotSupportedError,S);var b,S;this.player=videojs(i,v),this.player.mediaCmsVjsPlugin(i,s,l,f,y,u,c,m),this.isEnded=this.player.mediaCmsVjsPlugin().isEnded,this.isFullscreen=this.player.mediaCmsVjsPlugin().isFullscreen,this.isTheaterMode=this.player.mediaCmsVjsPlugin().isTheaterMode,void 0!==typeof window&&(window.HELP_IMPROVE_VIDEOJS=!1)}}()},5615:function(e,t,i){"use strict";i.d(t,{L9:function(){return m},lg:function(){return c}});var a=i(9471),n=i(8713),o=i.n(n),s=i(4571),l=i.n(s),r=i(237),d=(i(2831),i(2999),i(8974));function u(e,t){let i=l()(e,{});return""!==i.origin&&"null"!==i.origin&&i.origin||(i=l()(t+"/"+e.replace(/^\//g,""),{})),i.toString()}function c(e){return a.createElement("div",{className:"error-container"},a.createElement("div",{className:"error-container-inner"},a.createElement("span",{className:"icon-wrap"},a.createElement("i",{className:"material-icons"},"error_outline")),a.createElement("span",{className:"msg-wrap"},e.errorMessage)))}function m(e){d.log("props player embed",e);const t=(0,a.useRef)(null),i=(0,a.useRef)(null),n={playerVolume:e.playerVolume??1,playerSoundMuted:e.playerSoundMuted??!1,videoQuality:e.videoQuality??"Auto",videoPlaybackSpeed:e.videoPlaybackSpeed??1,inTheaterMode:e.inTheaterMode??!1},o=()=>{if(i.current||e.errorMessage||!t.current)return;e.inEmbed||(window.removeEventListener("focus",o),document.removeEventListener("visibilitychange",o),t.current.focus());const a={on:!1,languages:[]};let s;e.subtitlesInfo?.length&&(e.subtitlesInfo.forEach((t=>{t.src&&t.srclang&&t.label&&a.languages.push({src:u(t.src,e.siteUrl),srclang:t.srclang,label:t.label})})),a.on=a.languages.length>0),d.log("props",e);const l=e.url.split("m=")[1];if(""!==e.stream){const t=(e=>{try{return new URL(e).pathname.split("/").filter(Boolean)[0]||null}catch{return null}})(e.stream),i=e.playback_url_token?.[t],a=i?`${e.stream}?${i.token}`:e.stream;d.log("🎯 Stream key detectado:",t),d.log("🔐 Token aplicado:",i?.token),d.log("▶️ Final HLS URL:",a),s=[{src:a,type:"application/x-mpegURL"}]}else s=[{src:"https://scl.edge.grupoz.cl/mediavms-development/smil:"+l+".smil/playlist.m3u8",type:"application/x-mpegURL"}];const c=(0,r.A)(t.current,{enabledTouchControls:!0,controls:!0,autoplay:!0,muted:!1,liveui:!0,poster:e.poster,sources:s,bigPlayButton:!0,volume:n.playerVolume,soundMuted:n.playerSoundMuted,theaterMode:n.inTheaterMode,videoPreviewThumb:e.previewSprite,controlBar:{theaterMode:e.hasTheaterMode,pictureInPictureToggle:!1,next:e.hasNextLink,previous:e.hasPreviousLink,enableLowInitialPlaylist:!1}});c.qualityLevels(),c.httpSourceSelector({default:"auto"}),""!==e.hls_file&&(c.volume(0),c.muted(!0)),a.on&&a.languages.forEach((e=>{c.addRemoteTextTrack({kind:"subtitles",src:e.src,srclang:e.srclang,label:e.label,default:!1},!1)}))};return(0,a.useEffect)((()=>{if(window.google?.ima)o();else{const e=document.createElement("script");e.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",e.async=!0,e.onload=()=>{d.log("✅ Google IMA SDK cargado"),o()},document.body.appendChild(e)}return()=>{i.current&&(i.current.dispose(),i.current=null)}}),[]),null===e.errorMessage?a.createElement("video",{ref:t,id:"content_video",className:"video-js vjs-mediacms native-dimensions"}):a.createElement(c,{errorMessage:e.errorMessage})}c.propTypes={errorMessage:o().string.isRequired},m.propTypes={playerVolume:o().string,playerSoundMuted:o().bool,videoQuality:o().string,videoPlaybackSpeed:o().number,inTheaterMode:o().bool,siteId:o().string.isRequired,siteUrl:o().string.isRequired,errorMessage:o().string,cornerLayers:o().object,inEmbed:o().bool.isRequired,sources:o().array.isRequired,info:o().object.isRequired,enableAutoplay:o().bool.isRequired,hasTheaterMode:o().bool.isRequired,poster:o().string,adsTag:o().object,hls_file:o().string,previewSprite:o().object,onClickPreviousCallback:o().func,onClickNextCallback:o().func,onPlayerInitCallback:o().func,onStateUpdateCallback:o().func,onUnmountCallback:o().func},m.defaultProps={errorMessage:null,cornerLayers:{}}},6568:function(e,t,i){"use strict";i.d(t,{x:function(){return s}});var a=i(9471),n=i(8713),o=i.n(n);function s(e){let t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return a.createElement("div",{className:t},a.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},a.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}s.propTypes={size:o().oneOf(["tiny","x-small","small","medium","large","x-large"])},s.defaultProps={size:"medium"}},6671:function(){},6880:function(e,t,i){var a,n,o,s=i(8974);n=[i(4480)],void 0===(o="function"==typeof(a=function(e){"use strict";var t,i=(t=e)&&t.__esModule?t:{default:t};var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={markerStyle:{width:"7px","border-radius":"30%","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!0,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function o(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={top:0,bottom:0,left:0,width:0,height:0,right:0}}return t}var l=-1;videojs.registerPlugin("markers",(function(e){if(!i.default.mergeOptions){var t=function(e){return!!e&&"object"===(void 0===e?"undefined":a(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object};i.default.mergeOptions=function e(i,a){var n={};return[i,a].forEach((function(i){i&&Object.keys(i).forEach((function(a){var o=i[a];t(o)?(t(n[a])||(n[a]={}),n[a]=e(n[a],o)):n[a]=o}))})),n}}i.default.createEl||(i.default.createEl=function(e,t,a){var n=i.default.Player.prototype.createEl(e,t);return a&&Object.keys(a).forEach((function(e){n.setAttribute(e,a[e])})),n});var r=i.default.mergeOptions(n,e),d={},u=[],c=l,m=this,p=null,h=null,g=l;function f(){u.sort((function(e,t){return r.markerTip.time(e)-r.markerTip.time(t)}))}function y(e){e.forEach((function(e){var t;e.key=(t=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))),m.el().querySelector(".vjs-progress-holder").appendChild(function(e){var t=i.default.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":r.markerTip.time(e)});return b(e,t),t.addEventListener("click",(function(t){var i=!1;if("function"==typeof r.onMarkerClick&&(i=!1===r.onMarkerClick(e)),!i){var a=this.getAttribute("data-marker-key");m.currentTime(r.markerTip.time(d[a]))}})),r.markerTip.display&&function(e){e.addEventListener("mouseover",(function(){var t=d[e.getAttribute("data-marker-key")];if(p){p.querySelector(".vjs-tip-inner").innerText=r.markerTip.text(t),p.style.left=v(t)+"%";var i=o(p),a=o(e);p.style.marginLeft=-parseFloat(i.width/2)+parseFloat(a.width/4)+"px",p.style.visibility="visible"}})),e.addEventListener("mouseout",(function(){p&&(p.style.visibility="hidden")}))}(t),t}(e)),d[e.key]=e,u.push(e)})),f()}function v(e){return r.markerTip.time(e)/m.duration()*100}function b(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(r.markerStyle).forEach((function(e){t.style[e]=r.markerStyle[e]}));var i=e.time/m.duration();if((i<0||i>1)&&(t.style.display="none"),t.style.left=v(e)+"%",e.duration)t.style.width=e.duration/m.duration()*100+"%",t.style.marginLeft="0px";else{var a=o(t);t.style.marginLeft=a.width/2+"px"}}function S(e){h&&(g=l,h.style.visibility="hidden"),c=l;var t=[];e.forEach((function(e){var i=u[e];if(i){delete d[i.key],t.push(e);var a=m.el().querySelector(".vjs-marker[data-marker-key='"+i.key+"']");a&&a.parentNode.removeChild(a)}}));try{t.reverse(),t.forEach((function(e){u.splice(e,1)}))}catch(e){s.log(e)}f()}function P(){if(r.breakOverlay.display&&!(c<0)){var e=m.currentTime(),t=u[c],i=r.markerTip.time(t);e>=i&&e<=i+r.breakOverlay.displayTime?(g!==c&&(g=c,h&&(h.querySelector(".vjs-break-overlay-text").innerHTML=r.breakOverlay.text(t))),h&&(h.style.visibility="visible")):(g=l,h&&(h.style.visibility="hidden"))}}function k(){(function(){if(u.length){var t=function(e){return e<u.length-1?r.markerTip.time(u[e+1]):m.duration()},i=m.currentTime(),a=l;if(c!==l){var n=t(c);if(i>=r.markerTip.time(u[c])&&i<n)return;if(c===u.length-1&&i===m.duration())return}if(i<r.markerTip.time(u[0]))a=l;else for(var o=0;o<u.length;o++)if(n=t(o),i>=r.markerTip.time(u[o])&&i<n){a=o;break}a!==c&&(a!==l&&e.onMarkerReached&&e.onMarkerReached(u[a],a),c=a)}})(),P(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}function E(){r.markerTip.display&&(p=i.default.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),m.el().querySelector(".vjs-progress-holder").appendChild(p)),m.markers.removeAll(),y(r.markers),r.breakOverlay.display&&(h=i.default.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(r.breakOverlay.style).forEach((function(e){h&&(h.style[e]=r.breakOverlay.style[e])})),m.el().appendChild(h),g=l),k(),m.on("timeupdate",k),m.off("loadedmetadata")}m.on("loadedmetadata",(function(){E()})),m.markers={getMarkers:function(){return u},next:function(){for(var e=m.currentTime(),t=0;t<u.length;t++){var i=r.markerTip.time(u[t]);if(i>e){m.currentTime(i);break}}},prev:function(){for(var e=m.currentTime(),t=u.length-1;t>=0;t--){var i=r.markerTip.time(u[t]);if(i+.5<e)return void m.currentTime(i)}},add:function(e){y(e)},remove:function(e){S(e)},removeAll:function(){for(var e=[],t=0;t<u.length;t++)e.push(t);S(e)},updateTime:function(e){!function(e){u.forEach((function(t){var i=m.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),a=r.markerTip.time(t);(e||i.getAttribute("data-marker-time")!==a)&&(b(t,i),i.setAttribute("data-marker-time",a))})),f()}(e)},reset:function(e){m.markers.removeAll(),y(e)},destroy:function(){m.markers.removeAll(),h&&h.remove(),p&&p.remove(),m.off("timeupdate",P),delete m.markers}}}))})?a.apply(t,n):a)||(e.exports=o)},7492:function(){},7640:function(){},7664:function(e,t,i){"use strict";i.d(t,{CircleIconButton:function(){return a.i},MaterialIcon:function(){return n.Z},NavigationContentApp:function(){return o.V},NavigationMenuList:function(){return s.S},Notifications:function(){return l.$},NumericInputWithUnit:function(){return r._},PopupMain:function(){return d.AP},PopupTop:function(){return d.cp},SpinnerLoader:function(){return u.x},UserThumbnail:function(){return c.c}});var a=i(5321),n=(i(7256),i(3135),i(2828)),o=i(5305),s=i(7201),l=i(6089),r=i(3818),d=i(2901),u=i(6568),c=i(878)},7789:function(e,t,i){"use strict";i.d(t,{F:function(){return h}});var a=i(9471),n=i(8713),o=i.n(n),s=i(4571),l=i.n(s),r=i(8790),d=i(1838),u=i(7154),c=i(2818),m=i(5615),p=i(8974);function h(e){const t=(0,a.useContext)(r.ApiUrlContext),i=(0,a.useContext)(r.SiteContext),[n,o]=(0,a.useState)(null),[s,h]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[b,S]=(0,a.useState)({}),[P,k]=(0,a.useState)([]),[E,w]=(0,a.useState)({}),_={videoQuality:new u.BrowserCache(i.id,86400).get("video-quality")};_.videoQuality=null!==_.videoQuality?_.videoQuality:"Auto";let M=null,C=null,x=null,N=function(){let t=new(l())(e.pageLink).query;return t?(t=t.substring(1),t.split("&"),t=t.length?t.split("="):[]):t=[],t}();if(N.length){let e=0;for(;e<N.length;)"m"===N[e]&&(x=N[e+1]),e+=2}function T(e){if(void 0===e||!e||void 0===e.data||!e.data)return;let t,a;C=e.data;const n=[];let s=null,l=(0,c.uW)(C.encodings_info,C.hls_info),r=null,u=null;if("string"==typeof C.poster_url?s=(0,d.formatInnerLink)(C.poster_url,i.url):"string"==typeof C.thumbnail_url&&(s=(0,d.formatInnerLink)(C.thumbnail_url,i.url)),Object.keys(l).length){const e=(0,c.n1)();let o=_.videoQuality;(null===o||"Auto"===o&&void 0===l.Auto)&&(o=720);let s=(0,c.OQ)(o,l);for("Auto"===o&&void 0!==l.Auto&&n.push({src:l.Auto.url[0]}),a=0;a<l[s].format.length;){if("hls"===l[s].format[a]){n.push({src:l[s].url[a]});break}a+=1}for(a in C.encodings_info[s])C.encodings_info[s].hasOwnProperty(a)&&e.support[a]&&(t=C.encodings_info[s][a].url,t&&(t=(0,d.formatInnerLink)(t,i.url),n.push({src:t,encodings_status:C.encodings_info[s][a].status})))}else l=null;if(1===n.length&&"running"===n[0].encodings_status&&(r="encodingRunning",u="Media encoding is currently running. Try again in few minutes."),null!==r)switch(r){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:p.warn("VIDEO DEBUG:","Video files don't exist")}o(r),h(u),f(s),v(n),S(l),k(C.subtitles_info),w(C.sprites_url?{url:(0,d.formatInnerLink)(C.sprites_url,i.url),frame:{width:160,height:90,seconds:10}}:null);const m=document.querySelector(".feat-first-item .item .item-description > div");m&&(m.innerHTML=C.summary)}function O(e){if(void 0!==e&&void 0!==e.type)switch(e.type){case"network":case"private":case"unavailable":o(e.type),h(void 0!==e.message?e.message:"Αn error occurred while loading the media's data")}}return null!==x&&(M=t.media+"/"+x),(0,a.useEffect)((()=>{null!==M&&(0,d.getRequest)(M,!1,T,O)}),[]),y.length?a.createElement("div",{className:"video-player"},a.createElement(m.L9,{siteId:i.id,siteUrl:i.url,info:b,sources:y,poster:g,previewSprite:E,subtitlesInfo:P,enableAutoplay:!1,inEmbed:!1,hasTheaterMode:!1,hasNextLink:!1,hasPreviousLink:!1,errorMessage:s})):null}h.propTypes={pageLink:o().string.isRequired}}},i={};function a(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=function(t,i,n,o){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],o=e[u][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[r])}))?i.splice(r--,1):(l=!1,o<s&&(s=o));if(l){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,n,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=201,function(){var e={201:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],l=i[1],r=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var u=r(a)}for(t&&t(i);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},i=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var n=a.O(void 0,[276],(function(){return a(1353)}));n=a.O(n)}();